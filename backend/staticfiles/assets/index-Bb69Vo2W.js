var CA=n=>{throw TypeError(n)};var $g=(n,t,e)=>t.has(n)||CA("Cannot "+e);var oe=(n,t,e)=>($g(n,t,"read from private field"),e?e.call(n):t.get(n)),Us=(n,t,e)=>t.has(n)?CA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),Tn=(n,t,e,s)=>($g(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),zs=(n,t,e)=>($g(n,t,"access private method"),e);var RA=(n,t,e,s)=>({set _(i){Tn(n,t,i,e)},get _(){return oe(n,t,s)}});function Dj(n,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function _b(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Nj(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),e}var Gg={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function Lj(){if(MA)return Sc;MA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,i,r){var o=null;if(r!==void 0&&(o=""+r),i.key!==void 0&&(o=""+i.key),"key"in i){r={};for(var c in i)c!=="key"&&(r[c]=i[c])}else r=i;return i=r.ref,{$$typeof:n,type:s,key:o,ref:i!==void 0?i:null,props:r}}return Sc.Fragment=t,Sc.jsx=e,Sc.jsxs=e,Sc}var PA;function jj(){return PA||(PA=1,Gg.exports=Lj()),Gg.exports}var S=jj(),qg={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA;function Ij(){if(OA)return Pt;OA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function A(L,K,nt){this.props=L,this.context=K,this.refs=w,this.updater=nt||v}A.prototype.isReactComponent={},A.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=A.prototype;function C(L,K,nt){this.props=L,this.context=K,this.refs=w,this.updater=nt||v}var T=C.prototype=new E;T.constructor=C,b(T,A.prototype),T.isPureReactComponent=!0;var M=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function D(L,K,nt,Z,ot,ht){return nt=ht.ref,{$$typeof:n,type:L,key:K,ref:nt!==void 0?nt:null,props:ht}}function N(L,K){return D(L.type,K,void 0,void 0,void 0,L.props)}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(nt){return K[nt]})}var q=/\/+/g;function it(L,K){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):K.toString(36)}function at(){}function rt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(at,at):(L.status="pending",L.then(function(K){L.status==="pending"&&(L.status="fulfilled",L.value=K)},function(K){L.status==="pending"&&(L.status="rejected",L.reason=K)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function lt(L,K,nt,Z,ot){var ht=typeof L;(ht==="undefined"||ht==="boolean")&&(L=null);var ut=!1;if(L===null)ut=!0;else switch(ht){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(L.$$typeof){case n:case t:ut=!0;break;case f:return ut=L._init,lt(ut(L._payload),K,nt,Z,ot)}}if(ut)return ot=ot(L),ut=Z===""?"."+it(L,0):Z,M(ot)?(nt="",ut!=null&&(nt=ut.replace(q,"$&/")+"/"),lt(ot,K,nt,"",function(jt){return jt})):ot!=null&&(U(ot)&&(ot=N(ot,nt+(ot.key==null||L&&L.key===ot.key?"":(""+ot.key).replace(q,"$&/")+"/")+ut)),K.push(ot)),1;ut=0;var J=Z===""?".":Z+":";if(M(L))for(var ft=0;ft<L.length;ft++)Z=L[ft],ht=J+it(Z,ft),ut+=lt(Z,K,nt,ht,ot);else if(ft=g(L),typeof ft=="function")for(L=ft.call(L),ft=0;!(Z=L.next()).done;)Z=Z.value,ht=J+it(Z,ft++),ut+=lt(Z,K,nt,ht,ot);else if(ht==="object"){if(typeof L.then=="function")return lt(rt(L),K,nt,Z,ot);throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ut}function j(L,K,nt){if(L==null)return L;var Z=[],ot=0;return lt(L,Z,"","",function(ht){return K.call(nt,ht,ot++)}),Z}function I(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(nt){(L._status===0||L._status===-1)&&(L._status=1,L._result=nt)},function(nt){(L._status===0||L._status===-1)&&(L._status=2,L._result=nt)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var F=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function W(){}return Pt.Children={map:j,forEach:function(L,K,nt){j(L,function(){K.apply(this,arguments)},nt)},count:function(L){var K=0;return j(L,function(){K++}),K},toArray:function(L){return j(L,function(K){return K})||[]},only:function(L){if(!U(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Pt.Component=A,Pt.Fragment=e,Pt.Profiler=i,Pt.PureComponent=C,Pt.StrictMode=s,Pt.Suspense=u,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return P.H.useMemoCache(L)}},Pt.cache=function(L){return function(){return L.apply(null,arguments)}},Pt.cloneElement=function(L,K,nt){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Z=b({},L.props),ot=L.key,ht=void 0;if(K!=null)for(ut in K.ref!==void 0&&(ht=void 0),K.key!==void 0&&(ot=""+K.key),K)!k.call(K,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&K.ref===void 0||(Z[ut]=K[ut]);var ut=arguments.length-2;if(ut===1)Z.children=nt;else if(1<ut){for(var J=Array(ut),ft=0;ft<ut;ft++)J[ft]=arguments[ft+2];Z.children=J}return D(L.type,ot,void 0,void 0,ht,Z)},Pt.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:r,_context:L},L},Pt.createElement=function(L,K,nt){var Z,ot={},ht=null;if(K!=null)for(Z in K.key!==void 0&&(ht=""+K.key),K)k.call(K,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ot[Z]=K[Z]);var ut=arguments.length-2;if(ut===1)ot.children=nt;else if(1<ut){for(var J=Array(ut),ft=0;ft<ut;ft++)J[ft]=arguments[ft+2];ot.children=J}if(L&&L.defaultProps)for(Z in ut=L.defaultProps,ut)ot[Z]===void 0&&(ot[Z]=ut[Z]);return D(L,ht,void 0,void 0,null,ot)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(L){return{$$typeof:c,render:L}},Pt.isValidElement=U,Pt.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:I}},Pt.memo=function(L,K){return{$$typeof:h,type:L,compare:K===void 0?null:K}},Pt.startTransition=function(L){var K=P.T,nt={};P.T=nt;try{var Z=L(),ot=P.S;ot!==null&&ot(nt,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(W,F)}catch(ht){F(ht)}finally{P.T=K}},Pt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Pt.use=function(L){return P.H.use(L)},Pt.useActionState=function(L,K,nt){return P.H.useActionState(L,K,nt)},Pt.useCallback=function(L,K){return P.H.useCallback(L,K)},Pt.useContext=function(L){return P.H.useContext(L)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(L,K){return P.H.useDeferredValue(L,K)},Pt.useEffect=function(L,K,nt){var Z=P.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(L,K)},Pt.useId=function(){return P.H.useId()},Pt.useImperativeHandle=function(L,K,nt){return P.H.useImperativeHandle(L,K,nt)},Pt.useInsertionEffect=function(L,K){return P.H.useInsertionEffect(L,K)},Pt.useLayoutEffect=function(L,K){return P.H.useLayoutEffect(L,K)},Pt.useMemo=function(L,K){return P.H.useMemo(L,K)},Pt.useOptimistic=function(L,K){return P.H.useOptimistic(L,K)},Pt.useReducer=function(L,K,nt){return P.H.useReducer(L,K,nt)},Pt.useRef=function(L){return P.H.useRef(L)},Pt.useState=function(L){return P.H.useState(L)},Pt.useSyncExternalStore=function(L,K,nt){return P.H.useSyncExternalStore(L,K,nt)},Pt.useTransition=function(){return P.H.useTransition()},Pt.version="19.1.1",Pt}var kA;function Df(){return kA||(kA=1,qg.exports=Ij()),qg.exports}var _=Df();const je=_b(_),UC=Dj({__proto__:null,default:je},[_]);var Wg={exports:{}},Ac={},Kg={exports:{}},Yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function Fj(){return DA||(DA=1,(function(n){function t(j,I){var F=j.length;j.push(I);t:for(;0<F;){var W=F-1>>>1,L=j[W];if(0<i(L,I))j[W]=I,j[F]=L,F=W;else break t}}function e(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var I=j[0],F=j.pop();if(F!==I){j[0]=F;t:for(var W=0,L=j.length,K=L>>>1;W<K;){var nt=2*(W+1)-1,Z=j[nt],ot=nt+1,ht=j[ot];if(0>i(Z,F))ot<L&&0>i(ht,Z)?(j[W]=ht,j[ot]=F,W=ot):(j[W]=Z,j[nt]=F,W=nt);else if(ot<L&&0>i(ht,F))j[W]=ht,j[ot]=F,W=ot;else break t}}return I}function i(j,I){var F=j.sortIndex-I.sortIndex;return F!==0?F:j.id-I.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,m=null,g=3,v=!1,b=!1,w=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(j){for(var I=e(h);I!==null;){if(I.callback===null)s(h);else if(I.startTime<=j)s(h),I.sortIndex=I.expirationTime,t(u,I);else break;I=e(h)}}function P(j){if(w=!1,M(j),!b)if(e(u)!==null)b=!0,k||(k=!0,it());else{var I=e(h);I!==null&&lt(P,I.startTime-j)}}var k=!1,D=-1,N=5,U=-1;function V(){return A?!0:!(n.unstable_now()-U<N)}function q(){if(A=!1,k){var j=n.unstable_now();U=j;var I=!0;try{t:{b=!1,w&&(w=!1,C(D),D=-1),v=!0;var F=g;try{e:{for(M(j),m=e(u);m!==null&&!(m.expirationTime>j&&V());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var L=W(m.expirationTime<=j);if(j=n.unstable_now(),typeof L=="function"){m.callback=L,M(j),I=!0;break e}m===e(u)&&s(u),M(j)}else s(u);m=e(u)}if(m!==null)I=!0;else{var K=e(h);K!==null&&lt(P,K.startTime-j),I=!1}}break t}finally{m=null,g=F,v=!1}I=void 0}}finally{I?it():k=!1}}}var it;if(typeof T=="function")it=function(){T(q)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,rt=at.port2;at.port1.onmessage=q,it=function(){rt.postMessage(null)}}else it=function(){E(q,0)};function lt(j,I){D=E(function(){j(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(j){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var F=g;g=I;try{return j()}finally{g=F}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(j,I){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=g;g=j;try{return I()}finally{g=F}},n.unstable_scheduleCallback=function(j,I,F){var W=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?W+F:W):F=W,j){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=F+L,j={id:f++,callback:I,priorityLevel:j,startTime:F,expirationTime:L,sortIndex:-1},F>W?(j.sortIndex=F,t(h,j),e(u)===null&&j===e(h)&&(w?(C(D),D=-1):w=!0,lt(P,F-W))):(j.sortIndex=L,t(u,j),b||v||(b=!0,k||(k=!0,it()))),j},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(j){var I=g;return function(){var F=g;g=I;try{return j.apply(this,arguments)}finally{g=F}}}})(Yg)),Yg}var NA;function Bj(){return NA||(NA=1,Kg.exports=Fj()),Kg.exports}var Xg={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA;function Uj(){if(LA)return on;LA=1;var n=Df();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(u,h,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return r(u,h,null,f)},on.flushSync=function(u){var h=o.T,f=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=h,s.p=f,s.d.f()}},on.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},on.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},on.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:v}):f==="script"&&s.d.X(u,{crossOrigin:m,integrity:g,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},on.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},on.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin);s.d.L(u,f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},on.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},on.requestFormReset=function(u){s.d.r(u)},on.unstable_batchedUpdates=function(u,h){return u(h)},on.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},on.useFormStatus=function(){return o.H.useHostTransitionStatus()},on.version="19.1.1",on}var jA;function zC(){if(jA)return Xg.exports;jA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Xg.exports=Uj(),Xg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function zj(){if(IA)return Ac;IA=1;var n=Bj(),t=Df(),e=zC();function s(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(s(188))}function u(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(s(188));return l!==a?null:a}for(var d=a,p=l;;){var y=d.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){d=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===d)return c(y),a;if(x===p)return c(y),l;x=x.sibling}throw Error(s(188))}if(d.return!==p.return)d=y,p=x;else{for(var R=!1,O=y.child;O;){if(O===d){R=!0,d=y,p=x;break}if(O===p){R=!0,p=y,d=x;break}O=O.sibling}if(!R){for(O=x.child;O;){if(O===d){R=!0,d=x,p=y;break}if(O===p){R=!0,p=x,d=y;break}O=O.sibling}if(!R)throw Error(s(189))}}if(d.alternate!==p)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:l}function h(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=h(a),l!==null)return l;a=a.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function it(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var at=Symbol.for("react.client.reference");function rt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===at?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case v:return"Portal";case T:return(a.displayName||"Context")+".Provider";case C:return(a._context.displayName||"Context")+".Consumer";case M:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return l=a.displayName||null,l!==null?l:rt(a.type)||"Memo";case N:l=a._payload,a=a._init;try{return rt(a(l))}catch{}}return null}var lt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},W=[],L=-1;function K(a){return{current:a}}function nt(a){0>L||(a.current=W[L],W[L]=null,L--)}function Z(a,l){L++,W[L]=a.current,a.current=l}var ot=K(null),ht=K(null),ut=K(null),J=K(null);function ft(a,l){switch(Z(ut,l),Z(ht,a),Z(ot,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?eA(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=eA(l),a=nA(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}nt(ot),Z(ot,a)}function jt(){nt(ot),nt(ht),nt(ut)}function zt(a){a.memoizedState!==null&&Z(J,a);var l=ot.current,d=nA(l,a.type);l!==d&&(Z(ht,a),Z(ot,d))}function It(a){ht.current===a&&(nt(ot),nt(ht)),J.current===a&&(nt(J),yc._currentValue=F)}var Gt=Object.prototype.hasOwnProperty,Oe=n.unstable_scheduleCallback,Nn=n.unstable_cancelCallback,Al=n.unstable_shouldYield,_l=n.unstable_requestPaint,wn=n.unstable_now,fN=n.unstable_getCurrentPriorityLevel,Lw=n.unstable_ImmediatePriority,jw=n.unstable_UserBlockingPriority,Zu=n.unstable_NormalPriority,pN=n.unstable_LowPriority,Iw=n.unstable_IdlePriority,mN=n.log,gN=n.unstable_setDisableYieldValue,El=null,Ln=null;function ji(a){if(typeof mN=="function"&&gN(a),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(El,a)}catch{}}var jn=Math.clz32?Math.clz32:bN,yN=Math.log,vN=Math.LN2;function bN(a){return a>>>=0,a===0?32:31-(yN(a)/vN|0)|0}var Ju=256,td=4194304;function kr(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ed(a,l,d){var p=a.pendingLanes;if(p===0)return 0;var y=0,x=a.suspendedLanes,R=a.pingedLanes;a=a.warmLanes;var O=p&134217727;return O!==0?(p=O&~x,p!==0?y=kr(p):(R&=O,R!==0?y=kr(R):d||(d=O&~a,d!==0&&(y=kr(d))))):(O=p&~x,O!==0?y=kr(O):R!==0?y=kr(R):d||(d=p&~a,d!==0&&(y=kr(d)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,d=l&-l,x>=d||x===32&&(d&4194048)!==0)?l:y}function Tl(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function wN(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fw(){var a=Ju;return Ju<<=1,(Ju&4194048)===0&&(Ju=256),a}function Bw(){var a=td;return td<<=1,(td&62914560)===0&&(td=4194304),a}function Dp(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Cl(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function xN(a,l,d,p,y,x){var R=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var O=a.entanglements,B=a.expirationTimes,G=a.hiddenUpdates;for(d=R&~d;0<d;){var tt=31-jn(d),st=1<<tt;O[tt]=0,B[tt]=-1;var Y=G[tt];if(Y!==null)for(G[tt]=null,tt=0;tt<Y.length;tt++){var X=Y[tt];X!==null&&(X.lane&=-536870913)}d&=~st}p!==0&&Uw(a,p,0),x!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=x&~(R&~l))}function Uw(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var p=31-jn(l);a.entangledLanes|=l,a.entanglements[p]=a.entanglements[p]|1073741824|d&4194090}function zw(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var p=31-jn(d),y=1<<p;y&l|a[p]&l&&(a[p]|=l),d&=~y}}function Np(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Lp(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Hw(){var a=I.p;return a!==0?a:(a=window.event,a===void 0?32:xA(a.type))}function SN(a,l){var d=I.p;try{return I.p=a,l()}finally{I.p=d}}var Ii=Math.random().toString(36).slice(2),rn="__reactFiber$"+Ii,xn="__reactProps$"+Ii,Ma="__reactContainer$"+Ii,jp="__reactEvents$"+Ii,AN="__reactListeners$"+Ii,_N="__reactHandles$"+Ii,Vw="__reactResources$"+Ii,Rl="__reactMarker$"+Ii;function Ip(a){delete a[rn],delete a[xn],delete a[jp],delete a[AN],delete a[_N]}function Pa(a){var l=a[rn];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Ma]||d[rn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=aA(a);a!==null;){if(d=a[rn])return d;a=aA(a)}return l}a=d,d=a.parentNode}return null}function Oa(a){if(a=a[rn]||a[Ma]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function Ml(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(s(33))}function ka(a){var l=a[Vw];return l||(l=a[Vw]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Fe(a){a[Rl]=!0}var $w=new Set,Gw={};function Dr(a,l){Da(a,l),Da(a+"Capture",l)}function Da(a,l){for(Gw[a]=l,a=0;a<l.length;a++)$w.add(l[a])}var EN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qw={},Ww={};function TN(a){return Gt.call(Ww,a)?!0:Gt.call(qw,a)?!1:EN.test(a)?Ww[a]=!0:(qw[a]=!0,!1)}function nd(a,l,d){if(TN(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function sd(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function ri(a,l,d,p){if(p===null)a.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+p)}}var Fp,Kw;function Na(a){if(Fp===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Fp=l&&l[1]||"",Kw=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fp+a+Kw}var Bp=!1;function Up(a,l){if(!a||Bp)return"";Bp=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(X){var Y=X}Reflect.construct(a,[],st)}else{try{st.call()}catch(X){Y=X}a.call(st.prototype)}}else{try{throw Error()}catch(X){Y=X}(st=a())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),R=x[0],O=x[1];if(R&&O){var B=R.split(`
`),G=O.split(`
`);for(y=p=0;p<B.length&&!B[p].includes("DetermineComponentFrameRoot");)p++;for(;y<G.length&&!G[y].includes("DetermineComponentFrameRoot");)y++;if(p===B.length||y===G.length)for(p=B.length-1,y=G.length-1;1<=p&&0<=y&&B[p]!==G[y];)y--;for(;1<=p&&0<=y;p--,y--)if(B[p]!==G[y]){if(p!==1||y!==1)do if(p--,y--,0>y||B[p]!==G[y]){var tt=`
`+B[p].replace(" at new "," at ");return a.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",a.displayName)),tt}while(1<=p&&0<=y);break}}}finally{Bp=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?Na(d):""}function CN(a){switch(a.tag){case 26:case 27:case 5:return Na(a.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 15:return Up(a.type,!1);case 11:return Up(a.type.render,!1);case 1:return Up(a.type,!0);case 31:return Na("Activity");default:return""}}function Yw(a){try{var l="";do l+=CN(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Xn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Xw(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function RN(a){var l=Xw(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),p=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){p=""+R,x.call(this,R)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function id(a){a._valueTracker||(a._valueTracker=RN(a))}function Qw(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return a&&(p=Xw(a)?a.checked?"true":"false":a.value),a=p,a!==d?(l.setValue(a),!0):!1}function rd(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var MN=/[\n"\\]/g;function Qn(a){return a.replace(MN,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function zp(a,l,d,p,y,x,R,O){a.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?a.type=R:a.removeAttribute("type"),l!=null?R==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Xn(l)):a.value!==""+Xn(l)&&(a.value=""+Xn(l)):R!=="submit"&&R!=="reset"||a.removeAttribute("value"),l!=null?Hp(a,R,Xn(l)):d!=null?Hp(a,R,Xn(d)):p!=null&&a.removeAttribute("value"),y==null&&x!=null&&(a.defaultChecked=!!x),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+Xn(O):a.removeAttribute("name")}function Zw(a,l,d,p,y,x,R,O){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),l!=null||d!=null){if(!(x!=="submit"&&x!=="reset"||l!=null))return;d=d!=null?""+Xn(d):"",l=l!=null?""+Xn(l):d,O||l===a.value||(a.value=l),a.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=O?a.checked:!!p,a.defaultChecked=!!p,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.name=R)}function Hp(a,l,d){l==="number"&&rd(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function La(a,l,d,p){if(a=a.options,l){l={};for(var y=0;y<d.length;y++)l["$"+d[y]]=!0;for(d=0;d<a.length;d++)y=l.hasOwnProperty("$"+a[d].value),a[d].selected!==y&&(a[d].selected=y),y&&p&&(a[d].defaultSelected=!0)}else{for(d=""+Xn(d),l=null,y=0;y<a.length;y++){if(a[y].value===d){a[y].selected=!0,p&&(a[y].defaultSelected=!0);return}l!==null||a[y].disabled||(l=a[y])}l!==null&&(l.selected=!0)}}function Jw(a,l,d){if(l!=null&&(l=""+Xn(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Xn(d):""}function tx(a,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(s(92));if(lt(p)){if(1<p.length)throw Error(s(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=Xn(l),a.defaultValue=d,p=a.textContent,p===d&&p!==""&&p!==null&&(a.value=p)}function ja(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var PN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ex(a,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":p?a.setProperty(l,d):typeof d!="number"||d===0||PN.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function nx(a,l,d){if(l!=null&&typeof l!="object")throw Error(s(62));if(a=a.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&d[y]!==p&&ex(a,y,p)}else for(var x in l)l.hasOwnProperty(x)&&ex(a,x,l[x])}function Vp(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ON=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ad(a){return kN.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var $p=null;function Gp(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ia=null,Fa=null;function sx(a){var l=Oa(a);if(l&&(a=l.stateNode)){var d=a[xn]||null;t:switch(a=l.stateNode,l.type){case"input":if(zp(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Qn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==a&&p.form===a.form){var y=p[xn]||null;if(!y)throw Error(s(90));zp(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===a.form&&Qw(p)}break t;case"textarea":Jw(a,d.value,d.defaultValue);break t;case"select":l=d.value,l!=null&&La(a,!!d.multiple,l,!1)}}}var qp=!1;function ix(a,l,d){if(qp)return a(l,d);qp=!0;try{var p=a(l);return p}finally{if(qp=!1,(Ia!==null||Fa!==null)&&(Gd(),Ia&&(l=Ia,a=Fa,Fa=Ia=null,sx(l),a)))for(l=0;l<a.length;l++)sx(a[l])}}function Pl(a,l){var d=a.stateNode;if(d===null)return null;var p=d[xn]||null;if(p===null)return null;d=p[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break t;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,l,typeof d));return d}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wp=!1;if(ai)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{Wp=!1}var Fi=null,Kp=null,od=null;function rx(){if(od)return od;var a,l=Kp,d=l.length,p,y="value"in Fi?Fi.value:Fi.textContent,x=y.length;for(a=0;a<d&&l[a]===y[a];a++);var R=d-a;for(p=1;p<=R&&l[d-p]===y[x-p];p++);return od=y.slice(a,1<p?1-p:void 0)}function ld(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function cd(){return!0}function ax(){return!1}function Sn(a){function l(d,p,y,x,R){this._reactName=d,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(d=a[O],this[O]=d?d(x):x[O]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?cd:ax,this.isPropagationStopped=ax,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),l}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=Sn(Nr),kl=f({},Nr,{view:0,detail:0}),DN=Sn(kl),Yp,Xp,Dl,dd=f({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Dl&&(Dl&&a.type==="mousemove"?(Yp=a.screenX-Dl.screenX,Xp=a.screenY-Dl.screenY):Xp=Yp=0,Dl=a),Yp)},movementY:function(a){return"movementY"in a?a.movementY:Xp}}),ox=Sn(dd),NN=f({},dd,{dataTransfer:0}),LN=Sn(NN),jN=f({},kl,{relatedTarget:0}),Qp=Sn(jN),IN=f({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),FN=Sn(IN),BN=f({},Nr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),UN=Sn(BN),zN=f({},Nr,{data:0}),lx=Sn(zN),HN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GN(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=$N[a])?!!l[a]:!1}function Zp(){return GN}var qN=f({},kl,{key:function(a){if(a.key){var l=HN[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ld(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?VN[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(a){return a.type==="keypress"?ld(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ld(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),WN=Sn(qN),KN=f({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cx=Sn(KN),YN=f({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),XN=Sn(YN),QN=f({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZN=Sn(QN),JN=f({},dd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),tL=Sn(JN),eL=f({},Nr,{newState:0,oldState:0}),nL=Sn(eL),sL=[9,13,27,32],Jp=ai&&"CompositionEvent"in window,Nl=null;ai&&"documentMode"in document&&(Nl=document.documentMode);var iL=ai&&"TextEvent"in window&&!Nl,ux=ai&&(!Jp||Nl&&8<Nl&&11>=Nl),dx=" ",hx=!1;function fx(a,l){switch(a){case"keyup":return sL.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function px(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ba=!1;function rL(a,l){switch(a){case"compositionend":return px(l);case"keypress":return l.which!==32?null:(hx=!0,dx);case"textInput":return a=l.data,a===dx&&hx?null:a;default:return null}}function aL(a,l){if(Ba)return a==="compositionend"||!Jp&&fx(a,l)?(a=rx(),od=Kp=Fi=null,Ba=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ux&&l.locale!=="ko"?null:l.data;default:return null}}var oL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mx(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!oL[a.type]:l==="textarea"}function gx(a,l,d,p){Ia?Fa?Fa.push(p):Fa=[p]:Ia=p,l=Qd(l,"onChange"),0<l.length&&(d=new ud("onChange","change",null,d,p),a.push({event:d,listeners:l}))}var Ll=null,jl=null;function lL(a){X1(a,0)}function hd(a){var l=Ml(a);if(Qw(l))return a}function yx(a,l){if(a==="change")return l}var vx=!1;if(ai){var tm;if(ai){var em="oninput"in document;if(!em){var bx=document.createElement("div");bx.setAttribute("oninput","return;"),em=typeof bx.oninput=="function"}tm=em}else tm=!1;vx=tm&&(!document.documentMode||9<document.documentMode)}function wx(){Ll&&(Ll.detachEvent("onpropertychange",xx),jl=Ll=null)}function xx(a){if(a.propertyName==="value"&&hd(jl)){var l=[];gx(l,jl,a,Gp(a)),ix(lL,l)}}function cL(a,l,d){a==="focusin"?(wx(),Ll=l,jl=d,Ll.attachEvent("onpropertychange",xx)):a==="focusout"&&wx()}function uL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return hd(jl)}function dL(a,l){if(a==="click")return hd(l)}function hL(a,l){if(a==="input"||a==="change")return hd(l)}function fL(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var In=typeof Object.is=="function"?Object.is:fL;function Il(a,l){if(In(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var y=d[p];if(!Gt.call(l,y)||!In(a[y],l[y]))return!1}return!0}function Sx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ax(a,l){var d=Sx(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=l&&p>=l)return{node:d,offset:l-a};a=p}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=Sx(d)}}function _x(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?_x(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Ex(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=rd(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=rd(a.document)}return l}function nm(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var pL=ai&&"documentMode"in document&&11>=document.documentMode,Ua=null,sm=null,Fl=null,im=!1;function Tx(a,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;im||Ua==null||Ua!==rd(p)||(p=Ua,"selectionStart"in p&&nm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Fl&&Il(Fl,p)||(Fl=p,p=Qd(sm,"onSelect"),0<p.length&&(l=new ud("onSelect","select",null,l,d),a.push({event:l,listeners:p}),l.target=Ua)))}function Lr(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var za={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},rm={},Cx={};ai&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function jr(a){if(rm[a])return rm[a];if(!za[a])return a;var l=za[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in Cx)return rm[a]=l[d];return a}var Rx=jr("animationend"),Mx=jr("animationiteration"),Px=jr("animationstart"),mL=jr("transitionrun"),gL=jr("transitionstart"),yL=jr("transitioncancel"),Ox=jr("transitionend"),kx=new Map,am="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");am.push("scrollEnd");function bs(a,l){kx.set(a,l),Dr(l,[a])}var Dx=new WeakMap;function Zn(a,l){if(typeof a=="object"&&a!==null){var d=Dx.get(a);return d!==void 0?d:(l={value:a,source:l,stack:Yw(l)},Dx.set(a,l),l)}return{value:a,source:l,stack:Yw(l)}}var Jn=[],Ha=0,om=0;function fd(){for(var a=Ha,l=om=Ha=0;l<a;){var d=Jn[l];Jn[l++]=null;var p=Jn[l];Jn[l++]=null;var y=Jn[l];Jn[l++]=null;var x=Jn[l];if(Jn[l++]=null,p!==null&&y!==null){var R=p.pending;R===null?y.next=y:(y.next=R.next,R.next=y),p.pending=y}x!==0&&Nx(d,y,x)}}function pd(a,l,d,p){Jn[Ha++]=a,Jn[Ha++]=l,Jn[Ha++]=d,Jn[Ha++]=p,om|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function lm(a,l,d,p){return pd(a,l,d,p),md(a)}function Va(a,l){return pd(a,null,null,l),md(a)}function Nx(a,l,d){a.lanes|=d;var p=a.alternate;p!==null&&(p.lanes|=d);for(var y=!1,x=a.return;x!==null;)x.childLanes|=d,p=x.alternate,p!==null&&(p.childLanes|=d),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(y=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,y&&l!==null&&(y=31-jn(d),a=x.hiddenUpdates,p=a[y],p===null?a[y]=[l]:p.push(l),l.lane=d|536870912),x):null}function md(a){if(50<cc)throw cc=0,pg=null,Error(s(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var $a={};function vL(a,l,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(a,l,d,p){return new vL(a,l,d,p)}function cm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function oi(a,l){var d=a.alternate;return d===null?(d=Fn(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function Lx(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function gd(a,l,d,p,y,x){var R=0;if(p=a,typeof a=="function")cm(a)&&(R=1);else if(typeof a=="string")R=wj(a,d,ot.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case U:return a=Fn(31,d,l,y),a.elementType=U,a.lanes=x,a;case b:return Ir(d.children,y,x,l);case w:R=8,y|=24;break;case A:return a=Fn(12,d,l,y|2),a.elementType=A,a.lanes=x,a;case P:return a=Fn(13,d,l,y),a.elementType=P,a.lanes=x,a;case k:return a=Fn(19,d,l,y),a.elementType=k,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case T:R=10;break t;case C:R=9;break t;case M:R=11;break t;case D:R=14;break t;case N:R=16,p=null;break t}R=29,d=Error(s(130,a===null?"null":typeof a,"")),p=null}return l=Fn(R,d,l,y),l.elementType=a,l.type=p,l.lanes=x,l}function Ir(a,l,d,p){return a=Fn(7,a,p,l),a.lanes=d,a}function um(a,l,d){return a=Fn(6,a,null,l),a.lanes=d,a}function dm(a,l,d){return l=Fn(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Ga=[],qa=0,yd=null,vd=0,ts=[],es=0,Fr=null,li=1,ci="";function Br(a,l){Ga[qa++]=vd,Ga[qa++]=yd,yd=a,vd=l}function jx(a,l,d){ts[es++]=li,ts[es++]=ci,ts[es++]=Fr,Fr=a;var p=li;a=ci;var y=32-jn(p)-1;p&=~(1<<y),d+=1;var x=32-jn(l)+y;if(30<x){var R=y-y%5;x=(p&(1<<R)-1).toString(32),p>>=R,y-=R,li=1<<32-jn(l)+y|d<<y|p,ci=x+a}else li=1<<x|d<<y|p,ci=a}function hm(a){a.return!==null&&(Br(a,1),jx(a,1,0))}function fm(a){for(;a===yd;)yd=Ga[--qa],Ga[qa]=null,vd=Ga[--qa],Ga[qa]=null;for(;a===Fr;)Fr=ts[--es],ts[es]=null,ci=ts[--es],ts[es]=null,li=ts[--es],ts[es]=null}var hn=null,pe=null,Wt=!1,Ur=null,Ls=!1,pm=Error(s(519));function zr(a){var l=Error(s(418,""));throw zl(Zn(l,a)),pm}function Ix(a){var l=a.stateNode,d=a.type,p=a.memoizedProps;switch(l[rn]=a,l[xn]=p,d){case"dialog":Bt("cancel",l),Bt("close",l);break;case"iframe":case"object":case"embed":Bt("load",l);break;case"video":case"audio":for(d=0;d<dc.length;d++)Bt(dc[d],l);break;case"source":Bt("error",l);break;case"img":case"image":case"link":Bt("error",l),Bt("load",l);break;case"details":Bt("toggle",l);break;case"input":Bt("invalid",l),Zw(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),id(l);break;case"select":Bt("invalid",l);break;case"textarea":Bt("invalid",l),tx(l,p.value,p.defaultValue,p.children),id(l)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||tA(l.textContent,d)?(p.popover!=null&&(Bt("beforetoggle",l),Bt("toggle",l)),p.onScroll!=null&&Bt("scroll",l),p.onScrollEnd!=null&&Bt("scrollend",l),p.onClick!=null&&(l.onclick=Zd),l=!0):l=!1,l||zr(a)}function Fx(a){for(hn=a.return;hn;)switch(hn.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:hn=hn.return}}function Bl(a){if(a!==hn)return!1;if(!Wt)return Fx(a),Wt=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||Pg(a.type,a.memoizedProps)),d=!d),d&&pe&&zr(a),Fx(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));t:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){pe=xs(a.nextSibling);break t}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}pe=null}}else l===27?(l=pe,tr(a.type)?(a=Ng,Ng=null,pe=a):pe=l):pe=hn?xs(a.stateNode.nextSibling):null;return!0}function Ul(){pe=hn=null,Wt=!1}function Bx(){var a=Ur;return a!==null&&(En===null?En=a:En.push.apply(En,a),Ur=null),a}function zl(a){Ur===null?Ur=[a]:Ur.push(a)}var mm=K(null),Hr=null,ui=null;function Bi(a,l,d){Z(mm,l._currentValue),l._currentValue=d}function di(a){a._currentValue=mm.current,nt(mm)}function gm(a,l,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),a===d)break;a=a.return}}function ym(a,l,d,p){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var x=y.dependencies;if(x!==null){var R=y.child;x=x.firstContext;t:for(;x!==null;){var O=x;x=y;for(var B=0;B<l.length;B++)if(O.context===l[B]){x.lanes|=d,O=x.alternate,O!==null&&(O.lanes|=d),gm(x.return,d,a),p||(R=null);break t}x=O.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(s(341));R.lanes|=d,x=R.alternate,x!==null&&(x.lanes|=d),gm(R,d,a),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===a){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function Hl(a,l,d,p){a=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(s(387));if(R=R.memoizedProps,R!==null){var O=y.type;In(y.pendingProps.value,R.value)||(a!==null?a.push(O):a=[O])}}else if(y===J.current){if(R=y.alternate,R===null)throw Error(s(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(yc):a=[yc])}y=y.return}a!==null&&ym(l,a,d,p),l.flags|=262144}function bd(a){for(a=a.firstContext;a!==null;){if(!In(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Vr(a){Hr=a,ui=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function an(a){return Ux(Hr,a)}function wd(a,l){return Hr===null&&Vr(a),Ux(a,l)}function Ux(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ui===null){if(a===null)throw Error(s(308));ui=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else ui=ui.next=l;return d}var bL=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,p){a.push(p)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},wL=n.unstable_scheduleCallback,xL=n.unstable_NormalPriority,ke={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vm(){return{controller:new bL,data:new Map,refCount:0}}function Vl(a){a.refCount--,a.refCount===0&&wL(xL,function(){a.controller.abort()})}var $l=null,bm=0,Wa=0,Ka=null;function SL(a,l){if($l===null){var d=$l=[];bm=0,Wa=xg(),Ka={status:"pending",value:void 0,then:function(p){d.push(p)}}}return bm++,l.then(zx,zx),l}function zx(){if(--bm===0&&$l!==null){Ka!==null&&(Ka.status="fulfilled");var a=$l;$l=null,Wa=0,Ka=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function AL(a,l){var d=[],p={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return a.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<d.length;y++)(0,d[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),p}var Hx=j.S;j.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&SL(a,l),Hx!==null&&Hx(a,l)};var $r=K(null);function wm(){var a=$r.current;return a!==null?a:ne.pooledCache}function xd(a,l){l===null?Z($r,$r.current):Z($r,l.pool)}function Vx(){var a=wm();return a===null?null:{parent:ke._currentValue,pool:a}}var Gl=Error(s(460)),$x=Error(s(474)),Sd=Error(s(542)),xm={then:function(){}};function Gx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ad(){}function qx(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Ad,Ad),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Kx(a),a;default:if(typeof l.status=="string")l.then(Ad,Ad);else{if(a=ne,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=l,a.status="pending",a.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Kx(a),a}throw ql=l,Gl}}var ql=null;function Wx(){if(ql===null)throw Error(s(459));var a=ql;return ql=null,a}function Kx(a){if(a===Gl||a===Sd)throw Error(s(483))}var Ui=!1;function Sm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Am(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function zi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Hi(a,l,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Yt&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=md(a),Nx(a,null,d),l}return pd(a,p,l,d),md(a)}function Wl(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,zw(a,d)}}function _m(a,l){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var y=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var R={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};x===null?y=x=R:x=x.next=R,d=d.next}while(d!==null);x===null?y=x=l:x=x.next=l}else y=x=l;d={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var Em=!1;function Kl(){if(Em){var a=Ka;if(a!==null)throw a}}function Yl(a,l,d,p){Em=!1;var y=a.updateQueue;Ui=!1;var x=y.firstBaseUpdate,R=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var B=O,G=B.next;B.next=null,R===null?x=G:R.next=G,R=B;var tt=a.alternate;tt!==null&&(tt=tt.updateQueue,O=tt.lastBaseUpdate,O!==R&&(O===null?tt.firstBaseUpdate=G:O.next=G,tt.lastBaseUpdate=B))}if(x!==null){var st=y.baseState;R=0,tt=G=B=null,O=x;do{var Y=O.lane&-536870913,X=Y!==O.lane;if(X?($t&Y)===Y:(p&Y)===Y){Y!==0&&Y===Wa&&(Em=!0),tt!==null&&(tt=tt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var _t=a,wt=O;Y=l;var Jt=d;switch(wt.tag){case 1:if(_t=wt.payload,typeof _t=="function"){st=_t.call(Jt,st,Y);break t}st=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=wt.payload,Y=typeof _t=="function"?_t.call(Jt,st,Y):_t,Y==null)break t;st=f({},st,Y);break t;case 2:Ui=!0}}Y=O.callback,Y!==null&&(a.flags|=64,X&&(a.flags|=8192),X=y.callbacks,X===null?y.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:O.tag,payload:O.payload,callback:O.callback,next:null},tt===null?(G=tt=X,B=st):tt=tt.next=X,R|=Y;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;X=O,O=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);tt===null&&(B=st),y.baseState=B,y.firstBaseUpdate=G,y.lastBaseUpdate=tt,x===null&&(y.shared.lanes=0),Xi|=R,a.lanes=R,a.memoizedState=st}}function Yx(a,l){if(typeof a!="function")throw Error(s(191,a));a.call(l)}function Xx(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Yx(d[a],l)}var Ya=K(null),_d=K(0);function Qx(a,l){a=vi,Z(_d,a),Z(Ya,l),vi=a|l.baseLanes}function Tm(){Z(_d,vi),Z(Ya,Ya.current)}function Cm(){vi=_d.current,nt(Ya),nt(_d)}var Vi=0,Ot=null,Qt=null,Ae=null,Ed=!1,Xa=!1,Gr=!1,Td=0,Xl=0,Qa=null,_L=0;function be(){throw Error(s(321))}function Rm(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!In(a[d],l[d]))return!1;return!0}function Mm(a,l,d,p,y,x){return Vi=x,Ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,j.H=a===null||a.memoizedState===null?NS:LS,Gr=!1,x=d(p,y),Gr=!1,Xa&&(x=Jx(l,d,p,y)),Zx(a),x}function Zx(a){j.H=kd;var l=Qt!==null&&Qt.next!==null;if(Vi=0,Ae=Qt=Ot=null,Ed=!1,Xl=0,Qa=null,l)throw Error(s(300));a===null||Be||(a=a.dependencies,a!==null&&bd(a)&&(Be=!0))}function Jx(a,l,d,p){Ot=a;var y=0;do{if(Xa&&(Qa=null),Xl=0,Xa=!1,25<=y)throw Error(s(301));if(y+=1,Ae=Qt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}j.H=OL,x=l(d,p)}while(Xa);return x}function EL(){var a=j.H,l=a.useState()[0];return l=typeof l.then=="function"?Ql(l):l,a=a.useState()[0],(Qt!==null?Qt.memoizedState:null)!==a&&(Ot.flags|=1024),l}function Pm(){var a=Td!==0;return Td=0,a}function Om(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function km(a){if(Ed){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Ed=!1}Vi=0,Ae=Qt=Ot=null,Xa=!1,Xl=Td=0,Qa=null}function An(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Ot.memoizedState=Ae=a:Ae=Ae.next=a,Ae}function _e(){if(Qt===null){var a=Ot.alternate;a=a!==null?a.memoizedState:null}else a=Qt.next;var l=Ae===null?Ot.memoizedState:Ae.next;if(l!==null)Ae=l,Qt=a;else{if(a===null)throw Ot.alternate===null?Error(s(467)):Error(s(310));Qt=a,a={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Ae===null?Ot.memoizedState=Ae=a:Ae=Ae.next=a}return Ae}function Dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(a){var l=Xl;return Xl+=1,Qa===null&&(Qa=[]),a=qx(Qa,a,l),l=Ot,(Ae===null?l.memoizedState:Ae.next)===null&&(l=l.alternate,j.H=l===null||l.memoizedState===null?NS:LS),a}function Cd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ql(a);if(a.$$typeof===T)return an(a)}throw Error(s(438,String(a)))}function Nm(a){var l=null,d=Ot.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=Ot.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Dm(),Ot.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),p=0;p<a;p++)d[p]=V;return l.index++,d}function hi(a,l){return typeof l=="function"?l(a):l}function Rd(a){var l=_e();return Lm(l,Qt,a)}function Lm(a,l,d){var p=a.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=d;var y=a.baseQueue,x=p.pending;if(x!==null){if(y!==null){var R=y.next;y.next=x.next,x.next=R}l.baseQueue=y=x,p.pending=null}if(x=a.baseState,y===null)a.memoizedState=x;else{l=y.next;var O=R=null,B=null,G=l,tt=!1;do{var st=G.lane&-536870913;if(st!==G.lane?($t&st)===st:(Vi&st)===st){var Y=G.revertLane;if(Y===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),st===Wa&&(tt=!0);else if((Vi&Y)===Y){G=G.next,Y===Wa&&(tt=!0);continue}else st={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},B===null?(O=B=st,R=x):B=B.next=st,Ot.lanes|=Y,Xi|=Y;st=G.action,Gr&&d(x,st),x=G.hasEagerState?G.eagerState:d(x,st)}else Y={lane:st,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},B===null?(O=B=Y,R=x):B=B.next=Y,Ot.lanes|=st,Xi|=st;G=G.next}while(G!==null&&G!==l);if(B===null?R=x:B.next=O,!In(x,a.memoizedState)&&(Be=!0,tt&&(d=Ka,d!==null)))throw d;a.memoizedState=x,a.baseState=R,a.baseQueue=B,p.lastRenderedState=x}return y===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function jm(a){var l=_e(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=d.dispatch,y=d.pending,x=l.memoizedState;if(y!==null){d.pending=null;var R=y=y.next;do x=a(x,R.action),R=R.next;while(R!==y);In(x,l.memoizedState)||(Be=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),d.lastRenderedState=x}return[x,p]}function tS(a,l,d){var p=Ot,y=_e(),x=Wt;if(x){if(d===void 0)throw Error(s(407));d=d()}else d=l();var R=!In((Qt||y).memoizedState,d);R&&(y.memoizedState=d,Be=!0),y=y.queue;var O=sS.bind(null,p,y,a);if(Zl(2048,8,O,[a]),y.getSnapshot!==l||R||Ae!==null&&Ae.memoizedState.tag&1){if(p.flags|=2048,Za(9,Md(),nS.bind(null,p,y,d,l),null),ne===null)throw Error(s(349));x||(Vi&124)!==0||eS(p,l,d)}return d}function eS(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Ot.updateQueue,l===null?(l=Dm(),Ot.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function nS(a,l,d,p){l.value=d,l.getSnapshot=p,iS(l)&&rS(a)}function sS(a,l,d){return d(function(){iS(l)&&rS(a)})}function iS(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!In(a,d)}catch{return!0}}function rS(a){var l=Va(a,2);l!==null&&Vn(l,a,2)}function Im(a){var l=An();if(typeof a=="function"){var d=a;if(a=d(),Gr){ji(!0);try{d()}finally{ji(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:a},l}function aS(a,l,d,p){return a.baseState=d,Lm(a,Qt,typeof p=="function"?p:hi)}function TL(a,l,d,p,y){if(Od(a))throw Error(s(485));if(a=l.action,a!==null){var x={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){x.listeners.push(R)}};j.T!==null?d(!0):x.isTransition=!1,p(x),d=l.pending,d===null?(x.next=l.pending=x,oS(l,x)):(x.next=d.next,l.pending=d.next=x)}}function oS(a,l){var d=l.action,p=l.payload,y=a.state;if(l.isTransition){var x=j.T,R={};j.T=R;try{var O=d(y,p),B=j.S;B!==null&&B(R,O),lS(a,l,O)}catch(G){Fm(a,l,G)}finally{j.T=x}}else try{x=d(y,p),lS(a,l,x)}catch(G){Fm(a,l,G)}}function lS(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){cS(a,l,p)},function(p){return Fm(a,l,p)}):cS(a,l,d)}function cS(a,l,d){l.status="fulfilled",l.value=d,uS(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,oS(a,d)))}function Fm(a,l,d){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,uS(l),l=l.next;while(l!==p)}a.action=null}function uS(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function dS(a,l){return l}function hS(a,l){if(Wt){var d=ne.formState;if(d!==null){t:{var p=Ot;if(Wt){if(pe){e:{for(var y=pe,x=Ls;y.nodeType!==8;){if(!x){y=null;break e}if(y=xs(y.nextSibling),y===null){y=null;break e}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){pe=xs(y.nextSibling),p=y.data==="F!";break t}}zr(p)}p=!1}p&&(l=d[0])}}return d=An(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dS,lastRenderedState:l},d.queue=p,d=OS.bind(null,Ot,p),p.dispatch=d,p=Im(!1),x=Vm.bind(null,Ot,!1,p.queue),p=An(),y={state:l,dispatch:null,action:a,pending:null},p.queue=y,d=TL.bind(null,Ot,y,x,d),y.dispatch=d,p.memoizedState=a,[l,d,!1]}function fS(a){var l=_e();return pS(l,Qt,a)}function pS(a,l,d){if(l=Lm(a,l,dS)[0],a=Rd(hi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Ql(l)}catch(R){throw R===Gl?Sd:R}else p=l;l=_e();var y=l.queue,x=y.dispatch;return d!==l.memoizedState&&(Ot.flags|=2048,Za(9,Md(),CL.bind(null,y,d),null)),[p,x,a]}function CL(a,l){a.action=l}function mS(a){var l=_e(),d=Qt;if(d!==null)return pS(l,d,a);_e(),l=l.memoizedState,d=_e();var p=d.queue.dispatch;return d.memoizedState=a,[l,p,!1]}function Za(a,l,d,p){return a={tag:a,create:d,deps:p,inst:l,next:null},l=Ot.updateQueue,l===null&&(l=Dm(),Ot.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,l.lastEffect=a),a}function Md(){return{destroy:void 0,resource:void 0}}function gS(){return _e().memoizedState}function Pd(a,l,d,p){var y=An();p=p===void 0?null:p,Ot.flags|=a,y.memoizedState=Za(1|l,Md(),d,p)}function Zl(a,l,d,p){var y=_e();p=p===void 0?null:p;var x=y.memoizedState.inst;Qt!==null&&p!==null&&Rm(p,Qt.memoizedState.deps)?y.memoizedState=Za(l,x,d,p):(Ot.flags|=a,y.memoizedState=Za(1|l,x,d,p))}function yS(a,l){Pd(8390656,8,a,l)}function vS(a,l){Zl(2048,8,a,l)}function bS(a,l){return Zl(4,2,a,l)}function wS(a,l){return Zl(4,4,a,l)}function xS(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function SS(a,l,d){d=d!=null?d.concat([a]):null,Zl(4,4,xS.bind(null,l,a),d)}function Bm(){}function AS(a,l){var d=_e();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&Rm(l,p[1])?p[0]:(d.memoizedState=[a,l],a)}function _S(a,l){var d=_e();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&Rm(l,p[1]))return p[0];if(p=a(),Gr){ji(!0);try{a()}finally{ji(!1)}}return d.memoizedState=[p,l],p}function Um(a,l,d){return d===void 0||(Vi&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=C1(),Ot.lanes|=a,Xi|=a,d)}function ES(a,l,d,p){return In(d,l)?d:Ya.current!==null?(a=Um(a,d,p),In(a,l)||(Be=!0),a):(Vi&42)===0?(Be=!0,a.memoizedState=d):(a=C1(),Ot.lanes|=a,Xi|=a,l)}function TS(a,l,d,p,y){var x=I.p;I.p=x!==0&&8>x?x:8;var R=j.T,O={};j.T=O,Vm(a,!1,l,d);try{var B=y(),G=j.S;if(G!==null&&G(O,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var tt=AL(B,p);Jl(a,l,tt,Hn(a))}else Jl(a,l,p,Hn(a))}catch(st){Jl(a,l,{then:function(){},status:"rejected",reason:st},Hn())}finally{I.p=x,j.T=R}}function RL(){}function zm(a,l,d,p){if(a.tag!==5)throw Error(s(476));var y=CS(a).queue;TS(a,y,l,F,d===null?RL:function(){return RS(a),d(p)})}function CS(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:F},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function RS(a){var l=CS(a).next.queue;Jl(a,l,{},Hn())}function Hm(){return an(yc)}function MS(){return _e().memoizedState}function PS(){return _e().memoizedState}function ML(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Hn();a=zi(d);var p=Hi(l,a,d);p!==null&&(Vn(p,l,d),Wl(p,l,d)),l={cache:vm()},a.payload=l;return}l=l.return}}function PL(a,l,d){var p=Hn();d={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Od(a)?kS(l,d):(d=lm(a,l,d,p),d!==null&&(Vn(d,a,p),DS(d,l,p)))}function OS(a,l,d){var p=Hn();Jl(a,l,d,p)}function Jl(a,l,d,p){var y={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Od(a))kS(l,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var R=l.lastRenderedState,O=x(R,d);if(y.hasEagerState=!0,y.eagerState=O,In(O,R))return pd(a,l,y,0),ne===null&&fd(),!1}catch{}finally{}if(d=lm(a,l,y,p),d!==null)return Vn(d,a,p),DS(d,l,p),!0}return!1}function Vm(a,l,d,p){if(p={lane:2,revertLane:xg(),action:p,hasEagerState:!1,eagerState:null,next:null},Od(a)){if(l)throw Error(s(479))}else l=lm(a,d,p,2),l!==null&&Vn(l,a,2)}function Od(a){var l=a.alternate;return a===Ot||l!==null&&l===Ot}function kS(a,l){Xa=Ed=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function DS(a,l,d){if((d&4194048)!==0){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,zw(a,d)}}var kd={readContext:an,use:Cd,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},NS={readContext:an,use:Cd,useCallback:function(a,l){return An().memoizedState=[a,l===void 0?null:l],a},useContext:an,useEffect:yS,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,Pd(4194308,4,xS.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Pd(4194308,4,a,l)},useInsertionEffect:function(a,l){Pd(4,2,a,l)},useMemo:function(a,l){var d=An();l=l===void 0?null:l;var p=a();if(Gr){ji(!0);try{a()}finally{ji(!1)}}return d.memoizedState=[p,l],p},useReducer:function(a,l,d){var p=An();if(d!==void 0){var y=d(l);if(Gr){ji(!0);try{d(l)}finally{ji(!1)}}}else y=l;return p.memoizedState=p.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},p.queue=a,a=a.dispatch=PL.bind(null,Ot,a),[p.memoizedState,a]},useRef:function(a){var l=An();return a={current:a},l.memoizedState=a},useState:function(a){a=Im(a);var l=a.queue,d=OS.bind(null,Ot,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:Bm,useDeferredValue:function(a,l){var d=An();return Um(d,a,l)},useTransition:function(){var a=Im(!1);return a=TS.bind(null,Ot,a.queue,!0,!1),An().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var p=Ot,y=An();if(Wt){if(d===void 0)throw Error(s(407));d=d()}else{if(d=l(),ne===null)throw Error(s(349));($t&124)!==0||eS(p,l,d)}y.memoizedState=d;var x={value:d,getSnapshot:l};return y.queue=x,yS(sS.bind(null,p,x,a),[a]),p.flags|=2048,Za(9,Md(),nS.bind(null,p,x,d,l),null),d},useId:function(){var a=An(),l=ne.identifierPrefix;if(Wt){var d=ci,p=li;d=(p&~(1<<32-jn(p)-1)).toString(32)+d,l="«"+l+"R"+d,d=Td++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=_L++,l="«"+l+"r"+d.toString(32)+"»";return a.memoizedState=l},useHostTransitionStatus:Hm,useFormState:hS,useActionState:hS,useOptimistic:function(a){var l=An();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Vm.bind(null,Ot,!0,d),d.dispatch=l,[a,l]},useMemoCache:Nm,useCacheRefresh:function(){return An().memoizedState=ML.bind(null,Ot)}},LS={readContext:an,use:Cd,useCallback:AS,useContext:an,useEffect:vS,useImperativeHandle:SS,useInsertionEffect:bS,useLayoutEffect:wS,useMemo:_S,useReducer:Rd,useRef:gS,useState:function(){return Rd(hi)},useDebugValue:Bm,useDeferredValue:function(a,l){var d=_e();return ES(d,Qt.memoizedState,a,l)},useTransition:function(){var a=Rd(hi)[0],l=_e().memoizedState;return[typeof a=="boolean"?a:Ql(a),l]},useSyncExternalStore:tS,useId:MS,useHostTransitionStatus:Hm,useFormState:fS,useActionState:fS,useOptimistic:function(a,l){var d=_e();return aS(d,Qt,a,l)},useMemoCache:Nm,useCacheRefresh:PS},OL={readContext:an,use:Cd,useCallback:AS,useContext:an,useEffect:vS,useImperativeHandle:SS,useInsertionEffect:bS,useLayoutEffect:wS,useMemo:_S,useReducer:jm,useRef:gS,useState:function(){return jm(hi)},useDebugValue:Bm,useDeferredValue:function(a,l){var d=_e();return Qt===null?Um(d,a,l):ES(d,Qt.memoizedState,a,l)},useTransition:function(){var a=jm(hi)[0],l=_e().memoizedState;return[typeof a=="boolean"?a:Ql(a),l]},useSyncExternalStore:tS,useId:MS,useHostTransitionStatus:Hm,useFormState:mS,useActionState:mS,useOptimistic:function(a,l){var d=_e();return Qt!==null?aS(d,Qt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:PS},Ja=null,tc=0;function Dd(a){var l=tc;return tc+=1,Ja===null&&(Ja=[]),qx(Ja,a,l)}function ec(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Nd(a,l){throw l.$$typeof===m?Error(s(525)):(a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function jS(a){var l=a._init;return l(a._payload)}function IS(a){function l(H,z){if(a){var $=H.deletions;$===null?(H.deletions=[z],H.flags|=16):$.push(z)}}function d(H,z){if(!a)return null;for(;z!==null;)l(H,z),z=z.sibling;return null}function p(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function y(H,z){return H=oi(H,z),H.index=0,H.sibling=null,H}function x(H,z,$){return H.index=$,a?($=H.alternate,$!==null?($=$.index,$<z?(H.flags|=67108866,z):$):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function R(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function O(H,z,$,et){return z===null||z.tag!==6?(z=um($,H.mode,et),z.return=H,z):(z=y(z,$),z.return=H,z)}function B(H,z,$,et){var pt=$.type;return pt===b?tt(H,z,$.props.children,et,$.key):z!==null&&(z.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&jS(pt)===z.type)?(z=y(z,$.props),ec(z,$),z.return=H,z):(z=gd($.type,$.key,$.props,null,H.mode,et),ec(z,$),z.return=H,z)}function G(H,z,$,et){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=dm($,H.mode,et),z.return=H,z):(z=y(z,$.children||[]),z.return=H,z)}function tt(H,z,$,et,pt){return z===null||z.tag!==7?(z=Ir($,H.mode,et,pt),z.return=H,z):(z=y(z,$),z.return=H,z)}function st(H,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=um(""+z,H.mode,$),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case g:return $=gd(z.type,z.key,z.props,null,H.mode,$),ec($,z),$.return=H,$;case v:return z=dm(z,H.mode,$),z.return=H,z;case N:var et=z._init;return z=et(z._payload),st(H,z,$)}if(lt(z)||it(z))return z=Ir(z,H.mode,$,null),z.return=H,z;if(typeof z.then=="function")return st(H,Dd(z),$);if(z.$$typeof===T)return st(H,wd(H,z),$);Nd(H,z)}return null}function Y(H,z,$,et){var pt=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return pt!==null?null:O(H,z,""+$,et);if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return $.key===pt?B(H,z,$,et):null;case v:return $.key===pt?G(H,z,$,et):null;case N:return pt=$._init,$=pt($._payload),Y(H,z,$,et)}if(lt($)||it($))return pt!==null?null:tt(H,z,$,et,null);if(typeof $.then=="function")return Y(H,z,Dd($),et);if($.$$typeof===T)return Y(H,z,wd(H,$),et);Nd(H,$)}return null}function X(H,z,$,et,pt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return H=H.get($)||null,O(z,H,""+et,pt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case g:return H=H.get(et.key===null?$:et.key)||null,B(z,H,et,pt);case v:return H=H.get(et.key===null?$:et.key)||null,G(z,H,et,pt);case N:var Dt=et._init;return et=Dt(et._payload),X(H,z,$,et,pt)}if(lt(et)||it(et))return H=H.get($)||null,tt(z,H,et,pt,null);if(typeof et.then=="function")return X(H,z,$,Dd(et),pt);if(et.$$typeof===T)return X(H,z,$,wd(z,et),pt);Nd(z,et)}return null}function _t(H,z,$,et){for(var pt=null,Dt=null,vt=z,St=z=0,ze=null;vt!==null&&St<$.length;St++){vt.index>St?(ze=vt,vt=null):ze=vt.sibling;var qt=Y(H,vt,$[St],et);if(qt===null){vt===null&&(vt=ze);break}a&&vt&&qt.alternate===null&&l(H,vt),z=x(qt,z,St),Dt===null?pt=qt:Dt.sibling=qt,Dt=qt,vt=ze}if(St===$.length)return d(H,vt),Wt&&Br(H,St),pt;if(vt===null){for(;St<$.length;St++)vt=st(H,$[St],et),vt!==null&&(z=x(vt,z,St),Dt===null?pt=vt:Dt.sibling=vt,Dt=vt);return Wt&&Br(H,St),pt}for(vt=p(vt);St<$.length;St++)ze=X(vt,H,St,$[St],et),ze!==null&&(a&&ze.alternate!==null&&vt.delete(ze.key===null?St:ze.key),z=x(ze,z,St),Dt===null?pt=ze:Dt.sibling=ze,Dt=ze);return a&&vt.forEach(function(rr){return l(H,rr)}),Wt&&Br(H,St),pt}function wt(H,z,$,et){if($==null)throw Error(s(151));for(var pt=null,Dt=null,vt=z,St=z=0,ze=null,qt=$.next();vt!==null&&!qt.done;St++,qt=$.next()){vt.index>St?(ze=vt,vt=null):ze=vt.sibling;var rr=Y(H,vt,qt.value,et);if(rr===null){vt===null&&(vt=ze);break}a&&vt&&rr.alternate===null&&l(H,vt),z=x(rr,z,St),Dt===null?pt=rr:Dt.sibling=rr,Dt=rr,vt=ze}if(qt.done)return d(H,vt),Wt&&Br(H,St),pt;if(vt===null){for(;!qt.done;St++,qt=$.next())qt=st(H,qt.value,et),qt!==null&&(z=x(qt,z,St),Dt===null?pt=qt:Dt.sibling=qt,Dt=qt);return Wt&&Br(H,St),pt}for(vt=p(vt);!qt.done;St++,qt=$.next())qt=X(vt,H,St,qt.value,et),qt!==null&&(a&&qt.alternate!==null&&vt.delete(qt.key===null?St:qt.key),z=x(qt,z,St),Dt===null?pt=qt:Dt.sibling=qt,Dt=qt);return a&&vt.forEach(function(kj){return l(H,kj)}),Wt&&Br(H,St),pt}function Jt(H,z,$,et){if(typeof $=="object"&&$!==null&&$.type===b&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case g:t:{for(var pt=$.key;z!==null;){if(z.key===pt){if(pt=$.type,pt===b){if(z.tag===7){d(H,z.sibling),et=y(z,$.props.children),et.return=H,H=et;break t}}else if(z.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&jS(pt)===z.type){d(H,z.sibling),et=y(z,$.props),ec(et,$),et.return=H,H=et;break t}d(H,z);break}else l(H,z);z=z.sibling}$.type===b?(et=Ir($.props.children,H.mode,et,$.key),et.return=H,H=et):(et=gd($.type,$.key,$.props,null,H.mode,et),ec(et,$),et.return=H,H=et)}return R(H);case v:t:{for(pt=$.key;z!==null;){if(z.key===pt)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){d(H,z.sibling),et=y(z,$.children||[]),et.return=H,H=et;break t}else{d(H,z);break}else l(H,z);z=z.sibling}et=dm($,H.mode,et),et.return=H,H=et}return R(H);case N:return pt=$._init,$=pt($._payload),Jt(H,z,$,et)}if(lt($))return _t(H,z,$,et);if(it($)){if(pt=it($),typeof pt!="function")throw Error(s(150));return $=pt.call($),wt(H,z,$,et)}if(typeof $.then=="function")return Jt(H,z,Dd($),et);if($.$$typeof===T)return Jt(H,z,wd(H,$),et);Nd(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(d(H,z.sibling),et=y(z,$),et.return=H,H=et):(d(H,z),et=um($,H.mode,et),et.return=H,H=et),R(H)):d(H,z)}return function(H,z,$,et){try{tc=0;var pt=Jt(H,z,$,et);return Ja=null,pt}catch(vt){if(vt===Gl||vt===Sd)throw vt;var Dt=Fn(29,vt,null,H.mode);return Dt.lanes=et,Dt.return=H,Dt}finally{}}}var to=IS(!0),FS=IS(!1),ns=K(null),js=null;function $i(a){var l=a.alternate;Z(De,De.current&1),Z(ns,a),js===null&&(l===null||Ya.current!==null||l.memoizedState!==null)&&(js=a)}function BS(a){if(a.tag===22){if(Z(De,De.current),Z(ns,a),js===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(js=a)}}else Gi()}function Gi(){Z(De,De.current),Z(ns,ns.current)}function fi(a){nt(ns),js===a&&(js=null),nt(De)}var De=K(0);function Ld(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Dg(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function $m(a,l,d,p){l=a.memoizedState,d=d(p,l),d=d==null?l:f({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Gm={enqueueSetState:function(a,l,d){a=a._reactInternals;var p=Hn(),y=zi(p);y.payload=l,d!=null&&(y.callback=d),l=Hi(a,y,p),l!==null&&(Vn(l,a,p),Wl(l,a,p))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var p=Hn(),y=zi(p);y.tag=1,y.payload=l,d!=null&&(y.callback=d),l=Hi(a,y,p),l!==null&&(Vn(l,a,p),Wl(l,a,p))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Hn(),p=zi(d);p.tag=2,l!=null&&(p.callback=l),l=Hi(a,p,d),l!==null&&(Vn(l,a,d),Wl(l,a,d))}};function US(a,l,d,p,y,x,R){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,x,R):l.prototype&&l.prototype.isPureReactComponent?!Il(d,p)||!Il(y,x):!0}function zS(a,l,d,p){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==a&&Gm.enqueueReplaceState(l,l.state,null)}function qr(a,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(a=a.defaultProps){d===l&&(d=f({},d));for(var y in a)d[y]===void 0&&(d[y]=a[y])}return d}var jd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function HS(a){jd(a)}function VS(a){console.error(a)}function $S(a){jd(a)}function Id(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function GS(a,l,d){try{var p=a.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function qm(a,l,d){return d=zi(d),d.tag=3,d.payload={element:null},d.callback=function(){Id(a,l)},d}function qS(a){return a=zi(a),a.tag=3,a}function WS(a,l,d,p){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var x=p.value;a.payload=function(){return y(x)},a.callback=function(){GS(l,d,p)}}var R=d.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(a.callback=function(){GS(l,d,p),typeof y!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var O=p.stack;this.componentDidCatch(p.value,{componentStack:O!==null?O:""})})}function kL(a,l,d,p,y){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&Hl(l,d,y,!0),d=ns.current,d!==null){switch(d.tag){case 13:return js===null?gg():d.alternate===null&&me===0&&(me=3),d.flags&=-257,d.flags|=65536,d.lanes=y,p===xm?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),vg(a,p,y)),!1;case 22:return d.flags|=65536,p===xm?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),vg(a,p,y)),!1}throw Error(s(435,d.tag))}return vg(a,p,y),gg(),!1}if(Wt)return l=ns.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==pm&&(a=Error(s(422),{cause:p}),zl(Zn(a,d)))):(p!==pm&&(l=Error(s(423),{cause:p}),zl(Zn(l,d))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,p=Zn(p,d),y=qm(a.stateNode,p,y),_m(a,y),me!==4&&(me=2)),!1;var x=Error(s(520),{cause:p});if(x=Zn(x,d),lc===null?lc=[x]:lc.push(x),me!==4&&(me=2),l===null)return!0;p=Zn(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=y&-y,d.lanes|=a,a=qm(d.stateNode,p,a),_m(d,a),!1;case 1:if(l=d.type,x=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qi===null||!Qi.has(x))))return d.flags|=65536,y&=-y,d.lanes|=y,y=qS(y),WS(y,a,d,p),_m(d,y),!1}d=d.return}while(d!==null);return!1}var KS=Error(s(461)),Be=!1;function We(a,l,d,p){l.child=a===null?FS(l,null,d,p):to(l,a.child,d,p)}function YS(a,l,d,p,y){d=d.render;var x=l.ref;if("ref"in p){var R={};for(var O in p)O!=="ref"&&(R[O]=p[O])}else R=p;return Vr(l),p=Mm(a,l,d,R,x,y),O=Pm(),a!==null&&!Be?(Om(a,l,y),pi(a,l,y)):(Wt&&O&&hm(l),l.flags|=1,We(a,l,p,y),l.child)}function XS(a,l,d,p,y){if(a===null){var x=d.type;return typeof x=="function"&&!cm(x)&&x.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=x,QS(a,l,x,p,y)):(a=gd(d.type,null,p,l,l.mode,y),a.ref=l.ref,a.return=l,l.child=a)}if(x=a.child,!tg(a,y)){var R=x.memoizedProps;if(d=d.compare,d=d!==null?d:Il,d(R,p)&&a.ref===l.ref)return pi(a,l,y)}return l.flags|=1,a=oi(x,p),a.ref=l.ref,a.return=l,l.child=a}function QS(a,l,d,p,y){if(a!==null){var x=a.memoizedProps;if(Il(x,p)&&a.ref===l.ref)if(Be=!1,l.pendingProps=p=x,tg(a,y))(a.flags&131072)!==0&&(Be=!0);else return l.lanes=a.lanes,pi(a,l,y)}return Wm(a,l,d,p,y)}function ZS(a,l,d){var p=l.pendingProps,y=p.children,x=a!==null?a.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=x!==null?x.baseLanes|d:d,a!==null){for(y=l.child=a.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;l.childLanes=x&~p}else l.childLanes=0,l.child=null;return JS(a,l,p,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&xd(l,x!==null?x.cachePool:null),x!==null?Qx(l,x):Tm(),BS(l);else return l.lanes=l.childLanes=536870912,JS(a,l,x!==null?x.baseLanes|d:d,d)}else x!==null?(xd(l,x.cachePool),Qx(l,x),Gi(),l.memoizedState=null):(a!==null&&xd(l,null),Tm(),Gi());return We(a,l,y,d),l.child}function JS(a,l,d,p){var y=wm();return y=y===null?null:{parent:ke._currentValue,pool:y},l.memoizedState={baseLanes:d,cachePool:y},a!==null&&xd(l,null),Tm(),BS(l),a!==null&&Hl(a,l,p,!0),null}function Fd(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function Wm(a,l,d,p,y){return Vr(l),d=Mm(a,l,d,p,void 0,y),p=Pm(),a!==null&&!Be?(Om(a,l,y),pi(a,l,y)):(Wt&&p&&hm(l),l.flags|=1,We(a,l,d,y),l.child)}function t1(a,l,d,p,y,x){return Vr(l),l.updateQueue=null,d=Jx(l,p,d,y),Zx(a),p=Pm(),a!==null&&!Be?(Om(a,l,x),pi(a,l,x)):(Wt&&p&&hm(l),l.flags|=1,We(a,l,d,x),l.child)}function e1(a,l,d,p,y){if(Vr(l),l.stateNode===null){var x=$a,R=d.contextType;typeof R=="object"&&R!==null&&(x=an(R)),x=new d(p,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Gm,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=p,x.state=l.memoizedState,x.refs={},Sm(l),R=d.contextType,x.context=typeof R=="object"&&R!==null?an(R):$a,x.state=l.memoizedState,R=d.getDerivedStateFromProps,typeof R=="function"&&($m(l,d,R,p),x.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(R=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),R!==x.state&&Gm.enqueueReplaceState(x,x.state,null),Yl(l,p,x,y),Kl(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(a===null){x=l.stateNode;var O=l.memoizedProps,B=qr(d,O);x.props=B;var G=x.context,tt=d.contextType;R=$a,typeof tt=="object"&&tt!==null&&(R=an(tt));var st=d.getDerivedStateFromProps;tt=typeof st=="function"||typeof x.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,tt||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O||G!==R)&&zS(l,x,p,R),Ui=!1;var Y=l.memoizedState;x.state=Y,Yl(l,p,x,y),Kl(),G=l.memoizedState,O||Y!==G||Ui?(typeof st=="function"&&($m(l,d,st,p),G=l.memoizedState),(B=Ui||US(l,d,B,p,Y,G,R))?(tt||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=G),x.props=p,x.state=G,x.context=R,p=B):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{x=l.stateNode,Am(a,l),R=l.memoizedProps,tt=qr(d,R),x.props=tt,st=l.pendingProps,Y=x.context,G=d.contextType,B=$a,typeof G=="object"&&G!==null&&(B=an(G)),O=d.getDerivedStateFromProps,(G=typeof O=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R!==st||Y!==B)&&zS(l,x,p,B),Ui=!1,Y=l.memoizedState,x.state=Y,Yl(l,p,x,y),Kl();var X=l.memoizedState;R!==st||Y!==X||Ui||a!==null&&a.dependencies!==null&&bd(a.dependencies)?(typeof O=="function"&&($m(l,d,O,p),X=l.memoizedState),(tt=Ui||US(l,d,tt,p,Y,X,B)||a!==null&&a.dependencies!==null&&bd(a.dependencies))?(G||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,X,B),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,X,B)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||R===a.memoizedProps&&Y===a.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Y===a.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=X),x.props=p,x.state=X,x.context=B,p=tt):(typeof x.componentDidUpdate!="function"||R===a.memoizedProps&&Y===a.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Y===a.memoizedState||(l.flags|=1024),p=!1)}return x=p,Fd(a,l),p=(l.flags&128)!==0,x||p?(x=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,a!==null&&p?(l.child=to(l,a.child,null,y),l.child=to(l,null,d,y)):We(a,l,d,y),l.memoizedState=x.state,a=l.child):a=pi(a,l,y),a}function n1(a,l,d,p){return Ul(),l.flags|=256,We(a,l,d,p),l.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(a){return{baseLanes:a,cachePool:Vx()}}function Xm(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=ss),a}function s1(a,l,d){var p=l.pendingProps,y=!1,x=(l.flags&128)!==0,R;if((R=x)||(R=a!==null&&a.memoizedState===null?!1:(De.current&2)!==0),R&&(y=!0,l.flags&=-129),R=(l.flags&32)!==0,l.flags&=-33,a===null){if(Wt){if(y?$i(l):Gi(),Wt){var O=pe,B;if(B=O){t:{for(B=O,O=Ls;B.nodeType!==8;){if(!O){O=null;break t}if(B=xs(B.nextSibling),B===null){O=null;break t}}O=B}O!==null?(l.memoizedState={dehydrated:O,treeContext:Fr!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},B=Fn(18,null,null,0),B.stateNode=O,B.return=l,l.child=B,hn=l,pe=null,B=!0):B=!1}B||zr(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Dg(O)?l.lanes=32:l.lanes=536870912,null;fi(l)}return O=p.children,p=p.fallback,y?(Gi(),y=l.mode,O=Bd({mode:"hidden",children:O},y),p=Ir(p,y,d,null),O.return=l,p.return=l,O.sibling=p,l.child=O,y=l.child,y.memoizedState=Ym(d),y.childLanes=Xm(a,R,d),l.memoizedState=Km,p):($i(l),Qm(l,O))}if(B=a.memoizedState,B!==null&&(O=B.dehydrated,O!==null)){if(x)l.flags&256?($i(l),l.flags&=-257,l=Zm(a,l,d)):l.memoizedState!==null?(Gi(),l.child=a.child,l.flags|=128,l=null):(Gi(),y=p.fallback,O=l.mode,p=Bd({mode:"visible",children:p.children},O),y=Ir(y,O,d,null),y.flags|=2,p.return=l,y.return=l,p.sibling=y,l.child=p,to(l,a.child,null,d),p=l.child,p.memoizedState=Ym(d),p.childLanes=Xm(a,R,d),l.memoizedState=Km,l=y);else if($i(l),Dg(O)){if(R=O.nextSibling&&O.nextSibling.dataset,R)var G=R.dgst;R=G,p=Error(s(419)),p.stack="",p.digest=R,zl({value:p,source:null,stack:null}),l=Zm(a,l,d)}else if(Be||Hl(a,l,d,!1),R=(d&a.childLanes)!==0,Be||R){if(R=ne,R!==null&&(p=d&-d,p=(p&42)!==0?1:Np(p),p=(p&(R.suspendedLanes|d))!==0?0:p,p!==0&&p!==B.retryLane))throw B.retryLane=p,Va(a,p),Vn(R,a,p),KS;O.data==="$?"||gg(),l=Zm(a,l,d)}else O.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=B.treeContext,pe=xs(O.nextSibling),hn=l,Wt=!0,Ur=null,Ls=!1,a!==null&&(ts[es++]=li,ts[es++]=ci,ts[es++]=Fr,li=a.id,ci=a.overflow,Fr=l),l=Qm(l,p.children),l.flags|=4096);return l}return y?(Gi(),y=p.fallback,O=l.mode,B=a.child,G=B.sibling,p=oi(B,{mode:"hidden",children:p.children}),p.subtreeFlags=B.subtreeFlags&65011712,G!==null?y=oi(G,y):(y=Ir(y,O,d,null),y.flags|=2),y.return=l,p.return=l,p.sibling=y,l.child=p,p=y,y=l.child,O=a.child.memoizedState,O===null?O=Ym(d):(B=O.cachePool,B!==null?(G=ke._currentValue,B=B.parent!==G?{parent:G,pool:G}:B):B=Vx(),O={baseLanes:O.baseLanes|d,cachePool:B}),y.memoizedState=O,y.childLanes=Xm(a,R,d),l.memoizedState=Km,p):($i(l),d=a.child,a=d.sibling,d=oi(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,a!==null&&(R=l.deletions,R===null?(l.deletions=[a],l.flags|=16):R.push(a)),l.child=d,l.memoizedState=null,d)}function Qm(a,l){return l=Bd({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Bd(a,l){return a=Fn(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Zm(a,l,d){return to(l,a.child,null,d),a=Qm(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function i1(a,l,d){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l),gm(a.return,l,d)}function Jm(a,l,d,p,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:y}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=d,x.tailMode=y)}function r1(a,l,d){var p=l.pendingProps,y=p.revealOrder,x=p.tail;if(We(a,l,p.children,d),p=De.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&i1(a,d,l);else if(a.tag===19)i1(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break t;for(;a.sibling===null;){if(a.return===null||a.return===l)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}switch(Z(De,p),y){case"forwards":for(d=l.child,y=null;d!==null;)a=d.alternate,a!==null&&Ld(a)===null&&(y=d),d=d.sibling;d=y,d===null?(y=l.child,l.child=null):(y=d.sibling,d.sibling=null),Jm(l,!1,y,d,x);break;case"backwards":for(d=null,y=l.child,l.child=null;y!==null;){if(a=y.alternate,a!==null&&Ld(a)===null){l.child=y;break}a=y.sibling,y.sibling=d,d=y,y=a}Jm(l,!0,d,null,x);break;case"together":Jm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function pi(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Xi|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(Hl(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,d=oi(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=oi(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function tg(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&bd(a)))}function DL(a,l,d){switch(l.tag){case 3:ft(l,l.stateNode.containerInfo),Bi(l,ke,a.memoizedState.cache),Ul();break;case 27:case 5:zt(l);break;case 4:ft(l,l.stateNode.containerInfo);break;case 10:Bi(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?($i(l),l.flags|=128,null):(d&l.child.childLanes)!==0?s1(a,l,d):($i(l),a=pi(a,l,d),a!==null?a.sibling:null);$i(l);break;case 19:var y=(a.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(Hl(a,l,d,!1),p=(d&l.childLanes)!==0),y){if(p)return r1(a,l,d);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Z(De,De.current),p)break;return null;case 22:case 23:return l.lanes=0,ZS(a,l,d);case 24:Bi(l,ke,a.memoizedState.cache)}return pi(a,l,d)}function a1(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Be=!0;else{if(!tg(a,d)&&(l.flags&128)===0)return Be=!1,DL(a,l,d);Be=(a.flags&131072)!==0}else Be=!1,Wt&&(l.flags&1048576)!==0&&jx(l,vd,l.index);switch(l.lanes=0,l.tag){case 16:t:{a=l.pendingProps;var p=l.elementType,y=p._init;if(p=y(p._payload),l.type=p,typeof p=="function")cm(p)?(a=qr(p,a),l.tag=1,l=e1(null,l,p,a,d)):(l.tag=0,l=Wm(null,l,p,a,d));else{if(p!=null){if(y=p.$$typeof,y===M){l.tag=11,l=YS(null,l,p,a,d);break t}else if(y===D){l.tag=14,l=XS(null,l,p,a,d);break t}}throw l=rt(p)||p,Error(s(306,l,""))}}return l;case 0:return Wm(a,l,l.type,l.pendingProps,d);case 1:return p=l.type,y=qr(p,l.pendingProps),e1(a,l,p,y,d);case 3:t:{if(ft(l,l.stateNode.containerInfo),a===null)throw Error(s(387));p=l.pendingProps;var x=l.memoizedState;y=x.element,Am(a,l),Yl(l,p,null,d);var R=l.memoizedState;if(p=R.cache,Bi(l,ke,p),p!==x.cache&&ym(l,[ke],d,!0),Kl(),p=R.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:R.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=n1(a,l,p,d);break t}else if(p!==y){y=Zn(Error(s(424)),l),zl(y),l=n1(a,l,p,d);break t}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(pe=xs(a.firstChild),hn=l,Wt=!0,Ur=null,Ls=!0,d=FS(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ul(),p===y){l=pi(a,l,d);break t}We(a,l,p,d)}l=l.child}return l;case 26:return Fd(a,l),a===null?(d=uA(l.type,null,l.pendingProps,null))?l.memoizedState=d:Wt||(d=l.type,a=l.pendingProps,p=Jd(ut.current).createElement(d),p[rn]=l,p[xn]=a,Ye(p,d,a),Fe(p),l.stateNode=p):l.memoizedState=uA(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return zt(l),a===null&&Wt&&(p=l.stateNode=oA(l.type,l.pendingProps,ut.current),hn=l,Ls=!0,y=pe,tr(l.type)?(Ng=y,pe=xs(p.firstChild)):pe=y),We(a,l,l.pendingProps.children,d),Fd(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Wt&&((y=p=pe)&&(p=oj(p,l.type,l.pendingProps,Ls),p!==null?(l.stateNode=p,hn=l,pe=xs(p.firstChild),Ls=!1,y=!0):y=!1),y||zr(l)),zt(l),y=l.type,x=l.pendingProps,R=a!==null?a.memoizedProps:null,p=x.children,Pg(y,x)?p=null:R!==null&&Pg(y,R)&&(l.flags|=32),l.memoizedState!==null&&(y=Mm(a,l,EL,null,null,d),yc._currentValue=y),Fd(a,l),We(a,l,p,d),l.child;case 6:return a===null&&Wt&&((a=d=pe)&&(d=lj(d,l.pendingProps,Ls),d!==null?(l.stateNode=d,hn=l,pe=null,a=!0):a=!1),a||zr(l)),null;case 13:return s1(a,l,d);case 4:return ft(l,l.stateNode.containerInfo),p=l.pendingProps,a===null?l.child=to(l,null,p,d):We(a,l,p,d),l.child;case 11:return YS(a,l,l.type,l.pendingProps,d);case 7:return We(a,l,l.pendingProps,d),l.child;case 8:return We(a,l,l.pendingProps.children,d),l.child;case 12:return We(a,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,Bi(l,l.type,p.value),We(a,l,p.children,d),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,Vr(l),y=an(y),p=p(y),l.flags|=1,We(a,l,p,d),l.child;case 14:return XS(a,l,l.type,l.pendingProps,d);case 15:return QS(a,l,l.type,l.pendingProps,d);case 19:return r1(a,l,d);case 31:return p=l.pendingProps,d=l.mode,p={mode:p.mode,children:p.children},a===null?(d=Bd(p,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=oi(a.child,p),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return ZS(a,l,d);case 24:return Vr(l),p=an(ke),a===null?(y=wm(),y===null&&(y=ne,x=vm(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=d),y=x),l.memoizedState={parent:p,cache:y},Sm(l),Bi(l,ke,y)):((a.lanes&d)!==0&&(Am(a,l),Yl(l,null,null,d),Kl()),y=a.memoizedState,x=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Bi(l,ke,p)):(p=x.cache,Bi(l,ke,p),p!==y.cache&&ym(l,[ke],d,!0))),We(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function mi(a){a.flags|=4}function o1(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!mA(l)){if(l=ns.current,l!==null&&(($t&4194048)===$t?js!==null:($t&62914560)!==$t&&($t&536870912)===0||l!==js))throw ql=xm,$x;a.flags|=8192}}function Ud(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Bw():536870912,a.lanes|=l,io|=l)}function nc(a,l){if(!Wt)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function he(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(l)for(var y=a.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=p,a.childLanes=d,l}function NL(a,l,d){var p=l.pendingProps;switch(fm(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(l),null;case 1:return he(l),null;case 3:return d=l.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),di(ke),jt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Bl(l)?mi(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Bx())),he(l),null;case 26:return d=l.memoizedState,a===null?(mi(l),d!==null?(he(l),o1(l,d)):(he(l),l.flags&=-16777217)):d?d!==a.memoizedState?(mi(l),he(l),o1(l,d)):(he(l),l.flags&=-16777217):(a.memoizedProps!==p&&mi(l),he(l),l.flags&=-16777217),null;case 27:It(l),d=ut.current;var y=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==p&&mi(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return he(l),null}a=ot.current,Bl(l)?Ix(l):(a=oA(y,p,d),l.stateNode=a,mi(l))}return he(l),null;case 5:if(It(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==p&&mi(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return he(l),null}if(a=ot.current,Bl(l))Ix(l);else{switch(y=Jd(ut.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof p.is=="string"?y.createElement("select",{is:p.is}):y.createElement("select"),p.multiple?a.multiple=!0:p.size&&(a.size=p.size);break;default:a=typeof p.is=="string"?y.createElement(d,{is:p.is}):y.createElement(d)}}a[rn]=l,a[xn]=p;t:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break t;for(;y.sibling===null;){if(y.return===null||y.return===l)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=a;t:switch(Ye(a,d,p),d){case"button":case"input":case"select":case"textarea":a=!!p.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&mi(l)}}return he(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==p&&mi(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(a=ut.current,Bl(l)){if(a=l.stateNode,d=l.memoizedProps,p=null,y=hn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}a[rn]=l,a=!!(a.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||tA(a.nodeValue,d)),a||zr(l)}else a=Jd(a).createTextNode(p),a[rn]=l,l.stateNode=a}return he(l),null;case 13:if(p=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Bl(l),p!==null&&p.dehydrated!==null){if(a===null){if(!y)throw Error(s(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[rn]=l}else Ul(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;he(l),y=!1}else y=Bx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(fi(l),l):(fi(l),null)}if(fi(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=p!==null,a=a!==null&&a.memoizedState!==null,d){p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool);var x=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==y&&(p.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),Ud(l,l.updateQueue),he(l),null;case 4:return jt(),a===null&&Eg(l.stateNode.containerInfo),he(l),null;case 10:return di(l.type),he(l),null;case 19:if(nt(De),y=l.memoizedState,y===null)return he(l),null;if(p=(l.flags&128)!==0,x=y.rendering,x===null)if(p)nc(y,!1);else{if(me!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(x=Ld(a),x!==null){for(l.flags|=128,nc(y,!1),a=x.updateQueue,l.updateQueue=a,Ud(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)Lx(d,a),d=d.sibling;return Z(De,De.current&1|2),l.child}a=a.sibling}y.tail!==null&&wn()>Vd&&(l.flags|=128,p=!0,nc(y,!1),l.lanes=4194304)}else{if(!p)if(a=Ld(x),a!==null){if(l.flags|=128,p=!0,a=a.updateQueue,l.updateQueue=a,Ud(l,a),nc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Wt)return he(l),null}else 2*wn()-y.renderingStartTime>Vd&&d!==536870912&&(l.flags|=128,p=!0,nc(y,!1),l.lanes=4194304);y.isBackwards?(x.sibling=l.child,l.child=x):(a=y.last,a!==null?a.sibling=x:l.child=x,y.last=x)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=wn(),l.sibling=null,a=De.current,Z(De,p?a&1|2:a&1),l):(he(l),null);case 22:case 23:return fi(l),Cm(),p=l.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(he(l),l.subtreeFlags&6&&(l.flags|=8192)):he(l),d=l.updateQueue,d!==null&&Ud(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),a!==null&&nt($r),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),di(ke),he(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function LL(a,l){switch(fm(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return di(ke),jt(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return It(l),null;case 13:if(fi(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));Ul()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return nt(De),null;case 4:return jt(),null;case 10:return di(l.type),null;case 22:case 23:return fi(l),Cm(),a!==null&&nt($r),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return di(ke),null;case 25:return null;default:return null}}function l1(a,l){switch(fm(l),l.tag){case 3:di(ke),jt();break;case 26:case 27:case 5:It(l);break;case 4:jt();break;case 13:fi(l);break;case 19:nt(De);break;case 10:di(l.type);break;case 22:case 23:fi(l),Cm(),a!==null&&nt($r);break;case 24:di(ke)}}function sc(a,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var y=p.next;d=y;do{if((d.tag&a)===a){p=void 0;var x=d.create,R=d.inst;p=x(),R.destroy=p}d=d.next}while(d!==y)}}catch(O){ee(l,l.return,O)}}function qi(a,l,d){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var x=y.next;p=x;do{if((p.tag&a)===a){var R=p.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,y=l;var B=d,G=O;try{G()}catch(tt){ee(y,B,tt)}}}p=p.next}while(p!==x)}}catch(tt){ee(l,l.return,tt)}}function c1(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{Xx(l,d)}catch(p){ee(a,a.return,p)}}}function u1(a,l,d){d.props=qr(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(p){ee(a,l,p)}}function ic(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof d=="function"?a.refCleanup=d(p):d.current=p}}catch(y){ee(a,l,y)}}function Is(a,l){var d=a.ref,p=a.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(y){ee(a,l,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){ee(a,l,y)}else d.current=null}function d1(a){var l=a.type,d=a.memoizedProps,p=a.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break t;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(y){ee(a,a.return,y)}}function eg(a,l,d){try{var p=a.stateNode;nj(p,a.type,d,l),p[xn]=l}catch(y){ee(a,a.return,y)}}function h1(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&tr(a.type)||a.tag===4}function ng(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||h1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&tr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function sg(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Zd));else if(p!==4&&(p===27&&tr(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(sg(a,l,d),a=a.sibling;a!==null;)sg(a,l,d),a=a.sibling}function zd(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(p!==4&&(p===27&&tr(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(zd(a,l,d),a=a.sibling;a!==null;)zd(a,l,d),a=a.sibling}function f1(a){var l=a.stateNode,d=a.memoizedProps;try{for(var p=a.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Ye(l,p,d),l[rn]=a,l[xn]=d}catch(x){ee(a,a.return,x)}}var gi=!1,we=!1,ig=!1,p1=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function jL(a,l){if(a=a.containerInfo,Rg=rh,a=Ex(a),nm(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else t:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break t}var R=0,O=-1,B=-1,G=0,tt=0,st=a,Y=null;e:for(;;){for(var X;st!==d||y!==0&&st.nodeType!==3||(O=R+y),st!==x||p!==0&&st.nodeType!==3||(B=R+p),st.nodeType===3&&(R+=st.nodeValue.length),(X=st.firstChild)!==null;)Y=st,st=X;for(;;){if(st===a)break e;if(Y===d&&++G===y&&(O=R),Y===x&&++tt===p&&(B=R),(X=st.nextSibling)!==null)break;st=Y,Y=st.parentNode}st=X}d=O===-1||B===-1?null:{start:O,end:B}}else d=null}d=d||{start:0,end:0}}else d=null;for(Mg={focusedElem:a,selectionRange:d},rh=!1,Ue=l;Ue!==null;)if(l=Ue,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,Ue=a;else for(;Ue!==null;){switch(l=Ue,x=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,d=l,y=x.memoizedProps,x=x.memoizedState,p=d.stateNode;try{var _t=qr(d.type,y,d.elementType===d.type);a=p.getSnapshotBeforeUpdate(_t,x),p.__reactInternalSnapshotBeforeUpdate=a}catch(wt){ee(d,d.return,wt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)kg(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":kg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=l.sibling,a!==null){a.return=l.return,Ue=a;break}Ue=l.return}}function m1(a,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:Wi(a,d),p&4&&sc(5,d);break;case 1:if(Wi(a,d),p&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(R){ee(d,d.return,R)}else{var y=qr(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(y,l,a.__reactInternalSnapshotBeforeUpdate)}catch(R){ee(d,d.return,R)}}p&64&&c1(d),p&512&&ic(d,d.return);break;case 3:if(Wi(a,d),p&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Xx(a,l)}catch(R){ee(d,d.return,R)}}break;case 27:l===null&&p&4&&f1(d);case 26:case 5:Wi(a,d),l===null&&p&4&&d1(d),p&512&&ic(d,d.return);break;case 12:Wi(a,d);break;case 13:Wi(a,d),p&4&&v1(a,d),p&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=GL.bind(null,d),cj(a,d))));break;case 22:if(p=d.memoizedState!==null||gi,!p){l=l!==null&&l.memoizedState!==null||we,y=gi;var x=we;gi=p,(we=l)&&!x?Ki(a,d,(d.subtreeFlags&8772)!==0):Wi(a,d),gi=y,we=x}break;case 30:break;default:Wi(a,d)}}function g1(a){var l=a.alternate;l!==null&&(a.alternate=null,g1(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Ip(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ae=null,_n=!1;function yi(a,l,d){for(d=d.child;d!==null;)y1(a,l,d),d=d.sibling}function y1(a,l,d){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(El,d)}catch{}switch(d.tag){case 26:we||Is(d,l),yi(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:we||Is(d,l);var p=ae,y=_n;tr(d.type)&&(ae=d.stateNode,_n=!1),yi(a,l,d),fc(d.stateNode),ae=p,_n=y;break;case 5:we||Is(d,l);case 6:if(p=ae,y=_n,ae=null,yi(a,l,d),ae=p,_n=y,ae!==null)if(_n)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(d.stateNode)}catch(x){ee(d,l,x)}else try{ae.removeChild(d.stateNode)}catch(x){ee(d,l,x)}break;case 18:ae!==null&&(_n?(a=ae,rA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),xc(a)):rA(ae,d.stateNode));break;case 4:p=ae,y=_n,ae=d.stateNode.containerInfo,_n=!0,yi(a,l,d),ae=p,_n=y;break;case 0:case 11:case 14:case 15:we||qi(2,d,l),we||qi(4,d,l),yi(a,l,d);break;case 1:we||(Is(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&u1(d,l,p)),yi(a,l,d);break;case 21:yi(a,l,d);break;case 22:we=(p=we)||d.memoizedState!==null,yi(a,l,d),we=p;break;default:yi(a,l,d)}}function v1(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{xc(a)}catch(d){ee(l,l.return,d)}}function IL(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new p1),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new p1),l;default:throw Error(s(435,a.tag))}}function rg(a,l){var d=IL(a);l.forEach(function(p){var y=qL.bind(null,a,p);d.has(p)||(d.add(p),p.then(y,y))})}function Bn(a,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var y=d[p],x=a,R=l,O=R;t:for(;O!==null;){switch(O.tag){case 27:if(tr(O.type)){ae=O.stateNode,_n=!1;break t}break;case 5:ae=O.stateNode,_n=!1;break t;case 3:case 4:ae=O.stateNode.containerInfo,_n=!0;break t}O=O.return}if(ae===null)throw Error(s(160));y1(x,R,y),ae=null,_n=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)b1(l,a),l=l.sibling}var ws=null;function b1(a,l){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Bn(l,a),Un(a),p&4&&(qi(3,a,a.return),sc(3,a),qi(5,a,a.return));break;case 1:Bn(l,a),Un(a),p&512&&(we||d===null||Is(d,d.return)),p&64&&gi&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var y=ws;if(Bn(l,a),Un(a),p&512&&(we||d===null||Is(d,d.return)),p&4){var x=d!==null?d.memoizedState:null;if(p=a.memoizedState,d===null)if(p===null)if(a.stateNode===null){t:{p=a.type,d=a.memoizedProps,y=y.ownerDocument||y;e:switch(p){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Rl]||x[rn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(p),y.head.insertBefore(x,y.querySelector("head > title"))),Ye(x,p,d),x[rn]=a,Fe(x),p=x;break t;case"link":var R=fA("link","href",y).get(p+(d.href||""));if(R){for(var O=0;O<R.length;O++)if(x=R[O],x.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&x.getAttribute("rel")===(d.rel==null?null:d.rel)&&x.getAttribute("title")===(d.title==null?null:d.title)&&x.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){R.splice(O,1);break e}}x=y.createElement(p),Ye(x,p,d),y.head.appendChild(x);break;case"meta":if(R=fA("meta","content",y).get(p+(d.content||""))){for(O=0;O<R.length;O++)if(x=R[O],x.getAttribute("content")===(d.content==null?null:""+d.content)&&x.getAttribute("name")===(d.name==null?null:d.name)&&x.getAttribute("property")===(d.property==null?null:d.property)&&x.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&x.getAttribute("charset")===(d.charSet==null?null:d.charSet)){R.splice(O,1);break e}}x=y.createElement(p),Ye(x,p,d),y.head.appendChild(x);break;default:throw Error(s(468,p))}x[rn]=a,Fe(x),p=x}a.stateNode=p}else pA(y,a.type,a.stateNode);else a.stateNode=hA(y,p,a.memoizedProps);else x!==p?(x===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):x.count--,p===null?pA(y,a.type,a.stateNode):hA(y,p,a.memoizedProps)):p===null&&a.stateNode!==null&&eg(a,a.memoizedProps,d.memoizedProps)}break;case 27:Bn(l,a),Un(a),p&512&&(we||d===null||Is(d,d.return)),d!==null&&p&4&&eg(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Bn(l,a),Un(a),p&512&&(we||d===null||Is(d,d.return)),a.flags&32){y=a.stateNode;try{ja(y,"")}catch(X){ee(a,a.return,X)}}p&4&&a.stateNode!=null&&(y=a.memoizedProps,eg(a,y,d!==null?d.memoizedProps:y)),p&1024&&(ig=!0);break;case 6:if(Bn(l,a),Un(a),p&4){if(a.stateNode===null)throw Error(s(162));p=a.memoizedProps,d=a.stateNode;try{d.nodeValue=p}catch(X){ee(a,a.return,X)}}break;case 3:if(nh=null,y=ws,ws=th(l.containerInfo),Bn(l,a),ws=y,Un(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{xc(l.containerInfo)}catch(X){ee(a,a.return,X)}ig&&(ig=!1,w1(a));break;case 4:p=ws,ws=th(a.stateNode.containerInfo),Bn(l,a),Un(a),ws=p;break;case 12:Bn(l,a),Un(a);break;case 13:Bn(l,a),Un(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(dg=wn()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,rg(a,p)));break;case 22:y=a.memoizedState!==null;var B=d!==null&&d.memoizedState!==null,G=gi,tt=we;if(gi=G||y,we=tt||B,Bn(l,a),we=tt,gi=G,Un(a),p&8192)t:for(l=a.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(d===null||B||gi||we||Wr(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){B=d=l;try{if(x=B.stateNode,y)R=x.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{O=B.stateNode;var st=B.memoizedProps.style,Y=st!=null&&st.hasOwnProperty("display")?st.display:null;O.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(X){ee(B,B.return,X)}}}else if(l.tag===6){if(d===null){B=l;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(X){ee(B,B.return,X)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break t;for(;l.sibling===null;){if(l.return===null||l.return===a)break t;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=a.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,rg(a,d))));break;case 19:Bn(l,a),Un(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,rg(a,p)));break;case 30:break;case 21:break;default:Bn(l,a),Un(a)}}function Un(a){var l=a.flags;if(l&2){try{for(var d,p=a.return;p!==null;){if(h1(p)){d=p;break}p=p.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var y=d.stateNode,x=ng(a);zd(a,x,y);break;case 5:var R=d.stateNode;d.flags&32&&(ja(R,""),d.flags&=-33);var O=ng(a);zd(a,O,R);break;case 3:case 4:var B=d.stateNode.containerInfo,G=ng(a);sg(a,G,B);break;default:throw Error(s(161))}}catch(tt){ee(a,a.return,tt)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function w1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;w1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Wi(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)m1(a,l.alternate,l),l=l.sibling}function Wr(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:qi(4,l,l.return),Wr(l);break;case 1:Is(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&u1(l,l.return,d),Wr(l);break;case 27:fc(l.stateNode);case 26:case 5:Is(l,l.return),Wr(l);break;case 22:l.memoizedState===null&&Wr(l);break;case 30:Wr(l);break;default:Wr(l)}a=a.sibling}}function Ki(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=a,x=l,R=x.flags;switch(x.tag){case 0:case 11:case 15:Ki(y,x,d),sc(4,x);break;case 1:if(Ki(y,x,d),p=x,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(G){ee(p,p.return,G)}if(p=x,y=p.updateQueue,y!==null){var O=p.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)Yx(B[y],O)}catch(G){ee(p,p.return,G)}}d&&R&64&&c1(x),ic(x,x.return);break;case 27:f1(x);case 26:case 5:Ki(y,x,d),d&&p===null&&R&4&&d1(x),ic(x,x.return);break;case 12:Ki(y,x,d);break;case 13:Ki(y,x,d),d&&R&4&&v1(y,x);break;case 22:x.memoizedState===null&&Ki(y,x,d),ic(x,x.return);break;case 30:break;default:Ki(y,x,d)}l=l.sibling}}function ag(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Vl(d))}function og(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Vl(a))}function Fs(a,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)x1(a,l,d,p),l=l.sibling}function x1(a,l,d,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Fs(a,l,d,p),y&2048&&sc(9,l);break;case 1:Fs(a,l,d,p);break;case 3:Fs(a,l,d,p),y&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Vl(a)));break;case 12:if(y&2048){Fs(a,l,d,p),a=l.stateNode;try{var x=l.memoizedProps,R=x.id,O=x.onPostCommit;typeof O=="function"&&O(R,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(B){ee(l,l.return,B)}}else Fs(a,l,d,p);break;case 13:Fs(a,l,d,p);break;case 23:break;case 22:x=l.stateNode,R=l.alternate,l.memoizedState!==null?x._visibility&2?Fs(a,l,d,p):rc(a,l):x._visibility&2?Fs(a,l,d,p):(x._visibility|=2,eo(a,l,d,p,(l.subtreeFlags&10256)!==0)),y&2048&&ag(R,l);break;case 24:Fs(a,l,d,p),y&2048&&og(l.alternate,l);break;default:Fs(a,l,d,p)}}function eo(a,l,d,p,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var x=a,R=l,O=d,B=p,G=R.flags;switch(R.tag){case 0:case 11:case 15:eo(x,R,O,B,y),sc(8,R);break;case 23:break;case 22:var tt=R.stateNode;R.memoizedState!==null?tt._visibility&2?eo(x,R,O,B,y):rc(x,R):(tt._visibility|=2,eo(x,R,O,B,y)),y&&G&2048&&ag(R.alternate,R);break;case 24:eo(x,R,O,B,y),y&&G&2048&&og(R.alternate,R);break;default:eo(x,R,O,B,y)}l=l.sibling}}function rc(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,p=l,y=p.flags;switch(p.tag){case 22:rc(d,p),y&2048&&ag(p.alternate,p);break;case 24:rc(d,p),y&2048&&og(p.alternate,p);break;default:rc(d,p)}l=l.sibling}}var ac=8192;function no(a){if(a.subtreeFlags&ac)for(a=a.child;a!==null;)S1(a),a=a.sibling}function S1(a){switch(a.tag){case 26:no(a),a.flags&ac&&a.memoizedState!==null&&Sj(ws,a.memoizedState,a.memoizedProps);break;case 5:no(a);break;case 3:case 4:var l=ws;ws=th(a.stateNode.containerInfo),no(a),ws=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=ac,ac=16777216,no(a),ac=l):no(a));break;default:no(a)}}function A1(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function oc(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Ue=p,E1(p,a)}A1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)_1(a),a=a.sibling}function _1(a){switch(a.tag){case 0:case 11:case 15:oc(a),a.flags&2048&&qi(9,a,a.return);break;case 3:oc(a);break;case 12:oc(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Hd(a)):oc(a);break;default:oc(a)}}function Hd(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Ue=p,E1(p,a)}A1(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:qi(8,l,l.return),Hd(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Hd(l));break;default:Hd(l)}a=a.sibling}}function E1(a,l){for(;Ue!==null;){var d=Ue;switch(d.tag){case 0:case 11:case 15:qi(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Vl(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Ue=p;else t:for(d=a;Ue!==null;){p=Ue;var y=p.sibling,x=p.return;if(g1(p),p===d){Ue=null;break t}if(y!==null){y.return=x,Ue=y;break t}Ue=x}}}var FL={getCacheForType:function(a){var l=an(ke),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},BL=typeof WeakMap=="function"?WeakMap:Map,Yt=0,ne=null,Ft=null,$t=0,Xt=0,zn=null,Yi=!1,so=!1,lg=!1,vi=0,me=0,Xi=0,Kr=0,cg=0,ss=0,io=0,lc=null,En=null,ug=!1,dg=0,Vd=1/0,$d=null,Qi=null,Ke=0,Zi=null,ro=null,ao=0,hg=0,fg=null,T1=null,cc=0,pg=null;function Hn(){if((Yt&2)!==0&&$t!==0)return $t&-$t;if(j.T!==null){var a=Wa;return a!==0?a:xg()}return Hw()}function C1(){ss===0&&(ss=($t&536870912)===0||Wt?Fw():536870912);var a=ns.current;return a!==null&&(a.flags|=32),ss}function Vn(a,l,d){(a===ne&&(Xt===2||Xt===9)||a.cancelPendingCommit!==null)&&(oo(a,0),Ji(a,$t,ss,!1)),Cl(a,d),((Yt&2)===0||a!==ne)&&(a===ne&&((Yt&2)===0&&(Kr|=d),me===4&&Ji(a,$t,ss,!1)),Bs(a))}function R1(a,l,d){if((Yt&6)!==0)throw Error(s(327));var p=!d&&(l&124)===0&&(l&a.expiredLanes)===0||Tl(a,l),y=p?HL(a,l):yg(a,l,!0),x=p;do{if(y===0){so&&!p&&Ji(a,l,0,!1);break}else{if(d=a.current.alternate,x&&!UL(d)){y=yg(a,l,!1),x=!1;continue}if(y===2){if(x=l,a.errorRecoveryDisabledLanes&x)var R=0;else R=a.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){l=R;t:{var O=a;y=lc;var B=O.current.memoizedState.isDehydrated;if(B&&(oo(O,R).flags|=256),R=yg(O,R,!1),R!==2){if(lg&&!B){O.errorRecoveryDisabledLanes|=x,Kr|=x,y=4;break t}x=En,En=y,x!==null&&(En===null?En=x:En.push.apply(En,x))}y=R}if(x=!1,y!==2)continue}}if(y===1){oo(a,0),Ji(a,l,0,!0);break}t:{switch(p=a,x=y,x){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Ji(p,l,ss,!Yi);break t;case 2:En=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(y=dg+300-wn(),10<y)){if(Ji(p,l,ss,!Yi),ed(p,0,!0)!==0)break t;p.timeoutHandle=sA(M1.bind(null,p,d,En,$d,ug,l,ss,Kr,io,Yi,x,2,-0,0),y);break t}M1(p,d,En,$d,ug,l,ss,Kr,io,Yi,x,0,-0,0)}}break}while(!0);Bs(a)}function M1(a,l,d,p,y,x,R,O,B,G,tt,st,Y,X){if(a.timeoutHandle=-1,st=l.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(gc={stylesheets:null,count:0,unsuspend:xj},S1(l),st=Aj(),st!==null)){a.cancelPendingCommit=st(j1.bind(null,a,l,x,d,p,y,R,O,B,tt,1,Y,X)),Ji(a,x,R,!G);return}j1(a,l,x,d,p,y,R,O,B)}function UL(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var y=d[p],x=y.getSnapshot;y=y.value;try{if(!In(x(),y))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ji(a,l,d,p){l&=~cg,l&=~Kr,a.suspendedLanes|=l,a.pingedLanes&=~l,p&&(a.warmLanes|=l),p=a.expirationTimes;for(var y=l;0<y;){var x=31-jn(y),R=1<<x;p[x]=-1,y&=~R}d!==0&&Uw(a,d,l)}function Gd(){return(Yt&6)===0?(uc(0),!1):!0}function mg(){if(Ft!==null){if(Xt===0)var a=Ft.return;else a=Ft,ui=Hr=null,km(a),Ja=null,tc=0,a=Ft;for(;a!==null;)l1(a.alternate,a),a=a.return;Ft=null}}function oo(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,ij(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),mg(),ne=a,Ft=d=oi(a.current,null),$t=l,Xt=0,zn=null,Yi=!1,so=Tl(a,l),lg=!1,io=ss=cg=Kr=Xi=me=0,En=lc=null,ug=!1,(l&8)!==0&&(l|=l&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=l;0<p;){var y=31-jn(p),x=1<<y;l|=a[y],p&=~x}return vi=l,fd(),d}function P1(a,l){Ot=null,j.H=kd,l===Gl||l===Sd?(l=Wx(),Xt=3):l===$x?(l=Wx(),Xt=4):Xt=l===KS?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,zn=l,Ft===null&&(me=1,Id(a,Zn(l,a.current)))}function O1(){var a=j.H;return j.H=kd,a===null?kd:a}function k1(){var a=j.A;return j.A=FL,a}function gg(){me=4,Yi||($t&4194048)!==$t&&ns.current!==null||(so=!0),(Xi&134217727)===0&&(Kr&134217727)===0||ne===null||Ji(ne,$t,ss,!1)}function yg(a,l,d){var p=Yt;Yt|=2;var y=O1(),x=k1();(ne!==a||$t!==l)&&($d=null,oo(a,l)),l=!1;var R=me;t:do try{if(Xt!==0&&Ft!==null){var O=Ft,B=zn;switch(Xt){case 8:mg(),R=6;break t;case 3:case 2:case 9:case 6:ns.current===null&&(l=!0);var G=Xt;if(Xt=0,zn=null,lo(a,O,B,G),d&&so){R=0;break t}break;default:G=Xt,Xt=0,zn=null,lo(a,O,B,G)}}zL(),R=me;break}catch(tt){P1(a,tt)}while(!0);return l&&a.shellSuspendCounter++,ui=Hr=null,Yt=p,j.H=y,j.A=x,Ft===null&&(ne=null,$t=0,fd()),R}function zL(){for(;Ft!==null;)D1(Ft)}function HL(a,l){var d=Yt;Yt|=2;var p=O1(),y=k1();ne!==a||$t!==l?($d=null,Vd=wn()+500,oo(a,l)):so=Tl(a,l);t:do try{if(Xt!==0&&Ft!==null){l=Ft;var x=zn;e:switch(Xt){case 1:Xt=0,zn=null,lo(a,l,x,1);break;case 2:case 9:if(Gx(x)){Xt=0,zn=null,N1(l);break}l=function(){Xt!==2&&Xt!==9||ne!==a||(Xt=7),Bs(a)},x.then(l,l);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Gx(x)?(Xt=0,zn=null,N1(l)):(Xt=0,zn=null,lo(a,l,x,7));break;case 5:var R=null;switch(Ft.tag){case 26:R=Ft.memoizedState;case 5:case 27:var O=Ft;if(!R||mA(R)){Xt=0,zn=null;var B=O.sibling;if(B!==null)Ft=B;else{var G=O.return;G!==null?(Ft=G,qd(G)):Ft=null}break e}}Xt=0,zn=null,lo(a,l,x,5);break;case 6:Xt=0,zn=null,lo(a,l,x,6);break;case 8:mg(),me=6;break t;default:throw Error(s(462))}}VL();break}catch(tt){P1(a,tt)}while(!0);return ui=Hr=null,j.H=p,j.A=y,Yt=d,Ft!==null?0:(ne=null,$t=0,fd(),me)}function VL(){for(;Ft!==null&&!Al();)D1(Ft)}function D1(a){var l=a1(a.alternate,a,vi);a.memoizedProps=a.pendingProps,l===null?qd(a):Ft=l}function N1(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=t1(d,l,l.pendingProps,l.type,void 0,$t);break;case 11:l=t1(d,l,l.pendingProps,l.type.render,l.ref,$t);break;case 5:km(l);default:l1(d,l),l=Ft=Lx(l,vi),l=a1(d,l,vi)}a.memoizedProps=a.pendingProps,l===null?qd(a):Ft=l}function lo(a,l,d,p){ui=Hr=null,km(l),Ja=null,tc=0;var y=l.return;try{if(kL(a,y,l,d,$t)){me=1,Id(a,Zn(d,a.current)),Ft=null;return}}catch(x){if(y!==null)throw Ft=y,x;me=1,Id(a,Zn(d,a.current)),Ft=null;return}l.flags&32768?(Wt||p===1?a=!0:so||($t&536870912)!==0?a=!1:(Yi=a=!0,(p===2||p===9||p===3||p===6)&&(p=ns.current,p!==null&&p.tag===13&&(p.flags|=16384))),L1(l,a)):qd(l)}function qd(a){var l=a;do{if((l.flags&32768)!==0){L1(l,Yi);return}a=l.return;var d=NL(l.alternate,l,vi);if(d!==null){Ft=d;return}if(l=l.sibling,l!==null){Ft=l;return}Ft=l=a}while(l!==null);me===0&&(me=5)}function L1(a,l){do{var d=LL(a.alternate,a);if(d!==null){d.flags&=32767,Ft=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Ft=a;return}Ft=a=d}while(a!==null);me=6,Ft=null}function j1(a,l,d,p,y,x,R,O,B){a.cancelPendingCommit=null;do Wd();while(Ke!==0);if((Yt&6)!==0)throw Error(s(327));if(l!==null){if(l===a.current)throw Error(s(177));if(x=l.lanes|l.childLanes,x|=om,xN(a,d,x,R,O,B),a===ne&&(Ft=ne=null,$t=0),ro=l,Zi=a,ao=d,hg=x,fg=y,T1=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,WL(Zu,function(){return z1(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=j.T,j.T=null,y=I.p,I.p=2,R=Yt,Yt|=4;try{jL(a,l,d)}finally{Yt=R,I.p=y,j.T=p}}Ke=1,I1(),F1(),B1()}}function I1(){if(Ke===1){Ke=0;var a=Zi,l=ro,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=j.T,j.T=null;var p=I.p;I.p=2;var y=Yt;Yt|=4;try{b1(l,a);var x=Mg,R=Ex(a.containerInfo),O=x.focusedElem,B=x.selectionRange;if(R!==O&&O&&O.ownerDocument&&_x(O.ownerDocument.documentElement,O)){if(B!==null&&nm(O)){var G=B.start,tt=B.end;if(tt===void 0&&(tt=G),"selectionStart"in O)O.selectionStart=G,O.selectionEnd=Math.min(tt,O.value.length);else{var st=O.ownerDocument||document,Y=st&&st.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),_t=O.textContent.length,wt=Math.min(B.start,_t),Jt=B.end===void 0?wt:Math.min(B.end,_t);!X.extend&&wt>Jt&&(R=Jt,Jt=wt,wt=R);var H=Ax(O,wt),z=Ax(O,Jt);if(H&&z&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==z.node||X.focusOffset!==z.offset)){var $=st.createRange();$.setStart(H.node,H.offset),X.removeAllRanges(),wt>Jt?(X.addRange($),X.extend(z.node,z.offset)):($.setEnd(z.node,z.offset),X.addRange($))}}}}for(st=[],X=O;X=X.parentNode;)X.nodeType===1&&st.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<st.length;O++){var et=st[O];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}rh=!!Rg,Mg=Rg=null}finally{Yt=y,I.p=p,j.T=d}}a.current=l,Ke=2}}function F1(){if(Ke===2){Ke=0;var a=Zi,l=ro,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=j.T,j.T=null;var p=I.p;I.p=2;var y=Yt;Yt|=4;try{m1(a,l.alternate,l)}finally{Yt=y,I.p=p,j.T=d}}Ke=3}}function B1(){if(Ke===4||Ke===3){Ke=0,_l();var a=Zi,l=ro,d=ao,p=T1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ke=5:(Ke=0,ro=Zi=null,U1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Qi=null),Lp(d),l=l.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(El,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=j.T,y=I.p,I.p=2,j.T=null;try{for(var x=a.onRecoverableError,R=0;R<p.length;R++){var O=p[R];x(O.value,{componentStack:O.stack})}}finally{j.T=l,I.p=y}}(ao&3)!==0&&Wd(),Bs(a),y=a.pendingLanes,(d&4194090)!==0&&(y&42)!==0?a===pg?cc++:(cc=0,pg=a):cc=0,uc(0)}}function U1(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Vl(l)))}function Wd(a){return I1(),F1(),B1(),z1()}function z1(){if(Ke!==5)return!1;var a=Zi,l=hg;hg=0;var d=Lp(ao),p=j.T,y=I.p;try{I.p=32>d?32:d,j.T=null,d=fg,fg=null;var x=Zi,R=ao;if(Ke=0,ro=Zi=null,ao=0,(Yt&6)!==0)throw Error(s(331));var O=Yt;if(Yt|=4,_1(x.current),x1(x,x.current,R,d),Yt=O,uc(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(El,x)}catch{}return!0}finally{I.p=y,j.T=p,U1(a,l)}}function H1(a,l,d){l=Zn(d,l),l=qm(a.stateNode,l,2),a=Hi(a,l,2),a!==null&&(Cl(a,2),Bs(a))}function ee(a,l,d){if(a.tag===3)H1(a,a,d);else for(;l!==null;){if(l.tag===3){H1(l,a,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Qi===null||!Qi.has(p))){a=Zn(d,a),d=qS(2),p=Hi(l,d,2),p!==null&&(WS(d,p,l,a),Cl(p,2),Bs(p));break}}l=l.return}}function vg(a,l,d){var p=a.pingCache;if(p===null){p=a.pingCache=new BL;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(d)||(lg=!0,y.add(d),a=$L.bind(null,a,l,d),l.then(a,a))}function $L(a,l,d){var p=a.pingCache;p!==null&&p.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,ne===a&&($t&d)===d&&(me===4||me===3&&($t&62914560)===$t&&300>wn()-dg?(Yt&2)===0&&oo(a,0):cg|=d,io===$t&&(io=0)),Bs(a)}function V1(a,l){l===0&&(l=Bw()),a=Va(a,l),a!==null&&(Cl(a,l),Bs(a))}function GL(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),V1(a,d)}function qL(a,l){var d=0;switch(a.tag){case 13:var p=a.stateNode,y=a.memoizedState;y!==null&&(d=y.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(l),V1(a,d)}function WL(a,l){return Oe(a,l)}var Kd=null,co=null,bg=!1,Yd=!1,wg=!1,Yr=0;function Bs(a){a!==co&&a.next===null&&(co===null?Kd=co=a:co=co.next=a),Yd=!0,bg||(bg=!0,YL())}function uc(a,l){if(!wg&&Yd){wg=!0;do for(var d=!1,p=Kd;p!==null;){if(a!==0){var y=p.pendingLanes;if(y===0)var x=0;else{var R=p.suspendedLanes,O=p.pingedLanes;x=(1<<31-jn(42|a)+1)-1,x&=y&~(R&~O),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(d=!0,W1(p,x))}else x=$t,x=ed(p,p===ne?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||Tl(p,x)||(d=!0,W1(p,x));p=p.next}while(d);wg=!1}}function KL(){$1()}function $1(){Yd=bg=!1;var a=0;Yr!==0&&(sj()&&(a=Yr),Yr=0);for(var l=wn(),d=null,p=Kd;p!==null;){var y=p.next,x=G1(p,l);x===0?(p.next=null,d===null?Kd=y:d.next=y,y===null&&(co=d)):(d=p,(a!==0||(x&3)!==0)&&(Yd=!0)),p=y}uc(a)}function G1(a,l){for(var d=a.suspendedLanes,p=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var R=31-jn(x),O=1<<R,B=y[R];B===-1?((O&d)===0||(O&p)!==0)&&(y[R]=wN(O,l)):B<=l&&(a.expiredLanes|=O),x&=~O}if(l=ne,d=$t,d=ed(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,d===0||a===l&&(Xt===2||Xt===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&Nn(p),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Tl(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(p!==null&&Nn(p),Lp(d)){case 2:case 8:d=jw;break;case 32:d=Zu;break;case 268435456:d=Iw;break;default:d=Zu}return p=q1.bind(null,a),d=Oe(d,p),a.callbackPriority=l,a.callbackNode=d,l}return p!==null&&p!==null&&Nn(p),a.callbackPriority=2,a.callbackNode=null,2}function q1(a,l){if(Ke!==0&&Ke!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Wd()&&a.callbackNode!==d)return null;var p=$t;return p=ed(a,a===ne?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(R1(a,p,l),G1(a,wn()),a.callbackNode!=null&&a.callbackNode===d?q1.bind(null,a):null)}function W1(a,l){if(Wd())return null;R1(a,l,!0)}function YL(){rj(function(){(Yt&6)!==0?Oe(Lw,KL):$1()})}function xg(){return Yr===0&&(Yr=Fw()),Yr}function K1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ad(""+a)}function Y1(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function XL(a,l,d,p,y){if(l==="submit"&&d&&d.stateNode===y){var x=K1((y[xn]||null).action),R=p.submitter;R&&(l=(l=R[xn]||null)?K1(l.formAction):R.getAttribute("formAction"),l!==null&&(x=l,R=null));var O=new ud("action","action",null,p,y);a.push({event:O,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Yr!==0){var B=R?Y1(y,R):new FormData(y);zm(d,{pending:!0,data:B,method:y.method,action:x},null,B)}}else typeof x=="function"&&(O.preventDefault(),B=R?Y1(y,R):new FormData(y),zm(d,{pending:!0,data:B,method:y.method,action:x},x,B))},currentTarget:y}]})}}for(var Sg=0;Sg<am.length;Sg++){var Ag=am[Sg],QL=Ag.toLowerCase(),ZL=Ag[0].toUpperCase()+Ag.slice(1);bs(QL,"on"+ZL)}bs(Rx,"onAnimationEnd"),bs(Mx,"onAnimationIteration"),bs(Px,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(mL,"onTransitionRun"),bs(gL,"onTransitionStart"),bs(yL,"onTransitionCancel"),bs(Ox,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function X1(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],y=p.event;p=p.listeners;t:{var x=void 0;if(l)for(var R=p.length-1;0<=R;R--){var O=p[R],B=O.instance,G=O.currentTarget;if(O=O.listener,B!==x&&y.isPropagationStopped())break t;x=O,y.currentTarget=G;try{x(y)}catch(tt){jd(tt)}y.currentTarget=null,x=B}else for(R=0;R<p.length;R++){if(O=p[R],B=O.instance,G=O.currentTarget,O=O.listener,B!==x&&y.isPropagationStopped())break t;x=O,y.currentTarget=G;try{x(y)}catch(tt){jd(tt)}y.currentTarget=null,x=B}}}}function Bt(a,l){var d=l[jp];d===void 0&&(d=l[jp]=new Set);var p=a+"__bubble";d.has(p)||(Q1(l,a,2,!1),d.add(p))}function _g(a,l,d){var p=0;l&&(p|=4),Q1(d,a,p,l)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Eg(a){if(!a[Xd]){a[Xd]=!0,$w.forEach(function(d){d!=="selectionchange"&&(JL.has(d)||_g(d,!1,a),_g(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Xd]||(l[Xd]=!0,_g("selectionchange",!1,l))}}function Q1(a,l,d,p){switch(xA(l)){case 2:var y=Tj;break;case 8:y=Cj;break;default:y=Bg}d=y.bind(null,l,d,a),y=void 0,!Wp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?a.addEventListener(l,d,{capture:!0,passive:y}):a.addEventListener(l,d,!0):y!==void 0?a.addEventListener(l,d,{passive:y}):a.addEventListener(l,d,!1)}function Tg(a,l,d,p,y){var x=p;if((l&1)===0&&(l&2)===0&&p!==null)t:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var O=p.stateNode.containerInfo;if(O===y)break;if(R===4)for(R=p.return;R!==null;){var B=R.tag;if((B===3||B===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;O!==null;){if(R=Pa(O),R===null)return;if(B=R.tag,B===5||B===6||B===26||B===27){p=x=R;continue t}O=O.parentNode}}p=p.return}ix(function(){var G=x,tt=Gp(d),st=[];t:{var Y=kx.get(a);if(Y!==void 0){var X=ud,_t=a;switch(a){case"keypress":if(ld(d)===0)break t;case"keydown":case"keyup":X=WN;break;case"focusin":_t="focus",X=Qp;break;case"focusout":_t="blur",X=Qp;break;case"beforeblur":case"afterblur":X=Qp;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ox;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=LN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=XN;break;case Rx:case Mx:case Px:X=FN;break;case Ox:X=ZN;break;case"scroll":case"scrollend":X=DN;break;case"wheel":X=tL;break;case"copy":case"cut":case"paste":X=UN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=cx;break;case"toggle":case"beforetoggle":X=nL}var wt=(l&4)!==0,Jt=!wt&&(a==="scroll"||a==="scrollend"),H=wt?Y!==null?Y+"Capture":null:Y;wt=[];for(var z=G,$;z!==null;){var et=z;if($=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||$===null||H===null||(et=Pl(z,H),et!=null&&wt.push(hc(z,et,$))),Jt)break;z=z.return}0<wt.length&&(Y=new X(Y,_t,null,d,tt),st.push({event:Y,listeners:wt}))}}if((l&7)===0){t:{if(Y=a==="mouseover"||a==="pointerover",X=a==="mouseout"||a==="pointerout",Y&&d!==$p&&(_t=d.relatedTarget||d.fromElement)&&(Pa(_t)||_t[Ma]))break t;if((X||Y)&&(Y=tt.window===tt?tt:(Y=tt.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(_t=d.relatedTarget||d.toElement,X=G,_t=_t?Pa(_t):null,_t!==null&&(Jt=r(_t),wt=_t.tag,_t!==Jt||wt!==5&&wt!==27&&wt!==6)&&(_t=null)):(X=null,_t=G),X!==_t)){if(wt=ox,et="onMouseLeave",H="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(wt=cx,et="onPointerLeave",H="onPointerEnter",z="pointer"),Jt=X==null?Y:Ml(X),$=_t==null?Y:Ml(_t),Y=new wt(et,z+"leave",X,d,tt),Y.target=Jt,Y.relatedTarget=$,et=null,Pa(tt)===G&&(wt=new wt(H,z+"enter",_t,d,tt),wt.target=$,wt.relatedTarget=Jt,et=wt),Jt=et,X&&_t)e:{for(wt=X,H=_t,z=0,$=wt;$;$=uo($))z++;for($=0,et=H;et;et=uo(et))$++;for(;0<z-$;)wt=uo(wt),z--;for(;0<$-z;)H=uo(H),$--;for(;z--;){if(wt===H||H!==null&&wt===H.alternate)break e;wt=uo(wt),H=uo(H)}wt=null}else wt=null;X!==null&&Z1(st,Y,X,wt,!1),_t!==null&&Jt!==null&&Z1(st,Jt,_t,wt,!0)}}t:{if(Y=G?Ml(G):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var pt=yx;else if(mx(Y))if(vx)pt=hL;else{pt=uL;var Dt=cL}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Vp(G.elementType)&&(pt=yx):pt=dL;if(pt&&(pt=pt(a,G))){gx(st,pt,d,tt);break t}Dt&&Dt(a,Y,G),a==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Hp(Y,"number",Y.value)}switch(Dt=G?Ml(G):window,a){case"focusin":(mx(Dt)||Dt.contentEditable==="true")&&(Ua=Dt,sm=G,Fl=null);break;case"focusout":Fl=sm=Ua=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,Tx(st,d,tt);break;case"selectionchange":if(pL)break;case"keydown":case"keyup":Tx(st,d,tt)}var vt;if(Jp)t:{switch(a){case"compositionstart":var St="onCompositionStart";break t;case"compositionend":St="onCompositionEnd";break t;case"compositionupdate":St="onCompositionUpdate";break t}St=void 0}else Ba?fx(a,d)&&(St="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(St="onCompositionStart");St&&(ux&&d.locale!=="ko"&&(Ba||St!=="onCompositionStart"?St==="onCompositionEnd"&&Ba&&(vt=rx()):(Fi=tt,Kp="value"in Fi?Fi.value:Fi.textContent,Ba=!0)),Dt=Qd(G,St),0<Dt.length&&(St=new lx(St,a,null,d,tt),st.push({event:St,listeners:Dt}),vt?St.data=vt:(vt=px(d),vt!==null&&(St.data=vt)))),(vt=iL?rL(a,d):aL(a,d))&&(St=Qd(G,"onBeforeInput"),0<St.length&&(Dt=new lx("onBeforeInput","beforeinput",null,d,tt),st.push({event:Dt,listeners:St}),Dt.data=vt)),XL(st,a,G,d,tt)}X1(st,l)})}function hc(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Qd(a,l){for(var d=l+"Capture",p=[];a!==null;){var y=a,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=Pl(a,d),y!=null&&p.unshift(hc(a,y,x)),y=Pl(a,l),y!=null&&p.push(hc(a,y,x))),a.tag===3)return p;a=a.return}return[]}function uo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Z1(a,l,d,p,y){for(var x=l._reactName,R=[];d!==null&&d!==p;){var O=d,B=O.alternate,G=O.stateNode;if(O=O.tag,B!==null&&B===p)break;O!==5&&O!==26&&O!==27||G===null||(B=G,y?(G=Pl(d,x),G!=null&&R.unshift(hc(d,G,B))):y||(G=Pl(d,x),G!=null&&R.push(hc(d,G,B)))),d=d.return}R.length!==0&&a.push({event:l,listeners:R})}var tj=/\r\n?/g,ej=/\u0000|\uFFFD/g;function J1(a){return(typeof a=="string"?a:""+a).replace(tj,`
`).replace(ej,"")}function tA(a,l){return l=J1(l),J1(a)===l}function Zd(){}function Zt(a,l,d,p,y,x){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||ja(a,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&ja(a,""+p);break;case"className":sd(a,"class",p);break;case"tabIndex":sd(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":sd(a,d,p);break;case"style":nx(a,p,x);break;case"data":if(l!=="object"){sd(a,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=ad(""+p),a.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(d==="formAction"?(l!=="input"&&Zt(a,l,"name",y.name,y,null),Zt(a,l,"formEncType",y.formEncType,y,null),Zt(a,l,"formMethod",y.formMethod,y,null),Zt(a,l,"formTarget",y.formTarget,y,null)):(Zt(a,l,"encType",y.encType,y,null),Zt(a,l,"method",y.method,y,null),Zt(a,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=ad(""+p),a.setAttribute(d,p);break;case"onClick":p!=null&&(a.onclick=Zd);break;case"onScroll":p!=null&&Bt("scroll",a);break;case"onScrollEnd":p!=null&&Bt("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(d=p.__html,d!=null){if(y.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}d=ad(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""+p):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":p===!0?a.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,p):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(d,p):a.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(d):a.setAttribute(d,p);break;case"popover":Bt("beforetoggle",a),Bt("toggle",a),nd(a,"popover",p);break;case"xlinkActuate":ri(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ri(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ri(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ri(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ri(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ri(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ri(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ri(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ri(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":nd(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ON.get(d)||d,nd(a,d,p))}}function Cg(a,l,d,p,y,x){switch(d){case"style":nx(a,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(d=p.__html,d!=null){if(y.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"children":typeof p=="string"?ja(a,p):(typeof p=="number"||typeof p=="bigint")&&ja(a,""+p);break;case"onScroll":p!=null&&Bt("scroll",a);break;case"onScrollEnd":p!=null&&Bt("scrollend",a);break;case"onClick":p!=null&&(a.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gw.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),l=d.slice(2,y?d.length-7:void 0),x=a[xn]||null,x=x!=null?x[d]:null,typeof x=="function"&&a.removeEventListener(l,x,y),typeof p=="function")){typeof x!="function"&&x!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,p,y);break t}d in a?a[d]=p:p===!0?a.setAttribute(d,""):nd(a,d,p)}}}function Ye(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",a),Bt("load",a);var p=!1,y=!1,x;for(x in d)if(d.hasOwnProperty(x)){var R=d[x];if(R!=null)switch(x){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Zt(a,l,x,R,d,null)}}y&&Zt(a,l,"srcSet",d.srcSet,d,null),p&&Zt(a,l,"src",d.src,d,null);return;case"input":Bt("invalid",a);var O=x=R=y=null,B=null,G=null;for(p in d)if(d.hasOwnProperty(p)){var tt=d[p];if(tt!=null)switch(p){case"name":y=tt;break;case"type":R=tt;break;case"checked":B=tt;break;case"defaultChecked":G=tt;break;case"value":x=tt;break;case"defaultValue":O=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(s(137,l));break;default:Zt(a,l,p,tt,d,null)}}Zw(a,x,O,B,G,R,y,!1),id(a);return;case"select":Bt("invalid",a),p=R=x=null;for(y in d)if(d.hasOwnProperty(y)&&(O=d[y],O!=null))switch(y){case"value":x=O;break;case"defaultValue":R=O;break;case"multiple":p=O;default:Zt(a,l,y,O,d,null)}l=x,d=R,a.multiple=!!p,l!=null?La(a,!!p,l,!1):d!=null&&La(a,!!p,d,!0);return;case"textarea":Bt("invalid",a),x=y=p=null;for(R in d)if(d.hasOwnProperty(R)&&(O=d[R],O!=null))switch(R){case"value":p=O;break;case"defaultValue":y=O;break;case"children":x=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(91));break;default:Zt(a,l,R,O,d,null)}tx(a,p,y,x),id(a);return;case"option":for(B in d)if(d.hasOwnProperty(B)&&(p=d[B],p!=null))switch(B){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Zt(a,l,B,p,d,null)}return;case"dialog":Bt("beforetoggle",a),Bt("toggle",a),Bt("cancel",a),Bt("close",a);break;case"iframe":case"object":Bt("load",a);break;case"video":case"audio":for(p=0;p<dc.length;p++)Bt(dc[p],a);break;case"image":Bt("error",a),Bt("load",a);break;case"details":Bt("toggle",a);break;case"embed":case"source":case"link":Bt("error",a),Bt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in d)if(d.hasOwnProperty(G)&&(p=d[G],p!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Zt(a,l,G,p,d,null)}return;default:if(Vp(l)){for(tt in d)d.hasOwnProperty(tt)&&(p=d[tt],p!==void 0&&Cg(a,l,tt,p,d,void 0));return}}for(O in d)d.hasOwnProperty(O)&&(p=d[O],p!=null&&Zt(a,l,O,p,d,null))}function nj(a,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,R=null,O=null,B=null,G=null,tt=null;for(X in d){var st=d[X];if(d.hasOwnProperty(X)&&st!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":B=st;default:p.hasOwnProperty(X)||Zt(a,l,X,null,p,st)}}for(var Y in p){var X=p[Y];if(st=d[Y],p.hasOwnProperty(Y)&&(X!=null||st!=null))switch(Y){case"type":x=X;break;case"name":y=X;break;case"checked":G=X;break;case"defaultChecked":tt=X;break;case"value":R=X;break;case"defaultValue":O=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,l));break;default:X!==st&&Zt(a,l,Y,X,p,st)}}zp(a,R,O,B,G,tt,x,y);return;case"select":X=R=O=Y=null;for(x in d)if(B=d[x],d.hasOwnProperty(x)&&B!=null)switch(x){case"value":break;case"multiple":X=B;default:p.hasOwnProperty(x)||Zt(a,l,x,null,p,B)}for(y in p)if(x=p[y],B=d[y],p.hasOwnProperty(y)&&(x!=null||B!=null))switch(y){case"value":Y=x;break;case"defaultValue":O=x;break;case"multiple":R=x;default:x!==B&&Zt(a,l,y,x,p,B)}l=O,d=R,p=X,Y!=null?La(a,!!d,Y,!1):!!p!=!!d&&(l!=null?La(a,!!d,l,!0):La(a,!!d,d?[]:"",!1));return;case"textarea":X=Y=null;for(O in d)if(y=d[O],d.hasOwnProperty(O)&&y!=null&&!p.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Zt(a,l,O,null,p,y)}for(R in p)if(y=p[R],x=d[R],p.hasOwnProperty(R)&&(y!=null||x!=null))switch(R){case"value":Y=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==x&&Zt(a,l,R,y,p,x)}Jw(a,Y,X);return;case"option":for(var _t in d)if(Y=d[_t],d.hasOwnProperty(_t)&&Y!=null&&!p.hasOwnProperty(_t))switch(_t){case"selected":a.selected=!1;break;default:Zt(a,l,_t,null,p,Y)}for(B in p)if(Y=p[B],X=d[B],p.hasOwnProperty(B)&&Y!==X&&(Y!=null||X!=null))switch(B){case"selected":a.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Zt(a,l,B,Y,p,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in d)Y=d[wt],d.hasOwnProperty(wt)&&Y!=null&&!p.hasOwnProperty(wt)&&Zt(a,l,wt,null,p,Y);for(G in p)if(Y=p[G],X=d[G],p.hasOwnProperty(G)&&Y!==X&&(Y!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,l));break;default:Zt(a,l,G,Y,p,X)}return;default:if(Vp(l)){for(var Jt in d)Y=d[Jt],d.hasOwnProperty(Jt)&&Y!==void 0&&!p.hasOwnProperty(Jt)&&Cg(a,l,Jt,void 0,p,Y);for(tt in p)Y=p[tt],X=d[tt],!p.hasOwnProperty(tt)||Y===X||Y===void 0&&X===void 0||Cg(a,l,tt,Y,p,X);return}}for(var H in d)Y=d[H],d.hasOwnProperty(H)&&Y!=null&&!p.hasOwnProperty(H)&&Zt(a,l,H,null,p,Y);for(st in p)Y=p[st],X=d[st],!p.hasOwnProperty(st)||Y===X||Y==null&&X==null||Zt(a,l,st,Y,p,X)}var Rg=null,Mg=null;function Jd(a){return a.nodeType===9?a:a.ownerDocument}function eA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nA(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function Pg(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Og=null;function sj(){var a=window.event;return a&&a.type==="popstate"?a===Og?!1:(Og=a,!0):(Og=null,!1)}var sA=typeof setTimeout=="function"?setTimeout:void 0,ij=typeof clearTimeout=="function"?clearTimeout:void 0,iA=typeof Promise=="function"?Promise:void 0,rj=typeof queueMicrotask=="function"?queueMicrotask:typeof iA<"u"?function(a){return iA.resolve(null).then(a).catch(aj)}:sA;function aj(a){setTimeout(function(){throw a})}function tr(a){return a==="head"}function rA(a,l){var d=l,p=0,y=0;do{var x=d.nextSibling;if(a.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(0<p&&8>p){d=p;var R=a.ownerDocument;if(d&1&&fc(R.documentElement),d&2&&fc(R.body),d&4)for(d=R.head,fc(d),R=d.firstChild;R;){var O=R.nextSibling,B=R.nodeName;R[Rl]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&R.rel.toLowerCase()==="stylesheet"||d.removeChild(R),R=O}}if(y===0){a.removeChild(x),xc(l);return}y--}else d==="$"||d==="$?"||d==="$!"?y++:p=d.charCodeAt(0)-48;else p=0;d=x}while(d);xc(l)}function kg(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":kg(d),Ip(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function oj(a,l,d,p){for(;a.nodeType===1;){var y=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Rl])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=xs(a.nextSibling),a===null)break}return null}function lj(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=xs(a.nextSibling),a===null))return null;return a}function Dg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function cj(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function xs(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var Ng=null;function aA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function oA(a,l,d){switch(l=Jd(d),a){case"html":if(a=l.documentElement,!a)throw Error(s(452));return a;case"head":if(a=l.head,!a)throw Error(s(453));return a;case"body":if(a=l.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function fc(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Ip(a)}var is=new Map,lA=new Set;function th(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var bi=I.d;I.d={f:uj,r:dj,D:hj,C:fj,L:pj,m:mj,X:yj,S:gj,M:vj};function uj(){var a=bi.f(),l=Gd();return a||l}function dj(a){var l=Oa(a);l!==null&&l.tag===5&&l.type==="form"?RS(l):bi.r(a)}var ho=typeof document>"u"?null:document;function cA(a,l,d){var p=ho;if(p&&typeof l=="string"&&l){var y=Qn(l);y='link[rel="'+a+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),lA.has(y)||(lA.add(y),a={rel:a,crossOrigin:d,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),Ye(l,"link",a),Fe(l),p.head.appendChild(l)))}}function hj(a){bi.D(a),cA("dns-prefetch",a,null)}function fj(a,l){bi.C(a,l),cA("preconnect",a,l)}function pj(a,l,d){bi.L(a,l,d);var p=ho;if(p&&a&&l){var y='link[rel="preload"][as="'+Qn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+Qn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+Qn(d.imageSizes)+'"]')):y+='[href="'+Qn(a)+'"]';var x=y;switch(l){case"style":x=fo(a);break;case"script":x=po(a)}is.has(x)||(a=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),is.set(x,a),p.querySelector(y)!==null||l==="style"&&p.querySelector(pc(x))||l==="script"&&p.querySelector(mc(x))||(l=p.createElement("link"),Ye(l,"link",a),Fe(l),p.head.appendChild(l)))}}function mj(a,l){bi.m(a,l);var d=ho;if(d&&a){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Qn(p)+'"][href="'+Qn(a)+'"]',x=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=po(a)}if(!is.has(x)&&(a=f({rel:"modulepreload",href:a},l),is.set(x,a),d.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(mc(x)))return}p=d.createElement("link"),Ye(p,"link",a),Fe(p),d.head.appendChild(p)}}}function gj(a,l,d){bi.S(a,l,d);var p=ho;if(p&&a){var y=ka(p).hoistableStyles,x=fo(a);l=l||"default";var R=y.get(x);if(!R){var O={loading:0,preload:null};if(R=p.querySelector(pc(x)))O.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":l},d),(d=is.get(x))&&Lg(a,d);var B=R=p.createElement("link");Fe(B),Ye(B,"link",a),B._p=new Promise(function(G,tt){B.onload=G,B.onerror=tt}),B.addEventListener("load",function(){O.loading|=1}),B.addEventListener("error",function(){O.loading|=2}),O.loading|=4,eh(R,l,p)}R={type:"stylesheet",instance:R,count:1,state:O},y.set(x,R)}}}function yj(a,l){bi.X(a,l);var d=ho;if(d&&a){var p=ka(d).hoistableScripts,y=po(a),x=p.get(y);x||(x=d.querySelector(mc(y)),x||(a=f({src:a,async:!0},l),(l=is.get(y))&&jg(a,l),x=d.createElement("script"),Fe(x),Ye(x,"link",a),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function vj(a,l){bi.M(a,l);var d=ho;if(d&&a){var p=ka(d).hoistableScripts,y=po(a),x=p.get(y);x||(x=d.querySelector(mc(y)),x||(a=f({src:a,async:!0,type:"module"},l),(l=is.get(y))&&jg(a,l),x=d.createElement("script"),Fe(x),Ye(x,"link",a),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function uA(a,l,d,p){var y=(y=ut.current)?th(y):null;if(!y)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=fo(d.href),d=ka(y).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=fo(d.href);var x=ka(y).hoistableStyles,R=x.get(a);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,R),(x=y.querySelector(pc(a)))&&!x._p&&(R.instance=x,R.state.loading=5),is.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},is.set(a,d),x||bj(y,a,d,R.state))),l&&p===null)throw Error(s(528,""));return R}if(l&&p!==null)throw Error(s(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=po(d),d=ka(y).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function fo(a){return'href="'+Qn(a)+'"'}function pc(a){return'link[rel="stylesheet"]['+a+"]"}function dA(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function bj(a,l,d,p){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=a.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Ye(l,"link",d),Fe(l),a.head.appendChild(l))}function po(a){return'[src="'+Qn(a)+'"]'}function mc(a){return"script[async]"+a}function hA(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=a.querySelector('style[data-href~="'+Qn(d.href)+'"]');if(p)return l.instance=p,Fe(p),p;var y=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Fe(p),Ye(p,"style",y),eh(p,d.precedence,a),l.instance=p;case"stylesheet":y=fo(d.href);var x=a.querySelector(pc(y));if(x)return l.state.loading|=4,l.instance=x,Fe(x),x;p=dA(d),(y=is.get(y))&&Lg(p,y),x=(a.ownerDocument||a).createElement("link"),Fe(x);var R=x;return R._p=new Promise(function(O,B){R.onload=O,R.onerror=B}),Ye(x,"link",p),l.state.loading|=4,eh(x,d.precedence,a),l.instance=x;case"script":return x=po(d.src),(y=a.querySelector(mc(x)))?(l.instance=y,Fe(y),y):(p=d,(y=is.get(x))&&(p=f({},d),jg(p,y)),a=a.ownerDocument||a,y=a.createElement("script"),Fe(y),Ye(y,"link",p),a.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,eh(p,d.precedence,a));return l.instance}function eh(a,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,x=y,R=0;R<p.length;R++){var O=p[R];if(O.dataset.precedence===l)x=O;else if(x!==y)break}x?x.parentNode.insertBefore(a,x.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function Lg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function jg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var nh=null;function fA(a,l,d){if(nh===null){var p=new Map,y=nh=new Map;y.set(d,p)}else y=nh,p=y.get(d),p||(p=new Map,y.set(d,p));if(p.has(a))return p;for(p.set(a,null),d=d.getElementsByTagName(a),y=0;y<d.length;y++){var x=d[y];if(!(x[Rl]||x[rn]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var R=x.getAttribute(l)||"";R=a+R;var O=p.get(R);O?O.push(x):p.set(R,[x])}}return p}function pA(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function wj(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function mA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var gc=null;function xj(){}function Sj(a,l,d){if(gc===null)throw Error(s(475));var p=gc;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=fo(d.href),x=a.querySelector(pc(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(p.count++,p=sh.bind(p),a.then(p,p)),l.state.loading|=4,l.instance=x,Fe(x);return}x=a.ownerDocument||a,d=dA(d),(y=is.get(y))&&Lg(d,y),x=x.createElement("link"),Fe(x);var R=x;R._p=new Promise(function(O,B){R.onload=O,R.onerror=B}),Ye(x,"link",d),l.instance=x}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=sh.bind(p),a.addEventListener("load",l),a.addEventListener("error",l))}}function Aj(){if(gc===null)throw Error(s(475));var a=gc;return a.stylesheets&&a.count===0&&Ig(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&Ig(a,a.stylesheets),a.unsuspend){var p=a.unsuspend;a.unsuspend=null,p()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function sh(){if(this.count--,this.count===0){if(this.stylesheets)Ig(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ih=null;function Ig(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ih=new Map,l.forEach(_j,a),ih=null,sh.call(a))}function _j(a,l){if(!(l.state.loading&4)){var d=ih.get(a);if(d)var p=d.get(null);else{d=new Map,ih.set(a,d);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var R=y[x];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(d.set(R.dataset.precedence,R),p=R)}p&&d.set(null,p)}y=l.instance,R=y.getAttribute("data-precedence"),x=d.get(R)||p,x===p&&d.set(null,y),d.set(R,y),this.count++,p=sh.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),x?x.parentNode.insertBefore(y,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),l.state.loading|=4}}var yc={$$typeof:T,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Ej(a,l,d,p,y,x,R,O){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dp(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.hiddenUpdates=Dp(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function gA(a,l,d,p,y,x,R,O,B,G,tt,st){return a=new Ej(a,l,d,R,O,B,G,st),l=1,x===!0&&(l|=24),x=Fn(3,null,null,l),a.current=x,x.stateNode=a,l=vm(),l.refCount++,a.pooledCache=l,l.refCount++,x.memoizedState={element:p,isDehydrated:d,cache:l},Sm(x),a}function yA(a){return a?(a=$a,a):$a}function vA(a,l,d,p,y,x){y=yA(y),p.context===null?p.context=y:p.pendingContext=y,p=zi(l),p.payload={element:d},x=x===void 0?null:x,x!==null&&(p.callback=x),d=Hi(a,p,l),d!==null&&(Vn(d,a,l),Wl(d,a,l))}function bA(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function Fg(a,l){bA(a,l),(a=a.alternate)&&bA(a,l)}function wA(a){if(a.tag===13){var l=Va(a,67108864);l!==null&&Vn(l,a,67108864),Fg(a,67108864)}}var rh=!0;function Tj(a,l,d,p){var y=j.T;j.T=null;var x=I.p;try{I.p=2,Bg(a,l,d,p)}finally{I.p=x,j.T=y}}function Cj(a,l,d,p){var y=j.T;j.T=null;var x=I.p;try{I.p=8,Bg(a,l,d,p)}finally{I.p=x,j.T=y}}function Bg(a,l,d,p){if(rh){var y=Ug(p);if(y===null)Tg(a,l,p,ah,d),SA(a,p);else if(Mj(y,a,l,d,p))p.stopPropagation();else if(SA(a,p),l&4&&-1<Rj.indexOf(a)){for(;y!==null;){var x=Oa(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var R=kr(x.pendingLanes);if(R!==0){var O=x;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var B=1<<31-jn(R);O.entanglements[1]|=B,R&=~B}Bs(x),(Yt&6)===0&&(Vd=wn()+500,uc(0))}}break;case 13:O=Va(x,2),O!==null&&Vn(O,x,2),Gd(),Fg(x,2)}if(x=Ug(p),x===null&&Tg(a,l,p,ah,d),x===y)break;y=x}y!==null&&p.stopPropagation()}else Tg(a,l,p,null,d)}}function Ug(a){return a=Gp(a),zg(a)}var ah=null;function zg(a){if(ah=null,a=Pa(a),a!==null){var l=r(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=o(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return ah=a,null}function xA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fN()){case Lw:return 2;case jw:return 8;case Zu:case pN:return 32;case Iw:return 268435456;default:return 32}default:return 32}}var Hg=!1,er=null,nr=null,sr=null,vc=new Map,bc=new Map,ir=[],Rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SA(a,l){switch(a){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":vc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(l.pointerId)}}function wc(a,l,d,p,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},l!==null&&(l=Oa(l),l!==null&&wA(l)),a):(a.eventSystemFlags|=p,l=a.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),a)}function Mj(a,l,d,p,y){switch(l){case"focusin":return er=wc(er,a,l,d,p,y),!0;case"dragenter":return nr=wc(nr,a,l,d,p,y),!0;case"mouseover":return sr=wc(sr,a,l,d,p,y),!0;case"pointerover":var x=y.pointerId;return vc.set(x,wc(vc.get(x)||null,a,l,d,p,y)),!0;case"gotpointercapture":return x=y.pointerId,bc.set(x,wc(bc.get(x)||null,a,l,d,p,y)),!0}return!1}function AA(a){var l=Pa(a.target);if(l!==null){var d=r(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){a.blockedOn=l,SN(a.priority,function(){if(d.tag===13){var p=Hn();p=Np(p);var y=Va(d,p);y!==null&&Vn(y,d,p),Fg(d,p)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function oh(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=Ug(a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);$p=p,d.target.dispatchEvent(p),$p=null}else return l=Oa(d),l!==null&&wA(l),a.blockedOn=d,!1;l.shift()}return!0}function _A(a,l,d){oh(a)&&d.delete(l)}function Pj(){Hg=!1,er!==null&&oh(er)&&(er=null),nr!==null&&oh(nr)&&(nr=null),sr!==null&&oh(sr)&&(sr=null),vc.forEach(_A),bc.forEach(_A)}function lh(a,l){a.blockedOn===l&&(a.blockedOn=null,Hg||(Hg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Pj)))}var ch=null;function EA(a){ch!==a&&(ch=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ch===a&&(ch=null);for(var l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],y=a[l+2];if(typeof p!="function"){if(zg(p||d)===null)continue;break}var x=Oa(d);x!==null&&(a.splice(l,3),l-=3,zm(x,{pending:!0,data:y,method:d.method,action:p},p,y))}}))}function xc(a){function l(B){return lh(B,a)}er!==null&&lh(er,a),nr!==null&&lh(nr,a),sr!==null&&lh(sr,a),vc.forEach(l),bc.forEach(l);for(var d=0;d<ir.length;d++){var p=ir[d];p.blockedOn===a&&(p.blockedOn=null)}for(;0<ir.length&&(d=ir[0],d.blockedOn===null);)AA(d),d.blockedOn===null&&ir.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var y=d[p],x=d[p+1],R=y[xn]||null;if(typeof x=="function")R||EA(d);else if(R){var O=null;if(x&&x.hasAttribute("formAction")){if(y=x,R=x[xn]||null)O=R.formAction;else if(zg(y)!==null)continue}else O=R.action;typeof O=="function"?d[p+1]=O:(d.splice(p,3),p-=3),EA(d)}}}function Vg(a){this._internalRoot=a}uh.prototype.render=Vg.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));var d=l.current,p=Hn();vA(d,p,a,l,null,null)},uh.prototype.unmount=Vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;vA(a.current,2,null,a,null,null),Gd(),l[Ma]=null}};function uh(a){this._internalRoot=a}uh.prototype.unstable_scheduleHydration=function(a){if(a){var l=Hw();a={blockedOn:null,target:a,priority:l};for(var d=0;d<ir.length&&l!==0&&l<ir[d].priority;d++);ir.splice(d,0,a),d===0&&AA(a)}};var TA=t.version;if(TA!=="19.1.1")throw Error(s(527,TA,"19.1.1"));I.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=u(l),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var Oj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{El=dh.inject(Oj),Ln=dh}catch{}}return Ac.createRoot=function(a,l){if(!i(a))throw Error(s(299));var d=!1,p="",y=HS,x=VS,R=$S,O=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=gA(a,1,!1,null,null,d,p,y,x,R,O,null),a[Ma]=l.current,Eg(a),new Vg(l)},Ac.hydrateRoot=function(a,l,d){if(!i(a))throw Error(s(299));var p=!1,y="",x=HS,R=VS,O=$S,B=null,G=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(x=d.onUncaughtError),d.onCaughtError!==void 0&&(R=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(B=d.unstable_transitionCallbacks),d.formState!==void 0&&(G=d.formState)),l=gA(a,1,!0,l,d??null,p,y,x,R,O,B,G),l.context=yA(null),d=l.current,p=Hn(),p=Np(p),y=zi(p),y.callback=null,Hi(d,y,p),d=p,l.current.lanes=d,Cl(l,d),Bs(l),a[Ma]=l.current,Eg(a),new uh(l)},Ac.version="19.1.1",Ac}var FA;function Hj(){if(FA)return Wg.exports;FA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Wg.exports=zj(),Wg.exports}var Vj=Hj();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BA="popstate";function $j(n={}){function t(s,i){let{pathname:r,search:o,hash:c}=s.location;return Zy("",{pathname:r,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(s,i){return typeof i=="string"?i:tu(i)}return qj(t,e,null,n)}function de(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Rs(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gj(){return Math.random().toString(36).substring(2,10)}function UA(n,t){return{usr:n.state,key:n.key,idx:t}}function Zy(n,t,e=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?il(t):t,state:e,key:t&&t.key||s||Gj()}}function tu({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function il(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let s=n.indexOf("?");s>=0&&(t.search=n.substring(s),n=n.substring(0,s)),n&&(t.pathname=n)}return t}function qj(n,t,e,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,c="POP",u=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let A=f(),E=A==null?null:A-h;h=A,u&&u({action:c,location:w.location,delta:E})}function g(A,E){c="PUSH";let C=Zy(w.location,A,E);h=f()+1;let T=UA(C,h),M=w.createHref(C);try{o.pushState(T,"",M)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(M)}r&&u&&u({action:c,location:w.location,delta:1})}function v(A,E){c="REPLACE";let C=Zy(w.location,A,E);h=f();let T=UA(C,h),M=w.createHref(C);o.replaceState(T,"",M),r&&u&&u({action:c,location:w.location,delta:0})}function b(A){return Wj(A)}let w={get action(){return c},get location(){return n(i,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(BA,m),u=A,()=>{i.removeEventListener(BA,m),u=null}},createHref(A){return t(i,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:v,go(A){return o.go(A)}};return w}function Wj(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),de(e,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:tu(n);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=e+s),new URL(s,e)}function HC(n,t,e="/"){return Kj(n,t,e,!1)}function Kj(n,t,e,s){let i=typeof t=="string"?il(t):t,r=Mi(i.pathname||"/",e);if(r==null)return null;let o=VC(n);Yj(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=aI(r);c=iI(o[u],h,s)}return c}function VC(n,t=[],e=[],s="",i=!1){let r=(o,c,u=i,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&u)return;de(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let m=Ri([s,f.relativePath]),g=e.concat(f);o.children&&o.children.length>0&&(de(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),VC(o.children,t,g,m,u)),!(o.path==null&&!o.index)&&t.push({path:m,score:nI(m,o.index),routesMeta:g})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))r(o,c);else for(let u of $C(o.path))r(o,c,!0,u)}),t}function $C(n){let t=n.split("/");if(t.length===0)return[];let[e,...s]=t,i=e.endsWith("?"),r=e.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=$C(s.join("/")),c=[];return c.push(...o.map(u=>u===""?r:[r,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function Yj(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:sI(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}var Xj=/^:[\w-]+$/,Qj=3,Zj=2,Jj=1,tI=10,eI=-2,zA=n=>n==="*";function nI(n,t){let e=n.split("/"),s=e.length;return e.some(zA)&&(s+=eI),t&&(s+=Zj),e.filter(i=>!zA(i)).reduce((i,r)=>i+(Xj.test(r)?Qj:r===""?Jj:tI),s)}function sI(n,t){return n.length===t.length&&n.slice(0,-1).every((s,i)=>s===t[i])?n[n.length-1]-t[t.length-1]:0}function iI(n,t,e=!1){let{routesMeta:s}=n,i={},r="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],h=c===s.length-1,f=r==="/"?t:t.slice(r.length)||"/",m=sf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),g=u.route;if(!m&&h&&e&&!s[s.length-1].route.index&&(m=sf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ri([r,m.pathname]),pathnameBase:uI(Ri([r,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(r=Ri([r,m.pathnameBase]))}return o}function sf(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,s]=rI(n.path,n.caseSensitive,n.end),i=t.match(e);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((h,{paramName:f,isOptional:m},g)=>{if(f==="*"){let b=c[g]||"";o=r.slice(0,r.length-b.length).replace(/(.)\/+$/,"$1")}const v=c[g];return m&&!v?h[f]=void 0:h[f]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:o,pattern:n}}function rI(n,t=!1,e=!0){Rs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function aI(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Mi(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=n.charAt(e);return s&&s!=="/"?null:n.slice(e)||"/"}function oI(n,t="/"){let{pathname:e,search:s="",hash:i=""}=typeof n=="string"?il(n):n;return{pathname:e?e.startsWith("/")?e:lI(e,t):t,search:dI(s),hash:hI(i)}}function lI(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Qg(n,t,e,s){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cI(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Eb(n){let t=cI(n);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function Tb(n,t,e,s=!1){let i;typeof n=="string"?i=il(n):(i={...n},de(!i.pathname||!i.pathname.includes("?"),Qg("?","pathname","search",i)),de(!i.pathname||!i.pathname.includes("#"),Qg("#","pathname","hash",i)),de(!i.search||!i.search.includes("#"),Qg("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,c;if(o==null)c=e;else{let m=t.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}c=m>=0?t[m]:"/"}let u=oI(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(r||o===".")&&e.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Ri=n=>n.join("/").replace(/\/\/+/g,"/"),uI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,hI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var GC=["POST","PUT","PATCH","DELETE"];new Set(GC);var pI=["GET",...GC];new Set(pI);var rl=_.createContext(null);rl.displayName="DataRouter";var Nf=_.createContext(null);Nf.displayName="DataRouterState";_.createContext(!1);var qC=_.createContext({isTransitioning:!1});qC.displayName="ViewTransition";var mI=_.createContext(new Map);mI.displayName="Fetchers";var gI=_.createContext(null);gI.displayName="Await";var Os=_.createContext(null);Os.displayName="Navigation";var vu=_.createContext(null);vu.displayName="Location";var gs=_.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var Cb=_.createContext(null);Cb.displayName="RouteError";function yI(n,{relative:t}={}){de(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:s}=_.useContext(Os),{hash:i,pathname:r,search:o}=bu(n,{relative:t}),c=r;return e!=="/"&&(c=r==="/"?e:Ri([e,r])),s.createHref({pathname:c,search:o,hash:i})}function al(){return _.useContext(vu)!=null}function Er(){return de(al(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(vu).location}var WC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KC(n){_.useContext(Os).static||_.useLayoutEffect(n)}function nn(){let{isDataRoute:n}=_.useContext(gs);return n?kI():vI()}function vI(){de(al(),"useNavigate() may be used only in the context of a <Router> component.");let n=_.useContext(rl),{basename:t,navigator:e}=_.useContext(Os),{matches:s}=_.useContext(gs),{pathname:i}=Er(),r=JSON.stringify(Eb(s)),o=_.useRef(!1);return KC(()=>{o.current=!0}),_.useCallback((u,h={})=>{if(Rs(o.current,WC),!o.current)return;if(typeof u=="number"){e.go(u);return}let f=Tb(u,JSON.parse(r),i,h.relative==="path");n==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ri([t,f.pathname])),(h.replace?e.replace:e.push)(f,h.state,h)},[t,e,r,i,n])}var bI=_.createContext(null);function wI(n){let t=_.useContext(gs).outlet;return t&&_.createElement(bI.Provider,{value:n},t)}function Rb(){let{matches:n}=_.useContext(gs),t=n[n.length-1];return t?t.params:{}}function bu(n,{relative:t}={}){let{matches:e}=_.useContext(gs),{pathname:s}=Er(),i=JSON.stringify(Eb(e));return _.useMemo(()=>Tb(n,JSON.parse(i),s,t==="path"),[n,i,s,t])}function xI(n,t){return YC(n,t)}function YC(n,t,e,s,i){de(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=_.useContext(Os),{matches:o}=_.useContext(gs),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let C=m&&m.path||"";XC(h,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=Er(),v;if(t){let C=typeof t=="string"?il(t):t;de(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=g;let b=v.pathname||"/",w=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=HC(n,{pathname:w});Rs(m||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Rs(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=TI(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Ri([f,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ri([f,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,e,s,i);return t&&E?_.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function SI(){let n=OI(),t=fI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:r},"ErrorBoundary")," or"," ",_.createElement("code",{style:r},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),e?_.createElement("pre",{style:i},e):null,o)}var AI=_.createElement(SI,null),_I=class extends _.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.unstable_onError?this.props.unstable_onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?_.createElement(gs.Provider,{value:this.props.routeContext},_.createElement(Cb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EI({routeContext:n,match:t,children:e}){let s=_.useContext(rl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(gs.Provider,{value:n},e)}function TI(n,t=[],e=null,s=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let r=n,o=e?.errors;if(o!=null){let h=r.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);de(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let c=!1,u=-1;if(e)for(let h=0;h<r.length;h++){let f=r[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:g}=e,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((h,f,m)=>{let g,v=!1,b=null,w=null;e&&(g=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||AI,c&&(u<0&&m===0?(XC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):u===m&&(v=!0,w=f.route.hydrateFallbackElement||null)));let A=t.concat(r.slice(0,m+1)),E=()=>{let C;return g?C=b:v?C=w:f.route.Component?C=_.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,_.createElement(EI,{match:f,routeContext:{outlet:h,matches:A,isDataRoute:e!=null},children:C})};return e&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?_.createElement(_I,{location:e.location,revalidation:e.revalidation,component:b,error:g,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:s}):E()},null)}function Mb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CI(n){let t=_.useContext(rl);return de(t,Mb(n)),t}function RI(n){let t=_.useContext(Nf);return de(t,Mb(n)),t}function MI(n){let t=_.useContext(gs);return de(t,Mb(n)),t}function Pb(n){let t=MI(n),e=t.matches[t.matches.length-1];return de(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function PI(){return Pb("useRouteId")}function OI(){let n=_.useContext(Cb),t=RI("useRouteError"),e=Pb("useRouteError");return n!==void 0?n:t.errors?.[e]}function kI(){let{router:n}=CI("useNavigate"),t=Pb("useNavigate"),e=_.useRef(!1);return KC(()=>{e.current=!0}),_.useCallback(async(i,r={})=>{Rs(e.current,WC),e.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:t,...r}))},[n,t])}var HA={};function XC(n,t,e){!t&&!HA[n]&&(HA[n]=!0,Rs(!1,e))}_.memo(DI);function DI({routes:n,future:t,state:e,unstable_onError:s}){return YC(n,void 0,e,s,t)}function NI({to:n,replace:t,state:e,relative:s}){de(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(Os);Rs(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=_.useContext(gs),{pathname:o}=Er(),c=nn(),u=Tb(n,Eb(r),o,s==="path"),h=JSON.stringify(u);return _.useEffect(()=>{c(JSON.parse(h),{replace:t,state:e,relative:s})},[c,h,s,t,e]),null}function LI(n){return wI(n.context)}function ln(n){de(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jI({basename:n="/",children:t=null,location:e,navigationType:s="POP",navigator:i,static:r=!1}){de(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:o,navigator:i,static:r,future:{}}),[o,i,r]);typeof e=="string"&&(e=il(e));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:g="default"}=e,v=_.useMemo(()=>{let b=Mi(u,o);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:g},navigationType:s}},[o,u,h,f,m,g,s]);return Rs(v!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:_.createElement(Os.Provider,{value:c},_.createElement(vu.Provider,{children:t,value:v}))}function II({children:n,location:t}){return xI(Jy(n),t)}function Jy(n,t=[]){let e=[];return _.Children.forEach(n,(s,i)=>{if(!_.isValidElement(s))return;let r=[...t,i];if(s.type===_.Fragment){e.push.apply(e,Jy(s.props.children,r));return}de(s.type===ln,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),de(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Jy(s.props.children,r)),e.push(o)}),e}var zh="get",Hh="application/x-www-form-urlencoded";function Lf(n){return n!=null&&typeof n.tagName=="string"}function FI(n){return Lf(n)&&n.tagName.toLowerCase()==="button"}function BI(n){return Lf(n)&&n.tagName.toLowerCase()==="form"}function UI(n){return Lf(n)&&n.tagName.toLowerCase()==="input"}function zI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HI(n,t){return n.button===0&&(!t||t==="_self")&&!zI(n)}var hh=null;function VI(){if(hh===null)try{new FormData(document.createElement("form"),0),hh=!1}catch{hh=!0}return hh}var $I=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zg(n){return n!=null&&!$I.has(n)?(Rs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hh}"`),null):n}function GI(n,t){let e,s,i,r,o;if(BI(n)){let c=n.getAttribute("action");s=c?Mi(c,t):null,e=n.getAttribute("method")||zh,i=Zg(n.getAttribute("enctype"))||Hh,r=new FormData(n)}else if(FI(n)||UI(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(s=u?Mi(u,t):null,e=n.getAttribute("formmethod")||c.getAttribute("method")||zh,i=Zg(n.getAttribute("formenctype"))||Zg(c.getAttribute("enctype"))||Hh,r=new FormData(c,n),!VI()){let{name:h,type:f,value:m}=n;if(f==="image"){let g=h?`${h}.`:"";r.append(`${g}x`,"0"),r.append(`${g}y`,"0")}else h&&r.append(h,m)}}else{if(Lf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=zh,s=null,i=Hh,o=n}return r&&i==="text/plain"&&(o=r,r=void 0),{action:s,method:e.toLowerCase(),encType:i,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ob(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function qI(n,t,e){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${e}`:t&&Mi(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${e}`,s}async function WI(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function YI(n,t,e){let s=await Promise.all(n.map(async i=>{let r=t.routes[i.route.id];if(r){let o=await WI(r,e);return o.links?o.links():[]}return[]}));return JI(s.flat(1).filter(KI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function VA(n,t,e,s,i,r){let o=(u,h)=>e[h]?u.route.id!==e[h].route.id:!0,c=(u,h)=>e[h].pathname!==u.pathname||e[h].route.path?.endsWith("*")&&e[h].params["*"]!==u.params["*"];return r==="assets"?t.filter((u,h)=>o(u,h)||c(u,h)):r==="data"?t.filter((u,h)=>{let f=s.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function XI(n,t,{includeHydrateFallback:e}={}){return QI(n.map(s=>{let i=t.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),e&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function QI(n){return[...new Set(n)]}function ZI(n){let t={},e=Object.keys(n).sort();for(let s of e)t[s]=n[s];return t}function JI(n,t){let e=new Set;return new Set(t),n.reduce((s,i)=>{let r=JSON.stringify(ZI(i));return e.has(r)||(e.add(r),s.push({key:r,link:i})),s},[])}function QC(){let n=_.useContext(rl);return Ob(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function t3(){let n=_.useContext(Nf);return Ob(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var kb=_.createContext(void 0);kb.displayName="FrameworkContext";function ZC(){let n=_.useContext(kb);return Ob(n,"You must render this element inside a <HydratedRouter> element"),n}function e3(n,t){let e=_.useContext(kb),[s,i]=_.useState(!1),[r,o]=_.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=t,g=_.useRef(null);_.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=E=>{E.forEach(C=>{o(C.isIntersecting)})},A=new IntersectionObserver(w,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[n]),_.useEffect(()=>{if(s){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[s]);let v=()=>{i(!0)},b=()=>{i(!1),o(!1)};return e?n!=="intent"?[r,g,{}]:[r,g,{onFocus:_c(c,v),onBlur:_c(u,b),onMouseEnter:_c(h,v),onMouseLeave:_c(f,b),onTouchStart:_c(m,v)}]:[!1,g,{}]}function _c(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function n3({page:n,...t}){let{router:e}=QC(),s=_.useMemo(()=>HC(e.routes,n,e.basename),[e.routes,n,e.basename]);return s?_.createElement(i3,{page:n,matches:s,...t}):null}function s3(n){let{manifest:t,routeModules:e}=ZC(),[s,i]=_.useState([]);return _.useEffect(()=>{let r=!1;return YI(n,t,e).then(o=>{r||i(o)}),()=>{r=!0}},[n,t,e]),s}function i3({page:n,matches:t,...e}){let s=Er(),{manifest:i,routeModules:r}=ZC(),{basename:o}=QC(),{loaderData:c,matches:u}=t3(),h=_.useMemo(()=>VA(n,t,u,i,s,"data"),[n,t,u,i,s]),f=_.useMemo(()=>VA(n,t,u,i,s,"assets"),[n,t,u,i,s]),m=_.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let b=new Set,w=!1;if(t.forEach(E=>{let C=i.routes[E.route.id];!C||!C.hasLoader||(!h.some(T=>T.route.id===E.route.id)&&E.route.id in c&&r[E.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:b.add(E.route.id))}),b.size===0)return[];let A=qI(n,o,"data");return w&&b.size>0&&A.searchParams.set("_routes",t.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[o,c,s,i,h,t,n,r]),g=_.useMemo(()=>XI(f,i),[f,i]),v=s3(f);return _.createElement(_.Fragment,null,m.map(b=>_.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),g.map(b=>_.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),v.map(({key:b,link:w})=>_.createElement("link",{key:b,nonce:e.nonce,...w})))}function r3(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var JC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JC&&(window.__reactRouterVersion="7.8.2")}catch{}function a3({basename:n,children:t,window:e}){let s=_.useRef();s.current==null&&(s.current=$j({window:e,v5Compat:!0}));let i=s.current,[r,o]=_.useState({action:i.action,location:i.location}),c=_.useCallback(u=>{_.startTransition(()=>o(u))},[o]);return _.useLayoutEffect(()=>i.listen(c),[i,c]),_.createElement(jI,{basename:n,children:t,location:r.location,navigationType:r.action,navigator:i})}var tR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xs=_.forwardRef(function({onClick:t,discover:e="render",prefetch:s="none",relative:i,reloadDocument:r,replace:o,state:c,target:u,to:h,preventScrollReset:f,viewTransition:m,...g},v){let{basename:b}=_.useContext(Os),w=typeof h=="string"&&tR.test(h),A,E=!1;if(typeof h=="string"&&w&&(A=h,JC))try{let U=new URL(window.location.href),V=h.startsWith("//")?new URL(U.protocol+h):new URL(h),q=Mi(V.pathname,b);V.origin===U.origin&&q!=null?h=q+V.search+V.hash:E=!0}catch{Rs(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=yI(h,{relative:i}),[T,M,P]=e3(s,g),k=u3(h,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:m});function D(U){t&&t(U),U.defaultPrevented||k(U)}let N=_.createElement("a",{...g,...P,href:A||C,onClick:E||r?t:D,ref:r3(v,M),target:u,"data-discover":!w&&e==="render"?"true":void 0});return T&&!w?_.createElement(_.Fragment,null,N,_.createElement(n3,{page:C})):N});Xs.displayName="Link";var o3=_.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:s="",end:i=!1,style:r,to:o,viewTransition:c,children:u,...h},f){let m=bu(o,{relative:h.relative}),g=Er(),v=_.useContext(Nf),{navigator:b,basename:w}=_.useContext(Os),A=v!=null&&m3(m)&&c===!0,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,C=g.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(C=C.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&w&&(T=Mi(T,w)||T);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let P=C===E||!i&&C.startsWith(E)&&C.charAt(M)==="/",k=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),D={isActive:P,isPending:k,isTransitioning:A},N=P?t:void 0,U;typeof s=="function"?U=s(D):U=[s,P?"active":null,k?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let V=typeof r=="function"?r(D):r;return _.createElement(Xs,{...h,"aria-current":N,className:U,ref:f,style:V,to:o,viewTransition:c},typeof u=="function"?u(D):u)});o3.displayName="NavLink";var l3=_.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:s,replace:i,state:r,method:o=zh,action:c,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:m,...g},v)=>{let b=f3(),w=p3(c,{relative:h}),A=o.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&tR.test(c),C=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let M=T.nativeEvent.submitter,P=M?.getAttribute("formmethod")||o;b(M||T.currentTarget,{fetcherKey:t,method:P,navigate:e,replace:i,state:r,relative:h,preventScrollReset:f,viewTransition:m})};return _.createElement("form",{ref:v,method:A,action:w,onSubmit:s?u:C,...g,"data-discover":!E&&n==="render"?"true":void 0})});l3.displayName="Form";function c3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eR(n){let t=_.useContext(rl);return de(t,c3(n)),t}function u3(n,{target:t,replace:e,state:s,preventScrollReset:i,relative:r,viewTransition:o}={}){let c=nn(),u=Er(),h=bu(n,{relative:r});return _.useCallback(f=>{if(HI(f,t)){f.preventDefault();let m=e!==void 0?e:tu(u)===tu(h);c(n,{replace:m,state:s,preventScrollReset:i,relative:r,viewTransition:o})}},[u,c,h,e,s,t,n,i,r,o])}var d3=0,h3=()=>`__${String(++d3)}__`;function f3(){let{router:n}=eR("useSubmit"),{basename:t}=_.useContext(Os),e=PI();return _.useCallback(async(s,i={})=>{let{action:r,method:o,encType:c,formData:u,body:h}=GI(s,t);if(i.navigate===!1){let f=i.fetcherKey||h3();await n.fetch(f,e,i.action||r,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||r,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,t,e])}function p3(n,{relative:t}={}){let{basename:e}=_.useContext(Os),s=_.useContext(gs);de(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...bu(n||".",{relative:t})},o=Er();if(n==null){r.search=o.search;let c=new URLSearchParams(r.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();r.search=f?`?${f}`:""}}return(!n||n===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:Ri([e,r.pathname])),tu(r)}function m3(n,{relative:t}={}){let e=_.useContext(qC);de(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eR("useViewTransitionState"),i=bu(n,{relative:t});if(!e.isTransitioning)return!1;let r=Mi(e.currentLocation.pathname,s)||e.currentLocation.pathname,o=Mi(e.nextLocation.pathname,s)||e.nextLocation.pathname;return sf(i.pathname,o)!=null||sf(i.pathname,r)!=null}var wu=zC();const g3=_b(wu);function y3(n,t){const e=_.createContext(t),s=r=>{const{children:o,...c}=r,u=_.useMemo(()=>c,Object.values(c));return S.jsx(e.Provider,{value:u,children:o})};s.displayName=n+"Provider";function i(r){const o=_.useContext(e);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[s,i]}function ys(n,t=[]){let e=[];function s(r,o){const c=_.createContext(o),u=e.length;e=[...e,o];const h=m=>{const{scope:g,children:v,...b}=m,w=g?.[n]?.[u]||c,A=_.useMemo(()=>b,Object.values(b));return S.jsx(w.Provider,{value:A,children:v})};h.displayName=r+"Provider";function f(m,g){const v=g?.[n]?.[u]||c,b=_.useContext(v);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[h,f]}const i=()=>{const r=e.map(o=>_.createContext(o));return function(c){const u=c?.[n]||r;return _.useMemo(()=>({[`__scope${n}`]:{...c,[n]:u}}),[c,u])}};return i.scopeName=n,[s,v3(i,...t)]}function v3(...n){const t=n[0];if(n.length===1)return t;const e=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const o=s.reduce((c,{useScope:u,scopeName:h})=>{const m=u(r)[`__scope${h}`];return{...c,...m}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}function Ge(n){const t=_.useRef(n);return _.useEffect(()=>{t.current=n}),_.useMemo(()=>(...e)=>t.current?.(...e),[])}var Pe=globalThis?.document?_.useLayoutEffect:()=>{};function $A(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function Db(...n){return t=>{let e=!1;const s=n.map(i=>{const r=$A(i,t);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():$A(n[i],null)}}}}function Ht(...n){return _.useCallback(Db(...n),n)}function vr(n){const t=b3(n),e=_.forwardRef((s,i)=>{const{children:r,...o}=s,c=_.Children.toArray(r),u=c.find(x3);if(u){const h=u.props.children,f=c.map(m=>m===u?_.Children.count(h)>1?_.Children.only(null):_.isValidElement(h)?h.props.children:null:m);return S.jsx(t,{...o,ref:i,children:_.isValidElement(h)?_.cloneElement(h,void 0,f):null})}return S.jsx(t,{...o,ref:i,children:r})});return e.displayName=`${n}.Slot`,e}var nR=vr("Slot");function b3(n){const t=_.forwardRef((e,s)=>{const{children:i,...r}=e;if(_.isValidElement(i)){const o=A3(i),c=S3(r,i.props);return i.type!==_.Fragment&&(c.ref=s?Db(s,o):o),_.cloneElement(i,c)}return _.Children.count(i)>1?_.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var w3=Symbol("radix.slottable");function x3(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===w3}function S3(n,t){const e={...t};for(const s in t){const i=n[s],r=t[s];/^on[A-Z]/.test(s)?i&&r?e[s]=(...c)=>{const u=r(...c);return i(...c),u}:i&&(e[s]=i):s==="style"?e[s]={...i,...r}:s==="className"&&(e[s]=[i,r].filter(Boolean).join(" "))}return{...n,...e}}function A3(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var _3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xt=_3.reduce((n,t)=>{const e=vr(`Primitive.${t}`),s=_.forwardRef((i,r)=>{const{asChild:o,...c}=i,u=o?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(u,{...c,ref:r})});return s.displayName=`Primitive.${t}`,{...n,[t]:s}},{});function sR(n,t){n&&wu.flushSync(()=>n.dispatchEvent(t))}var Jg={exports:{}},ty={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA;function E3(){if(GA)return ty;GA=1;var n=Df();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var e=typeof Object.is=="function"?Object.is:t,s=n.useState,i=n.useEffect,r=n.useLayoutEffect,o=n.useDebugValue;function c(m,g){var v=g(),b=s({inst:{value:v,getSnapshot:g}}),w=b[0].inst,A=b[1];return r(function(){w.value=v,w.getSnapshot=g,u(w)&&A({inst:w})},[m,v,g]),i(function(){return u(w)&&A({inst:w}),m(function(){u(w)&&A({inst:w})})},[m]),o(v),v}function u(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!e(m,v)}catch{return!0}}function h(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return ty.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,ty}var qA;function T3(){return qA||(qA=1,Jg.exports=E3()),Jg.exports}var C3=T3();function R3(){return C3.useSyncExternalStore(M3,()=>!0,()=>!1)}function M3(){return()=>{}}var Nb="Avatar",[P3,xJ]=ys(Nb),[O3,iR]=P3(Nb),rR=_.forwardRef((n,t)=>{const{__scopeAvatar:e,...s}=n,[i,r]=_.useState("idle");return S.jsx(O3,{scope:e,imageLoadingStatus:i,onImageLoadingStatusChange:r,children:S.jsx(xt.span,{...s,ref:t})})});rR.displayName=Nb;var aR="AvatarImage",oR=_.forwardRef((n,t)=>{const{__scopeAvatar:e,src:s,onLoadingStatusChange:i=()=>{},...r}=n,o=iR(aR,e),c=k3(s,r),u=Ge(h=>{i(h),o.onImageLoadingStatusChange(h)});return Pe(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?S.jsx(xt.img,{...r,ref:t,src:s}):null});oR.displayName=aR;var lR="AvatarFallback",cR=_.forwardRef((n,t)=>{const{__scopeAvatar:e,delayMs:s,...i}=n,r=iR(lR,e),[o,c]=_.useState(s===void 0);return _.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(u)}},[s]),o&&r.imageLoadingStatus!=="loaded"?S.jsx(xt.span,{...i,ref:t}):null});cR.displayName=lR;function WA(n,t){return n?t?(n.src!==t&&(n.src=t),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function k3(n,{referrerPolicy:t,crossOrigin:e}){const s=R3(),i=_.useRef(null),r=s?(i.current||(i.current=new window.Image),i.current):null,[o,c]=_.useState(()=>WA(r,n));return Pe(()=>{c(WA(r,n))},[r,n]),Pe(()=>{const u=m=>()=>{c(m)};if(!r)return;const h=u("loaded"),f=u("error");return r.addEventListener("load",h),r.addEventListener("error",f),t&&(r.referrerPolicy=t),typeof e=="string"&&(r.crossOrigin=e),()=>{r.removeEventListener("load",h),r.removeEventListener("error",f)}},[r,e,t]),o}var D3=rR,N3=oR,L3=cR;function uR(n){var t,e,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=uR(n[t]))&&(s&&(s+=" "),s+=e)}else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function jf(){for(var n,t,e=0,s="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=uR(n))&&(s&&(s+=" "),s+=t);return s}const Lb="-",j3=n=>{const t=F3(n),{conflictingClassGroups:e,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{const c=o.split(Lb);return c[0]===""&&c.length!==1&&c.shift(),dR(c,t)||I3(o)},getConflictingClassGroupIds:(o,c)=>{const u=e[o]||[];return c&&s[o]?[...u,...s[o]]:u}}},dR=(n,t)=>{if(n.length===0)return t.classGroupId;const e=n[0],s=t.nextPart.get(e),i=s?dR(n.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const r=n.join(Lb);return t.validators.find(({validator:o})=>o(r))?.classGroupId},KA=/^\[(.+)\]$/,I3=n=>{if(KA.test(n)){const t=KA.exec(n)[1],e=t?.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},F3=n=>{const{theme:t,classGroups:e}=n,s={nextPart:new Map,validators:[]};for(const i in e)tv(e[i],s,i,t);return s},tv=(n,t,e,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?t:YA(t,i);r.classGroupId=e;return}if(typeof i=="function"){if(B3(i)){tv(i(s),t,e,s);return}t.validators.push({validator:i,classGroupId:e});return}Object.entries(i).forEach(([r,o])=>{tv(o,YA(t,r),e,s)})})},YA=(n,t)=>{let e=n;return t.split(Lb).forEach(s=>{e.nextPart.has(s)||e.nextPart.set(s,{nextPart:new Map,validators:[]}),e=e.nextPart.get(s)}),e},B3=n=>n.isThemeGetter,U3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,s=new Map;const i=(r,o)=>{e.set(r,o),t++,t>n&&(t=0,s=e,e=new Map)};return{get(r){let o=e.get(r);if(o!==void 0)return o;if((o=s.get(r))!==void 0)return i(r,o),o},set(r,o){e.has(r)?e.set(r,o):i(r,o)}}},ev="!",nv=":",z3=nv.length,H3=n=>{const{prefix:t,experimentalParseClassName:e}=n;let s=i=>{const r=[];let o=0,c=0,u=0,h;for(let b=0;b<i.length;b++){let w=i[b];if(o===0&&c===0){if(w===nv){r.push(i.slice(u,b)),u=b+z3;continue}if(w==="/"){h=b;continue}}w==="["?o++:w==="]"?o--:w==="("?c++:w===")"&&c--}const f=r.length===0?i:i.substring(u),m=V3(f),g=m!==f,v=h&&h>u?h-u:void 0;return{modifiers:r,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:v}};if(t){const i=t+nv,r=s;s=o=>o.startsWith(i)?r(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(e){const i=s;s=r=>e({className:r,parseClassName:i})}return s},V3=n=>n.endsWith(ev)?n.substring(0,n.length-1):n.startsWith(ev)?n.substring(1):n,$3=n=>{const t=Object.fromEntries(n.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let r=[];return s.forEach(o=>{o[0]==="["||t[o]?(i.push(...r.sort(),o),r=[]):r.push(o)}),i.push(...r.sort()),i}},G3=n=>({cache:U3(n.cacheSize),parseClassName:H3(n),sortModifiers:$3(n),...j3(n)}),q3=/\s+/,W3=(n,t)=>{const{parseClassName:e,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:r}=t,o=[],c=n.trim().split(q3);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:m,modifiers:g,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:w}=e(f);if(m){u=f+(u.length>0?" "+u:u);continue}let A=!!w,E=s(A?b.substring(0,w):b);if(!E){if(!A){u=f+(u.length>0?" "+u:u);continue}if(E=s(b),!E){u=f+(u.length>0?" "+u:u);continue}A=!1}const C=r(g).join(":"),T=v?C+ev:C,M=T+E;if(o.includes(M))continue;o.push(M);const P=i(E,A);for(let k=0;k<P.length;++k){const D=P[k];o.push(T+D)}u=f+(u.length>0?" "+u:u)}return u};function K3(){let n=0,t,e,s="";for(;n<arguments.length;)(t=arguments[n++])&&(e=hR(t))&&(s&&(s+=" "),s+=e);return s}const hR=n=>{if(typeof n=="string")return n;let t,e="";for(let s=0;s<n.length;s++)n[s]&&(t=hR(n[s]))&&(e&&(e+=" "),e+=t);return e};function Y3(n,...t){let e,s,i,r=o;function o(u){const h=t.reduce((f,m)=>m(f),n());return e=G3(h),s=e.cache.get,i=e.cache.set,r=c,c(u)}function c(u){const h=s(u);if(h)return h;const f=W3(u,e);return i(u,f),f}return function(){return r(K3.apply(null,arguments))}}const Ne=n=>{const t=e=>e[n]||[];return t.isThemeGetter=!0,t},fR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,pR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,X3=/^\d+\/\d+$/,Q3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Z3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,J3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mo=n=>X3.test(n),kt=n=>!!n&&!Number.isNaN(Number(n)),ar=n=>!!n&&Number.isInteger(Number(n)),ey=n=>n.endsWith("%")&&kt(n.slice(0,-1)),wi=n=>Q3.test(n),nF=()=>!0,sF=n=>Z3.test(n)&&!J3.test(n),mR=()=>!1,iF=n=>tF.test(n),rF=n=>eF.test(n),aF=n=>!mt(n)&&!gt(n),oF=n=>ol(n,vR,mR),mt=n=>fR.test(n),Xr=n=>ol(n,bR,sF),ny=n=>ol(n,hF,kt),XA=n=>ol(n,gR,mR),lF=n=>ol(n,yR,rF),fh=n=>ol(n,wR,iF),gt=n=>pR.test(n),Ec=n=>ll(n,bR),cF=n=>ll(n,fF),QA=n=>ll(n,gR),uF=n=>ll(n,vR),dF=n=>ll(n,yR),ph=n=>ll(n,wR,!0),ol=(n,t,e)=>{const s=fR.exec(n);return s?s[1]?t(s[1]):e(s[2]):!1},ll=(n,t,e=!1)=>{const s=pR.exec(n);return s?s[1]?t(s[1]):e:!1},gR=n=>n==="position"||n==="percentage",yR=n=>n==="image"||n==="url",vR=n=>n==="length"||n==="size"||n==="bg-size",bR=n=>n==="length",hF=n=>n==="number",fF=n=>n==="family-name",wR=n=>n==="shadow",pF=()=>{const n=Ne("color"),t=Ne("font"),e=Ne("text"),s=Ne("font-weight"),i=Ne("tracking"),r=Ne("leading"),o=Ne("breakpoint"),c=Ne("container"),u=Ne("spacing"),h=Ne("radius"),f=Ne("shadow"),m=Ne("inset-shadow"),g=Ne("text-shadow"),v=Ne("drop-shadow"),b=Ne("blur"),w=Ne("perspective"),A=Ne("aspect"),E=Ne("ease"),C=Ne("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...M(),gt,mt],k=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],N=()=>[gt,mt,u],U=()=>[mo,"full","auto",...N()],V=()=>[ar,"none","subgrid",gt,mt],q=()=>["auto",{span:["full",ar,gt,mt]},ar,gt,mt],it=()=>[ar,"auto",gt,mt],at=()=>["auto","min","max","fr",gt,mt],rt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],lt=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...N()],I=()=>[mo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],F=()=>[n,gt,mt],W=()=>[...M(),QA,XA,{position:[gt,mt]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",uF,oF,{size:[gt,mt]}],nt=()=>[ey,Ec,Xr],Z=()=>["","none","full",h,gt,mt],ot=()=>["",kt,Ec,Xr],ht=()=>["solid","dashed","dotted","double"],ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>[kt,ey,QA,XA],ft=()=>["","none",b,gt,mt],jt=()=>["none",kt,gt,mt],zt=()=>["none",kt,gt,mt],It=()=>[kt,gt,mt],Gt=()=>[mo,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wi],breakpoint:[wi],color:[nF],container:[wi],"drop-shadow":[wi],ease:["in","out","in-out"],font:[aF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wi],shadow:[wi],spacing:["px",kt],text:[wi],"text-shadow":[wi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mo,mt,gt,A]}],container:["container"],columns:[{columns:[kt,mt,gt,c]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[ar,"auto",gt,mt]}],basis:[{basis:[mo,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[kt,mo,"auto","initial","none",mt]}],grow:[{grow:["",kt,gt,mt]}],shrink:[{shrink:["",kt,gt,mt]}],order:[{order:[ar,"first","last","none",gt,mt]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":it()}],"col-end":[{"col-end":it()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":it()}],"row-end":[{"row-end":it()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":at()}],"auto-rows":[{"auto-rows":at()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...rt(),"normal"]}],"justify-items":[{"justify-items":[...lt(),"normal"]}],"justify-self":[{"justify-self":["auto",...lt()]}],"align-content":[{content:["normal",...rt()]}],"align-items":[{items:[...lt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...lt(),{baseline:["","last"]}]}],"place-content":[{"place-content":rt()}],"place-items":[{"place-items":[...lt(),"baseline"]}],"place-self":[{"place-self":["auto",...lt()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[c,"screen",...I()]}],"min-w":[{"min-w":[c,"screen","none",...I()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",e,Ec,Xr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,gt,ny]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ey,mt]}],"font-family":[{font:[cF,mt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,gt,mt]}],"line-clamp":[{"line-clamp":[kt,"none",gt,ny]}],leading:[{leading:[r,...N()]}],"list-image":[{"list-image":["none",gt,mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",gt,mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ht(),"wavy"]}],"text-decoration-thickness":[{decoration:[kt,"from-font","auto",gt,Xr]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[kt,"auto",gt,mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt,mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt,mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ar,gt,mt],radial:["",gt,mt],conic:[ar,gt,mt]},dF,lF]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:nt()}],"gradient-via-pos":[{via:nt()}],"gradient-to-pos":[{to:nt()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ht(),"hidden","none"]}],"divide-style":[{divide:[...ht(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ht(),"none","hidden"]}],"outline-offset":[{"outline-offset":[kt,gt,mt]}],"outline-w":[{outline:["",kt,Ec,Xr]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",f,ph,fh]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",m,ph,fh]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[kt,Xr]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",g,ph,fh]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[kt,gt,mt]}],"mix-blend":[{"mix-blend":[...ut(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ut()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[kt]}],"mask-image-linear-from-pos":[{"mask-linear-from":J()}],"mask-image-linear-to-pos":[{"mask-linear-to":J()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":J()}],"mask-image-t-to-pos":[{"mask-t-to":J()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":J()}],"mask-image-r-to-pos":[{"mask-r-to":J()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":J()}],"mask-image-b-to-pos":[{"mask-b-to":J()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":J()}],"mask-image-l-to-pos":[{"mask-l-to":J()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":J()}],"mask-image-x-to-pos":[{"mask-x-to":J()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":J()}],"mask-image-y-to-pos":[{"mask-y-to":J()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[gt,mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":J()}],"mask-image-radial-to-pos":[{"mask-radial-to":J()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[kt]}],"mask-image-conic-from-pos":[{"mask-conic-from":J()}],"mask-image-conic-to-pos":[{"mask-conic-to":J()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",gt,mt]}],filter:[{filter:["","none",gt,mt]}],blur:[{blur:ft()}],brightness:[{brightness:[kt,gt,mt]}],contrast:[{contrast:[kt,gt,mt]}],"drop-shadow":[{"drop-shadow":["","none",v,ph,fh]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",kt,gt,mt]}],"hue-rotate":[{"hue-rotate":[kt,gt,mt]}],invert:[{invert:["",kt,gt,mt]}],saturate:[{saturate:[kt,gt,mt]}],sepia:[{sepia:["",kt,gt,mt]}],"backdrop-filter":[{"backdrop-filter":["","none",gt,mt]}],"backdrop-blur":[{"backdrop-blur":ft()}],"backdrop-brightness":[{"backdrop-brightness":[kt,gt,mt]}],"backdrop-contrast":[{"backdrop-contrast":[kt,gt,mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",kt,gt,mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[kt,gt,mt]}],"backdrop-invert":[{"backdrop-invert":["",kt,gt,mt]}],"backdrop-opacity":[{"backdrop-opacity":[kt,gt,mt]}],"backdrop-saturate":[{"backdrop-saturate":[kt,gt,mt]}],"backdrop-sepia":[{"backdrop-sepia":["",kt,gt,mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",gt,mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[kt,"initial",gt,mt]}],ease:[{ease:["linear","initial",E,gt,mt]}],delay:[{delay:[kt,gt,mt]}],animate:[{animate:["none",C,gt,mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,gt,mt]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:jt()}],"rotate-x":[{"rotate-x":jt()}],"rotate-y":[{"rotate-y":jt()}],"rotate-z":[{"rotate-z":jt()}],scale:[{scale:zt()}],"scale-x":[{"scale-x":zt()}],"scale-y":[{"scale-y":zt()}],"scale-z":[{"scale-z":zt()}],"scale-3d":["scale-3d"],skew:[{skew:It()}],"skew-x":[{"skew-x":It()}],"skew-y":[{"skew-y":It()}],transform:[{transform:[gt,mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Gt()}],"translate-x":[{"translate-x":Gt()}],"translate-y":[{"translate-y":Gt()}],"translate-z":[{"translate-z":Gt()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt,mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt,mt]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[kt,Ec,Xr,ny]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mF=Y3(pF);function Kt(...n){return mF(jf(n))}function gF({className:n,...t}){return S.jsx(D3,{"data-slot":"avatar",className:Kt("relative flex size-8 shrink-0 overflow-hidden rounded-full",n),...t})}function yF({className:n,...t}){return S.jsx(N3,{"data-slot":"avatar-image",className:Kt("aspect-square size-full",n),...t})}function vF({className:n,...t}){return S.jsx(L3,{"data-slot":"avatar-fallback",className:Kt("bg-muted flex size-full items-center justify-center rounded-full",n),...t})}const ZA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JA=jf,xR=(n,t)=>e=>{var s;if(t?.variants==null)return JA(n,e?.class,e?.className);const{variants:i,defaultVariants:r}=t,o=Object.keys(i).map(h=>{const f=e?.[h],m=r?.[h];if(f===null)return null;const g=ZA(f)||ZA(m);return i[h][g]}),c=e&&Object.entries(e).reduce((h,f)=>{let[m,g]=f;return g===void 0||(h[m]=g),h},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((h,f)=>{let{class:m,className:g,...v}=f;return Object.entries(v).every(b=>{let[w,A]=b;return Array.isArray(A)?A.includes({...r,...c}[w]):{...r,...c}[w]===A})?[...h,m,g]:h},[]);return JA(n,o,u,e?.class,e?.className)},bF=xR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-primary dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Lt({className:n,variant:t,size:e,asChild:s=!1,...i}){const r=s?nR:"button";return S.jsx(r,{"data-slot":"button",className:Kt(bF({variant:t,size:e,className:n})),...i})}function cl(n){return n==="main"?"/app/library":"/demo/library"}function SR(){return"/app/library/add-text"}function AR(n,t){return t==="main"?"/app/library/edit-text/"+n:"/demo/library/edit-text/"+n}function If(n,t){return t==="main"?"/app/library/text/"+n:"/demo/library/text/"+n}function jb(n,t){return t==="main"?"/app/library/group/"+n:"/demo/library/group/"+n}function Ko(n){return n==="demo"?"/demo/typing":"/app/typing"}const _R=_.createContext(null);function xu(){const n=_.useContext(_R);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const ER=_.createContext({mode:"demo"});function sn(){return _.useContext(ER)}var TR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t_=je.createContext&&je.createContext(TR),wF=["attr","size","title"];function xF(n,t){if(n==null)return{};var e=SF(n,t),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(e[s]=n[s])}return e}function SF(n,t){if(n==null)return{};var e={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(t.indexOf(s)>=0)continue;e[s]=n[s]}return e}function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},rf.apply(this,arguments)}function e_(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,s)}return e}function af(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?e_(Object(e),!0).forEach(function(s){AF(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):e_(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}function AF(n,t,e){return t=_F(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _F(n){var t=EF(n,"string");return typeof t=="symbol"?t:t+""}function EF(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function CR(n){return n&&n.map((t,e)=>je.createElement(t.tag,af({key:e},t.attr),CR(t.child)))}function re(n){return t=>je.createElement(TF,rf({attr:af({},n.attr)},t),CR(n.child))}function TF(n){var t=e=>{var{attr:s,size:i,title:r}=n,o=xF(n,wF),c=i||e.size||"1em",u;return e.className&&(u=e.className),n.className&&(u=(u?u+" ":"")+n.className),je.createElement("svg",rf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,s,o,{className:u,style:af(af({color:n.color||e.color},e.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),r&&je.createElement("title",null,r),n.children)};return t_!==void 0?je.createElement(t_.Consumer,null,e=>t(e)):t(TR)}function CF(n){return re({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function Ib(n){return re({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(n)}function n_(n){return re({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"},child:[]}]})(n)}function Ff(n){return re({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M181.3 32.4c17.4 2.9 29.2 19.4 26.3 36.8L197.8 128l95.1 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3s29.2 19.4 26.3 36.8L357.8 128l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0L325.8 320l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8l9.8-58.7-95.1 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8L90.2 384 32 384c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 21.3-128L64 192c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3zM187.1 192L165.8 320l95.1 0 21.3-128-95.1 0z"},child:[]}]})(n)}function RF(n){return re({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"},child:[]}]})(n)}function Fb(n){return re({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"},child:[]}]})(n)}function RR(n){return re({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"},child:[]}]})(n)}function ti(n){return re({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},child:[]}]})(n)}const MF=xR("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Su({className:n,variant:t,asChild:e=!1,...s}){const i=e?nR:"span";return S.jsx(i,{"data-slot":"badge",className:Kt(MF({variant:t}),n),...s})}function PF(n){return re({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",x2:"9",y1:"12",y2:"12"},child:[]}]})(n)}const MR="/static/assets/logo-B_LDJLCI.png";function Bf(n){const t=n+"CollectionProvider",[e,s]=ys(t),[i,r]=e(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:A,children:E}=w,C=je.useRef(null),T=je.useRef(new Map).current;return S.jsx(i,{scope:A,itemMap:T,collectionRef:C,children:E})};o.displayName=t;const c=n+"CollectionSlot",u=vr(c),h=je.forwardRef((w,A)=>{const{scope:E,children:C}=w,T=r(c,E),M=Ht(A,T.collectionRef);return S.jsx(u,{ref:M,children:C})});h.displayName=c;const f=n+"CollectionItemSlot",m="data-radix-collection-item",g=vr(f),v=je.forwardRef((w,A)=>{const{scope:E,children:C,...T}=w,M=je.useRef(null),P=Ht(A,M),k=r(f,E);return je.useEffect(()=>(k.itemMap.set(M,{ref:M,...T}),()=>void k.itemMap.delete(M))),S.jsx(g,{[m]:"",ref:P,children:C})});v.displayName=f;function b(w){const A=r(n+"CollectionConsumer",w);return je.useCallback(()=>{const C=A.collectionRef.current;if(!C)return[];const T=Array.from(C.querySelectorAll(`[${m}]`));return Array.from(A.itemMap.values()).sort((k,D)=>T.indexOf(k.ref.current)-T.indexOf(D.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:o,Slot:h,ItemSlot:v},b,s]}var OF=_.createContext(void 0);function ul(n){const t=_.useContext(OF);return n||t||"ltr"}function ct(n,t,{checkForDefaultPrevented:e=!0}={}){return function(i){if(n?.(i),e===!1||!i.defaultPrevented)return t?.(i)}}var kF=UC[" useId ".trim().toString()]||(()=>{}),DF=0;function ds(n){const[t,e]=_.useState(kF());return Pe(()=>{e(s=>s??String(DF++))},[n]),n||(t?`radix-${t}`:"")}function NF(n,t=globalThis?.document){const e=Ge(n);_.useEffect(()=>{const s=i=>{i.key==="Escape"&&e(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[e,t])}var LF="DismissableLayer",sv="dismissableLayer.update",jF="dismissableLayer.pointerDownOutside",IF="dismissableLayer.focusOutside",s_,PR=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Au=_.forwardRef((n,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:o,onDismiss:c,...u}=n,h=_.useContext(PR),[f,m]=_.useState(null),g=f?.ownerDocument??globalThis?.document,[,v]=_.useState({}),b=Ht(t,D=>m(D)),w=Array.from(h.layers),[A]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(A),C=f?w.indexOf(f):-1,T=h.layersWithOutsidePointerEventsDisabled.size>0,M=C>=E,P=UF(D=>{const N=D.target,U=[...h.branches].some(V=>V.contains(N));!M||U||(i?.(D),o?.(D),D.defaultPrevented||c?.())},g),k=zF(D=>{const N=D.target;[...h.branches].some(V=>V.contains(N))||(r?.(D),o?.(D),D.defaultPrevented||c?.())},g);return NF(D=>{C===h.layers.size-1&&(s?.(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},g),_.useEffect(()=>{if(f)return e&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(s_=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),i_(),()=>{e&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=s_)}},[f,g,e,h]),_.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),i_())},[f,h]),_.useEffect(()=>{const D=()=>v({});return document.addEventListener(sv,D),()=>document.removeEventListener(sv,D)},[]),S.jsx(xt.div,{...u,ref:b,style:{pointerEvents:T?M?"auto":"none":void 0,...n.style},onFocusCapture:ct(n.onFocusCapture,k.onFocusCapture),onBlurCapture:ct(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ct(n.onPointerDownCapture,P.onPointerDownCapture)})});Au.displayName=LF;var FF="DismissableLayerBranch",BF=_.forwardRef((n,t)=>{const e=_.useContext(PR),s=_.useRef(null),i=Ht(t,s);return _.useEffect(()=>{const r=s.current;if(r)return e.branches.add(r),()=>{e.branches.delete(r)}},[e.branches]),S.jsx(xt.div,{...n,ref:i})});BF.displayName=FF;function UF(n,t=globalThis?.document){const e=Ge(n),s=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const r=c=>{if(c.target&&!s.current){let u=function(){OR(jF,e,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",r),t.removeEventListener("click",i.current)}},[t,e]),{onPointerDownCapture:()=>s.current=!0}}function zF(n,t=globalThis?.document){const e=Ge(n),s=_.useRef(!1);return _.useEffect(()=>{const i=r=>{r.target&&!s.current&&OR(IF,e,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,e]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function i_(){const n=new CustomEvent(sv);document.dispatchEvent(n)}function OR(n,t,e,{discrete:s}){const i=e.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:e});t&&i.addEventListener(n,t,{once:!0}),s?sR(i,r):i.dispatchEvent(r)}var sy=0;function Uf(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??r_()),document.body.insertAdjacentElement("beforeend",n[1]??r_()),sy++,()=>{sy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sy--}},[])}function r_(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var iy="focusScope.autoFocusOnMount",ry="focusScope.autoFocusOnUnmount",a_={bubbles:!1,cancelable:!0},HF="FocusScope",_u=_.forwardRef((n,t)=>{const{loop:e=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...o}=n,[c,u]=_.useState(null),h=Ge(i),f=Ge(r),m=_.useRef(null),g=Ht(t,w=>u(w)),v=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(s){let w=function(T){if(v.paused||!c)return;const M=T.target;c.contains(M)?m.current=M:lr(m.current,{select:!0})},A=function(T){if(v.paused||!c)return;const M=T.relatedTarget;M!==null&&(c.contains(M)||lr(m.current,{select:!0}))},E=function(T){if(document.activeElement===document.body)for(const P of T)P.removedNodes.length>0&&lr(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",A);const C=new MutationObserver(E);return c&&C.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",A),C.disconnect()}}},[s,c,v.paused]),_.useEffect(()=>{if(c){l_.add(v);const w=document.activeElement;if(!c.contains(w)){const E=new CustomEvent(iy,a_);c.addEventListener(iy,h),c.dispatchEvent(E),E.defaultPrevented||(VF(KF(kR(c)),{select:!0}),document.activeElement===w&&lr(c))}return()=>{c.removeEventListener(iy,h),setTimeout(()=>{const E=new CustomEvent(ry,a_);c.addEventListener(ry,f),c.dispatchEvent(E),E.defaultPrevented||lr(w??document.body,{select:!0}),c.removeEventListener(ry,f),l_.remove(v)},0)}}},[c,h,f,v]);const b=_.useCallback(w=>{if(!e&&!s||v.paused)return;const A=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(A&&E){const C=w.currentTarget,[T,M]=$F(C);T&&M?!w.shiftKey&&E===M?(w.preventDefault(),e&&lr(T,{select:!0})):w.shiftKey&&E===T&&(w.preventDefault(),e&&lr(M,{select:!0})):E===C&&w.preventDefault()}},[e,s,v.paused]);return S.jsx(xt.div,{tabIndex:-1,...o,ref:g,onKeyDown:b})});_u.displayName=HF;function VF(n,{select:t=!1}={}){const e=document.activeElement;for(const s of n)if(lr(s,{select:t}),document.activeElement!==e)return}function $F(n){const t=kR(n),e=o_(t,n),s=o_(t.reverse(),n);return[e,s]}function kR(n){const t=[],e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function o_(n,t){for(const e of n)if(!GF(e,{upTo:t}))return e}function GF(n,{upTo:t}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(t!==void 0&&n===t)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function qF(n){return n instanceof HTMLInputElement&&"select"in n}function lr(n,{select:t=!1}={}){if(n&&n.focus){const e=document.activeElement;n.focus({preventScroll:!0}),n!==e&&qF(n)&&t&&n.select()}}var l_=WF();function WF(){let n=[];return{add(t){const e=n[0];t!==e&&e?.pause(),n=c_(n,t),n.unshift(t)},remove(t){n=c_(n,t),n[0]?.resume()}}}function c_(n,t){const e=[...n],s=e.indexOf(t);return s!==-1&&e.splice(s,1),e}function KF(n){return n.filter(t=>t.tagName!=="A")}const YF=["top","right","bottom","left"],br=Math.min,Wn=Math.max,of=Math.round,mh=Math.floor,Qs=n=>({x:n,y:n}),XF={left:"right",right:"left",bottom:"top",top:"bottom"},QF={start:"end",end:"start"};function iv(n,t,e){return Wn(n,br(t,e))}function Pi(n,t){return typeof n=="function"?n(t):n}function Oi(n){return n.split("-")[0]}function dl(n){return n.split("-")[1]}function Bb(n){return n==="x"?"y":"x"}function Ub(n){return n==="y"?"height":"width"}const ZF=new Set(["top","bottom"]);function Ks(n){return ZF.has(Oi(n))?"y":"x"}function zb(n){return Bb(Ks(n))}function JF(n,t,e){e===void 0&&(e=!1);const s=dl(n),i=zb(n),r=Ub(i);let o=i==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=lf(o)),[o,lf(o)]}function tB(n){const t=lf(n);return[rv(n),t,rv(t)]}function rv(n){return n.replace(/start|end/g,t=>QF[t])}const u_=["left","right"],d_=["right","left"],eB=["top","bottom"],nB=["bottom","top"];function sB(n,t,e){switch(n){case"top":case"bottom":return e?t?d_:u_:t?u_:d_;case"left":case"right":return t?eB:nB;default:return[]}}function iB(n,t,e,s){const i=dl(n);let r=sB(Oi(n),e==="start",s);return i&&(r=r.map(o=>o+"-"+i),t&&(r=r.concat(r.map(rv)))),r}function lf(n){return n.replace(/left|right|bottom|top/g,t=>XF[t])}function rB(n){return{top:0,right:0,bottom:0,left:0,...n}}function DR(n){return typeof n!="number"?rB(n):{top:n,right:n,bottom:n,left:n}}function cf(n){const{x:t,y:e,width:s,height:i}=n;return{width:s,height:i,top:e,left:t,right:t+s,bottom:e+i,x:t,y:e}}function h_(n,t,e){let{reference:s,floating:i}=n;const r=Ks(t),o=zb(t),c=Ub(o),u=Oi(t),h=r==="y",f=s.x+s.width/2-i.width/2,m=s.y+s.height/2-i.height/2,g=s[c]/2-i[c]/2;let v;switch(u){case"top":v={x:f,y:s.y-i.height};break;case"bottom":v={x:f,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:m};break;case"left":v={x:s.x-i.width,y:m};break;default:v={x:s.x,y:s.y}}switch(dl(t)){case"start":v[o]-=g*(e&&h?-1:1);break;case"end":v[o]+=g*(e&&h?-1:1);break}return v}const aB=async(n,t,e)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=e,c=r.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:n,floating:t,strategy:i}),{x:f,y:m}=h_(h,s,u),g=s,v={},b=0;for(let w=0;w<c.length;w++){const{name:A,fn:E}=c[w],{x:C,y:T,data:M,reset:P}=await E({x:f,y:m,initialPlacement:s,placement:g,strategy:i,middlewareData:v,rects:h,platform:o,elements:{reference:n,floating:t}});f=C??f,m=T??m,v={...v,[A]:{...v[A],...M}},P&&b<=50&&(b++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(h=P.rects===!0?await o.getElementRects({reference:n,floating:t,strategy:i}):P.rects),{x:f,y:m}=h_(h,g,u)),w=-1)}return{x:f,y:m,placement:g,strategy:i,middlewareData:v}};async function eu(n,t){var e;t===void 0&&(t={});const{x:s,y:i,platform:r,rects:o,elements:c,strategy:u}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:g=!1,padding:v=0}=Pi(t,n),b=DR(v),A=c[g?m==="floating"?"reference":"floating":m],E=cf(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(A)))==null||e?A:A.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:u})),C=m==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),M=await(r.isElement==null?void 0:r.isElement(T))?await(r.getScale==null?void 0:r.getScale(T))||{x:1,y:1}:{x:1,y:1},P=cf(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:C,offsetParent:T,strategy:u}):C);return{top:(E.top-P.top+b.top)/M.y,bottom:(P.bottom-E.bottom+b.bottom)/M.y,left:(E.left-P.left+b.left)/M.x,right:(P.right-E.right+b.right)/M.x}}const oB=n=>({name:"arrow",options:n,async fn(t){const{x:e,y:s,placement:i,rects:r,platform:o,elements:c,middlewareData:u}=t,{element:h,padding:f=0}=Pi(n,t)||{};if(h==null)return{};const m=DR(f),g={x:e,y:s},v=zb(i),b=Ub(v),w=await o.getDimensions(h),A=v==="y",E=A?"top":"left",C=A?"bottom":"right",T=A?"clientHeight":"clientWidth",M=r.reference[b]+r.reference[v]-g[v]-r.floating[b],P=g[v]-r.reference[v],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let D=k?k[T]:0;(!D||!await(o.isElement==null?void 0:o.isElement(k)))&&(D=c.floating[T]||r.floating[b]);const N=M/2-P/2,U=D/2-w[b]/2-1,V=br(m[E],U),q=br(m[C],U),it=V,at=D-w[b]-q,rt=D/2-w[b]/2+N,lt=iv(it,rt,at),j=!u.arrow&&dl(i)!=null&&rt!==lt&&r.reference[b]/2-(rt<it?V:q)-w[b]/2<0,I=j?rt<it?rt-it:rt-at:0;return{[v]:g[v]+I,data:{[v]:lt,centerOffset:rt-lt-I,...j&&{alignmentOffset:I}},reset:j}}}),lB=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,s;const{placement:i,middlewareData:r,rects:o,initialPlacement:c,platform:u,elements:h}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...A}=Pi(n,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};const E=Oi(i),C=Ks(c),T=Oi(c)===c,M=await(u.isRTL==null?void 0:u.isRTL(h.floating)),P=g||(T||!w?[lf(c)]:tB(c)),k=b!=="none";!g&&k&&P.push(...iB(c,w,b,M));const D=[c,...P],N=await eu(t,A),U=[];let V=((s=r.flip)==null?void 0:s.overflows)||[];if(f&&U.push(N[E]),m){const rt=JF(i,o,M);U.push(N[rt[0]],N[rt[1]])}if(V=[...V,{placement:i,overflows:U}],!U.every(rt=>rt<=0)){var q,it;const rt=(((q=r.flip)==null?void 0:q.index)||0)+1,lt=D[rt];if(lt&&(!(m==="alignment"?C!==Ks(lt):!1)||V.every(F=>Ks(F.placement)===C?F.overflows[0]>0:!0)))return{data:{index:rt,overflows:V},reset:{placement:lt}};let j=(it=V.filter(I=>I.overflows[0]<=0).sort((I,F)=>I.overflows[1]-F.overflows[1])[0])==null?void 0:it.placement;if(!j)switch(v){case"bestFit":{var at;const I=(at=V.filter(F=>{if(k){const W=Ks(F.placement);return W===C||W==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(W=>W>0).reduce((W,L)=>W+L,0)]).sort((F,W)=>F[1]-W[1])[0])==null?void 0:at[0];I&&(j=I);break}case"initialPlacement":j=c;break}if(i!==j)return{reset:{placement:j}}}return{}}}};function f_(n,t){return{top:n.top-t.height,right:n.right-t.width,bottom:n.bottom-t.height,left:n.left-t.width}}function p_(n){return YF.some(t=>n[t]>=0)}const cB=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(t){const{rects:e}=t,{strategy:s="referenceHidden",...i}=Pi(n,t);switch(s){case"referenceHidden":{const r=await eu(t,{...i,elementContext:"reference"}),o=f_(r,e.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:p_(o)}}}case"escaped":{const r=await eu(t,{...i,altBoundary:!0}),o=f_(r,e.floating);return{data:{escapedOffsets:o,escaped:p_(o)}}}default:return{}}}}},NR=new Set(["left","top"]);async function uB(n,t){const{placement:e,platform:s,elements:i}=n,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=Oi(e),c=dl(e),u=Ks(e)==="y",h=NR.has(o)?-1:1,f=r&&u?-1:1,m=Pi(t,n);let{mainAxis:g,crossAxis:v,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof b=="number"&&(v=c==="end"?b*-1:b),u?{x:v*f,y:g*h}:{x:g*h,y:v*f}}const dB=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var e,s;const{x:i,y:r,placement:o,middlewareData:c}=t,u=await uB(t,n);return o===((e=c.offset)==null?void 0:e.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:i+u.x,y:r+u.y,data:{...u,placement:o}}}}},hB=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:s,placement:i}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:A=>{let{x:E,y:C}=A;return{x:E,y:C}}},...u}=Pi(n,t),h={x:e,y:s},f=await eu(t,u),m=Ks(Oi(i)),g=Bb(m);let v=h[g],b=h[m];if(r){const A=g==="y"?"top":"left",E=g==="y"?"bottom":"right",C=v+f[A],T=v-f[E];v=iv(C,v,T)}if(o){const A=m==="y"?"top":"left",E=m==="y"?"bottom":"right",C=b+f[A],T=b-f[E];b=iv(C,b,T)}const w=c.fn({...t,[g]:v,[m]:b});return{...w,data:{x:w.x-e,y:w.y-s,enabled:{[g]:r,[m]:o}}}}}},fB=function(n){return n===void 0&&(n={}),{options:n,fn(t){const{x:e,y:s,placement:i,rects:r,middlewareData:o}=t,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=Pi(n,t),f={x:e,y:s},m=Ks(i),g=Bb(m);let v=f[g],b=f[m];const w=Pi(c,t),A=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const T=g==="y"?"height":"width",M=r.reference[g]-r.floating[T]+A.mainAxis,P=r.reference[g]+r.reference[T]-A.mainAxis;v<M?v=M:v>P&&(v=P)}if(h){var E,C;const T=g==="y"?"width":"height",M=NR.has(Oi(i)),P=r.reference[m]-r.floating[T]+(M&&((E=o.offset)==null?void 0:E[m])||0)+(M?0:A.crossAxis),k=r.reference[m]+r.reference[T]+(M?0:((C=o.offset)==null?void 0:C[m])||0)-(M?A.crossAxis:0);b<P?b=P:b>k&&(b=k)}return{[g]:v,[m]:b}}}},pB=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var e,s;const{placement:i,rects:r,platform:o,elements:c}=t,{apply:u=()=>{},...h}=Pi(n,t),f=await eu(t,h),m=Oi(i),g=dl(i),v=Ks(i)==="y",{width:b,height:w}=r.floating;let A,E;m==="top"||m==="bottom"?(A=m,E=g===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(E=m,A=g==="end"?"top":"bottom");const C=w-f.top-f.bottom,T=b-f.left-f.right,M=br(w-f[A],C),P=br(b-f[E],T),k=!t.middlewareData.shift;let D=M,N=P;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(N=T),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(D=C),k&&!g){const V=Wn(f.left,0),q=Wn(f.right,0),it=Wn(f.top,0),at=Wn(f.bottom,0);v?N=b-2*(V!==0||q!==0?V+q:Wn(f.left,f.right)):D=w-2*(it!==0||at!==0?it+at:Wn(f.top,f.bottom))}await u({...t,availableWidth:N,availableHeight:D});const U=await o.getDimensions(c.floating);return b!==U.width||w!==U.height?{reset:{rects:!0}}:{}}}};function zf(){return typeof window<"u"}function hl(n){return LR(n)?(n.nodeName||"").toLowerCase():"#document"}function Kn(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function si(n){var t;return(t=(LR(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function LR(n){return zf()?n instanceof Node||n instanceof Kn(n).Node:!1}function Ms(n){return zf()?n instanceof Element||n instanceof Kn(n).Element:!1}function ei(n){return zf()?n instanceof HTMLElement||n instanceof Kn(n).HTMLElement:!1}function m_(n){return!zf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Kn(n).ShadowRoot}const mB=new Set(["inline","contents"]);function Eu(n){const{overflow:t,overflowX:e,overflowY:s,display:i}=Ps(n);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!mB.has(i)}const gB=new Set(["table","td","th"]);function yB(n){return gB.has(hl(n))}const vB=[":popover-open",":modal"];function Hf(n){return vB.some(t=>{try{return n.matches(t)}catch{return!1}})}const bB=["transform","translate","scale","rotate","perspective"],wB=["transform","translate","scale","rotate","perspective","filter"],xB=["paint","layout","strict","content"];function Hb(n){const t=Vb(),e=Ms(n)?Ps(n):n;return bB.some(s=>e[s]?e[s]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||wB.some(s=>(e.willChange||"").includes(s))||xB.some(s=>(e.contain||"").includes(s))}function SB(n){let t=wr(n);for(;ei(t)&&!Yo(t);){if(Hb(t))return t;if(Hf(t))return null;t=wr(t)}return null}function Vb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const AB=new Set(["html","body","#document"]);function Yo(n){return AB.has(hl(n))}function Ps(n){return Kn(n).getComputedStyle(n)}function Vf(n){return Ms(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function wr(n){if(hl(n)==="html")return n;const t=n.assignedSlot||n.parentNode||m_(n)&&n.host||si(n);return m_(t)?t.host:t}function jR(n){const t=wr(n);return Yo(t)?n.ownerDocument?n.ownerDocument.body:n.body:ei(t)&&Eu(t)?t:jR(t)}function nu(n,t,e){var s;t===void 0&&(t=[]),e===void 0&&(e=!0);const i=jR(n),r=i===((s=n.ownerDocument)==null?void 0:s.body),o=Kn(i);if(r){const c=av(o);return t.concat(o,o.visualViewport||[],Eu(i)?i:[],c&&e?nu(c):[])}return t.concat(i,nu(i,[],e))}function av(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function IR(n){const t=Ps(n);let e=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=ei(n),r=i?n.offsetWidth:e,o=i?n.offsetHeight:s,c=of(e)!==r||of(s)!==o;return c&&(e=r,s=o),{width:e,height:s,$:c}}function $b(n){return Ms(n)?n:n.contextElement}function Ho(n){const t=$b(n);if(!ei(t))return Qs(1);const e=t.getBoundingClientRect(),{width:s,height:i,$:r}=IR(t);let o=(r?of(e.width):e.width)/s,c=(r?of(e.height):e.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const _B=Qs(0);function FR(n){const t=Kn(n);return!Vb()||!t.visualViewport?_B:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EB(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==Kn(n)?!1:t}function fa(n,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);const i=n.getBoundingClientRect(),r=$b(n);let o=Qs(1);t&&(s?Ms(s)&&(o=Ho(s)):o=Ho(n));const c=EB(r,e,s)?FR(r):Qs(0);let u=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,f=i.width/o.x,m=i.height/o.y;if(r){const g=Kn(r),v=s&&Ms(s)?Kn(s):s;let b=g,w=av(b);for(;w&&s&&v!==b;){const A=Ho(w),E=w.getBoundingClientRect(),C=Ps(w),T=E.left+(w.clientLeft+parseFloat(C.paddingLeft))*A.x,M=E.top+(w.clientTop+parseFloat(C.paddingTop))*A.y;u*=A.x,h*=A.y,f*=A.x,m*=A.y,u+=T,h+=M,b=Kn(w),w=av(b)}}return cf({width:f,height:m,x:u,y:h})}function $f(n,t){const e=Vf(n).scrollLeft;return t?t.left+e:fa(si(n)).left+e}function BR(n,t){const e=n.getBoundingClientRect(),s=e.left+t.scrollLeft-$f(n,e),i=e.top+t.scrollTop;return{x:s,y:i}}function TB(n){let{elements:t,rect:e,offsetParent:s,strategy:i}=n;const r=i==="fixed",o=si(s),c=t?Hf(t.floating):!1;if(s===o||c&&r)return e;let u={scrollLeft:0,scrollTop:0},h=Qs(1);const f=Qs(0),m=ei(s);if((m||!m&&!r)&&((hl(s)!=="body"||Eu(o))&&(u=Vf(s)),ei(s))){const v=fa(s);h=Ho(s),f.x=v.x+s.clientLeft,f.y=v.y+s.clientTop}const g=o&&!m&&!r?BR(o,u):Qs(0);return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-u.scrollLeft*h.x+f.x+g.x,y:e.y*h.y-u.scrollTop*h.y+f.y+g.y}}function CB(n){return Array.from(n.getClientRects())}function RB(n){const t=si(n),e=Vf(n),s=n.ownerDocument.body,i=Wn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=Wn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-e.scrollLeft+$f(n);const c=-e.scrollTop;return Ps(s).direction==="rtl"&&(o+=Wn(t.clientWidth,s.clientWidth)-i),{width:i,height:r,x:o,y:c}}const g_=25;function MB(n,t){const e=Kn(n),s=si(n),i=e.visualViewport;let r=s.clientWidth,o=s.clientHeight,c=0,u=0;if(i){r=i.width,o=i.height;const f=Vb();(!f||f&&t==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}const h=$f(s);if(h<=0){const f=s.ownerDocument,m=f.body,g=getComputedStyle(m),v=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(s.clientWidth-m.clientWidth-v);b<=g_&&(r-=b)}else h<=g_&&(r+=h);return{width:r,height:o,x:c,y:u}}const PB=new Set(["absolute","fixed"]);function OB(n,t){const e=fa(n,!0,t==="fixed"),s=e.top+n.clientTop,i=e.left+n.clientLeft,r=ei(n)?Ho(n):Qs(1),o=n.clientWidth*r.x,c=n.clientHeight*r.y,u=i*r.x,h=s*r.y;return{width:o,height:c,x:u,y:h}}function y_(n,t,e){let s;if(t==="viewport")s=MB(n,e);else if(t==="document")s=RB(si(n));else if(Ms(t))s=OB(t,e);else{const i=FR(n);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return cf(s)}function UR(n,t){const e=wr(n);return e===t||!Ms(e)||Yo(e)?!1:Ps(e).position==="fixed"||UR(e,t)}function kB(n,t){const e=t.get(n);if(e)return e;let s=nu(n,[],!1).filter(c=>Ms(c)&&hl(c)!=="body"),i=null;const r=Ps(n).position==="fixed";let o=r?wr(n):n;for(;Ms(o)&&!Yo(o);){const c=Ps(o),u=Hb(o);!u&&c.position==="fixed"&&(i=null),(r?!u&&!i:!u&&c.position==="static"&&!!i&&PB.has(i.position)||Eu(o)&&!u&&UR(n,o))?s=s.filter(f=>f!==o):i=c,o=wr(o)}return t.set(n,s),s}function DB(n){let{element:t,boundary:e,rootBoundary:s,strategy:i}=n;const o=[...e==="clippingAncestors"?Hf(t)?[]:kB(t,this._c):[].concat(e),s],c=o[0],u=o.reduce((h,f)=>{const m=y_(t,f,i);return h.top=Wn(m.top,h.top),h.right=br(m.right,h.right),h.bottom=br(m.bottom,h.bottom),h.left=Wn(m.left,h.left),h},y_(t,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function NB(n){const{width:t,height:e}=IR(n);return{width:t,height:e}}function LB(n,t,e){const s=ei(t),i=si(t),r=e==="fixed",o=fa(n,!0,r,t);let c={scrollLeft:0,scrollTop:0};const u=Qs(0);function h(){u.x=$f(i)}if(s||!s&&!r)if((hl(t)!=="body"||Eu(i))&&(c=Vf(t)),s){const v=fa(t,!0,r,t);u.x=v.x+t.clientLeft,u.y=v.y+t.clientTop}else i&&h();r&&!s&&i&&h();const f=i&&!s&&!r?BR(i,c):Qs(0),m=o.left+c.scrollLeft-u.x-f.x,g=o.top+c.scrollTop-u.y-f.y;return{x:m,y:g,width:o.width,height:o.height}}function ay(n){return Ps(n).position==="static"}function v_(n,t){if(!ei(n)||Ps(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return si(n)===e&&(e=e.ownerDocument.body),e}function zR(n,t){const e=Kn(n);if(Hf(n))return e;if(!ei(n)){let i=wr(n);for(;i&&!Yo(i);){if(Ms(i)&&!ay(i))return i;i=wr(i)}return e}let s=v_(n,t);for(;s&&yB(s)&&ay(s);)s=v_(s,t);return s&&Yo(s)&&ay(s)&&!Hb(s)?e:s||SB(n)||e}const jB=async function(n){const t=this.getOffsetParent||zR,e=this.getDimensions,s=await e(n.floating);return{reference:LB(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function IB(n){return Ps(n).direction==="rtl"}const FB={convertOffsetParentRelativeRectToViewportRelativeRect:TB,getDocumentElement:si,getClippingRect:DB,getOffsetParent:zR,getElementRects:jB,getClientRects:CB,getDimensions:NB,getScale:Ho,isElement:Ms,isRTL:IB};function HR(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function BB(n,t){let e=null,s;const i=si(n);function r(){var c;clearTimeout(s),(c=e)==null||c.disconnect(),e=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),r();const h=n.getBoundingClientRect(),{left:f,top:m,width:g,height:v}=h;if(c||t(),!g||!v)return;const b=mh(m),w=mh(i.clientWidth-(f+g)),A=mh(i.clientHeight-(m+v)),E=mh(f),T={rootMargin:-b+"px "+-w+"px "+-A+"px "+-E+"px",threshold:Wn(0,br(1,u))||1};let M=!0;function P(k){const D=k[0].intersectionRatio;if(D!==u){if(!M)return o();D?o(!1,D):s=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!HR(h,n.getBoundingClientRect())&&o(),M=!1}try{e=new IntersectionObserver(P,{...T,root:i.ownerDocument})}catch{e=new IntersectionObserver(P,T)}e.observe(n)}return o(!0),r}function UB(n,t,e,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,h=$b(n),f=i||r?[...h?nu(h):[],...nu(t)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",e,{passive:!0}),r&&E.addEventListener("resize",e)});const m=h&&c?BB(h,e):null;let g=-1,v=null;o&&(v=new ResizeObserver(E=>{let[C]=E;C&&C.target===h&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var T;(T=v)==null||T.observe(t)})),e()}),h&&!u&&v.observe(h),v.observe(t));let b,w=u?fa(n):null;u&&A();function A(){const E=fa(n);w&&!HR(w,E)&&e(),w=E,b=requestAnimationFrame(A)}return e(),()=>{var E;f.forEach(C=>{i&&C.removeEventListener("scroll",e),r&&C.removeEventListener("resize",e)}),m?.(),(E=v)==null||E.disconnect(),v=null,u&&cancelAnimationFrame(b)}}const zB=dB,HB=hB,VB=lB,$B=pB,GB=cB,b_=oB,qB=fB,WB=(n,t,e)=>{const s=new Map,i={platform:FB,...e},r={...i.platform,_c:s};return aB(n,t,{...i,platform:r})};var KB=typeof document<"u",YB=function(){},Vh=KB?_.useLayoutEffect:YB;function uf(n,t){if(n===t)return!0;if(typeof n!=typeof t)return!1;if(typeof n=="function"&&n.toString()===t.toString())return!0;let e,s,i;if(n&&t&&typeof n=="object"){if(Array.isArray(n)){if(e=n.length,e!==t.length)return!1;for(s=e;s--!==0;)if(!uf(n[s],t[s]))return!1;return!0}if(i=Object.keys(n),e=i.length,e!==Object.keys(t).length)return!1;for(s=e;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=e;s--!==0;){const r=i[s];if(!(r==="_owner"&&n.$$typeof)&&!uf(n[r],t[r]))return!1}return!0}return n!==n&&t!==t}function VR(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function w_(n,t){const e=VR(n);return Math.round(t*e)/e}function oy(n){const t=_.useRef(n);return Vh(()=>{t.current=n}),t}function XB(n){n===void 0&&(n={});const{placement:t="bottom",strategy:e="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:o}={},transform:c=!0,whileElementsMounted:u,open:h}=n,[f,m]=_.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[g,v]=_.useState(s);uf(g,s)||v(s);const[b,w]=_.useState(null),[A,E]=_.useState(null),C=_.useCallback(F=>{F!==k.current&&(k.current=F,w(F))},[]),T=_.useCallback(F=>{F!==D.current&&(D.current=F,E(F))},[]),M=r||b,P=o||A,k=_.useRef(null),D=_.useRef(null),N=_.useRef(f),U=u!=null,V=oy(u),q=oy(i),it=oy(h),at=_.useCallback(()=>{if(!k.current||!D.current)return;const F={placement:t,strategy:e,middleware:g};q.current&&(F.platform=q.current),WB(k.current,D.current,F).then(W=>{const L={...W,isPositioned:it.current!==!1};rt.current&&!uf(N.current,L)&&(N.current=L,wu.flushSync(()=>{m(L)}))})},[g,t,e,q,it]);Vh(()=>{h===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,m(F=>({...F,isPositioned:!1})))},[h]);const rt=_.useRef(!1);Vh(()=>(rt.current=!0,()=>{rt.current=!1}),[]),Vh(()=>{if(M&&(k.current=M),P&&(D.current=P),M&&P){if(V.current)return V.current(M,P,at);at()}},[M,P,at,V,U]);const lt=_.useMemo(()=>({reference:k,floating:D,setReference:C,setFloating:T}),[C,T]),j=_.useMemo(()=>({reference:M,floating:P}),[M,P]),I=_.useMemo(()=>{const F={position:e,left:0,top:0};if(!j.floating)return F;const W=w_(j.floating,f.x),L=w_(j.floating,f.y);return c?{...F,transform:"translate("+W+"px, "+L+"px)",...VR(j.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:W,top:L}},[e,c,j.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:at,refs:lt,elements:j,floatingStyles:I}),[f,at,lt,j,I])}const QB=n=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:n,fn(e){const{element:s,padding:i}=typeof n=="function"?n(e):n;return s&&t(s)?s.current!=null?b_({element:s.current,padding:i}).fn(e):{}:s?b_({element:s,padding:i}).fn(e):{}}}},ZB=(n,t)=>({...zB(n),options:[n,t]}),JB=(n,t)=>({...HB(n),options:[n,t]}),t6=(n,t)=>({...qB(n),options:[n,t]}),e6=(n,t)=>({...VB(n),options:[n,t]}),n6=(n,t)=>({...$B(n),options:[n,t]}),s6=(n,t)=>({...GB(n),options:[n,t]}),i6=(n,t)=>({...QB(n),options:[n,t]});var r6="Arrow",$R=_.forwardRef((n,t)=>{const{children:e,width:s=10,height:i=5,...r}=n;return S.jsx(xt.svg,{...r,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?e:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});$R.displayName=r6;var a6=$R;function o6(n){const[t,e]=_.useState(void 0);return Pe(()=>{if(n){e({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let o,c;if("borderBoxSize"in r){const u=r.borderBoxSize,h=Array.isArray(u)?u[0]:u;o=h.inlineSize,c=h.blockSize}else o=n.offsetWidth,c=n.offsetHeight;e({width:o,height:c})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else e(void 0)},[n]),t}var Gb="Popper",[GR,fl]=ys(Gb),[l6,qR]=GR(Gb),WR=n=>{const{__scopePopper:t,children:e}=n,[s,i]=_.useState(null);return S.jsx(l6,{scope:t,anchor:s,onAnchorChange:i,children:e})};WR.displayName=Gb;var KR="PopperAnchor",YR=_.forwardRef((n,t)=>{const{__scopePopper:e,virtualRef:s,...i}=n,r=qR(KR,e),o=_.useRef(null),c=Ht(t,o),u=_.useRef(null);return _.useEffect(()=>{const h=u.current;u.current=s?.current||o.current,h!==u.current&&r.onAnchorChange(u.current)}),s?null:S.jsx(xt.div,{...i,ref:c})});YR.displayName=KR;var qb="PopperContent",[c6,u6]=GR(qb),XR=_.forwardRef((n,t)=>{const{__scopePopper:e,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:v="optimized",onPlaced:b,...w}=n,A=qR(qb,e),[E,C]=_.useState(null),T=Ht(t,J=>C(J)),[M,P]=_.useState(null),k=o6(M),D=k?.width??0,N=k?.height??0,U=s+(r!=="center"?"-"+r:""),V=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(h)?h:[h],it=q.length>0,at={padding:V,boundary:q.filter(h6),altBoundary:it},{refs:rt,floatingStyles:lt,placement:j,isPositioned:I,middlewareData:F}=XB({strategy:"fixed",placement:U,whileElementsMounted:(...J)=>UB(...J,{animationFrame:v==="always"}),elements:{reference:A.anchor},middleware:[ZB({mainAxis:i+N,alignmentAxis:o}),u&&JB({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?t6():void 0,...at}),u&&e6({...at}),n6({...at,apply:({elements:J,rects:ft,availableWidth:jt,availableHeight:zt})=>{const{width:It,height:Gt}=ft.reference,Oe=J.floating.style;Oe.setProperty("--radix-popper-available-width",`${jt}px`),Oe.setProperty("--radix-popper-available-height",`${zt}px`),Oe.setProperty("--radix-popper-anchor-width",`${It}px`),Oe.setProperty("--radix-popper-anchor-height",`${Gt}px`)}}),M&&i6({element:M,padding:c}),f6({arrowWidth:D,arrowHeight:N}),g&&s6({strategy:"referenceHidden",...at})]}),[W,L]=JR(j),K=Ge(b);Pe(()=>{I&&K?.()},[I,K]);const nt=F.arrow?.x,Z=F.arrow?.y,ot=F.arrow?.centerOffset!==0,[ht,ut]=_.useState();return Pe(()=>{E&&ut(window.getComputedStyle(E).zIndex)},[E]),S.jsx("div",{ref:rt.setFloating,"data-radix-popper-content-wrapper":"",style:{...lt,transform:I?lt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ht,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:S.jsx(c6,{scope:e,placedSide:W,onArrowChange:P,arrowX:nt,arrowY:Z,shouldHideArrow:ot,children:S.jsx(xt.div,{"data-side":W,"data-align":L,...w,ref:T,style:{...w.style,animation:I?void 0:"none"}})})})});XR.displayName=qb;var QR="PopperArrow",d6={top:"bottom",right:"left",bottom:"top",left:"right"},ZR=_.forwardRef(function(t,e){const{__scopePopper:s,...i}=t,r=u6(QR,s),o=d6[r.placedSide];return S.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:S.jsx(a6,{...i,ref:e,style:{...i.style,display:"block"}})})});ZR.displayName=QR;function h6(n){return n!==null}var f6=n=>({name:"transformOrigin",options:n,fn(t){const{placement:e,rects:s,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,c=o?0:n.arrowWidth,u=o?0:n.arrowHeight,[h,f]=JR(e),m={start:"0%",center:"50%",end:"100%"}[f],g=(i.arrow?.x??0)+c/2,v=(i.arrow?.y??0)+u/2;let b="",w="";return h==="bottom"?(b=o?m:`${g}px`,w=`${-u}px`):h==="top"?(b=o?m:`${g}px`,w=`${s.floating.height+u}px`):h==="right"?(b=`${-u}px`,w=o?m:`${v}px`):h==="left"&&(b=`${s.floating.width+u}px`,w=o?m:`${v}px`),{data:{x:b,y:w}}}});function JR(n){const[t,e="center"]=n.split("-");return[t,e]}var Wb=WR,Gf=YR,Kb=XR,Yb=ZR,p6="Portal",Tu=_.forwardRef((n,t)=>{const{container:e,...s}=n,[i,r]=_.useState(!1);Pe(()=>r(!0),[]);const o=e||i&&globalThis?.document?.body;return o?g3.createPortal(S.jsx(xt.div,{...s,ref:t}),o):null});Tu.displayName=p6;function m6(n,t){return _.useReducer((e,s)=>t[e][s]??e,n)}var vn=n=>{const{present:t,children:e}=n,s=g6(t),i=typeof e=="function"?e({present:s.isPresent}):_.Children.only(e),r=Ht(s.ref,y6(i));return typeof e=="function"||s.isPresent?_.cloneElement(i,{ref:r}):null};vn.displayName="Presence";function g6(n){const[t,e]=_.useState(),s=_.useRef(null),i=_.useRef(n),r=_.useRef("none"),o=n?"mounted":"unmounted",[c,u]=m6(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const h=gh(s.current);r.current=c==="mounted"?h:"none"},[c]),Pe(()=>{const h=s.current,f=i.current;if(f!==n){const g=r.current,v=gh(h);n?u("MOUNT"):v==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&g!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,u]),Pe(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,m=v=>{const w=gh(s.current).includes(CSS.escape(v.animationName));if(v.target===t&&w&&(u("ANIMATION_END"),!i.current)){const A=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=A)})}},g=v=>{v.target===t&&(r.current=gh(s.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:_.useCallback(h=>{s.current=h?getComputedStyle(h):null,e(h)},[])}}function gh(n){return n?.animationName||"none"}function y6(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var v6=UC[" useInsertionEffect ".trim().toString()]||Pe;function pa({prop:n,defaultProp:t,onChange:e=()=>{},caller:s}){const[i,r,o]=b6({defaultProp:t,onChange:e}),c=n!==void 0,u=c?n:i;{const f=_.useRef(n!==void 0);_.useEffect(()=>{const m=f.current;m!==c&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const h=_.useCallback(f=>{if(c){const m=w6(f)?f(n):f;m!==n&&o.current?.(m)}else r(f)},[c,n,r,o]);return[u,h]}function b6({defaultProp:n,onChange:t}){const[e,s]=_.useState(n),i=_.useRef(e),r=_.useRef(t);return v6(()=>{r.current=t},[t]),_.useEffect(()=>{i.current!==e&&(r.current?.(e),i.current=e)},[e,i]),[e,s,r]}function w6(n){return typeof n=="function"}var ly="rovingFocusGroup.onEntryFocus",x6={bubbles:!1,cancelable:!0},Cu="RovingFocusGroup",[ov,t2,S6]=Bf(Cu),[A6,pl]=ys(Cu,[S6]),[_6,E6]=A6(Cu),e2=_.forwardRef((n,t)=>S.jsx(ov.Provider,{scope:n.__scopeRovingFocusGroup,children:S.jsx(ov.Slot,{scope:n.__scopeRovingFocusGroup,children:S.jsx(T6,{...n,ref:t})})}));e2.displayName=Cu;var T6=_.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:e,orientation:s,loop:i=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=n,g=_.useRef(null),v=Ht(t,g),b=ul(r),[w,A]=pa({prop:o,defaultProp:c??null,onChange:u,caller:Cu}),[E,C]=_.useState(!1),T=Ge(h),M=t2(e),P=_.useRef(!1),[k,D]=_.useState(0);return _.useEffect(()=>{const N=g.current;if(N)return N.addEventListener(ly,T),()=>N.removeEventListener(ly,T)},[T]),S.jsx(_6,{scope:e,orientation:s,dir:b,loop:i,currentTabStopId:w,onItemFocus:_.useCallback(N=>A(N),[A]),onItemShiftTab:_.useCallback(()=>C(!0),[]),onFocusableItemAdd:_.useCallback(()=>D(N=>N+1),[]),onFocusableItemRemove:_.useCallback(()=>D(N=>N-1),[]),children:S.jsx(xt.div,{tabIndex:E||k===0?-1:0,"data-orientation":s,...m,ref:v,style:{outline:"none",...n.style},onMouseDown:ct(n.onMouseDown,()=>{P.current=!0}),onFocus:ct(n.onFocus,N=>{const U=!P.current;if(N.target===N.currentTarget&&U&&!E){const V=new CustomEvent(ly,x6);if(N.currentTarget.dispatchEvent(V),!V.defaultPrevented){const q=M().filter(j=>j.focusable),it=q.find(j=>j.active),at=q.find(j=>j.id===w),lt=[it,at,...q].filter(Boolean).map(j=>j.ref.current);i2(lt,f)}}P.current=!1}),onBlur:ct(n.onBlur,()=>C(!1))})})}),n2="RovingFocusGroupItem",s2=_.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:e,focusable:s=!0,active:i=!1,tabStopId:r,children:o,...c}=n,u=ds(),h=r||u,f=E6(n2,e),m=f.currentTabStopId===h,g=t2(e),{onFocusableItemAdd:v,onFocusableItemRemove:b,currentTabStopId:w}=f;return _.useEffect(()=>{if(s)return v(),()=>b()},[s,v,b]),S.jsx(ov.ItemSlot,{scope:e,id:h,focusable:s,active:i,children:S.jsx(xt.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...c,ref:t,onMouseDown:ct(n.onMouseDown,A=>{s?f.onItemFocus(h):A.preventDefault()}),onFocus:ct(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:ct(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){f.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const E=M6(A,f.orientation,f.dir);if(E!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let T=g().filter(M=>M.focusable).map(M=>M.ref.current);if(E==="last")T.reverse();else if(E==="prev"||E==="next"){E==="prev"&&T.reverse();const M=T.indexOf(A.currentTarget);T=f.loop?P6(T,M+1):T.slice(M+1)}setTimeout(()=>i2(T))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:w!=null}):o})})});s2.displayName=n2;var C6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R6(n,t){return t!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function M6(n,t,e){const s=R6(n.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return C6[s]}function i2(n,t=!1){const e=document.activeElement;for(const s of n)if(s===e||(s.focus({preventScroll:t}),document.activeElement!==e))return}function P6(n,t){return n.map((e,s)=>n[(t+s)%n.length])}var Xb=e2,Qb=s2,O6=function(n){if(typeof document>"u")return null;var t=Array.isArray(n)?n[0]:n;return t.ownerDocument.body},go=new WeakMap,yh=new WeakMap,vh={},cy=0,r2=function(n){return n&&(n.host||r2(n.parentNode))},k6=function(n,t){return t.map(function(e){if(n.contains(e))return e;var s=r2(e);return s&&n.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",n,". Doing nothing"),null)}).filter(function(e){return!!e})},D6=function(n,t,e,s){var i=k6(t,Array.isArray(n)?n:[n]);vh[e]||(vh[e]=new WeakMap);var r=vh[e],o=[],c=new Set,u=new Set(i),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};i.forEach(h);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(c.has(g))f(g);else try{var v=g.getAttribute(s),b=v!==null&&v!=="false",w=(go.get(g)||0)+1,A=(r.get(g)||0)+1;go.set(g,w),r.set(g,A),o.push(g),w===1&&b&&yh.set(g,!0),A===1&&g.setAttribute(e,"true"),b||g.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",g,E)}})};return f(t),c.clear(),cy++,function(){o.forEach(function(m){var g=go.get(m)-1,v=r.get(m)-1;go.set(m,g),r.set(m,v),g||(yh.has(m)||m.removeAttribute(s),yh.delete(m)),v||m.removeAttribute(e)}),cy--,cy||(go=new WeakMap,go=new WeakMap,yh=new WeakMap,vh={})}},qf=function(n,t,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=O6(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),D6(s,i,e,"aria-hidden")):function(){return null}},Ws=function(){return Ws=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++){e=arguments[s];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ws.apply(this,arguments)};function a2(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(e[s[i]]=n[s[i]]);return e}function N6(n,t,e){if(e||arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return n.concat(r||Array.prototype.slice.call(t))}var $h="right-scroll-bar-position",Gh="width-before-scroll-bar",L6="with-scroll-bars-hidden",j6="--removed-body-scroll-bar-size";function uy(n,t){return typeof n=="function"?n(t):n&&(n.current=t),n}function I6(n,t){var e=_.useState(function(){return{value:n,callback:t,facade:{get current(){return e.value},set current(s){var i=e.value;i!==s&&(e.value=s,e.callback(s,i))}}}})[0];return e.callback=t,e.facade}var F6=typeof window<"u"?_.useLayoutEffect:_.useEffect,x_=new WeakMap;function B6(n,t){var e=I6(null,function(s){return n.forEach(function(i){return uy(i,s)})});return F6(function(){var s=x_.get(e);if(s){var i=new Set(s),r=new Set(n),o=e.current;i.forEach(function(c){r.has(c)||uy(c,null)}),r.forEach(function(c){i.has(c)||uy(c,o)})}x_.set(e,n)},[n]),e}function U6(n){return n}function z6(n,t){t===void 0&&(t=U6);var e=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:n},useMedium:function(r){var o=t(r,s);return e.push(o),function(){e=e.filter(function(c){return c!==o})}},assignSyncMedium:function(r){for(s=!0;e.length;){var o=e;e=[],o.forEach(r)}e={push:function(c){return r(c)},filter:function(){return e}}},assignMedium:function(r){s=!0;var o=[];if(e.length){var c=e;e=[],c.forEach(r),o=e}var u=function(){var f=o;o=[],f.forEach(r)},h=function(){return Promise.resolve().then(u)};h(),e={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),e}}}};return i}function H6(n){n===void 0&&(n={});var t=z6(null);return t.options=Ws({async:!0,ssr:!1},n),t}var o2=function(n){var t=n.sideCar,e=a2(n,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return _.createElement(s,Ws({},e))};o2.isSideCarExport=!0;function V6(n,t){return n.useMedium(t),o2}var l2=H6(),dy=function(){},Wf=_.forwardRef(function(n,t){var e=_.useRef(null),s=_.useState({onScrollCapture:dy,onWheelCapture:dy,onTouchMoveCapture:dy}),i=s[0],r=s[1],o=n.forwardProps,c=n.children,u=n.className,h=n.removeScrollBar,f=n.enabled,m=n.shards,g=n.sideCar,v=n.noRelative,b=n.noIsolation,w=n.inert,A=n.allowPinchZoom,E=n.as,C=E===void 0?"div":E,T=n.gapMode,M=a2(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=g,k=B6([e,t]),D=Ws(Ws({},M),i);return _.createElement(_.Fragment,null,f&&_.createElement(P,{sideCar:l2,removeScrollBar:h,shards:m,noRelative:v,noIsolation:b,inert:w,setCallbacks:r,allowPinchZoom:!!A,lockRef:e,gapMode:T}),o?_.cloneElement(_.Children.only(c),Ws(Ws({},D),{ref:k})):_.createElement(C,Ws({},D,{className:u,ref:k}),c))});Wf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Wf.classNames={fullWidth:Gh,zeroRight:$h};var $6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function G6(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var t=$6();return t&&n.setAttribute("nonce",t),n}function q6(n,t){n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}function W6(n){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(n)}var K6=function(){var n=0,t=null;return{add:function(e){n==0&&(t=G6())&&(q6(t,e),W6(t)),n++},remove:function(){n--,!n&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Y6=function(){var n=K6();return function(t,e){_.useEffect(function(){return n.add(t),function(){n.remove()}},[t&&e])}},c2=function(){var n=Y6(),t=function(e){var s=e.styles,i=e.dynamic;return n(s,i),null};return t},X6={left:0,top:0,right:0,gap:0},hy=function(n){return parseInt(n||"",10)||0},Q6=function(n){var t=window.getComputedStyle(document.body),e=t[n==="padding"?"paddingLeft":"marginLeft"],s=t[n==="padding"?"paddingTop":"marginTop"],i=t[n==="padding"?"paddingRight":"marginRight"];return[hy(e),hy(s),hy(i)]},Z6=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return X6;var t=Q6(n),e=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-e+t[2]-t[0])}},J6=c2(),Vo="data-scroll-locked",t4=function(n,t,e,s){var i=n.left,r=n.top,o=n.right,c=n.gap;return e===void 0&&(e="margin"),`
  .`.concat(L6,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(Vo,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),e==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($h,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(Gh,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat($h," .").concat($h,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Gh," .").concat(Gh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Vo,`] {
    `).concat(j6,": ").concat(c,`px;
  }
`)},S_=function(){var n=parseInt(document.body.getAttribute(Vo)||"0",10);return isFinite(n)?n:0},e4=function(){_.useEffect(function(){return document.body.setAttribute(Vo,(S_()+1).toString()),function(){var n=S_()-1;n<=0?document.body.removeAttribute(Vo):document.body.setAttribute(Vo,n.toString())}},[])},n4=function(n){var t=n.noRelative,e=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;e4();var r=_.useMemo(function(){return Z6(i)},[i]);return _.createElement(J6,{styles:t4(r,!t,i,e?"":"!important")})},lv=!1;if(typeof window<"u")try{var bh=Object.defineProperty({},"passive",{get:function(){return lv=!0,!0}});window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{lv=!1}var yo=lv?{passive:!1}:!1,s4=function(n){return n.tagName==="TEXTAREA"},u2=function(n,t){if(!(n instanceof Element))return!1;var e=window.getComputedStyle(n);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!s4(n)&&e[t]==="visible")},i4=function(n){return u2(n,"overflowY")},r4=function(n){return u2(n,"overflowX")},A_=function(n,t){var e=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=d2(n,s);if(i){var r=h2(n,s),o=r[1],c=r[2];if(o>c)return!0}s=s.parentNode}while(s&&s!==e.body);return!1},a4=function(n){var t=n.scrollTop,e=n.scrollHeight,s=n.clientHeight;return[t,e,s]},o4=function(n){var t=n.scrollLeft,e=n.scrollWidth,s=n.clientWidth;return[t,e,s]},d2=function(n,t){return n==="v"?i4(t):r4(t)},h2=function(n,t){return n==="v"?a4(t):o4(t)},l4=function(n,t){return n==="h"&&t==="rtl"?-1:1},c4=function(n,t,e,s,i){var r=l4(n,window.getComputedStyle(t).direction),o=r*s,c=e.target,u=t.contains(c),h=!1,f=o>0,m=0,g=0;do{if(!c)break;var v=h2(n,c),b=v[0],w=v[1],A=v[2],E=w-A-r*b;(b||E)&&d2(n,c)&&(m+=E,g+=b);var C=c.parentNode;c=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&c!==document.body||u&&(t.contains(c)||t===c));return(f&&Math.abs(m)<1||!f&&Math.abs(g)<1)&&(h=!0),h},wh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},__=function(n){return[n.deltaX,n.deltaY]},E_=function(n){return n&&"current"in n?n.current:n},u4=function(n,t){return n[0]===t[0]&&n[1]===t[1]},d4=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},h4=0,vo=[];function f4(n){var t=_.useRef([]),e=_.useRef([0,0]),s=_.useRef(),i=_.useState(h4++)[0],r=_.useState(c2)[0],o=_.useRef(n);_.useEffect(function(){o.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var w=N6([n.lockRef.current],(n.shards||[]).map(E_),!0).filter(Boolean);return w.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var c=_.useCallback(function(w,A){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var E=wh(w),C=e.current,T="deltaX"in w?w.deltaX:C[0]-E[0],M="deltaY"in w?w.deltaY:C[1]-E[1],P,k=w.target,D=Math.abs(T)>Math.abs(M)?"h":"v";if("touches"in w&&D==="h"&&k.type==="range")return!1;var N=A_(D,k);if(!N)return!0;if(N?P=D:(P=D==="v"?"h":"v",N=A_(D,k)),!N)return!1;if(!s.current&&"changedTouches"in w&&(T||M)&&(s.current=P),!P)return!0;var U=s.current||P;return c4(U,A,w,U==="h"?T:M)},[]),u=_.useCallback(function(w){var A=w;if(!(!vo.length||vo[vo.length-1]!==r)){var E="deltaY"in A?__(A):wh(A),C=t.current.filter(function(P){return P.name===A.type&&(P.target===A.target||A.target===P.shadowParent)&&u4(P.delta,E)})[0];if(C&&C.should){A.cancelable&&A.preventDefault();return}if(!C){var T=(o.current.shards||[]).map(E_).filter(Boolean).filter(function(P){return P.contains(A.target)}),M=T.length>0?c(A,T[0]):!o.current.noIsolation;M&&A.cancelable&&A.preventDefault()}}},[]),h=_.useCallback(function(w,A,E,C){var T={name:w,delta:A,target:E,should:C,shadowParent:p4(E)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(M){return M!==T})},1)},[]),f=_.useCallback(function(w){e.current=wh(w),s.current=void 0},[]),m=_.useCallback(function(w){h(w.type,__(w),w.target,c(w,n.lockRef.current))},[]),g=_.useCallback(function(w){h(w.type,wh(w),w.target,c(w,n.lockRef.current))},[]);_.useEffect(function(){return vo.push(r),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,yo),document.addEventListener("touchmove",u,yo),document.addEventListener("touchstart",f,yo),function(){vo=vo.filter(function(w){return w!==r}),document.removeEventListener("wheel",u,yo),document.removeEventListener("touchmove",u,yo),document.removeEventListener("touchstart",f,yo)}},[]);var v=n.removeScrollBar,b=n.inert;return _.createElement(_.Fragment,null,b?_.createElement(r,{styles:d4(i)}):null,v?_.createElement(n4,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function p4(n){for(var t=null;n!==null;)n instanceof ShadowRoot&&(t=n.host,n=n.host),n=n.parentNode;return t}const m4=V6(l2,f4);var Ru=_.forwardRef(function(n,t){return _.createElement(Wf,Ws({},n,{ref:t,sideCar:m4}))});Ru.classNames=Wf.classNames;var cv=["Enter"," "],g4=["ArrowDown","PageUp","Home"],f2=["ArrowUp","PageDown","End"],y4=[...g4,...f2],v4={ltr:[...cv,"ArrowRight"],rtl:[...cv,"ArrowLeft"]},b4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Mu="Menu",[su,w4,x4]=Bf(Mu),[_a,S4]=ys(Mu,[x4,fl,pl]),Kf=fl(),p2=pl(),[A4,Ea]=_a(Mu),[_4,Pu]=_a(Mu),m2=n=>{const{__scopeMenu:t,open:e=!1,children:s,dir:i,onOpenChange:r,modal:o=!0}=n,c=Kf(t),[u,h]=_.useState(null),f=_.useRef(!1),m=Ge(r),g=ul(i);return _.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),S.jsx(Wb,{...c,children:S.jsx(A4,{scope:t,open:e,onOpenChange:m,content:u,onContentChange:h,children:S.jsx(_4,{scope:t,onClose:_.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:g,modal:o,children:s})})})};m2.displayName=Mu;var E4="MenuAnchor",Zb=_.forwardRef((n,t)=>{const{__scopeMenu:e,...s}=n,i=Kf(e);return S.jsx(Gf,{...i,...s,ref:t})});Zb.displayName=E4;var Jb="MenuPortal",[T4,g2]=_a(Jb,{forceMount:void 0}),y2=n=>{const{__scopeMenu:t,forceMount:e,children:s,container:i}=n,r=Ea(Jb,t);return S.jsx(T4,{scope:t,forceMount:e,children:S.jsx(vn,{present:e||r.open,children:S.jsx(Tu,{asChild:!0,container:i,children:s})})})};y2.displayName=Jb;var hs="MenuContent",[C4,t0]=_a(hs),v2=_.forwardRef((n,t)=>{const e=g2(hs,n.__scopeMenu),{forceMount:s=e.forceMount,...i}=n,r=Ea(hs,n.__scopeMenu),o=Pu(hs,n.__scopeMenu);return S.jsx(su.Provider,{scope:n.__scopeMenu,children:S.jsx(vn,{present:s||r.open,children:S.jsx(su.Slot,{scope:n.__scopeMenu,children:o.modal?S.jsx(R4,{...i,ref:t}):S.jsx(M4,{...i,ref:t})})})})}),R4=_.forwardRef((n,t)=>{const e=Ea(hs,n.__scopeMenu),s=_.useRef(null),i=Ht(t,s);return _.useEffect(()=>{const r=s.current;if(r)return qf(r)},[]),S.jsx(e0,{...n,ref:i,trapFocus:e.open,disableOutsidePointerEvents:e.open,disableOutsideScroll:!0,onFocusOutside:ct(n.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>e.onOpenChange(!1)})}),M4=_.forwardRef((n,t)=>{const e=Ea(hs,n.__scopeMenu);return S.jsx(e0,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>e.onOpenChange(!1)})}),P4=vr("MenuContent.ScrollLock"),e0=_.forwardRef((n,t)=>{const{__scopeMenu:e,loop:s=!1,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:v,disableOutsideScroll:b,...w}=n,A=Ea(hs,e),E=Pu(hs,e),C=Kf(e),T=p2(e),M=w4(e),[P,k]=_.useState(null),D=_.useRef(null),N=Ht(t,D,A.onContentChange),U=_.useRef(0),V=_.useRef(""),q=_.useRef(0),it=_.useRef(null),at=_.useRef("right"),rt=_.useRef(0),lt=b?Ru:_.Fragment,j=b?{as:P4,allowPinchZoom:!0}:void 0,I=W=>{const L=V.current+W,K=M().filter(J=>!J.disabled),nt=document.activeElement,Z=K.find(J=>J.ref.current===nt)?.textValue,ot=K.map(J=>J.textValue),ht=H4(ot,L,Z),ut=K.find(J=>J.textValue===ht)?.ref.current;(function J(ft){V.current=ft,window.clearTimeout(U.current),ft!==""&&(U.current=window.setTimeout(()=>J(""),1e3))})(L),ut&&setTimeout(()=>ut.focus())};_.useEffect(()=>()=>window.clearTimeout(U.current),[]),Uf();const F=_.useCallback(W=>at.current===it.current?.side&&$4(W,it.current?.area),[]);return S.jsx(C4,{scope:e,searchRef:V,onItemEnter:_.useCallback(W=>{F(W)&&W.preventDefault()},[F]),onItemLeave:_.useCallback(W=>{F(W)||(D.current?.focus(),k(null))},[F]),onTriggerLeave:_.useCallback(W=>{F(W)&&W.preventDefault()},[F]),pointerGraceTimerRef:q,onPointerGraceIntentChange:_.useCallback(W=>{it.current=W},[]),children:S.jsx(lt,{...j,children:S.jsx(_u,{asChild:!0,trapped:i,onMountAutoFocus:ct(r,W=>{W.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:S.jsx(Au,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:v,children:S.jsx(Xb,{asChild:!0,...T,dir:E.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:k,onEntryFocus:ct(u,W=>{E.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:S.jsx(Kb,{role:"menu","aria-orientation":"vertical","data-state":N2(A.open),"data-radix-menu-content":"",dir:E.dir,...C,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:ct(w.onKeyDown,W=>{const K=W.target.closest("[data-radix-menu-content]")===W.currentTarget,nt=W.ctrlKey||W.altKey||W.metaKey,Z=W.key.length===1;K&&(W.key==="Tab"&&W.preventDefault(),!nt&&Z&&I(W.key));const ot=D.current;if(W.target!==ot||!y4.includes(W.key))return;W.preventDefault();const ut=M().filter(J=>!J.disabled).map(J=>J.ref.current);f2.includes(W.key)&&ut.reverse(),U4(ut)}),onBlur:ct(n.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(U.current),V.current="")}),onPointerMove:ct(n.onPointerMove,iu(W=>{const L=W.target,K=rt.current!==W.clientX;if(W.currentTarget.contains(L)&&K){const nt=W.clientX>rt.current?"right":"left";at.current=nt,rt.current=W.clientX}}))})})})})})})});v2.displayName=hs;var O4="MenuGroup",n0=_.forwardRef((n,t)=>{const{__scopeMenu:e,...s}=n;return S.jsx(xt.div,{role:"group",...s,ref:t})});n0.displayName=O4;var k4="MenuLabel",b2=_.forwardRef((n,t)=>{const{__scopeMenu:e,...s}=n;return S.jsx(xt.div,{...s,ref:t})});b2.displayName=k4;var df="MenuItem",T_="menu.itemSelect",Yf=_.forwardRef((n,t)=>{const{disabled:e=!1,onSelect:s,...i}=n,r=_.useRef(null),o=Pu(df,n.__scopeMenu),c=t0(df,n.__scopeMenu),u=Ht(t,r),h=_.useRef(!1),f=()=>{const m=r.current;if(!e&&m){const g=new CustomEvent(T_,{bubbles:!0,cancelable:!0});m.addEventListener(T_,v=>s?.(v),{once:!0}),sR(m,g),g.defaultPrevented?h.current=!1:o.onClose()}};return S.jsx(w2,{...i,ref:u,disabled:e,onClick:ct(n.onClick,f),onPointerDown:m=>{n.onPointerDown?.(m),h.current=!0},onPointerUp:ct(n.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:ct(n.onKeyDown,m=>{const g=c.searchRef.current!=="";e||g&&m.key===" "||cv.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Yf.displayName=df;var w2=_.forwardRef((n,t)=>{const{__scopeMenu:e,disabled:s=!1,textValue:i,...r}=n,o=t0(df,e),c=p2(e),u=_.useRef(null),h=Ht(t,u),[f,m]=_.useState(!1),[g,v]=_.useState("");return _.useEffect(()=>{const b=u.current;b&&v((b.textContent??"").trim())},[r.children]),S.jsx(su.ItemSlot,{scope:e,disabled:s,textValue:i??g,children:S.jsx(Qb,{asChild:!0,...c,focusable:!s,children:S.jsx(xt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...r,ref:h,onPointerMove:ct(n.onPointerMove,iu(b=>{s?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ct(n.onPointerLeave,iu(b=>o.onItemLeave(b))),onFocus:ct(n.onFocus,()=>m(!0)),onBlur:ct(n.onBlur,()=>m(!1))})})})}),D4="MenuCheckboxItem",x2=_.forwardRef((n,t)=>{const{checked:e=!1,onCheckedChange:s,...i}=n;return S.jsx(T2,{scope:n.__scopeMenu,checked:e,children:S.jsx(Yf,{role:"menuitemcheckbox","aria-checked":hf(e)?"mixed":e,...i,ref:t,"data-state":i0(e),onSelect:ct(i.onSelect,()=>s?.(hf(e)?!0:!e),{checkForDefaultPrevented:!1})})})});x2.displayName=D4;var S2="MenuRadioGroup",[N4,L4]=_a(S2,{value:void 0,onValueChange:()=>{}}),A2=_.forwardRef((n,t)=>{const{value:e,onValueChange:s,...i}=n,r=Ge(s);return S.jsx(N4,{scope:n.__scopeMenu,value:e,onValueChange:r,children:S.jsx(n0,{...i,ref:t})})});A2.displayName=S2;var _2="MenuRadioItem",E2=_.forwardRef((n,t)=>{const{value:e,...s}=n,i=L4(_2,n.__scopeMenu),r=e===i.value;return S.jsx(T2,{scope:n.__scopeMenu,checked:r,children:S.jsx(Yf,{role:"menuitemradio","aria-checked":r,...s,ref:t,"data-state":i0(r),onSelect:ct(s.onSelect,()=>i.onValueChange?.(e),{checkForDefaultPrevented:!1})})})});E2.displayName=_2;var s0="MenuItemIndicator",[T2,j4]=_a(s0,{checked:!1}),C2=_.forwardRef((n,t)=>{const{__scopeMenu:e,forceMount:s,...i}=n,r=j4(s0,e);return S.jsx(vn,{present:s||hf(r.checked)||r.checked===!0,children:S.jsx(xt.span,{...i,ref:t,"data-state":i0(r.checked)})})});C2.displayName=s0;var I4="MenuSeparator",R2=_.forwardRef((n,t)=>{const{__scopeMenu:e,...s}=n;return S.jsx(xt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});R2.displayName=I4;var F4="MenuArrow",M2=_.forwardRef((n,t)=>{const{__scopeMenu:e,...s}=n,i=Kf(e);return S.jsx(Yb,{...i,...s,ref:t})});M2.displayName=F4;var B4="MenuSub",[SJ,P2]=_a(B4),Ic="MenuSubTrigger",O2=_.forwardRef((n,t)=>{const e=Ea(Ic,n.__scopeMenu),s=Pu(Ic,n.__scopeMenu),i=P2(Ic,n.__scopeMenu),r=t0(Ic,n.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=r,h={__scopeMenu:n.__scopeMenu},f=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>f,[f]),_.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),u(null)}},[c,u]),S.jsx(Zb,{asChild:!0,...h,children:S.jsx(w2,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":e.open,"aria-controls":i.contentId,"data-state":N2(e.open),...n,ref:Db(t,i.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),e.open||e.onOpenChange(!0))},onPointerMove:ct(n.onPointerMove,iu(m=>{r.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!e.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{e.onOpenChange(!0),f()},100))})),onPointerLeave:ct(n.onPointerLeave,iu(m=>{f();const g=e.content?.getBoundingClientRect();if(g){const v=e.content?.dataset.side,b=v==="right",w=b?-5:5,A=g[b?"left":"right"],E=g[b?"right":"left"];r.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:A,y:g.top},{x:E,y:g.top},{x:E,y:g.bottom},{x:A,y:g.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(m),m.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:ct(n.onKeyDown,m=>{const g=r.searchRef.current!=="";n.disabled||g&&m.key===" "||v4[s.dir].includes(m.key)&&(e.onOpenChange(!0),e.content?.focus(),m.preventDefault())})})})});O2.displayName=Ic;var k2="MenuSubContent",D2=_.forwardRef((n,t)=>{const e=g2(hs,n.__scopeMenu),{forceMount:s=e.forceMount,...i}=n,r=Ea(hs,n.__scopeMenu),o=Pu(hs,n.__scopeMenu),c=P2(k2,n.__scopeMenu),u=_.useRef(null),h=Ht(t,u);return S.jsx(su.Provider,{scope:n.__scopeMenu,children:S.jsx(vn,{present:s||r.open,children:S.jsx(su.Slot,{scope:n.__scopeMenu,children:S.jsx(e0,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{o.isUsingKeyboardRef.current&&u.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:ct(n.onFocusOutside,f=>{f.target!==c.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:ct(n.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:ct(n.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),g=b4[o.dir].includes(f.key);m&&g&&(r.onOpenChange(!1),c.trigger?.focus(),f.preventDefault())})})})})})});D2.displayName=k2;function N2(n){return n?"open":"closed"}function hf(n){return n==="indeterminate"}function i0(n){return hf(n)?"indeterminate":n?"checked":"unchecked"}function U4(n){const t=document.activeElement;for(const e of n)if(e===t||(e.focus(),document.activeElement!==t))return}function z4(n,t){return n.map((e,s)=>n[(t+s)%n.length])}function H4(n,t,e){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,r=e?n.indexOf(e):-1;let o=z4(n,Math.max(r,0));i.length===1&&(o=o.filter(h=>h!==e));const u=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return u!==e?u:void 0}function V4(n,t){const{x:e,y:s}=n;let i=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const c=t[r],u=t[o],h=c.x,f=c.y,m=u.x,g=u.y;f>s!=g>s&&e<(m-h)*(s-f)/(g-f)+h&&(i=!i)}return i}function $4(n,t){if(!t)return!1;const e={x:n.clientX,y:n.clientY};return V4(e,t)}function iu(n){return t=>t.pointerType==="mouse"?n(t):void 0}var G4=m2,q4=Zb,W4=y2,K4=v2,Y4=n0,X4=b2,Q4=Yf,Z4=x2,J4=A2,tU=E2,eU=C2,nU=R2,sU=M2,iU=O2,rU=D2,Ou="Menubar",[uv,aU,oU]=Bf(Ou),[L2,AJ]=ys(Ou,[oU,pl]),bn=S4(),j2=pl(),[lU,r0]=L2(Ou),I2=_.forwardRef((n,t)=>{const{__scopeMenubar:e,value:s,onValueChange:i,defaultValue:r,loop:o=!0,dir:c,...u}=n,h=ul(c),f=j2(e),[m,g]=pa({prop:s,onChange:i,defaultProp:r??"",caller:Ou}),[v,b]=_.useState(null);return S.jsx(lU,{scope:e,value:m,onMenuOpen:_.useCallback(w=>{g(w),b(w)},[g]),onMenuClose:_.useCallback(()=>g(""),[g]),onMenuToggle:_.useCallback(w=>{g(A=>A?"":w),b(w)},[g]),dir:h,loop:o,children:S.jsx(uv.Provider,{scope:e,children:S.jsx(uv.Slot,{scope:e,children:S.jsx(Xb,{asChild:!0,...f,orientation:"horizontal",loop:o,dir:h,currentTabStopId:v,onCurrentTabStopIdChange:b,children:S.jsx(xt.div,{role:"menubar",...u,ref:t})})})})})});I2.displayName=Ou;var a0="MenubarMenu",[cU,F2]=L2(a0),B2=n=>{const{__scopeMenubar:t,value:e,...s}=n,i=ds(),r=e||i||"LEGACY_REACT_AUTO_VALUE",o=r0(a0,t),c=bn(t),u=_.useRef(null),h=_.useRef(!1),f=o.value===r;return _.useEffect(()=>{f||(h.current=!1)},[f]),S.jsx(cU,{scope:t,value:r,triggerId:ds(),triggerRef:u,contentId:ds(),wasKeyboardTriggerOpenRef:h,children:S.jsx(G4,{...c,open:f,onOpenChange:m=>{m||o.onMenuClose()},modal:!1,dir:o.dir,...s})})};B2.displayName=a0;var dv="MenubarTrigger",U2=_.forwardRef((n,t)=>{const{__scopeMenubar:e,disabled:s=!1,...i}=n,r=j2(e),o=bn(e),c=r0(dv,e),u=F2(dv,e),h=_.useRef(null),f=Ht(t,h,u.triggerRef),[m,g]=_.useState(!1),v=c.value===u.value;return S.jsx(uv.ItemSlot,{scope:e,value:u.value,disabled:s,children:S.jsx(Qb,{asChild:!0,...r,focusable:!s,tabStopId:u.value,children:S.jsx(q4,{asChild:!0,...o,children:S.jsx(xt.button,{type:"button",role:"menuitem",id:u.triggerId,"aria-haspopup":"menu","aria-expanded":v,"aria-controls":v?u.contentId:void 0,"data-highlighted":m?"":void 0,"data-state":v?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:f,onPointerDown:ct(n.onPointerDown,b=>{!s&&b.button===0&&b.ctrlKey===!1&&(c.onMenuOpen(u.value),v||b.preventDefault())}),onPointerEnter:ct(n.onPointerEnter,()=>{!!c.value&&!v&&(c.onMenuOpen(u.value),h.current?.focus())}),onKeyDown:ct(n.onKeyDown,b=>{s||(["Enter"," "].includes(b.key)&&c.onMenuToggle(u.value),b.key==="ArrowDown"&&c.onMenuOpen(u.value),["Enter"," ","ArrowDown"].includes(b.key)&&(u.wasKeyboardTriggerOpenRef.current=!0,b.preventDefault()))}),onFocus:ct(n.onFocus,()=>g(!0)),onBlur:ct(n.onBlur,()=>g(!1))})})})})});U2.displayName=dv;var uU="MenubarPortal",z2=n=>{const{__scopeMenubar:t,...e}=n,s=bn(t);return S.jsx(W4,{...s,...e})};z2.displayName=uU;var hv="MenubarContent",H2=_.forwardRef((n,t)=>{const{__scopeMenubar:e,align:s="start",...i}=n,r=bn(e),o=r0(hv,e),c=F2(hv,e),u=aU(e),h=_.useRef(!1);return S.jsx(K4,{id:c.contentId,"aria-labelledby":c.triggerId,"data-radix-menubar-content":"",...r,...i,ref:t,align:s,onCloseAutoFocus:ct(n.onCloseAutoFocus,f=>{!!!o.value&&!h.current&&c.triggerRef.current?.focus(),h.current=!1,f.preventDefault()}),onFocusOutside:ct(n.onFocusOutside,f=>{const m=f.target;u().some(v=>v.ref.current?.contains(m))&&f.preventDefault()}),onInteractOutside:ct(n.onInteractOutside,()=>{h.current=!0}),onEntryFocus:f=>{c.wasKeyboardTriggerOpenRef.current||f.preventDefault()},onKeyDown:ct(n.onKeyDown,f=>{if(["ArrowRight","ArrowLeft"].includes(f.key)){const m=f.target,g=m.hasAttribute("data-radix-menubar-subtrigger"),v=m.closest("[data-radix-menubar-content]")!==f.currentTarget,w=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===f.key;if(!w&&g||v&&w)return;let C=u().filter(P=>!P.disabled).map(P=>P.value);w&&C.reverse();const T=C.indexOf(c.value);C=o.loop?kU(C,T+1):C.slice(T+1);const[M]=C;M&&o.onMenuOpen(M)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});H2.displayName=hv;var dU="MenubarGroup",hU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(Y4,{...i,...s,ref:t})});hU.displayName=dU;var fU="MenubarLabel",pU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(X4,{...i,...s,ref:t})});pU.displayName=fU;var mU="MenubarItem",V2=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(Q4,{...i,...s,ref:t})});V2.displayName=mU;var gU="MenubarCheckboxItem",yU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(Z4,{...i,...s,ref:t})});yU.displayName=gU;var vU="MenubarRadioGroup",bU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(J4,{...i,...s,ref:t})});bU.displayName=vU;var wU="MenubarRadioItem",xU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(tU,{...i,...s,ref:t})});xU.displayName=wU;var SU="MenubarItemIndicator",AU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(eU,{...i,...s,ref:t})});AU.displayName=SU;var _U="MenubarSeparator",EU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(nU,{...i,...s,ref:t})});EU.displayName=_U;var TU="MenubarArrow",CU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(sU,{...i,...s,ref:t})});CU.displayName=TU;var RU="MenubarSubTrigger",MU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(iU,{"data-radix-menubar-subtrigger":"",...i,...s,ref:t})});MU.displayName=RU;var PU="MenubarSubContent",OU=_.forwardRef((n,t)=>{const{__scopeMenubar:e,...s}=n,i=bn(e);return S.jsx(rU,{...i,"data-radix-menubar-content":"",...s,ref:t,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});OU.displayName=PU;function kU(n,t){return n.map((e,s)=>n[(t+s)%n.length])}var DU=I2,NU=B2,LU=U2,jU=z2,IU=H2,FU=V2;/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),C_=n=>{const t=UU(n);return t.charAt(0).toUpperCase()+t.slice(1)},$2=(...n)=>n.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),zU=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=_.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...c},u)=>_.createElement("svg",{ref:u,...HU,width:t,height:t,stroke:n,strokeWidth:s?Number(e)*24/Number(t):e,className:$2("lucide",i),...!r&&!zU(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,f])=>_.createElement(h,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=(n,t)=>{const e=_.forwardRef(({className:s,...i},r)=>_.createElement(VU,{ref:r,iconNode:t,className:$2(`lucide-${BU(C_(n))}`,`lucide-${n}`,s),...i}));return e.displayName=C_(n),e};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],GU=ml("check",$U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G2=ml("chevron-down",qU);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KU=ml("chevron-up",WU);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dn=ml("loader-circle",YU);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],QU=ml("loader",XU);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],JU=ml("x",ZU);function t5({className:n,...t}){return S.jsx(DU,{"data-slot":"menubar",className:Kt("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),...t})}function e5({...n}){return S.jsx(NU,{"data-slot":"menubar-menu",...n})}function n5({...n}){return S.jsx(jU,{"data-slot":"menubar-portal",...n})}function s5({className:n,...t}){return S.jsx(LU,{"data-slot":"menubar-trigger",className:Kt("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),...t})}function i5({className:n,align:t="start",alignOffset:e=-4,sideOffset:s=8,...i}){return S.jsx(n5,{children:S.jsx(IU,{"data-slot":"menubar-content",align:t,alignOffset:e,sideOffset:s,className:Kt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),...i})})}function r5({className:n,inset:t,variant:e="default",...s}){return S.jsx(FU,{"data-slot":"menubar-item","data-inset":t,"data-variant":e,className:Kt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...s})}const a5={theme:"default-dark",setTheme:()=>null},q2=_.createContext(a5),o5=()=>{const n=_.useContext(q2);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n};function l5(){const{mode:n}=sn(),{user:t,signOut:e,signInWithGoogle:s,hasCheckedAuth:i}=xu(),{theme:r,setTheme:o}=o5(),c=[{name:"Obsidian Dark",value:"obsidian-dark"},{name:"Solar Night",value:"solar-night"},{name:"Forest Night",value:"forest-night"},{name:"Dracula Dark",value:"dracula-dark"},{name:"Nordic Dark",value:"nordic-dark"},{name:"Space Dark",value:"default-dark"}];return S.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between border-b border-border py-3 px-3 md:px-8 gap-3",children:[S.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",children:[S.jsx("img",{className:"h-8 aspect-square",src:MR,alt:"Typesmart logo image"}),S.jsx(Xs,{to:"/",className:"text-xl font-bold",children:"TypeSmart"}),n==="demo"&&S.jsx(Su,{title:"This is demo mode",children:"Demo"})]}),S.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[S.jsx(Lt,{variant:"ghost",asChild:!0,children:S.jsx(Xs,{to:Ko(n),children:"Type"})}),S.jsx(Lt,{variant:"ghost",asChild:!0,children:S.jsx(Xs,{to:n==="main"?"/app/library":"/demo/library",children:"Library"})}),S.jsx(t5,{children:S.jsxs(e5,{children:[S.jsxs(s5,{className:"border-none",children:["Theme (",c.find(u=>u.value===r)?.name||"default-dark",")"]}),S.jsx(i5,{children:c.map(u=>S.jsxs(r5,{onClick:()=>{console.log("Setting theme to:",u.value),o(u.value)},className:r===u.value?"bg-accent":"",children:[u.name,r===u.value&&" ✓"]},u.value))})]})}),!t&&i&&S.jsxs(Lt,{variant:"ghost",onClick:s,children:[S.jsx(Ib,{})," Sign in"]}),S.jsxs(gF,{className:"ms-2",children:[S.jsx(yF,{className:"",src:"https://github.com/shadcn.png"}),S.jsx(vF,{children:"CN"})]}),t&&S.jsx(Lt,{variant:"ghost",onClick:e,children:S.jsx(PF,{})})]})]})}function W2(n,t){return function(){return n.apply(t,arguments)}}const{toString:c5}=Object.prototype,{getPrototypeOf:o0}=Object,{iterator:Xf,toStringTag:K2}=Symbol,Qf=(n=>t=>{const e=c5.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ks=n=>(n=n.toLowerCase(),t=>Qf(t)===n),Zf=n=>t=>typeof t===n,{isArray:gl}=Array,Xo=Zf("undefined");function ku(n){return n!==null&&!Xo(n)&&n.constructor!==null&&!Xo(n.constructor)&&kn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Y2=ks("ArrayBuffer");function u5(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Y2(n.buffer),t}const d5=Zf("string"),kn=Zf("function"),X2=Zf("number"),Du=n=>n!==null&&typeof n=="object",h5=n=>n===!0||n===!1,qh=n=>{if(Qf(n)!=="object")return!1;const t=o0(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(K2 in n)&&!(Xf in n)},f5=n=>{if(!Du(n)||ku(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},p5=ks("Date"),m5=ks("File"),g5=ks("Blob"),y5=ks("FileList"),v5=n=>Du(n)&&kn(n.pipe),b5=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||kn(n.append)&&((t=Qf(n))==="formdata"||t==="object"&&kn(n.toString)&&n.toString()==="[object FormData]"))},w5=ks("URLSearchParams"),[x5,S5,A5,_5]=["ReadableStream","Request","Response","Headers"].map(ks),E5=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nu(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),gl(n))for(s=0,i=n.length;s<i;s++)t.call(null,n[s],s,n);else{if(ku(n))return;const r=e?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let c;for(s=0;s<o;s++)c=r[s],t.call(null,n[c],c,n)}}function Q2(n,t){if(ku(n))return null;t=t.toLowerCase();const e=Object.keys(n);let s=e.length,i;for(;s-- >0;)if(i=e[s],t===i.toLowerCase())return i;return null}const sa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Z2=n=>!Xo(n)&&n!==sa;function fv(){const{caseless:n,skipUndefined:t}=Z2(this)&&this||{},e={},s=(i,r)=>{const o=n&&Q2(e,r)||r;qh(e[o])&&qh(i)?e[o]=fv(e[o],i):qh(i)?e[o]=fv({},i):gl(i)?e[o]=i.slice():(!t||!Xo(i))&&(e[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Nu(arguments[i],s);return e}const T5=(n,t,e,{allOwnKeys:s}={})=>(Nu(t,(i,r)=>{e&&kn(i)?n[r]=W2(i,e):n[r]=i},{allOwnKeys:s}),n),C5=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),R5=(n,t,e,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},M5=(n,t,e,s)=>{let i,r,o;const c={};if(t=t||{},n==null)return t;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)o=i[r],(!s||s(o,n,t))&&!c[o]&&(t[o]=n[o],c[o]=!0);n=e!==!1&&o0(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},P5=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const s=n.indexOf(t,e);return s!==-1&&s===e},O5=n=>{if(!n)return null;if(gl(n))return n;let t=n.length;if(!X2(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},k5=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&o0(Uint8Array)),D5=(n,t)=>{const s=(n&&n[Xf]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(n,r[0],r[1])}},N5=(n,t)=>{let e;const s=[];for(;(e=n.exec(t))!==null;)s.push(e);return s},L5=ks("HTMLFormElement"),j5=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,i){return s.toUpperCase()+i}),R_=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),I5=ks("RegExp"),J2=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),s={};Nu(e,(i,r)=>{let o;(o=t(i,r,n))!==!1&&(s[r]=o||i)}),Object.defineProperties(n,s)},F5=n=>{J2(n,(t,e)=>{if(kn(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=n[e];if(kn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},B5=(n,t)=>{const e={},s=i=>{i.forEach(r=>{e[r]=!0})};return gl(n)?s(n):s(String(n).split(t)),e},U5=()=>{},z5=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function H5(n){return!!(n&&kn(n.append)&&n[K2]==="FormData"&&n[Xf])}const V5=n=>{const t=new Array(10),e=(s,i)=>{if(Du(s)){if(t.indexOf(s)>=0)return;if(ku(s))return s;if(!("toJSON"in s)){t[i]=s;const r=gl(s)?[]:{};return Nu(s,(o,c)=>{const u=e(o,i+1);!Xo(u)&&(r[c]=u)}),t[i]=void 0,r}}return s};return e(n,0)},$5=ks("AsyncFunction"),G5=n=>n&&(Du(n)||kn(n))&&kn(n.then)&&kn(n.catch),tM=((n,t)=>n?setImmediate:t?((e,s)=>(sa.addEventListener("message",({source:i,data:r})=>{i===sa&&r===e&&s.length&&s.shift()()},!1),i=>{s.push(i),sa.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",kn(sa.postMessage)),q5=typeof queueMicrotask<"u"?queueMicrotask.bind(sa):typeof process<"u"&&process.nextTick||tM,W5=n=>n!=null&&kn(n[Xf]),Q={isArray:gl,isArrayBuffer:Y2,isBuffer:ku,isFormData:b5,isArrayBufferView:u5,isString:d5,isNumber:X2,isBoolean:h5,isObject:Du,isPlainObject:qh,isEmptyObject:f5,isReadableStream:x5,isRequest:S5,isResponse:A5,isHeaders:_5,isUndefined:Xo,isDate:p5,isFile:m5,isBlob:g5,isRegExp:I5,isFunction:kn,isStream:v5,isURLSearchParams:w5,isTypedArray:k5,isFileList:y5,forEach:Nu,merge:fv,extend:T5,trim:E5,stripBOM:C5,inherits:R5,toFlatObject:M5,kindOf:Qf,kindOfTest:ks,endsWith:P5,toArray:O5,forEachEntry:D5,matchAll:N5,isHTMLForm:L5,hasOwnProperty:R_,hasOwnProp:R_,reduceDescriptors:J2,freezeMethods:F5,toObjectSet:B5,toCamelCase:j5,noop:U5,toFiniteNumber:z5,findKey:Q2,global:sa,isContextDefined:Z2,isSpecCompliantForm:H5,toJSONObject:V5,isAsyncFn:$5,isThenable:G5,setImmediate:tM,asap:q5,isIterable:W5};function Mt(n,t,e,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Q.inherits(Mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const eM=Mt.prototype,nM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{nM[n]={value:n}});Object.defineProperties(Mt,nM);Object.defineProperty(eM,"isAxiosError",{value:!0});Mt.from=(n,t,e,s,i,r)=>{const o=Object.create(eM);Q.toFlatObject(n,o,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=n&&n.message?n.message:"Error",u=t==null&&n?n.code:t;return Mt.call(o,c,u,e,s,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",r&&Object.assign(o,r),o};const K5=null;function pv(n){return Q.isPlainObject(n)||Q.isArray(n)}function sM(n){return Q.endsWith(n,"[]")?n.slice(0,-2):n}function M_(n,t,e){return n?n.concat(t).map(function(i,r){return i=sM(i),!e&&r?"["+i+"]":i}).join(e?".":""):t}function Y5(n){return Q.isArray(n)&&!n.some(pv)}const X5=Q.toFlatObject(Q,{},null,function(t){return/^is[A-Z]/.test(t)});function Jf(n,t,e){if(!Q.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Q.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,A){return!Q.isUndefined(A[w])});const s=e.metaTokens,i=e.visitor||f,r=e.dots,o=e.indexes,u=(e.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(t);if(!Q.isFunction(i))throw new TypeError("visitor must be a function");function h(b){if(b===null)return"";if(Q.isDate(b))return b.toISOString();if(Q.isBoolean(b))return b.toString();if(!u&&Q.isBlob(b))throw new Mt("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(b)||Q.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,w,A){let E=b;if(b&&!A&&typeof b=="object"){if(Q.endsWith(w,"{}"))w=s?w:w.slice(0,-2),b=JSON.stringify(b);else if(Q.isArray(b)&&Y5(b)||(Q.isFileList(b)||Q.endsWith(w,"[]"))&&(E=Q.toArray(b)))return w=sM(w),E.forEach(function(T,M){!(Q.isUndefined(T)||T===null)&&t.append(o===!0?M_([w],M,r):o===null?w:w+"[]",h(T))}),!1}return pv(b)?!0:(t.append(M_(A,w,r),h(b)),!1)}const m=[],g=Object.assign(X5,{defaultVisitor:f,convertValue:h,isVisitable:pv});function v(b,w){if(!Q.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));m.push(b),Q.forEach(b,function(E,C){(!(Q.isUndefined(E)||E===null)&&i.call(t,E,Q.isString(C)?C.trim():C,w,g))===!0&&v(E,w?w.concat(C):[C])}),m.pop()}}if(!Q.isObject(n))throw new TypeError("data must be an object");return v(n),t}function P_(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function l0(n,t){this._pairs=[],n&&Jf(n,this,t)}const iM=l0.prototype;iM.append=function(t,e){this._pairs.push([t,e])};iM.toString=function(t){const e=t?function(s){return t.call(this,s,P_)}:P_;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function Q5(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rM(n,t,e){if(!t)return n;const s=e&&e.encode||Q5;Q.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let r;if(i?r=i(t,e):r=Q.isURLSearchParams(t)?t.toString():new l0(t,e).toString(s),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class O_{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Q.forEach(this.handlers,function(s){s!==null&&t(s)})}}const aM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z5=typeof URLSearchParams<"u"?URLSearchParams:l0,J5=typeof FormData<"u"?FormData:null,t8=typeof Blob<"u"?Blob:null,e8={isBrowser:!0,classes:{URLSearchParams:Z5,FormData:J5,Blob:t8},protocols:["http","https","file","blob","url","data"]},c0=typeof window<"u"&&typeof document<"u",mv=typeof navigator=="object"&&navigator||void 0,n8=c0&&(!mv||["ReactNative","NativeScript","NS"].indexOf(mv.product)<0),s8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i8=c0&&window.location.href||"http://localhost",r8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:c0,hasStandardBrowserEnv:n8,hasStandardBrowserWebWorkerEnv:s8,navigator:mv,origin:i8},Symbol.toStringTag,{value:"Module"})),cn={...r8,...e8};function a8(n,t){return Jf(n,new cn.classes.URLSearchParams,{visitor:function(e,s,i,r){return cn.isNode&&Q.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function o8(n){return Q.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function l8(n){const t={},e=Object.keys(n);let s;const i=e.length;let r;for(s=0;s<i;s++)r=e[s],t[r]=n[r];return t}function oM(n){function t(e,s,i,r){let o=e[r++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=r>=e.length;return o=!o&&Q.isArray(i)?i.length:o,u?(Q.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!c):((!i[o]||!Q.isObject(i[o]))&&(i[o]=[]),t(e,s,i[o],r)&&Q.isArray(i[o])&&(i[o]=l8(i[o])),!c)}if(Q.isFormData(n)&&Q.isFunction(n.entries)){const e={};return Q.forEachEntry(n,(s,i)=>{t(o8(s),i,e,0)}),e}return null}function c8(n,t,e){if(Q.isString(n))try{return(t||JSON.parse)(n),Q.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}const Lu={transitional:aM,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",i=s.indexOf("application/json")>-1,r=Q.isObject(t);if(r&&Q.isHTMLForm(t)&&(t=new FormData(t)),Q.isFormData(t))return i?JSON.stringify(oM(t)):t;if(Q.isArrayBuffer(t)||Q.isBuffer(t)||Q.isStream(t)||Q.isFile(t)||Q.isBlob(t)||Q.isReadableStream(t))return t;if(Q.isArrayBufferView(t))return t.buffer;if(Q.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return a8(t,this.formSerializer).toString();if((c=Q.isFileList(t))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Jf(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),c8(t)):t}],transformResponse:[function(t){const e=this.transitional||Lu.transitional,s=e&&e.forcedJSONParsing,i=this.responseType==="json";if(Q.isResponse(t)||Q.isReadableStream(t))return t;if(t&&Q.isString(t)&&(s&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Mt.from(c,Mt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],n=>{Lu.headers[n]={}});const u8=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d8=n=>{const t={};let e,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!e||t[e]&&u8[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},k_=Symbol("internals");function Tc(n){return n&&String(n).trim().toLowerCase()}function Wh(n){return n===!1||n==null?n:Q.isArray(n)?n.map(Wh):String(n)}function h8(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(n);)t[s[1]]=s[2];return t}const f8=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fy(n,t,e,s,i){if(Q.isFunction(s))return s.call(this,t,e);if(i&&(t=e),!!Q.isString(t)){if(Q.isString(s))return t.indexOf(s)!==-1;if(Q.isRegExp(s))return s.test(t)}}function p8(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function m8(n,t){const e=Q.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+e,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}let Dn=class{constructor(t){t&&this.set(t)}set(t,e,s){const i=this;function r(c,u,h){const f=Tc(u);if(!f)throw new Error("header name must be a non-empty string");const m=Q.findKey(i,f);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||u]=Wh(c))}const o=(c,u)=>Q.forEach(c,(h,f)=>r(h,f,u));if(Q.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(Q.isString(t)&&(t=t.trim())&&!f8(t))o(d8(t),e);else if(Q.isObject(t)&&Q.isIterable(t)){let c={},u,h;for(const f of t){if(!Q.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(u=c[h])?Q.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,e)}else t!=null&&r(e,t,s);return this}get(t,e){if(t=Tc(t),t){const s=Q.findKey(this,t);if(s){const i=this[s];if(!e)return i;if(e===!0)return h8(i);if(Q.isFunction(e))return e.call(this,i,s);if(Q.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Tc(t),t){const s=Q.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||fy(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let i=!1;function r(o){if(o=Tc(o),o){const c=Q.findKey(s,o);c&&(!e||fy(s,s[c],c,e))&&(delete s[c],i=!0)}}return Q.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let s=e.length,i=!1;for(;s--;){const r=e[s];(!t||fy(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const e=this,s={};return Q.forEach(this,(i,r)=>{const o=Q.findKey(s,r);if(o){e[o]=Wh(i),delete e[r];return}const c=t?p8(r):String(r).trim();c!==r&&delete e[r],e[c]=Wh(i),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Q.forEach(this,(s,i)=>{s!=null&&s!==!1&&(e[i]=t&&Q.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[k_]=this[k_]={accessors:{}}).accessors,i=this.prototype;function r(o){const c=Tc(o);s[c]||(m8(i,o),s[c]=!0)}return Q.isArray(t)?t.forEach(r):r(t),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Dn.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[e]=s}}});Q.freezeMethods(Dn);function py(n,t){const e=this||Lu,s=t||e,i=Dn.from(s.headers);let r=s.data;return Q.forEach(n,function(c){r=c.call(e,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function lM(n){return!!(n&&n.__CANCEL__)}function yl(n,t,e){Mt.call(this,n??"canceled",Mt.ERR_CANCELED,t,e),this.name="CanceledError"}Q.inherits(yl,Mt,{__CANCEL__:!0});function cM(n,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?n(e):t(new Mt("Request failed with status code "+e.status,[Mt.ERR_BAD_REQUEST,Mt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function g8(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function y8(n,t){n=n||10;const e=new Array(n),s=new Array(n);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),f=s[r];o||(o=h),e[i]=u,s[i]=h;let m=r,g=0;for(;m!==i;)g+=e[m++],m=m%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),h-o<t)return;const v=f&&h-f;return v?Math.round(g*1e3/v):void 0}}function v8(n,t){let e=0,s=1e3/t,i,r;const o=(h,f=Date.now())=>{e=f,i=null,r&&(clearTimeout(r),r=null),n(...h)};return[(...h)=>{const f=Date.now(),m=f-e;m>=s?o(h,f):(i=h,r||(r=setTimeout(()=>{r=null,o(i)},s-m)))},()=>i&&o(i)]}const ff=(n,t,e=3)=>{let s=0;const i=y8(50,250);return v8(r=>{const o=r.loaded,c=r.lengthComputable?r.total:void 0,u=o-s,h=i(u),f=o<=c;s=o;const m={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&f?(c-o)/h:void 0,event:r,lengthComputable:c!=null,[t?"download":"upload"]:!0};n(m)},e)},D_=(n,t)=>{const e=n!=null;return[s=>t[0]({lengthComputable:e,total:n,loaded:s}),t[1]]},N_=n=>(...t)=>Q.asap(()=>n(...t)),b8=cn.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,cn.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,w8=cn.hasStandardBrowserEnv?{write(n,t,e,s,i,r){const o=[n+"="+encodeURIComponent(t)];Q.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),Q.isString(s)&&o.push("path="+s),Q.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x8(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function S8(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function uM(n,t,e){let s=!x8(t);return n&&(s||e==!1)?S8(n,t):t}const L_=n=>n instanceof Dn?{...n}:n;function ma(n,t){t=t||{};const e={};function s(h,f,m,g){return Q.isPlainObject(h)&&Q.isPlainObject(f)?Q.merge.call({caseless:g},h,f):Q.isPlainObject(f)?Q.merge({},f):Q.isArray(f)?f.slice():f}function i(h,f,m,g){if(Q.isUndefined(f)){if(!Q.isUndefined(h))return s(void 0,h,m,g)}else return s(h,f,m,g)}function r(h,f){if(!Q.isUndefined(f))return s(void 0,f)}function o(h,f){if(Q.isUndefined(f)){if(!Q.isUndefined(h))return s(void 0,h)}else return s(void 0,f)}function c(h,f,m){if(m in t)return s(h,f);if(m in n)return s(void 0,h)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,f,m)=>i(L_(h),L_(f),m,!0)};return Q.forEach(Object.keys({...n,...t}),function(f){const m=u[f]||i,g=m(n[f],t[f],f);Q.isUndefined(g)&&m!==c||(e[f]=g)}),e}const dM=n=>{const t=ma({},n);let{data:e,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:c}=t;if(t.headers=o=Dn.from(o),t.url=rM(uM(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Q.isFormData(e)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Q.isFunction(e.getHeaders)){const u=e.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,m])=>{h.includes(f.toLowerCase())&&o.set(f,m)})}}if(cn.hasStandardBrowserEnv&&(s&&Q.isFunction(s)&&(s=s(t)),s||s!==!1&&b8(t.url))){const u=i&&r&&w8.read(r);u&&o.set(i,u)}return t},A8=typeof XMLHttpRequest<"u",_8=A8&&function(n){return new Promise(function(e,s){const i=dM(n);let r=i.data;const o=Dn.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=i,f,m,g,v,b;function w(){v&&v(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let A=new XMLHttpRequest;A.open(i.method.toUpperCase(),i.url,!0),A.timeout=i.timeout;function E(){if(!A)return;const T=Dn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),P={data:!c||c==="text"||c==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:T,config:n,request:A};cM(function(D){e(D),w()},function(D){s(D),w()},P),A=null}"onloadend"in A?A.onloadend=E:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(E)},A.onabort=function(){A&&(s(new Mt("Request aborted",Mt.ECONNABORTED,n,A)),A=null)},A.onerror=function(M){const P=M&&M.message?M.message:"Network Error",k=new Mt(P,Mt.ERR_NETWORK,n,A);k.event=M||null,s(k),A=null},A.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||aM;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),s(new Mt(M,P.clarifyTimeoutError?Mt.ETIMEDOUT:Mt.ECONNABORTED,n,A)),A=null},r===void 0&&o.setContentType(null),"setRequestHeader"in A&&Q.forEach(o.toJSON(),function(M,P){A.setRequestHeader(P,M)}),Q.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),c&&c!=="json"&&(A.responseType=i.responseType),h&&([g,b]=ff(h,!0),A.addEventListener("progress",g)),u&&A.upload&&([m,v]=ff(u),A.upload.addEventListener("progress",m),A.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(f=T=>{A&&(s(!T||T.type?new yl(null,n,A):T),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const C=g8(i.url);if(C&&cn.protocols.indexOf(C)===-1){s(new Mt("Unsupported protocol "+C+":",Mt.ERR_BAD_REQUEST,n));return}A.send(r||null)})},E8=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let s=new AbortController,i;const r=function(h){if(!i){i=!0,c();const f=h instanceof Error?h:this.reason;s.abort(f instanceof Mt?f:new yl(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,r(new Mt(`timeout ${t} of ms exceeded`,Mt.ETIMEDOUT))},t);const c=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),n=null)};n.forEach(h=>h.addEventListener("abort",r));const{signal:u}=s;return u.unsubscribe=()=>Q.asap(c),u}},T8=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let s=0,i;for(;s<e;)i=s+t,yield n.slice(s,i),s=i},C8=async function*(n,t){for await(const e of R8(n))yield*T8(e,t)},R8=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},j_=(n,t,e,s)=>{const i=C8(n,t);let r=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await i.next();if(h){c(),u.close();return}let m=f.byteLength;if(e){let g=r+=m;e(g)}u.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},I_=64*1024,{isFunction:xh}=Q,M8=(({Request:n,Response:t})=>({Request:n,Response:t}))(Q.global),{ReadableStream:F_,TextEncoder:B_}=Q.global,U_=(n,...t)=>{try{return!!n(...t)}catch{return!1}},P8=n=>{n=Q.merge.call({skipUndefined:!0},M8,n);const{fetch:t,Request:e,Response:s}=n,i=t?xh(t):typeof fetch=="function",r=xh(e),o=xh(s);if(!i)return!1;const c=i&&xh(F_),u=i&&(typeof B_=="function"?(b=>w=>b.encode(w))(new B_):async b=>new Uint8Array(await new e(b).arrayBuffer())),h=r&&c&&U_(()=>{let b=!1;const w=new e(cn.origin,{body:new F_,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),f=o&&c&&U_(()=>Q.isReadableStream(new s("").body)),m={stream:f&&(b=>b.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!m[b]&&(m[b]=(w,A)=>{let E=w&&w[b];if(E)return E.call(w);throw new Mt(`Response type '${b}' is not supported`,Mt.ERR_NOT_SUPPORT,A)})});const g=async b=>{if(b==null)return 0;if(Q.isBlob(b))return b.size;if(Q.isSpecCompliantForm(b))return(await new e(cn.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(b)||Q.isArrayBuffer(b))return b.byteLength;if(Q.isURLSearchParams(b)&&(b=b+""),Q.isString(b))return(await u(b)).byteLength},v=async(b,w)=>{const A=Q.toFiniteNumber(b.getContentLength());return A??g(w)};return async b=>{let{url:w,method:A,data:E,signal:C,cancelToken:T,timeout:M,onDownloadProgress:P,onUploadProgress:k,responseType:D,headers:N,withCredentials:U="same-origin",fetchOptions:V}=dM(b),q=t||fetch;D=D?(D+"").toLowerCase():"text";let it=E8([C,T&&T.toAbortSignal()],M),at=null;const rt=it&&it.unsubscribe&&(()=>{it.unsubscribe()});let lt;try{if(k&&h&&A!=="get"&&A!=="head"&&(lt=await v(N,E))!==0){let K=new e(w,{method:"POST",body:E,duplex:"half"}),nt;if(Q.isFormData(E)&&(nt=K.headers.get("content-type"))&&N.setContentType(nt),K.body){const[Z,ot]=D_(lt,ff(N_(k)));E=j_(K.body,I_,Z,ot)}}Q.isString(U)||(U=U?"include":"omit");const j=r&&"credentials"in e.prototype,I={...V,signal:it,method:A.toUpperCase(),headers:N.normalize().toJSON(),body:E,duplex:"half",credentials:j?U:void 0};at=r&&new e(w,I);let F=await(r?q(at,V):q(w,I));const W=f&&(D==="stream"||D==="response");if(f&&(P||W&&rt)){const K={};["status","statusText","headers"].forEach(ht=>{K[ht]=F[ht]});const nt=Q.toFiniteNumber(F.headers.get("content-length")),[Z,ot]=P&&D_(nt,ff(N_(P),!0))||[];F=new s(j_(F.body,I_,Z,()=>{ot&&ot(),rt&&rt()}),K)}D=D||"text";let L=await m[Q.findKey(m,D)||"text"](F,b);return!W&&rt&&rt(),await new Promise((K,nt)=>{cM(K,nt,{data:L,headers:Dn.from(F.headers),status:F.status,statusText:F.statusText,config:b,request:at})})}catch(j){throw rt&&rt(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Mt("Network Error",Mt.ERR_NETWORK,b,at),{cause:j.cause||j}):Mt.from(j,j&&j.code,b,at)}}},O8=new Map,hM=n=>{let t=n?n.env:{};const{fetch:e,Request:s,Response:i}=t,r=[s,i,e];let o=r.length,c=o,u,h,f=O8;for(;c--;)u=r[c],h=f.get(u),h===void 0&&f.set(u,h=c?new Map:P8(t)),f=h;return h};hM();const gv={http:K5,xhr:_8,fetch:{get:hM}};Q.forEach(gv,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const z_=n=>`- ${n}`,k8=n=>Q.isFunction(n)||n===null||n===!1,fM={getAdapter:(n,t)=>{n=Q.isArray(n)?n:[n];const{length:e}=n;let s,i;const r={};for(let o=0;o<e;o++){s=n[o];let c;if(i=s,!k8(s)&&(i=gv[(c=String(s)).toLowerCase()],i===void 0))throw new Mt(`Unknown adapter '${c}'`);if(i&&(Q.isFunction(i)||(i=i.get(t))))break;r[c||"#"+o]=i}if(!i){const o=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?o.length>1?`since :
`+o.map(z_).join(`
`):" "+z_(o[0]):"as no adapter specified";throw new Mt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:gv};function my(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new yl(null,n)}function H_(n){return my(n),n.headers=Dn.from(n.headers),n.data=py.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),fM.getAdapter(n.adapter||Lu.adapter,n)(n).then(function(s){return my(n),s.data=py.call(n,n.transformResponse,s),s.headers=Dn.from(s.headers),s},function(s){return lM(s)||(my(n),s&&s.response&&(s.response.data=py.call(n,n.transformResponse,s.response),s.response.headers=Dn.from(s.response.headers))),Promise.reject(s)})}const pM="1.12.2",tp={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{tp[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const V_={};tp.transitional=function(t,e,s){function i(r,o){return"[Axios v"+pM+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,c)=>{if(t===!1)throw new Mt(i(o," has been removed"+(e?" in "+e:"")),Mt.ERR_DEPRECATED);return e&&!V_[o]&&(V_[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,c):!0}};tp.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function D8(n,t,e){if(typeof n!="object")throw new Mt("options must be an object",Mt.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const c=n[r],u=c===void 0||o(c,r,n);if(u!==!0)throw new Mt("option "+r+" must be "+u,Mt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Mt("Unknown option "+r,Mt.ERR_BAD_OPTION)}}const Kh={assertOptions:D8,validators:tp},Hs=Kh.validators;let ua=class{constructor(t){this.defaults=t||{},this.interceptors={request:new O_,response:new O_}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ma(this.defaults,e);const{transitional:s,paramsSerializer:i,headers:r}=e;s!==void 0&&Kh.assertOptions(s,{silentJSONParsing:Hs.transitional(Hs.boolean),forcedJSONParsing:Hs.transitional(Hs.boolean),clarifyTimeoutError:Hs.transitional(Hs.boolean)},!1),i!=null&&(Q.isFunction(i)?e.paramsSerializer={serialize:i}:Kh.assertOptions(i,{encode:Hs.function,serialize:Hs.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Kh.assertOptions(e,{baseUrl:Hs.spelling("baseURL"),withXsrfToken:Hs.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&Q.merge(r.common,r[e.method]);r&&Q.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),e.headers=Dn.concat(o,r);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let f,m=0,g;if(!u){const b=[H_.bind(this),void 0];for(b.unshift(...c),b.push(...h),g=b.length,f=Promise.resolve(e);m<g;)f=f.then(b[m++],b[m++]);return f}g=c.length;let v=e;for(;m<g;){const b=c[m++],w=c[m++];try{v=b(v)}catch(A){w.call(this,A);break}}try{f=H_.call(this,v)}catch(b){return Promise.reject(b)}for(m=0,g=h.length;m<g;)f=f.then(h[m++],h[m++]);return f}getUri(t){t=ma(this.defaults,t);const e=uM(t.baseURL,t.url,t.allowAbsoluteUrls);return rM(e,t.params,t.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(t){ua.prototype[t]=function(e,s){return this.request(ma(s||{},{method:t,url:e,data:(s||{}).data}))}});Q.forEach(["post","put","patch"],function(t){function e(s){return function(r,o,c){return this.request(ma(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ua.prototype[t]=e(),ua.prototype[t+"Form"]=e(!0)});let N8=class mM{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(c=>{s.subscribe(c),r=c}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,c){s.reason||(s.reason=new yl(r,o,c),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new mM(function(i){t=i}),cancel:t}}};function L8(n){return function(e){return n.apply(null,e)}}function j8(n){return Q.isObject(n)&&n.isAxiosError===!0}const yv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yv).forEach(([n,t])=>{yv[t]=n});function gM(n){const t=new ua(n),e=W2(ua.prototype.request,t);return Q.extend(e,ua.prototype,t,{allOwnKeys:!0}),Q.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return gM(ma(n,i))},e}const ve=gM(Lu);ve.Axios=ua;ve.CanceledError=yl;ve.CancelToken=N8;ve.isCancel=lM;ve.VERSION=pM;ve.toFormData=Jf;ve.AxiosError=Mt;ve.Cancel=ve.CanceledError;ve.all=function(t){return Promise.all(t)};ve.spread=L8;ve.isAxiosError=j8;ve.mergeConfig=ma;ve.AxiosHeaders=Dn;ve.formToJSON=n=>oM(Q.isHTMLForm(n)?new FormData(n):n);ve.getAdapter=fM.getAdapter;ve.HttpStatusCode=yv;ve.default=ve;const{Axios:TJ,AxiosError:CJ,CanceledError:RJ,isCancel:MJ,CancelToken:PJ,VERSION:OJ,all:kJ,Cancel:DJ,isAxiosError:NJ,spread:LJ,toFormData:jJ,AxiosHeaders:IJ,HttpStatusCode:FJ,formToJSON:BJ,getAdapter:UJ,mergeConfig:zJ}=ve,un=ve.create({baseURL:"/api",withCredentials:!0});var vl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ga=typeof window>"u"||"Deno"in globalThis;function Je(){}function I8(n,t){return typeof n=="function"?n(t):n}function vv(n){return typeof n=="number"&&n>=0&&n!==1/0}function yM(n,t){return Math.max(n+(t||0)-Date.now(),0)}function gr(n,t){return typeof n=="function"?n(t):n}function us(n,t){return typeof n=="function"?n(t):n}function $_(n,t){const{type:e="all",exact:s,fetchStatus:i,predicate:r,queryKey:o,stale:c}=n;if(o){if(s){if(t.queryHash!==u0(o,t.options))return!1}else if(!ru(t.queryKey,o))return!1}if(e!=="all"){const u=t.isActive();if(e==="active"&&!u||e==="inactive"&&u)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||r&&!r(t))}function G_(n,t){const{exact:e,status:s,predicate:i,mutationKey:r}=n;if(r){if(!t.options.mutationKey)return!1;if(e){if(ya(t.options.mutationKey)!==ya(r))return!1}else if(!ru(t.options.mutationKey,r))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function u0(n,t){return(t?.queryKeyHashFn||ya)(n)}function ya(n){return JSON.stringify(n,(t,e)=>bv(e)?Object.keys(e).sort().reduce((s,i)=>(s[i]=e[i],s),{}):e)}function ru(n,t){return n===t?!0:typeof n!=typeof t?!1:n&&t&&typeof n=="object"&&typeof t=="object"?Object.keys(t).every(e=>ru(n[e],t[e])):!1}function vM(n,t){if(n===t)return n;const e=q_(n)&&q_(t);if(e||bv(n)&&bv(t)){const s=e?n:Object.keys(n),i=s.length,r=e?t:Object.keys(t),o=r.length,c=e?[]:{},u=new Set(s);let h=0;for(let f=0;f<o;f++){const m=e?f:r[f];(!e&&u.has(m)||e)&&n[m]===void 0&&t[m]===void 0?(c[m]=void 0,h++):(c[m]=vM(n[m],t[m]),c[m]===n[m]&&n[m]!==void 0&&h++)}return i===o&&h===i?n:c}return t}function pf(n,t){if(!t||Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}function q_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function bv(n){if(!W_(n))return!1;const t=n.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!W_(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function W_(n){return Object.prototype.toString.call(n)==="[object Object]"}function F8(n){return new Promise(t=>{setTimeout(t,n)})}function wv(n,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(n,t):e.structuralSharing!==!1?vM(n,t):t}function B8(n,t,e=0){const s=[...n,t];return e&&s.length>e?s.slice(1):s}function U8(n,t,e=0){const s=[t,...n];return e&&s.length>e?s.slice(0,-1):s}var d0=Symbol();function bM(n,t){return!n.queryFn&&t?.initialPromise?()=>t.initialPromise:!n.queryFn||n.queryFn===d0?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function wM(n,t){return typeof n=="function"?n(...t):!!n}var z8=class extends vl{#t;#e;#n;constructor(){super(),this.#n=n=>{if(!ga&&window.addEventListener){const t=()=>n();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(n){this.#t!==n&&(this.#t=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(t=>{t(n)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},h0=new z8,H8=class extends vl{#t=!0;#e;#n;constructor(){super(),this.#n=n=>{if(!ga&&window.addEventListener){const t=()=>n(!0),e=()=>n(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(this.setOnline.bind(this))}setOnline(n){this.#t!==n&&(this.#t=n,this.listeners.forEach(e=>{e(n)}))}isOnline(){return this.#t}},mf=new H8;function xv(){let n,t;const e=new Promise((i,r)=>{n=i,t=r});e.status="pending",e.catch(()=>{});function s(i){Object.assign(e,i),delete e.resolve,delete e.reject}return e.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},e.reject=i=>{s({status:"rejected",reason:i}),t(i)},e}function V8(n){let t;if(n.then(e=>(t=e,e),Je)?.catch(Je),t!==void 0)return{data:t}}function $8(n){return Math.min(1e3*2**n,3e4)}function xM(n){return(n??"online")==="online"?mf.isOnline():!0}var Sv=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function SM(n){let t=!1,e=0,s;const i=xv(),r=()=>i.status!=="pending",o=w=>{if(!r()){const A=new Sv(w);g(A),n.onCancel?.(A)}},c=()=>{t=!0},u=()=>{t=!1},h=()=>h0.isFocused()&&(n.networkMode==="always"||mf.isOnline())&&n.canRun(),f=()=>xM(n.networkMode)&&n.canRun(),m=w=>{r()||(s?.(),i.resolve(w))},g=w=>{r()||(s?.(),i.reject(w))},v=()=>new Promise(w=>{s=A=>{(r()||h())&&w(A)},n.onPause?.()}).then(()=>{s=void 0,r()||n.onContinue?.()}),b=()=>{if(r())return;let w;const A=e===0?n.initialPromise:void 0;try{w=A??n.fn()}catch(E){w=Promise.reject(E)}Promise.resolve(w).then(m).catch(E=>{if(r())return;const C=n.retry??(ga?0:3),T=n.retryDelay??$8,M=typeof T=="function"?T(e,E):T,P=C===!0||typeof C=="number"&&e<C||typeof C=="function"&&C(e,E);if(t||!P){g(E);return}e++,n.onFail?.(e,E),F8(M).then(()=>h()?void 0:v()).then(()=>{t?g(E):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(s?.(),i),cancelRetry:c,continueRetry:u,canStart:f,start:()=>(f()?b():v().then(b),i)}}var G8=n=>setTimeout(n,0);function q8(){let n=[],t=0,e=c=>{c()},s=c=>{c()},i=G8;const r=c=>{t?n.push(c):i(()=>{e(c)})},o=()=>{const c=n;n=[],c.length&&i(()=>{s(()=>{c.forEach(u=>{e(u)})})})};return{batch:c=>{let u;t++;try{u=c()}finally{t--,t||o()}return u},batchCalls:c=>(...u)=>{r(()=>{c(...u)})},schedule:r,setNotifyFunction:c=>{e=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{i=c}}}var Ie=q8(),AM=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vv(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ga?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},W8=class extends AM{#t;#e;#n;#s;#r;#i;#a;constructor(n){super(),this.#a=!1,this.#i=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#s=n.client,this.#n=this.#s.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#t=K8(this.options),this.state=n.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){this.options={...this.#i,...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,t){const e=wv(this.state.data,n,this.options);return this.#o({data:e,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),e}setState(n,t){this.#o({type:"setState",state:n,setStateOptions:t})}cancel(n){const t=this.#r?.promise;return this.#r?.cancel(n),t?t.then(Je).catch(Je):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(n=>us(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>gr(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!yM(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(t=>t!==n),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(n,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const e=new AbortController,s=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,e.signal)})},i=()=>{const c=bM(this.options,t),h=(()=>{const f={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(f),f})();return this.#a=!1,this.options.persister?this.options.persister(c,h,this):c(h)},o=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return s(c),c})();this.options.behavior?.onFetch(o,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#o({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=SM({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Sv&&c.revert&&this.setState({...this.#e,fetchStatus:"idle"}),e.abort()},onFail:(c,u)=>{this.#o({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Sv){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#o({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#o(n){const t=e=>{switch(n.type){case"failed":return{...e,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,..._M(e.data,this.options),fetchMeta:n.meta??null};case"success":const s={...e,data:n.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=n.manual?s:void 0,s;case"error":const i=n.error;return{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...n.state}}};this.state=t(this.state),Ie.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function _M(n,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xM(t.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function K8(n){const t=typeof n.initialData=="function"?n.initialData():n.initialData,e=t!==void 0,s=e?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var Y8=class extends vl{constructor(n={}){super(),this.config=n,this.#t=new Map}#t;build(n,t,e){const s=t.queryKey,i=t.queryHash??u0(s,t);let r=this.get(i);return r||(r=new W8({client:n,queryKey:s,queryHash:i,options:n.defaultQueryOptions(t),state:e,defaultOptions:n.getQueryDefaults(s)}),this.add(r)),r}add(n){this.#t.has(n.queryHash)||(this.#t.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const t=this.#t.get(n.queryHash);t&&(n.destroy(),t===n&&this.#t.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Ie.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#t.get(n)}getAll(){return[...this.#t.values()]}find(n){const t={exact:!0,...n};return this.getAll().find(e=>$_(t,e))}findAll(n={}){const t=this.getAll();return Object.keys(n).length>0?t.filter(e=>$_(n,e)):t}notify(n){Ie.batch(()=>{this.listeners.forEach(t=>{t(n)})})}onFocus(){Ie.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Ie.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},X8=class extends AM{#t;#e;#n;constructor(n){super(),this.mutationId=n.mutationId,this.#e=n.mutationCache,this.#t=[],this.state=n.state||EM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(t=>t!==n),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){const t=()=>{this.#s({type:"continue"})};this.#n=SM({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(i,r)=>{this.#s({type:"failed",failureCount:i,error:r})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const e=this.state.status==="pending",s=!this.#n.canStart();try{if(e)t();else{this.#s({type:"pending",variables:n,isPaused:s}),await this.#e.config.onMutate?.(n,this);const r=await this.options.onMutate?.(n);r!==this.state.context&&this.#s({type:"pending",context:r,variables:n,isPaused:s})}const i=await this.#n.start();return await this.#e.config.onSuccess?.(i,n,this.state.context,this),await this.options.onSuccess?.(i,n,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,n,this.state.context),this.#s({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,n,this.state.context,this),await this.options.onError?.(i,n,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,n,this.state.context),i}finally{this.#s({type:"error",error:i})}}finally{this.#e.runNext(this)}}#s(n){const t=e=>{switch(n.type){case"failed":return{...e,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...e,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:n.error,failureCount:e.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ie.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(n)}),this.#e.notify({mutation:this,type:"updated",action:n})})}};function EM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Q8=class extends vl{constructor(n={}){super(),this.config=n,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(n,t,e){const s=new X8({mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(t),state:e});return this.add(s),s}add(n){this.#t.add(n);const t=Sh(n);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(n):this.#e.set(t,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#t.delete(n)){const t=Sh(n);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const s=e.indexOf(n);s!==-1&&e.splice(s,1)}else e[0]===n&&this.#e.delete(t)}}this.notify({type:"removed",mutation:n})}canRun(n){const t=Sh(n);if(typeof t=="string"){const s=this.#e.get(t)?.find(i=>i.state.status==="pending");return!s||s===n}else return!0}runNext(n){const t=Sh(n);return typeof t=="string"?this.#e.get(t)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ie.batch(()=>{this.#t.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(n){const t={exact:!0,...n};return this.getAll().find(e=>G_(t,e))}findAll(n={}){return this.getAll().filter(t=>G_(n,t))}notify(n){Ie.batch(()=>{this.listeners.forEach(t=>{t(n)})})}resumePausedMutations(){const n=this.getAll().filter(t=>t.state.isPaused);return Ie.batch(()=>Promise.all(n.map(t=>t.continue().catch(Je))))}};function Sh(n){return n.options.scope?.id}function K_(n){return{onFetch:(t,e)=>{const s=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let f=!1;const m=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},g=bM(t.options,t.fetchOptions),v=async(b,w,A)=>{if(f)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:w,direction:A?"backward":"forward",meta:t.options.meta};return m(k),k})(),T=await g(C),{maxPages:M}=t.options,P=A?U8:B8;return{pages:P(b.pages,T,M),pageParams:P(b.pageParams,w,M)}};if(i&&r.length){const b=i==="backward",w=b?Z8:Y_,A={pages:r,pageParams:o},E=w(s,A);c=await v(A,E,b)}else{const b=n??r.length;do{const w=u===0?o[0]??s.initialPageParam:Y_(s,c);if(u>0&&w==null)break;c=await v(c,w),u++}while(u<b)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=h}}}function Y_(n,{pages:t,pageParams:e}){const s=t.length-1;return t.length>0?n.getNextPageParam(t[s],t,e[s],e):void 0}function Z8(n,{pages:t,pageParams:e}){return t.length>0?n.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var J8=class{#t;#e;#n;#s;#r;#i;#a;#o;constructor(n={}){this.#t=n.queryCache||new Y8,this.#e=n.mutationCache||new Q8,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=h0.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=mf.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(n){return this.#t.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#e.findAll({...n,status:"pending"}).length}getQueryData(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(n){const t=this.defaultQueryOptions(n),e=this.#t.build(this,t),s=e.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&e.isStaleByTime(gr(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(n){return this.#t.findAll(n).map(({queryKey:t,state:e})=>{const s=e.data;return[t,s]})}setQueryData(n,t,e){const s=this.defaultQueryOptions({queryKey:n}),r=this.#t.get(s.queryHash)?.state.data,o=I8(t,r);if(o!==void 0)return this.#t.build(this,s).setData(o,{...e,manual:!0})}setQueriesData(n,t,e){return Ie.batch(()=>this.#t.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,t,e)]))}getQueryState(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state}removeQueries(n){const t=this.#t;Ie.batch(()=>{t.findAll(n).forEach(e=>{t.remove(e)})})}resetQueries(n,t){const e=this.#t;return Ie.batch(()=>(e.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},t)))}cancelQueries(n,t={}){const e={revert:!0,...t},s=Ie.batch(()=>this.#t.findAll(n).map(i=>i.cancel(e)));return Promise.all(s).then(Je).catch(Je)}invalidateQueries(n,t={}){return Ie.batch(()=>(this.#t.findAll(n).forEach(e=>{e.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},t)))}refetchQueries(n,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},s=Ie.batch(()=>this.#t.findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let r=i.fetch(void 0,e);return e.throwOnError||(r=r.catch(Je)),i.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(s).then(Je)}fetchQuery(n){const t=this.defaultQueryOptions(n);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(gr(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Je).catch(Je)}fetchInfiniteQuery(n){return n.behavior=K_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Je).catch(Je)}ensureInfiniteQueryData(n){return n.behavior=K_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return mf.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,t){this.#s.set(ya(n),{queryKey:n,defaultOptions:t})}getQueryDefaults(n){const t=[...this.#s.values()],e={};return t.forEach(s=>{ru(n,s.queryKey)&&Object.assign(e,s.defaultOptions)}),e}setMutationDefaults(n,t){this.#r.set(ya(n),{mutationKey:n,defaultOptions:t})}getMutationDefaults(n){const t=[...this.#r.values()],e={};return t.forEach(s=>{ru(n,s.mutationKey)&&Object.assign(e,s.defaultOptions)}),e}defaultQueryOptions(n){if(n._defaulted)return n;const t={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return t.queryHash||(t.queryHash=u0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===d0&&(t.enabled=!1),t}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},tz=class extends vl{constructor(n,t){super(),this.options=t,this.#t=n,this.#o=null,this.#a=xv(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#n=void 0;#s=void 0;#r;#i;#a;#o;#l;#c;#h;#u;#f;#m;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),X_(this.#e,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Av(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Av(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#v(),this.#e.removeObserver(this)}setOptions(n){const t=this.options,e=this.#e;if(this.options=this.#t.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof us(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#A(),this.#e.setOptions(this.options),t._defaulted&&!pf(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&Q_(this.#e,e,this.options,t)&&this.#d(),this.updateResult(),s&&(this.#e!==e||us(this.options.enabled,this.#e)!==us(t.enabled,this.#e)||gr(this.options.staleTime,this.#e)!==gr(t.staleTime,this.#e))&&this.#g();const i=this.#b();s&&(this.#e!==e||us(this.options.enabled,this.#e)!==us(t.enabled,this.#e)||i!==this.#m)&&this.#y(i)}getOptimisticResult(n){const t=this.#t.getQueryCache().build(this.#t,n),e=this.createResult(t,n);return nz(this,e)&&(this.#s=e,this.#i=this.options,this.#r=this.#e.state),e}getCurrentResult(){return this.#s}trackResult(n,t){return new Proxy(n,{get:(e,s)=>(this.trackProp(s),t?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,s))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#e}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const t=this.#t.defaultQueryOptions(n),e=this.#t.getQueryCache().build(this.#t,t);return e.fetch().then(()=>this.createResult(e,t))}fetch(n){return this.#d({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(n){this.#A();let t=this.#e.fetch(this.options,n);return n?.throwOnError||(t=t.catch(Je)),t}#g(){this.#S();const n=gr(this.options.staleTime,this.#e);if(ga||this.#s.isStale||!vv(n))return;const e=yM(this.#s.dataUpdatedAt,n)+1;this.#u=setTimeout(()=>{this.#s.isStale||this.updateResult()},e)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(n){this.#v(),this.#m=n,!(ga||us(this.options.enabled,this.#e)===!1||!vv(this.#m)||this.#m===0)&&(this.#f=setInterval(()=>{(this.options.refetchIntervalInBackground||h0.isFocused())&&this.#d()},this.#m))}#x(){this.#g(),this.#y(this.#b())}#S(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#v(){this.#f&&(clearInterval(this.#f),this.#f=void 0)}createResult(n,t){const e=this.#e,s=this.options,i=this.#s,r=this.#r,o=this.#i,u=n!==e?n.state:this.#n,{state:h}=n;let f={...h},m=!1,g;if(t._optimisticResults){const N=this.hasListeners(),U=!N&&X_(n,t),V=N&&Q_(n,e,t,s);(U||V)&&(f={...f,..._M(h.data,n.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:w}=f;g=f.data;let A=!1;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let N;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(N=i.data,A=!0):N=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,N!==void 0&&(w="success",g=wv(i?.data,N,t),m=!0)}if(t.select&&g!==void 0&&!A)if(i&&g===r?.data&&t.select===this.#l)g=this.#c;else try{this.#l=t.select,g=t.select(g),g=wv(i?.data,g,t),this.#c=g,this.#o=null}catch(N){this.#o=N}this.#o&&(v=this.#o,g=this.#c,b=Date.now(),w="error");const E=f.fetchStatus==="fetching",C=w==="pending",T=w==="error",M=C&&E,P=g!==void 0,D={status:w,fetchStatus:f.fetchStatus,isPending:C,isSuccess:w==="success",isError:T,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:T&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&P,isStale:f0(n,t),refetch:this.refetch,promise:this.#a,isEnabled:us(t.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const N=q=>{D.status==="error"?q.reject(D.error):D.data!==void 0&&q.resolve(D.data)},U=()=>{const q=this.#a=D.promise=xv();N(q)},V=this.#a;switch(V.status){case"pending":n.queryHash===e.queryHash&&N(V);break;case"fulfilled":(D.status==="error"||D.data!==V.value)&&U();break;case"rejected":(D.status!=="error"||D.error!==V.reason)&&U();break}}return D}updateResult(){const n=this.#s,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#i=this.options,this.#r.data!==void 0&&(this.#h=this.#e),pf(t,n))return;this.#s=t;const e=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!this.#p.size)return!0;const r=new Set(i??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#s).some(o=>{const c=o;return this.#s[c]!==n[c]&&r.has(c)})};this.#R({listeners:e()})}#A(){const n=this.#t.getQueryCache().build(this.#t,this.options);if(n===this.#e)return;const t=this.#e;this.#e=n,this.#n=n.state,this.hasListeners()&&(t?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#R(n){Ie.batch(()=>{n.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function ez(n,t){return us(t.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&t.retryOnMount===!1)}function X_(n,t){return ez(n,t)||n.state.data!==void 0&&Av(n,t,t.refetchOnMount)}function Av(n,t,e){if(us(t.enabled,n)!==!1&&gr(t.staleTime,n)!=="static"){const s=typeof e=="function"?e(n):e;return s==="always"||s!==!1&&f0(n,t)}return!1}function Q_(n,t,e,s){return(n!==t||us(s.enabled,n)===!1)&&(!e.suspense||n.state.status!=="error")&&f0(n,e)}function f0(n,t){return us(t.enabled,n)!==!1&&n.isStaleByTime(gr(t.staleTime,n))}function nz(n,t){return!pf(n.getCurrentResult(),t)}var sz=class extends vl{#t;#e=void 0;#n;#s;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),pf(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),e?.mutationKey&&this.options.mutationKey&&ya(e.mutationKey)!==ya(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#i()}mutate(t,e){return this.#s=e,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??EM();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ie.batch(()=>{if(this.#s&&this.hasListeners()){const e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#s.onSuccess?.(t.data,e,s),this.#s.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#s.onError?.(t.error,e,s),this.#s.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(e=>{e(this.#e)})})}};function TM(n){return n}function iz(n){return{mutationKey:n.options.mutationKey,state:n.state,...n.options.scope&&{scope:n.options.scope},...n.meta&&{meta:n.meta}}}function rz(n,t,e){return{dehydratedAt:Date.now(),state:{...n.state,...n.state.data!==void 0&&{data:t(n.state.data)}},queryKey:n.queryKey,queryHash:n.queryHash,...n.state.status==="pending"&&{promise:n.promise?.then(t).catch(s=>e(s)?Promise.reject(new Error("redacted")):Promise.reject(s))},...n.meta&&{meta:n.meta}}}function az(n){return n.state.isPaused}function oz(n){return n.state.status==="success"}function lz(n){return!0}function cz(n,t={}){const e=t.shouldDehydrateMutation??n.getDefaultOptions().dehydrate?.shouldDehydrateMutation??az,s=n.getMutationCache().getAll().flatMap(u=>e(u)?[iz(u)]:[]),i=t.shouldDehydrateQuery??n.getDefaultOptions().dehydrate?.shouldDehydrateQuery??oz,r=t.shouldRedactErrors??n.getDefaultOptions().dehydrate?.shouldRedactErrors??lz,o=t.serializeData??n.getDefaultOptions().dehydrate?.serializeData??TM,c=n.getQueryCache().getAll().flatMap(u=>i(u)?[rz(u,o,r)]:[]);return{mutations:s,queries:c}}function uz(n,t,e){if(typeof t!="object"||t===null)return;const s=n.getMutationCache(),i=n.getQueryCache(),r=e?.defaultOptions?.deserializeData??n.getDefaultOptions().hydrate?.deserializeData??TM,o=t.mutations||[],c=t.queries||[];o.forEach(({state:u,...h})=>{s.build(n,{...n.getDefaultOptions().hydrate?.mutations,...e?.defaultOptions?.mutations,...h},u)}),c.forEach(({queryKey:u,state:h,queryHash:f,meta:m,promise:g,dehydratedAt:v})=>{const b=g?V8(g):void 0,w=h.data===void 0?b?.data:h.data,A=w===void 0?w:r(w);let E=i.get(f);const C=E?.state.status==="pending",T=E?.state.fetchStatus==="fetching";if(E){const M=b&&v!==void 0&&v>E.state.dataUpdatedAt;if(h.dataUpdatedAt>E.state.dataUpdatedAt||M){const{fetchStatus:P,...k}=h;E.setState({...k,data:A})}}else E=i.build(n,{...n.getDefaultOptions().hydrate?.queries,...e?.defaultOptions?.queries,queryKey:u,queryHash:f,meta:m},{...h,data:A,fetchStatus:"idle",status:A!==void 0?"success":h.status});g&&!C&&!T&&(v===void 0||v>E.state.dataUpdatedAt)&&E.fetch(void 0,{initialPromise:Promise.resolve(g).then(r)})})}var CM=_.createContext(void 0),Ds=n=>{const t=_.useContext(CM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},dz=({client:n,children:t})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),S.jsx(CM.Provider,{value:n,children:t})),RM=_.createContext(!1),hz=()=>_.useContext(RM);RM.Provider;function fz(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var pz=_.createContext(fz()),mz=()=>_.useContext(pz),gz=(n,t)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(t.isReset()||(n.retryOnMount=!1))},yz=n=>{_.useEffect(()=>{n.clearReset()},[n])},vz=({result:n,errorResetBoundary:t,throwOnError:e,query:s,suspense:i})=>n.isError&&!t.isReset()&&!n.isFetching&&s&&(i&&n.data===void 0||wM(e,[n.error,s])),bz=n=>{if(n.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),e=n.staleTime;n.staleTime=typeof e=="function"?(...s)=>t(e(...s)):t(e),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},wz=(n,t)=>n.isLoading&&n.isFetching&&!t,xz=(n,t)=>n?.suspense&&t.isPending,Z_=(n,t,e)=>t.fetchOptimistic(n).catch(()=>{e.clearReset()});function Sz(n,t,e){const s=hz(),i=mz(),r=Ds(),o=r.defaultQueryOptions(n);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=s?"isRestoring":"optimistic",bz(o),gz(o,i),yz(i);const c=!r.getQueryCache().get(o.queryHash),[u]=_.useState(()=>new t(r,o)),h=u.getOptimisticResult(o),f=!s&&n.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(m=>{const g=f?u.subscribe(Ie.batchCalls(m)):Je;return u.updateResult(),g},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),_.useEffect(()=>{u.setOptions(o)},[o,u]),xz(o,h))throw Z_(o,u,i);if(vz({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!ga&&wz(h,s)&&(c?Z_(o,u,i):r.getQueryCache().get(o.queryHash)?.promise)?.catch(Je).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?h:u.trackResult(h)}function MM(n,t){return Sz(n,tz)}function Li(n,t){const e=Ds(),[s]=_.useState(()=>new sz(e,n));_.useEffect(()=>{s.setOptions(n)},[s,n]);const i=_.useSyncExternalStore(_.useCallback(o=>s.subscribe(Ie.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=_.useCallback((o,c)=>{s.mutate(o,c).catch(Je)},[s]);if(i.error&&wM(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}let Az={data:""},_z=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Az,Ez=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Tz=/\/\*[^]*?\*\/|  +/g,J_=/\n+/g,hr=(n,t)=>{let e="",s="",i="";for(let r in n){let o=n[r];r[0]=="@"?r[1]=="i"?e=r+" "+o+";":s+=r[1]=="f"?hr(o,r):r+"{"+hr(o,r[1]=="k"?"":t)+"}":typeof o=="object"?s+=hr(o,t?t.replace(/([^,])+/g,c=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=hr.p?hr.p(r,o):r+":"+o+";")}return e+(t&&i?t+"{"+i+"}":i)+s},xi={},PM=n=>{if(typeof n=="object"){let t="";for(let e in n)t+=e+PM(n[e]);return t}return n},Cz=(n,t,e,s,i)=>{let r=PM(n),o=xi[r]||(xi[r]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(r));if(!xi[o]){let u=r!==n?n:(h=>{let f,m,g=[{}];for(;f=Ez.exec(h.replace(Tz,""));)f[4]?g.shift():f[3]?(m=f[3].replace(J_," ").trim(),g.unshift(g[0][m]=g[0][m]||{})):g[0][f[1]]=f[2].replace(J_," ").trim();return g[0]})(n);xi[o]=hr(i?{["@keyframes "+o]:u}:u,e?"":"."+o)}let c=e&&xi.g?xi.g:null;return e&&(xi.g=xi[o]),((u,h,f,m)=>{m?h.data=h.data.replace(m,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(xi[o],t,s,c),o},Rz=(n,t,e)=>n.reduce((s,i,r)=>{let o=t[r];if(o&&o.call){let c=o(e),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":hr(c,""):c===!1?"":c}return s+i+(o??"")},"");function ep(n){let t=this||{},e=n.call?n(t.p):n;return Cz(e.unshift?e.raw?Rz(e,[].slice.call(arguments,1),t.p):e.reduce((s,i)=>Object.assign(s,i&&i.call?i(t.p):i),{}):e,_z(t.target),t.g,t.o,t.k)}let OM,_v,Ev;ep.bind({g:1});let ki=ep.bind({k:1});function Mz(n,t,e,s){hr.p=t,OM=n,_v=e,Ev=s}function Tr(n,t){let e=this||{};return function(){let s=arguments;function i(r,o){let c=Object.assign({},r),u=c.className||i.className;e.p=Object.assign({theme:_v&&_v()},c),e.o=/ *go\d+/.test(u),c.className=ep.apply(e,s)+(u?" "+u:"");let h=n;return n[0]&&(h=c.as||n,delete c.as),Ev&&h[0]&&Ev(c),OM(h,c)}return i}}var Pz=n=>typeof n=="function",gf=(n,t)=>Pz(n)?n(t):n,Oz=(()=>{let n=0;return()=>(++n).toString()})(),kM=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");n=!t||t.matches}return n}})(),kz=20,p0="default",DM=(n,t)=>{let{toastLimit:e}=n.settings;switch(t.type){case 0:return{...n,toasts:[t.toast,...n.toasts].slice(0,e)};case 1:return{...n,toasts:n.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return DM(n,{type:n.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:i}=t;return{...n,toasts:n.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...n,pausedAt:t.time};case 6:let r=t.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},Yh=[],NM={toasts:[],pausedAt:void 0,settings:{toastLimit:kz}},Ys={},LM=(n,t=p0)=>{Ys[t]=DM(Ys[t]||NM,n),Yh.forEach(([e,s])=>{e===t&&s(Ys[t])})},jM=n=>Object.keys(Ys).forEach(t=>LM(n,t)),Dz=n=>Object.keys(Ys).find(t=>Ys[t].toasts.some(e=>e.id===n)),np=(n=p0)=>t=>{LM(t,n)},Nz={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Lz=(n={},t=p0)=>{let[e,s]=_.useState(Ys[t]||NM),i=_.useRef(Ys[t]);_.useEffect(()=>(i.current!==Ys[t]&&s(Ys[t]),Yh.push([t,s]),()=>{let o=Yh.findIndex(([c])=>c===t);o>-1&&Yh.splice(o,1)}),[t]);let r=e.toasts.map(o=>{var c,u,h;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((c=n[o.type])==null?void 0:c.removeDelay)||n?.removeDelay,duration:o.duration||((u=n[o.type])==null?void 0:u.duration)||n?.duration||Nz[o.type],style:{...n.style,...(h=n[o.type])==null?void 0:h.style,...o.style}}});return{...e,toasts:r}},jz=(n,t="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...e,id:e?.id||Oz()}),ju=n=>(t,e)=>{let s=jz(t,n,e);return np(s.toasterId||Dz(s.id))({type:2,toast:s}),s.id},ie=(n,t)=>ju("blank")(n,t);ie.error=ju("error");ie.success=ju("success");ie.loading=ju("loading");ie.custom=ju("custom");ie.dismiss=(n,t)=>{let e={type:3,toastId:n};t?np(t)(e):jM(e)};ie.dismissAll=n=>ie.dismiss(void 0,n);ie.remove=(n,t)=>{let e={type:4,toastId:n};t?np(t)(e):jM(e)};ie.removeAll=n=>ie.remove(void 0,n);ie.promise=(n,t,e)=>{let s=ie.loading(t.loading,{...e,...e?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let r=t.success?gf(t.success,i):void 0;return r?ie.success(r,{id:s,...e,...e?.success}):ie.dismiss(s),i}).catch(i=>{let r=t.error?gf(t.error,i):void 0;r?ie.error(r,{id:s,...e,...e?.error}):ie.dismiss(s)}),n};var Iz=1e3,Fz=(n,t="default")=>{let{toasts:e,pausedAt:s}=Lz(n,t),i=_.useRef(new Map).current,r=_.useCallback((m,g=Iz)=>{if(i.has(m))return;let v=setTimeout(()=>{i.delete(m),o({type:4,toastId:m})},g);i.set(m,v)},[]);_.useEffect(()=>{if(s)return;let m=Date.now(),g=e.map(v=>{if(v.duration===1/0)return;let b=(v.duration||0)+v.pauseDuration-(m-v.createdAt);if(b<0){v.visible&&ie.dismiss(v.id);return}return setTimeout(()=>ie.dismiss(v.id,t),b)});return()=>{g.forEach(v=>v&&clearTimeout(v))}},[e,s,t]);let o=_.useCallback(np(t),[t]),c=_.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=_.useCallback((m,g)=>{o({type:1,toast:{id:m,height:g}})},[o]),h=_.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),f=_.useCallback((m,g)=>{let{reverseOrder:v=!1,gutter:b=8,defaultPosition:w}=g||{},A=e.filter(T=>(T.position||w)===(m.position||w)&&T.height),E=A.findIndex(T=>T.id===m.id),C=A.filter((T,M)=>M<E&&T.visible).length;return A.filter(T=>T.visible).slice(...v?[C+1]:[0,C]).reduce((T,M)=>T+(M.height||0)+b,0)},[e]);return _.useEffect(()=>{e.forEach(m=>{if(m.dismissed)r(m.id,m.removeDelay);else{let g=i.get(m.id);g&&(clearTimeout(g),i.delete(m.id))}})},[e,r]),{toasts:e,handlers:{updateHeight:u,startPause:c,endPause:h,calculateOffset:f}}},Bz=ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Uz=ki`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zz=ki`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Hz=Tr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Uz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Vz=ki`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$z=Tr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Vz} 1s linear infinite;
`,Gz=ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qz=ki`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Wz=Tr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Kz=Tr("div")`
  position: absolute;
`,Yz=Tr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Xz=ki`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qz=Tr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Xz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Zz=({toast:n})=>{let{icon:t,type:e,iconTheme:s}=n;return t!==void 0?typeof t=="string"?_.createElement(Qz,null,t):t:e==="blank"?null:_.createElement(Yz,null,_.createElement($z,{...s}),e!=="loading"&&_.createElement(Kz,null,e==="error"?_.createElement(Hz,{...s}):_.createElement(Wz,{...s})))},Jz=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,tH=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,eH="0%{opacity:0;} 100%{opacity:1;}",nH="0%{opacity:1;} 100%{opacity:0;}",sH=Tr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iH=Tr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,rH=(n,t)=>{let e=n.includes("top")?1:-1,[s,i]=kM()?[eH,nH]:[Jz(e),tH(e)];return{animation:t?`${ki(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ki(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aH=_.memo(({toast:n,position:t,style:e,children:s})=>{let i=n.height?rH(n.position||t||"top-center",n.visible):{opacity:0},r=_.createElement(Zz,{toast:n}),o=_.createElement(iH,{...n.ariaProps},gf(n.message,n));return _.createElement(sH,{className:n.className,style:{...i,...e,...n.style}},typeof s=="function"?s({icon:r,message:o}):_.createElement(_.Fragment,null,r,o))});Mz(_.createElement);var oH=({id:n,className:t,style:e,onHeightUpdate:s,children:i})=>{let r=_.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;s(n,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return _.createElement("div",{ref:r,className:t,style:e},i)},lH=(n,t)=>{let e=n.includes("top"),s=e?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kM()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(e?1:-1)}px)`,...s,...i}},cH=ep`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ah=16,uH=({reverseOrder:n,position:t="top-center",toastOptions:e,gutter:s,children:i,toasterId:r,containerStyle:o,containerClassName:c})=>{let{toasts:u,handlers:h}=Fz(e,r);return _.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:Ah,left:Ah,right:Ah,bottom:Ah,pointerEvents:"none",...o},className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let m=f.position||t,g=h.calculateOffset(f,{reverseOrder:n,gutter:s,defaultPosition:t}),v=lH(m,g);return _.createElement(oH,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?cH:"",style:v},f.type==="custom"?gf(f.message,f):i?i(f):_.createElement(aH,{toast:f,position:m}))}))},ps=ie;function dH(n){const t=async()=>{const o=(await un.get("/auth/getuser")).data;if(console.log("Getting user fetch result : ",o),o.error)throw new Error("Error in getting real user : ",o.error);return o},{data:e,isLoading:s,refetch:i}=MM({queryKey:["user"],queryFn:t,staleTime:1/0,gcTime:864e5,enabled:!!n,retry:!1});return{user:e,isGettingUser:s,refetch:i}}function hH(){const{data:n,isLoading:t}=MM({queryKey:["library"],queryFn:async()=>{try{const s=(await un.get("/library/library")).data;if(console.log("Library fetch result : ",s),s.error)throw new Error(s.error);return s}catch(e){throw ve.isAxiosError(e)&&e.response?.data?.error?new Error(e.response.data.error):new Error("Failed to fetch library")}},staleTime:1/0,gcTime:864e5});return{library:n,isFetchingLibrary:t}}function fH({text:n,title:t,tag:e}){const s=Ds(),i=nn(),r=cl("main"),{mutate:o,isPending:c}=Li({mutationFn:async()=>{const h=(await un.post("/library/add_text",{title:t,text:n,tag:e})).data;if(h?.error)throw new Error(h.error);return h},onSuccess:()=>{ps.success("Text added successfully"),s.invalidateQueries({queryKey:["library"]}),i(r)},onError:u=>{ps.error(u?.message??"Upload failed")}});return{addText:o,isAddingText:c}}function pH({text:n,title:t,tag:e,textId:s}){const i=Ds(),r=nn(),{mode:o}=sn(),c=If(s,o),{mutate:u,isPending:h}=Li({mutationFn:async()=>{const m=(await un.post("/library/edit_text",{title:t,text:n,tag:e,textId:s})).data;if(m?.error)throw new Error(m.error);return m},onSuccess:()=>{ps.success("Text edited successfully"),i.invalidateQueries({queryKey:["library"]}),r(c)},onError:f=>{ps.error(f?.message??"Upload failed")}});return{editText:u,isEditingText:h}}function mH({textId:n,groupId:t,importance:e}){const s=Ds(),{mutate:i,isPending:r}=Li({mutationFn:async()=>{const c=(await un.post("/library/update_importance",{textId:n,groupId:t,importance:e})).data;if(console.log("Update importance result : ",c),c.error)throw new Error(c.error);return c},onError:o=>{ps.error(o.message)},onSuccess:o=>{const c=s.getQueryData(["library"]);if(!c)return;const u=c.groups.map(h=>h.id===t?{...h,group_texts:h.group_texts.map(f=>f.id===o.id?{...f,importance:o.importance}:f)}:h);s.setQueryData(["library"],{texts:c.texts,groups:u})}});return{updateImportance:i,isUpdatingImportance:r}}function IM({textId:n,groupId:t}){const e=Ds(),{mutate:s,isPending:i}=Li({mutationFn:async()=>{const o=(await un.post("/library/add_in_group",{text_id:n,group_id:t})).data;if(console.log("Add in group mutation result : ",o),o.error)throw new Error(o.error);return o},onError:r=>{ps.error(r.message),console.log("Error in add in group mutation: ",r)},onSuccess:r=>{const o=e.getQueryData(["library"]);if(!o)return;const c=o.groups.map(u=>u.id===t?{...u,group_texts:[...u.group_texts,r]}:u);e.setQueryData(["library"],{...o,groups:c})}});return{addTextInGroup:s,isAddingInGroup:i}}function FM({textId:n,groupId:t}){const e=Ds(),{mutate:s,isPending:i}=Li({mutationFn:async()=>{const o=(await un.delete("/library/remove_from_group",{data:{text_id:n,group_id:t}})).data;if(console.log("Remove from group mutation result : ",o),o.error)throw new Error(o.error);return o},onError:r=>{ps.error(r.message),console.log("Error in remove from group mutation : ",r)},onSuccess:r=>{const o=e.getQueryData(["library"]);if(!o)return;const c=o.groups.map(u=>u.id===t?{...u,group_texts:u.group_texts.filter(h=>h.id!==r.id)}:u);e.setQueryData(["library"],{...o,groups:c})}});return{removeFromGroup:s,isRemovingFromGroup:i}}function gH({name:n,tag:t}){const e=Ds(),s=nn(),{mutate:i,isPending:r}=Li({mutationFn:async()=>{const c=(await un.post("/library/create_group",{name:n,tag:t})).data;if(console.log("Create group mutation result : ",c),c.error)throw new Error(c.error);return c},onSuccess:o=>{const c=o;c.group_texts=[],e.setQueryData(["library"],u=>({...u,groups:[c,...u?.groups||[]]})),s(jb(o.id,"main"))}});return{createGroup:i,isCreatingGroup:r}}function yH(n){const t=Ds(),e=nn(),s=cl("main"),{mutate:i,isPending:r}=Li({mutationFn:async()=>{const c=(await un.post("/library/delete_text",{textId:n})).data;if(console.log("Delete text result : ",c),c.error)throw new Error(c.error);return c},onError:o=>{console.log("Error in delete text mutation : ",o)},onSuccess:()=>{t.invalidateQueries({queryKey:["library"]}),e(s)}});return{deleteText:i,isDeletingText:r}}function vH(n){const t=Ds(),e=nn(),{mode:s}=sn(),i=cl(s),{mutate:r,isPending:o}=Li({mutationFn:async()=>{const u=(await un.post("/library/delete_group",{groupId:n})).data;if(console.log("Delete group result : ",u),u.error)throw new Error(u.error);return u},onError:c=>{console.log("Error in delete group mutation : ",{groupId:n,error:c}),ps.error(c.message)},onSuccess:()=>{t.invalidateQueries({queryKey:["library"]}),e(i)}});return{deleteGroup:r,isDeletingGroup:o}}function bH(n){const{mutate:t,isPending:e}=Li({mutationFn:async()=>{const i=(await un.post("/misc/send_feedback",{text:n})).data;if(console.log("send feedback result : ",i),i.error)throw new Error(i.error);return i},onError:s=>{console.log("Error in send feedback mutation: ",s),ps.error(s.message)}});return{sendFeedback:t,isSendingFeedback:e}}const BM=_.createContext(null),Yn=()=>{const n=_.useContext(BM);if(!n)throw new Error("Library context must be used LibraryProvider.");return n},Mn="2025-09-05 20:21:38.469113+00",gy={id:"t1",user_id:"demo",times_typed:3,title:"Engineering Mathematics – Linear Algebra",tag:"Maths",text:"Matrix methods are widely used for solving systems of linear equations. Eigenvalues and eigenvectors form the foundation for stability analysis, vibration problems, and principal component analysis.",uploaded_at:Mn,importance:null},tE={id:"t2",user_id:"demo",times_typed:2,title:"Thermodynamics – Laws of Thermodynamics",tag:"Mechanical",text:"The first law of thermodynamics states that energy can neither be created nor destroyed. The second law introduces the concept of entropy and explains the direction of heat transfer.",uploaded_at:Mn,importance:null},eE={id:"t3",user_id:"demo",times_typed:1,title:"Data Structures – Binary Trees",tag:"Computer Science",text:"A binary tree is a hierarchical structure where each node has at most two children. Traversal methods include inorder, preorder, and postorder, each useful for different applications.",uploaded_at:Mn,importance:null},nE={id:"t4",user_id:"demo",times_typed:4,title:"Circuit Theory – Kirchhoff’s Laws",tag:"Electrical",text:"Kirchhoff’s current law states that the algebraic sum of currents at a junction is zero. Kirchhoff’s voltage law states that the algebraic sum of voltages in a closed loop is zero.",uploaded_at:Mn,importance:null},sE={id:"t5",user_id:"demo",times_typed:0,title:"Fluid Mechanics – Bernoulli’s Equation",tag:"Civil",text:"Bernoulli’s principle relates pressure, velocity, and height in an ideal fluid flow. It is widely applied in pipe flow analysis, airplane wing design, and hydraulic machines.",uploaded_at:Mn,importance:null},m0={texts:[gy,tE,eE,nE,sE],groups:[{id:"g1",name:"Class Test 1",user_id:"demo",tag:"Exam Prep",created_at:Mn,group_texts:[{...gy,importance:"medium",added_at:Mn},{...eE,importance:"medium",added_at:Mn},{...sE,importance:"medium",added_at:Mn}]},{id:"g2",name:"Mechanical + Electrical",user_id:"demo",tag:"Practice",created_at:Mn,group_texts:[{...tE,importance:"high",added_at:Mn},{...nE,importance:"high",added_at:Mn}]},{id:"g3",name:"Quick Revision – Maths",user_id:"demo",tag:"Revision",created_at:Mn,group_texts:[{...gy,importance:"low",added_at:Mn}]}]};function wH({children:n}){const{mode:t}=sn(),{library:e,isFetchingLibrary:s}=hH(),[i,r]=_.useState(m0),o=t==="demo"?{library:i,isFetchingLibrary:!1,setLibrary:r}:{library:e,isFetchingLibrary:s,setLibrary:void 0};return S.jsx(BM.Provider,{value:o,children:n})}const iE="Once upon a time, there was a young programmer who thought of nothing but building. His love was not for fame or wealth, but for the quiet beauty of solving problems that mattered. He built late into the nights, not knowing whether anyone would ever use his work. And in those nights, he found love too - a love that was patient, gentle, but fleeting. One day, the code kept running, but she did not return. He realized that not all bugs can be fixed, not all stories end the way we imagine. Yet still, he typed, line after line, because building was the only way he knew how to love the world",rE=6e4,aE=525600,oE=43200,lE=1440,cE=Symbol.for("constructDateFrom");function g0(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&cE in n?n[cE](t):n instanceof Date?new n.constructor(t):new Date(t)}function Tv(n,t){return g0(n,n)}let xH={};function SH(){return xH}function uE(n){const t=Tv(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function AH(n,...t){const e=g0.bind(null,n||t.find(s=>typeof s=="object"));return t.map(e)}function _H(n,t){const e=+Tv(n)-+Tv(t);return e<0?-1:e>0?1:e}function EH(n){return g0(n,Date.now())}function TH(n){return t=>{const s=(n?Math[n]:Math.trunc)(t);return s===0?0:s}}const CH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RH=(n,t,e)=>{let s;const i=CH[n];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+s:s+" ago":s};function yy(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const MH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},OH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kH={date:yy({formats:MH,defaultWidth:"full"}),time:yy({formats:PH,defaultWidth:"full"}),dateTime:yy({formats:OH,defaultWidth:"full"})},DH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NH=(n,t,e,s)=>DH[n];function Cc(n){return(t,e)=>{const s=e?.context?String(e.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,c=e?.width?String(e.width):o;i=n.formattingValues[c]||n.formattingValues[o]}else{const o=n.defaultWidth,c=e?.width?String(e.width):n.defaultWidth;i=n.values[c]||n.values[o]}const r=n.argumentCallback?n.argumentCallback(t):t;return i[r]}}const LH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zH=(n,t)=>{const e=Number(n),s=e%100;if(s>20||s<10)switch(s%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},HH={ordinalNumber:zH,era:Cc({values:LH,defaultWidth:"wide"}),quarter:Cc({values:jH,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Cc({values:IH,defaultWidth:"wide"}),day:Cc({values:FH,defaultWidth:"wide"}),dayPeriod:Cc({values:BH,defaultWidth:"wide",formattingValues:UH,defaultFormattingWidth:"wide"})};function Rc(n){return(t,e={})=>{const s=e.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],r=t.match(i);if(!r)return null;const o=r[0],c=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(c)?$H(c,m=>m.test(o)):VH(c,m=>m.test(o));let h;h=n.valueCallback?n.valueCallback(u):u,h=e.valueCallback?e.valueCallback(h):h;const f=t.slice(o.length);return{value:h,rest:f}}}function VH(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function $H(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function GH(n){return(t,e={})=>{const s=t.match(n.matchPattern);if(!s)return null;const i=s[0],r=t.match(n.parsePattern);if(!r)return null;let o=n.valueCallback?n.valueCallback(r[0]):r[0];o=e.valueCallback?e.valueCallback(o):o;const c=t.slice(i.length);return{value:o,rest:c}}}const qH=/^(\d+)(th|st|nd|rd)?/i,WH=/\d+/i,KH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},YH={any:[/^b/i,/^(a|c)/i]},XH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QH={any:[/1/i,/2/i,/3/i,/4/i]},ZH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},JH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iV={ordinalNumber:GH({matchPattern:qH,parsePattern:WH,valueCallback:n=>parseInt(n,10)}),era:Rc({matchPatterns:KH,defaultMatchWidth:"wide",parsePatterns:YH,defaultParseWidth:"any"}),quarter:Rc({matchPatterns:XH,defaultMatchWidth:"wide",parsePatterns:QH,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Rc({matchPatterns:ZH,defaultMatchWidth:"wide",parsePatterns:JH,defaultParseWidth:"any"}),day:Rc({matchPatterns:tV,defaultMatchWidth:"wide",parsePatterns:eV,defaultParseWidth:"any"}),dayPeriod:Rc({matchPatterns:nV,defaultMatchWidth:"any",parsePatterns:sV,defaultParseWidth:"any"})},rV={code:"en-US",formatDistance:RH,formatLong:kH,formatRelative:NH,localize:HH,match:iV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aV(n,t,e){const s=SH(),i=e?.locale??s.locale??rV,r=_H(n,t);if(isNaN(r))throw new RangeError("Invalid time value");const o=Object.assign({},e,{addSuffix:e?.addSuffix,comparison:r}),[c,u]=AH(e?.in,...r>0?[t,n]:[n,t]),h=TH(e?.roundingMethod??"round"),f=u.getTime()-c.getTime(),m=f/rE,g=uE(u)-uE(c),v=(f-g)/rE,b=e?.unit;let w;if(b?w=b:m<1?w="second":m<60?w="minute":m<lE?w="hour":v<oE?w="day":v<aE?w="month":w="year",w==="second"){const A=h(f/1e3);return i.formatDistance("xSeconds",A,o)}else if(w==="minute"){const A=h(m);return i.formatDistance("xMinutes",A,o)}else if(w==="hour"){const A=h(m/60);return i.formatDistance("xHours",A,o)}else if(w==="day"){const A=h(v/lE);return i.formatDistance("xDays",A,o)}else if(w==="month"){const A=h(v/oE);return A===12&&b!=="month"?i.formatDistance("xYears",1,o):i.formatDistance("xMonths",A,o)}else{const A=h(v/aE);return i.formatDistance("xYears",A,o)}}function oV(n,t){return aV(n,EH(n),t)}function UM(n){return oV(new Date(n+"Z"),{addSuffix:!0})}function yf(n){let t=n.normalize("NFKC");return t=t.replace(/[\u00A0\u2007\u202F]/g," "),t=t.replace(/[\u200B\u200C\u200D\uFEFF]/g,""),t=t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2013\u2014]/g,"-").replace(/\u2026/g,"..."),t=t.replace(/[ \t\f\v]+/g," "),t=t.replace(/([.?!])\s+/g,"$1 "),t=t.replace(/\s+([.,!?;:'")\]}])/g,"$1"),t=t.replace(/ {2,}/g," "),t=t.replace(/\r\n?/g,`
`),t=t.replace(/ *\n */g,`
`),t=t.replace(/\n{2,}/g,`

`),t=t.replace(/[^.,!?;:'"()\[\]{}<>\-_\/@#*$%+=A-Za-z0-9 \n]/g,""),t=t.toLowerCase(),t=t.trim(),t}function lV(n){return n.trim().split(/\s+/).filter(Boolean).length}const zM=_.createContext(null);function Iu(){const n=_.useContext(zM);if(!n)throw new Error("useTyping must be used within TypingProvider");return n}function _h(n){const t=Array(n.length).fill("pending");return t[0]="current",t}function cV(n){return n==="high"?3:n==="medium"?2:1}function HM(n,t=100){const e=n.trim().split(/\s+/),s=[];for(let i=0;i<e.length;i+=t)s.push(e.slice(i,i+t).join(" "));return s}function VM(n){return[...n].sort(()=>Math.random()-.5)}function uV(n,t=40){const e=HM(n,t);return VM(e).join(" ")}function dE(n){const t=[];for(const e of n.group_texts){const s=yf(e.text),i=HM(s),r=cV(e.importance),o=Array(r).fill(i).flat();t.push(...o)}return VM(t).join(" ").trim()}const $M="typesmart_last_typed";function hE(n,t){if(n!=="text"&&n!=="group")return;const e={type:n,id:t.id};localStorage.setItem($M,JSON.stringify(e))}function dV(){const n=localStorage.getItem($M);return n?JSON.parse(n):null}function hV(){const n=m0.texts;return n[Math.floor(Math.random()*n.length)]}function fV({children:n}){const{mode:t}=sn(),{library:e}=Yn();let i={mode:"idle",typingText:t==="demo"?hV().text:iE,progress:0};const r=dV();if(r){const k=r.type,D=r.id;if(k==="text"){const N=e?.texts.find(U=>U.id===D);N&&(i={mode:"text",typingText:N.text,progress:0,startedAt:Date.now(),finishedAt:void 0,source:{type:"text",id:N.id,name:N.title}})}if(k==="group"){const N=e?.groups.find(U=>U.id===D);N&&(i={mode:"group",typingText:dE(N),progress:0,startedAt:Date.now(),finishedAt:void 0,source:{type:"group",id:N.id,name:N.name}})}}const[o,c]=_.useState(i),[u,h]=_.useState(!1),f=_.useRef(0),m=_.useRef({correct:0,incorrect:0,startedAt:0,elapsedPaused:0,isPaused:!1,completed:!1}),g=_.useRef(0),v=_.useRef(_h(iE));function b(k){let D=yf(k.text);D=uV(D),f.current=0,g.current=0,m.current={correct:0,incorrect:0,startedAt:Date.now(),elapsedPaused:0,isPaused:!1,completed:!1,finalWpm:void 0},v.current=_h(D),c({mode:"text",typingText:D,progress:0,startedAt:Date.now(),finishedAt:void 0,source:{type:"text",id:k.id,name:k.title}}),hE("text",k)}const w=k=>{h(!0),setTimeout(()=>{const D=dE(k);f.current=0,g.current=0,m.current={correct:0,incorrect:0,startedAt:Date.now(),elapsedPaused:0,isPaused:!1,completed:!1},v.current=_h(D),c({mode:"group",typingText:D,progress:0,startedAt:Date.now(),finishedAt:void 0,source:{type:"group",id:k.id,name:k.name}}),h(!1),hE("group",k)},0)},A=()=>{f.current=0,g.current=0,m.current={correct:0,incorrect:0,startedAt:0,elapsedPaused:0,isPaused:!1,completed:!1,finalWpm:void 0},v.current=_h(o.typingText),c(k=>({...k,progress:0,startedAt:Date.now(),finishedAt:void 0}))},E=(k,D)=>{const N=Math.round(k/D*100);f.current=N,Math.abs(o.progress-N)>=1&&c(U=>({...U,progress:N}))},C=()=>{m.current.completed=!0,m.current.finalWpm=T()?.wpm,c(k=>({...k,progress:100,finishedAt:Date.now()})),o.mode==="idle"&&c({...o,mode:"text",source:{type:"text",id:"dummy",name:"dummy"}})},T=()=>{const{correct:k,startedAt:D,elapsedPaused:N,pausedAt:U,isPaused:V,completed:q,finalWpm:it}=m.current;if(!D)return{wpm:0};if(q&&it!==void 0)return{wpm:it};const at=Date.now();let rt=N;V&&U&&(rt+=at-U);const j=Math.max(at-D-rt,1)/1e3/60,I=k/5/j;return{wpm:Math.max(0,Math.round(I))}},M=()=>{m.current.isPaused||(m.current.isPaused=!0,m.current.pausedAt=Date.now())},P=()=>{if(m.current.isPaused){const k=Date.now();m.current.pausedAt&&(m.current.elapsedPaused+=k-m.current.pausedAt),m.current.isPaused=!1,m.current.pausedAt=void 0}};return S.jsx(zM.Provider,{value:{state:o,startText:b,startGroup:w,resetRound:A,updateProgress:E,completeRound:C,progressRef:f,statsRef:m,getCurrentStats:T,pause:M,resume:P,currentIndexRef:g,statusRef:v,isCreatingTypingText:u},children:n})}function pV({children:n}){return S.jsx("main",{className:"py-5 md:py-10 w-[1200px] max-w-[90vw] mx-auto h-full",children:n})}function fE(){return S.jsx(wH,{children:S.jsx(fV,{children:S.jsxs("div",{className:"min-h-screen flex flex-col",children:[S.jsx(uH,{}),S.jsx(l5,{}),S.jsx(pV,{children:S.jsx(LI,{})})]})})})}var sp="Tabs",[mV,VJ]=ys(sp,[pl]),GM=pl(),[gV,y0]=mV(sp),qM=_.forwardRef((n,t)=>{const{__scopeTabs:e,value:s,onValueChange:i,defaultValue:r,orientation:o="horizontal",dir:c,activationMode:u="automatic",...h}=n,f=ul(c),[m,g]=pa({prop:s,onChange:i,defaultProp:r??"",caller:sp});return S.jsx(gV,{scope:e,baseId:ds(),value:m,onValueChange:g,orientation:o,dir:f,activationMode:u,children:S.jsx(xt.div,{dir:f,"data-orientation":o,...h,ref:t})})});qM.displayName=sp;var WM="TabsList",KM=_.forwardRef((n,t)=>{const{__scopeTabs:e,loop:s=!0,...i}=n,r=y0(WM,e),o=GM(e);return S.jsx(Xb,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:s,children:S.jsx(xt.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:t})})});KM.displayName=WM;var YM="TabsTrigger",XM=_.forwardRef((n,t)=>{const{__scopeTabs:e,value:s,disabled:i=!1,...r}=n,o=y0(YM,e),c=GM(e),u=JM(o.baseId,s),h=tP(o.baseId,s),f=s===o.value;return S.jsx(Qb,{asChild:!0,...c,focusable:!i,active:f,children:S.jsx(xt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...r,ref:t,onMouseDown:ct(n.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?o.onValueChange(s):m.preventDefault()}),onKeyDown:ct(n.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(s)}),onFocus:ct(n.onFocus,()=>{const m=o.activationMode!=="manual";!f&&!i&&m&&o.onValueChange(s)})})})});XM.displayName=YM;var QM="TabsContent",ZM=_.forwardRef((n,t)=>{const{__scopeTabs:e,value:s,forceMount:i,children:r,...o}=n,c=y0(QM,e),u=JM(c.baseId,s),h=tP(c.baseId,s),f=s===c.value,m=_.useRef(f);return _.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),S.jsx(vn,{present:i||f,children:({present:g})=>S.jsx(xt.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:h,tabIndex:0,...o,ref:t,style:{...n.style,animationDuration:m.current?"0s":void 0},children:g&&r})})});ZM.displayName=QM;function JM(n,t){return`${n}-trigger-${t}`}function tP(n,t){return`${n}-content-${t}`}var yV=qM,vV=KM,bV=XM,wV=ZM;function xV({className:n,...t}){return S.jsx(yV,{"data-slot":"tabs",className:Kt("flex flex-col gap-2",n),...t})}function SV({className:n,...t}){return S.jsx(vV,{"data-slot":"tabs-list",className:Kt("inline-flex items-center gap-6 border-b border-[var(--border)]",n),...t})}function pE({className:n,...t}){return S.jsx(bV,{"data-slot":"tabs-trigger",className:Kt("text-sm font-medium text-[var(--muted-foreground)] px-1 pb-2 -mb-px border-b-2 border-transparent","data-[state=active]:text-[var(--foreground)] data-[state=active]:border-[var(--foreground)]","hover:text-[var(--foreground)] transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","disabled:opacity-50 disabled:pointer-events-none",n),...t})}function mE({className:n,...t}){return S.jsx(wV,{"data-slot":"tabs-content",className:Kt("mt-0",n),...t})}function AV(n){return re({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},child:[]}]})(n)}function yr({className:n,type:t,...e}){return S.jsx("input",{type:t,"data-slot":"input",className:Kt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-accent flex h-9 w-full min-w-0 rounded-md border bg-card px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...e})}function ip({querySetterFn:n,addClass:t="",placeHolder:e="Search your library...."}){function s(i){n(i)}return S.jsxs("div",{className:"relative bg-secondary rounded-md flex-1 mt-4 "+t,children:[S.jsx(AV,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),S.jsx(yr,{onChange:i=>s(i.target.value),type:"text",placeholder:e,className:"ps-10 w-full border-0 bg-secondary"})]})}function _V(n){return re({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(n)}function EV(n){return re({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function TV(n){return re({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"},child:[]}]})(n)}function CV(n){return re({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"},child:[]}]})(n)}function RV(n){return re({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11 8 15.01z"},child:[]}]})(n)}function MV(n){return re({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(n)}function PV(n){return re({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(n)}function OV(n){return re({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(n)}function kV(n){return re({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm8 336c0 4.411-3.589 8-8 8H48c-4.411 0-8-3.589-8-8V112c0-4.411 3.589-8 8-8h480c4.411 0 8 3.589 8 8v288zM170 270v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-336 82v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm384 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zM122 188v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-98 158v-16c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v16c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"},child:[]}]})(n)}var rp="Dialog",[eP,$J]=ys(rp),[DV,Ns]=eP(rp),nP=n=>{const{__scopeDialog:t,children:e,open:s,defaultOpen:i,onOpenChange:r,modal:o=!0}=n,c=_.useRef(null),u=_.useRef(null),[h,f]=pa({prop:s,defaultProp:i??!1,onChange:r,caller:rp});return S.jsx(DV,{scope:t,triggerRef:c,contentRef:u,contentId:ds(),titleId:ds(),descriptionId:ds(),open:h,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(m=>!m),[f]),modal:o,children:e})};nP.displayName=rp;var sP="DialogTrigger",iP=_.forwardRef((n,t)=>{const{__scopeDialog:e,...s}=n,i=Ns(sP,e),r=Ht(t,i.triggerRef);return S.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":w0(i.open),...s,ref:r,onClick:ct(n.onClick,i.onOpenToggle)})});iP.displayName=sP;var v0="DialogPortal",[NV,rP]=eP(v0,{forceMount:void 0}),aP=n=>{const{__scopeDialog:t,forceMount:e,children:s,container:i}=n,r=Ns(v0,t);return S.jsx(NV,{scope:t,forceMount:e,children:_.Children.map(s,o=>S.jsx(vn,{present:e||r.open,children:S.jsx(Tu,{asChild:!0,container:i,children:o})}))})};aP.displayName=v0;var vf="DialogOverlay",oP=_.forwardRef((n,t)=>{const e=rP(vf,n.__scopeDialog),{forceMount:s=e.forceMount,...i}=n,r=Ns(vf,n.__scopeDialog);return r.modal?S.jsx(vn,{present:s||r.open,children:S.jsx(jV,{...i,ref:t})}):null});oP.displayName=vf;var LV=vr("DialogOverlay.RemoveScroll"),jV=_.forwardRef((n,t)=>{const{__scopeDialog:e,...s}=n,i=Ns(vf,e);return S.jsx(Ru,{as:LV,allowPinchZoom:!0,shards:[i.contentRef],children:S.jsx(xt.div,{"data-state":w0(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),va="DialogContent",lP=_.forwardRef((n,t)=>{const e=rP(va,n.__scopeDialog),{forceMount:s=e.forceMount,...i}=n,r=Ns(va,n.__scopeDialog);return S.jsx(vn,{present:s||r.open,children:r.modal?S.jsx(IV,{...i,ref:t}):S.jsx(FV,{...i,ref:t})})});lP.displayName=va;var IV=_.forwardRef((n,t)=>{const e=Ns(va,n.__scopeDialog),s=_.useRef(null),i=Ht(t,e.contentRef,s);return _.useEffect(()=>{const r=s.current;if(r)return qf(r)},[]),S.jsx(cP,{...n,ref:i,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ct(n.onCloseAutoFocus,r=>{r.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:ct(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&r.preventDefault()}),onFocusOutside:ct(n.onFocusOutside,r=>r.preventDefault())})}),FV=_.forwardRef((n,t)=>{const e=Ns(va,n.__scopeDialog),s=_.useRef(!1),i=_.useRef(!1);return S.jsx(cP,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{n.onCloseAutoFocus?.(r),r.defaultPrevented||(s.current||e.triggerRef.current?.focus(),r.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:r=>{n.onInteractOutside?.(r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;e.triggerRef.current?.contains(o)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),cP=_.forwardRef((n,t)=>{const{__scopeDialog:e,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:r,...o}=n,c=Ns(va,e),u=_.useRef(null),h=Ht(t,u);return Uf(),S.jsxs(S.Fragment,{children:[S.jsx(_u,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:r,children:S.jsx(Au,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":w0(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),S.jsxs(S.Fragment,{children:[S.jsx(BV,{titleId:c.titleId}),S.jsx(zV,{contentRef:u,descriptionId:c.descriptionId})]})]})}),b0="DialogTitle",uP=_.forwardRef((n,t)=>{const{__scopeDialog:e,...s}=n,i=Ns(b0,e);return S.jsx(xt.h2,{id:i.titleId,...s,ref:t})});uP.displayName=b0;var dP="DialogDescription",hP=_.forwardRef((n,t)=>{const{__scopeDialog:e,...s}=n,i=Ns(dP,e);return S.jsx(xt.p,{id:i.descriptionId,...s,ref:t})});hP.displayName=dP;var fP="DialogClose",pP=_.forwardRef((n,t)=>{const{__scopeDialog:e,...s}=n,i=Ns(fP,e);return S.jsx(xt.button,{type:"button",...s,ref:t,onClick:ct(n.onClick,()=>i.onOpenChange(!1))})});pP.displayName=fP;function w0(n){return n?"open":"closed"}var mP="DialogTitleWarning",[GJ,gP]=y3(mP,{contentName:va,titleName:b0,docsSlug:"dialog"}),BV=({titleId:n})=>{const t=gP(mP),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(e))},[e,n]),null},UV="DialogDescriptionWarning",zV=({contentRef:n,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gP(UV).contentName}}.`;return _.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,n,t]),null},HV=nP,VV=iP,$V=aP,GV=oP,qV=lP,WV=uP,KV=hP,YV=pP;function ap({...n}){return S.jsx(HV,{"data-slot":"dialog",...n})}function op({...n}){return S.jsx(VV,{"data-slot":"dialog-trigger",...n})}function XV({...n}){return S.jsx($V,{"data-slot":"dialog-portal",...n})}function QV({className:n,...t}){return S.jsx(GV,{"data-slot":"dialog-overlay",className:Kt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...t})}function lp({className:n,children:t,showCloseButton:e=!0,...s}){return S.jsxs(XV,{"data-slot":"dialog-portal",children:[S.jsx(QV,{}),S.jsxs(qV,{"data-slot":"dialog-content",className:Kt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...s,children:[t,e&&S.jsxs(YV,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[S.jsx(JU,{}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function cp({className:n,...t}){return S.jsx("div",{"data-slot":"dialog-header",className:Kt("flex flex-col gap-2 text-center sm:text-left",n),...t})}function up({className:n,...t}){return S.jsx(WV,{"data-slot":"dialog-title",className:Kt("text-lg leading-none font-semibold",n),...t})}function dp({className:n,...t}){return S.jsx(KV,{"data-slot":"dialog-description",className:Kt("text-muted-foreground text-sm",n),...t})}function ZV({children:n}){const{user:t,isGettingUser:e,hasCheckedAuth:s}=xu();return!s||e?S.jsxs("div",{className:"h-screen flex items-center justify-center flex-col gap-1",children:[S.jsx(dn,{className:"animate-spin text-5xl"}),S.jsx("p",{children:"Please wait"})]}):t?S.jsx(S.Fragment,{children:n}):S.jsx(NI,{to:"/login-signup"})}function x0(n,t){return t==="main"?n:(console.log("Returning the demo mode toast."),()=>ps.error("This is demo mode, please sign in!"))}function yP({children:n}){const{mode:t}=sn(),[e,s]=_.useState(""),[i,r]=_.useState(""),{createGroup:o,isCreatingGroup:c}=gH({name:e,tag:i});function u(){c||!e||!i||o()}const h=x0(u,t);return S.jsxs(ap,{children:[S.jsx(op,{asChild:!0,children:n}),S.jsx(lp,{children:S.jsxs(cp,{children:[S.jsx(up,{children:"New Group"}),S.jsx(dp,{className:"",asChild:!0,children:S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-4 my-6",children:[S.jsxs("div",{className:"input-group flex-1",children:[S.jsx("label",{className:"input-label",children:"Group name"}),S.jsx(yr,{required:!0,name:"group_name",value:e,onChange:f=>s(f.target.value),placeholder:"e.g. Semester Exams"})]}),S.jsxs("div",{className:"input-group flex-1",children:[S.jsx("label",{className:"input-label",children:"Tag"}),S.jsxs("div",{className:"grid grid-cols-[auto_1fr]",children:[S.jsx("div",{className:"p-2 bg-card rounded-l-md border-1 border-border",children:S.jsx(Ff,{className:"text-lg rounded-l-md"})}),S.jsx(yr,{required:!0,name:"tag",className:"rounded-l-none",value:i,onChange:f=>r(f.target.value),placeholder:"e.g. economics"})]})]})]}),S.jsx(Lt,{onClick:h,variant:"secondary",children:c?S.jsx(dn,{className:"animate-spin"}):"Create Group"})]})})]})})]})}function vP({category:n}){return S.jsxs("div",{className:"w-full min-h-70 flex flex-col gap-2 items-center justify-center border-2 border-secondary bg-card-secondary border-dashed rounded-md mt-5",children:[n==="texts"?S.jsx(RV,{className:"text-[3rem] text-muted-foreground"}):S.jsx(PV,{className:"text-[3rem] text-muted-foreground"}),S.jsxs("p",{className:"font-semibold",children:["No ",n," yet"]}),S.jsxs("p",{className:"text-muted-foreground text-sm",children:[n==="texts"?"Upload your first text":"Create your first group"," to practice typing smartly"]}),n==="texts"&&S.jsx(Lt,{asChild:!0,variant:"ghost",className:"mt-4",children:S.jsxs(Xs,{to:SR(),children:[S.jsx(ti,{}),"Add First Text"]})}),n==="groups"&&S.jsx(yP,{children:S.jsxs(Lt,{variant:"ghost",className:"mt-4",children:[S.jsx(ti,{}),"Create First Group"]})})]})}function JV({text:n}){const{mode:t}=sn(),e=nn(),s=If(n.id,t);return S.jsxs("div",{onClick:()=>e(s),className:"relative cursor-pointer min-h-[145px] p-5 rounded-lg border-1 border-border bg-card-dark flex flex-col justify-between transition-all duration-300 hover:bg-card",children:[S.jsxs("div",{className:"flex flex-col gap-1",children:[S.jsx("div",{className:"flex items-center justify-between",children:S.jsx("p",{className:"font-semibold",children:n.title})}),S.jsxs("div",{className:"flex items-center text-muted-foreground text-[.8rem] gap-1",children:[S.jsx(MV,{}),S.jsx("span",{className:"",children:n.tag})]})]}),S.jsxs("div",{className:"text-muted-foreground pt-2 mt-5 text-[.7rem] border-t-2 border-secondary flex items-center justify-between",children:[S.jsxs("p",{className:"text-[.8rem]",children:[lV(n.text)," Words"]}),S.jsx("p",{className:"",children:UM(n.uploaded_at)})]})]})}const t$=_.memo(JV,(n,t)=>n.text.title===t.text.title&&n.text.text===t.text.text&&n.text.uploaded_at===t.text.uploaded_at);function hp({children:n,addClass:t=""}){return S.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,_minmax(220px,_1fr))] gap-5 "+t,children:n})}function Fu(){return S.jsxs("div",{className:"min-h-[500px] flex items-center justify-center",children:[S.jsx(dn,{className:"text-3xl animate-spin"}),S.jsx("p",{children:"Typesmart"})]})}function fp(n,t,e){const s=t.toLowerCase().trim();return n.filter(i=>e.some(r=>{const o=i[r];return typeof o=="string"&&o.toLowerCase().includes(s)}))}function S0(n){return re({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M198.24,62.63l15.68-17.25a8,8,0,0,0-11.84-10.76L186.4,51.86A95.95,95.95,0,0,0,57.76,193.37L42.08,210.62a8,8,0,1,0,11.84,10.76L69.6,204.14A95.95,95.95,0,0,0,198.24,62.63ZM48,128A80,80,0,0,1,175.6,63.75l-107,117.73A79.63,79.63,0,0,1,48,128Zm80,80a79.55,79.55,0,0,1-47.6-15.75l107-117.73A79.95,79.95,0,0,1,128,208Z"},child:[]}]})(n)}function bP(){return S.jsxs("div",{className:"w-full min-h-70 flex flex-col gap-2 items-center justify-center border-2 border-secondary bg-card-secondary border-dashed rounded-md mt-5",children:[S.jsx(S0,{className:"text-[3rem] text-muted-foreground"}),S.jsx("p",{className:"font-semibold",children:"No results"})]})}function e$(){const{library:n,isFetchingLibrary:t}=Yn(),[e,s]=_.useState(""),i=fp(n?.texts??[],e,["title","tag"]),r=_.useMemo(()=>i.map(o=>S.jsx(t$,{text:o},o.id)),[i]);return t?S.jsx(Fu,{}):S.jsxs(S.Fragment,{children:[S.jsx(ip,{querySetterFn:s,placeHolder:"Search texts in your library...."}),i.length<=0?e?S.jsx(bP,{}):S.jsx(vP,{category:"texts"}):S.jsx(hp,{addClass:"mt-5",children:r})]})}function n$({group:n}){const t=nn(),{mode:e}=sn(),s=jb(n.id,e);return S.jsxs("div",{onClick:()=>t(s),className:"relative min-h-[145px] p-5 rounded-lg border-1 border-border bg-card-dark flex flex-col justify-between transition-all duration-300 hover:bg-card cursor-pointer",children:[S.jsxs("div",{className:"flex flex-col gap-1",children:[S.jsx("div",{className:"flex items-center justify-between",children:S.jsx("p",{className:"font-semibold",children:n.name})}),S.jsxs("div",{className:"flex items-center text-muted-foreground text-[.8rem] gap-1",children:[S.jsx(Ff,{}),S.jsx("span",{className:"",children:n.tag})]})]}),S.jsxs("div",{className:"text-muted-foreground pt-2 mt-5 text-[.7rem] border-t-2 border-secondary flex items-center justify-between",children:[S.jsxs("p",{className:"text-[.8rem] flex items-center gap-1",children:[S.jsx(Fb,{}),S.jsxs("span",{children:[n.group_texts.length??0," texts"]})]}),S.jsx("p",{children:UM(n.created_at)})]})]})}const s$=_.memo(n$,(n,t)=>n.group.name===t.group.name&&n.group.group_texts===t.group.group_texts&&n.group.created_at===t.group.created_at);function i$(){const{library:n,isFetchingLibrary:t}=Yn(),[e,s]=_.useState(""),i=fp(n.groups??[],e,["name","tag"]),r=_.useMemo(()=>i.map(o=>S.jsx(s$,{group:o},o.id)),[i]);return t?S.jsx(Fu,{}):S.jsxs(S.Fragment,{children:[S.jsx(ip,{querySetterFn:s,placeHolder:"Search groups in your library....."}),i.length<=0?e?S.jsx(bP,{}):S.jsx(vP,{category:"groups"}):S.jsx(hp,{addClass:"mt-5",children:r})]})}function gE(){const{library:n,isFetchingLibrary:t}=Yn(),e=nn(),{mode:s}=sn();console.log("LIBRARY : ",n);function i(){e(SR())}const r=x0(i,s);return t?S.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center gap-2",children:[S.jsx("span",{children:"Loading your library"})," ",S.jsx(dn,{className:"animate-spin text-5xl"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h1",{className:"text-heading",children:"Library"}),S.jsxs("div",{className:"flex items-center",children:[S.jsx(yP,{children:S.jsxs(Lt,{variant:"ghost",children:[S.jsx(ti,{}),S.jsx("span",{className:"font-semibold",children:"New group"})]})}),S.jsxs(Lt,{variant:"ghost",onClick:r,children:[S.jsx(ti,{}),S.jsx("span",{className:"font-semibold",children:"New text"})]})]})]}),S.jsxs(xV,{defaultValue:"texts",className:"mt-10",children:[S.jsxs(SV,{children:[S.jsx(pE,{value:"texts",children:"Texts"}),S.jsx(pE,{value:"groups",children:" Groups"})]}),S.jsx(mE,{className:"h-auto",value:"texts",children:S.jsx(e$,{})}),S.jsx(mE,{value:"groups",children:S.jsx(i$,{})})]})]})}function r$(){const{user:n,signInWithGoogle:t}=xu(),e=nn();return n&&e(cl("main")),S.jsx("div",{className:"flex items-center justify-center min-h-svh",children:S.jsxs("div",{className:"flex items-center justify-center flex-col max-w-[320px] mx-auto text-center bg-transparent border-2 border-accent py-7 px-5 rounded-md",children:[S.jsx("img",{src:"logo.png",alt:"logo image of typesmart",className:"aspect-square w-17 mb-5"}),S.jsx("p",{className:"font-semibold text-heading",children:"TypeSmart"}),S.jsx("p",{className:"text-muted-foreground font-semibold text-subheading-lg mb-5 mt-1",children:"Productive chill typing mode"}),S.jsx("p",{className:"text-muted-foreground text-subheading max-w-full mb-5",children:"Add your own texts, make groups, and just type with the flow. Try a new way of learning."}),S.jsxs(Lt,{onClick:t,className:"w-full",children:[S.jsx(Ib,{})," One click login / signup"]})]})})}function wP({className:n,...t}){return S.jsx("textarea",{"data-slot":"textarea",className:Kt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...t})}function xP({title:n,text:t,tag:e,setTitle:s,setText:i,setTag:r,addClass:o=""}){return S.jsxs("div",{className:o+" grid grid-cols-1 md:grid-cols-[2fr_1fr] grid-rows-[auto_1fr] gap-4",children:[S.jsxs("div",{className:"input-group col-span-1",children:[S.jsx("label",{htmlFor:"title",className:"input-label",children:"Title"}),S.jsx(yr,{name:"title",value:n,onChange:c=>s(c.target.value),placeholder:"e.g. Neurodynamics chapter-3"})]}),S.jsxs("div",{className:"input-group col-span-1",children:[S.jsx("label",{htmlFor:"tag",className:"input-label",children:"Tag"}),S.jsx(yr,{name:"tag",value:e,onChange:c=>r(c.target.value),placeholder:"e.g. Neurodynamics"})]}),S.jsxs("div",{className:"input-group col-span-1 md:col-span-2",children:[S.jsx("label",{className:"input-label",children:"Text"}),S.jsx(wP,{spellCheck:!1,value:t,onChange:c=>i(c.target.value),placeholder:"Edit your text here",className:"resize-none mt-2 leading-relaxed overflow-y-auto scrollbar-custom max-h-[90vh] min-h-[300px] h-full bg-card [word-spacing:.2em]"})]})]})}const a$="/static/assets/pdf.worker-BQQyum15.mjs",pn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Cv=[.001,0,0,.001,0,0],vy=1.35,Gn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},fr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SP="pdfjs_internal_editor_",Tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Vt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},o$={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Po={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pp={ERRORS:0,WARNINGS:1,INFOS:5},au={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Eh={moveTo:0,lineTo:1,curveTo:2,closePath:3},l$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let mp=pp.WARNINGS;function c$(n){Number.isInteger(n)&&(mp=n)}function u$(){return mp}function gp(n){mp>=pp.INFOS&&console.log(`Info: ${n}`)}function Ct(n){mp>=pp.WARNINGS&&console.log(`Warning: ${n}`)}function te(n){throw new Error(n)}function Me(n,t){n||te(t)}function d$(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AP(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=g$(n)}catch{}const s=t?URL.parse(n,t):URL.parse(n);return d$(s)?s:null}function _P(n,t,e=!1){const s=URL.parse(n);return s?(s.hash=t,s.href):e&&AP(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Nt(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Ta=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class yE extends Ta{constructor(t,e){super(t,"PasswordException"),this.code=e}}class by extends Ta{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Rv extends Ta{constructor(t){super(t,"InvalidPDFException")}}class bf extends Ta{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class h$ extends Ta{constructor(t){super(t,"FormatError")}}class xr extends Ta{constructor(t){super(t,"AbortException")}}function EP(n){(typeof n!="object"||n?.length===void 0)&&te("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Bu(n){typeof n!="string"&&te("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function f$(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function p$(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function m$(){try{return new Function(""),!0}catch{return!1}}class en{static get isLittleEndian(){return Nt(this,"isLittleEndian",p$())}static get isEvalSupported(){return Nt(this,"isEvalSupported",m$())}static get isOffscreenCanvasSupported(){return Nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Nt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Nt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const wy=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class yt{static makeHexColor(t,e,s){return`#${wy[t]}${wy[e]}${wy[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const i=t[s],r=t[s+1];t[s]=i*e[0]+r*e[2]+e[4],t[s+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const i=e[0],r=e[1],o=e[2],c=e[3],u=e[4],h=e[5];for(let f=0;f<6;f+=2){const m=t[s+f],g=t[s+f+1];t[s+f]=m*i+g*o+u,t[s+f+1]=m*r+g*c+h}}static applyInverseTransform(t,e){const s=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const i=e[0],r=e[1],o=e[2],c=e[3],u=e[4],h=e[5],f=t[0],m=t[1],g=t[2],v=t[3];let b=i*f+u,w=b,A=i*g+u,E=A,C=c*m+h,T=C,M=c*v+h,P=M;if(r!==0||o!==0){const k=r*f,D=r*g,N=o*m,U=o*v;b+=N,E+=N,A+=U,w+=U,C+=k,P+=k,M+=D,T+=D}s[0]=Math.min(s[0],b,A,w,E),s[1]=Math.min(s[1],C,M,T,P),s[2]=Math.max(s[2],b,A,w,E),s[3]=Math.max(s[3],C,M,T,P)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],i=t[1],r=t[2],o=t[3],c=s**2+i**2,u=s*r+i*o,h=r**2+o**2,f=(c+h)/2,m=Math.sqrt(f**2-(c*h-u**2));e[0]=Math.sqrt(f+m||1),e[1]=Math.sqrt(f-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,i,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,i)}static#t(t,e,s,i,r,o,c,u,h,f){if(h<=0||h>=1)return;const m=1-h,g=h*h,v=g*h,b=m*(m*(m*t+3*h*e)+3*g*s)+v*i,w=m*(m*(m*r+3*h*o)+3*g*c)+v*u;f[0]=Math.min(f[0],b),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],b),f[3]=Math.max(f[3],w)}static#e(t,e,s,i,r,o,c,u,h,f,m,g){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,s,i,r,o,c,u,-m/f,g);return}const v=f**2-4*m*h;if(v<0)return;const b=Math.sqrt(v),w=2*h;this.#t(t,e,s,i,r,o,c,u,(-f+b)/w,g),this.#t(t,e,s,i,r,o,c,u,(-f-b)/w,g)}static bezierBoundingBox(t,e,s,i,r,o,c,u,h){h[0]=Math.min(h[0],t,c),h[1]=Math.min(h[1],e,u),h[2]=Math.max(h[2],t,c),h[3]=Math.max(h[3],e,u),this.#e(t,s,r,c,e,i,o,u,3*(-t+3*(s-r)+c),6*(t-2*s+r),3*(s-t),h),this.#e(t,s,r,c,e,i,o,u,3*(-e+3*(i-o)+u),6*(e-2*i+o),3*(i-e),h)}}function g$(n){return decodeURIComponent(escape(n))}let xy=null,vE=null;function y$(n){return xy||(xy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,vE=new Map([["ﬅ","ſt"]])),n.replaceAll(xy,(t,e,s)=>e?e.normalize("NFKC"):vE.get(s))}function TP(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),EP(n)}const A0="pdfjs_internal_id_";function v$(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,i,...r]=e;if(!n(s)&&!Number.isInteger(s)||!t(i))return!1;const o=r.length;let c=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const u of r)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function mn(n,t,e){return Math.min(Math.max(n,t),e)}function CP(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(EP(n))}function b$(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Bu(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const Si="http://www.w3.org/2000/svg";class Qo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Uu(n,t="text"){if(Fc(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class zu{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const u=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let f,m,g,v;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,m=0,g=0,v=1;break;case 90:f=0,m=1,g=1,v=0;break;case 270:f=0,m=-1,g=-1,v=0;break;case 0:f=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(g=-g,v=-v);let b,w,A,E;f===0?(b=Math.abs(h-t[1])*s+r,w=Math.abs(u-t[0])*s+o,A=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(b=Math.abs(u-t[0])*s+r,w=Math.abs(h-t[1])*s+o,A=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[f*s,m*s,g*s,v*s,b-f*s*u-g*s*h,w-m*s*u-v*s*h],this.width=A,this.height=E}get rawDims(){const t=this.viewBox;return Nt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new zu({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return yt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];yt.applyTransform(e,this.transform);const s=[t[2],t[3]];return yt.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return yt.applyInverseTransform(s,this.transform),s}}class _0 extends Ta{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function yp(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function E0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function w$(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function x$(n,t="document.pdf"){if(typeof n!="string")return t;if(yp(n))return Ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return t;const i=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const c=Array.from(s.searchParams.values()).reverse();for(const h of c)if(r.test(h))return i(h);const u=Array.from(s.searchParams.keys()).reverse();for(const h of u)if(r.test(h))return i(h)}if(s.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(u)return i(u[0])}return t}class bE{started=Object.create(null);times=[];time(t){t in this.started&&Ct(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ct(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function Fc(n,t){const e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function ms(n){n.preventDefault()}function Re(n){n.preventDefault(),n.stopPropagation()}function S$(n){console.log("Deprecated API usage: "+n)}class Mv{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const h=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(o+=f,c+=m):h==="+"&&(o-=f,c-=m),new Date(Date.UTC(s,i,r,o,c,u))}}function A$(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new zu({viewBox:r,userUnit:1,scale:t,rotation:e})}function vp(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ct(`Not a valid color format: "${n}"`),[0,0,0])}function _$(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,vp(s))}t.remove()}function fe(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function Vs(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function ba(n,t,e=!1,s=!0){if(t instanceof zu){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,c=en.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${r}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,m=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=f,o.height=m):(o.width=m,o.height=f)}s&&n.setAttribute("data-main-rotation",t.rotation)}class ni{constructor(){const{pixelRatio:t}=ni;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,i,r=-1){let o=1/0,c=1/0,u=1/0;s=ni.capPixels(s,r),s>0&&(o=Math.sqrt(s/(t*e))),i!==-1&&(c=i/t,u=i/e);const h=Math.min(o,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Pv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class $c{#t=null;#e=null;#n;#s=null;#r=null;#i=null;#a=null;static#o=null;constructor(t){this.#n=t,$c.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ms,{signal:e}),t.addEventListener("pointerdown",$c.#l,{signal:e}));const s=this.#s=document.createElement("div");s.className="buttons",t.append(s);const i=this.#n.toolbarPosition;if(i){const{style:r}=t,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,Re(t)}#h(t){this.#n._focusEventsAllowed=!0,Re(t)}#u(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ms,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",$c.#o[t]),this.#u(s)&&s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#s.append(s)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#u(e),this.#s.append(e,this.#f),this.#r=t}addComment(t){if(this.#i)return;const e=t.render();e&&(this.#u(e),this.#s.append(e,this.#f),this.#i=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#u(e),this.#s.append(e,this.#f)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#n);this.#u(e),this.#s.append(e,this.#f)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class E${#t=null;#e=null;#n;constructor(t){this.#n=t}#s(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ms,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const c=r.x+(e?r.width:0);if(o>s){i=c,s=o;continue}e?c>i&&(i=c):c<i&&(i=c)}return[e?1-i:i,s]}show(t,e,s){const[i,r]=this.#r(e,s),{style:o}=this.#e||=this.#s();t.append(this.#e),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#i(t,e,s,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const c=this.#n._signal;c instanceof AbortSignal&&!c.aborted&&(r.addEventListener("contextmenu",ms,{signal:c}),r.addEventListener("click",i,{signal:c})),this.#t.append(r)}}function RP(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}class T${#t=0;get id(){return`${SP}${this.#t++}`}}class T0{#t=TP();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Nt(this,"_isSVGFittingCanvas",r)}async#s(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(s.url=e,i=await Uu(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=T0._isSVGFittingCanvas,o=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,h()},o.onload=async()=>{const m=s.svgUrl=o.result;c.src=await r?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=o.onerror=f});o.readAsDataURL(i),await u}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Ct(i),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return this.#s(`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return this.#s(t,t)}async getFromBlob(t,e){const s=await e;return this.#s(t,s)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=i.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class C${#t=[];#e=!1;#n;#s=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&t(),this.#e)return;const u={cmd:t,undo:e,post:s,type:r};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(u);return}if(o&&this.#t[this.#s].type===r){c&&(u.undo=this.#t[this.#s].undo),this.#t[this.#s]=u;return}const h=this.#s+1;h===this.#n?this.#t.splice(0,1):(this.#s=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(u)}undo(){if(this.#s===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#s];t(),e?.(),this.#e=!1,this.#s-=1}redo(){if(this.#s<this.#t.length-1){this.#s+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#s];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}cleanType(t){if(this.#s!==-1){for(let e=this.#s;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#s-e),this.#s=e;return}this.#t.length=0,this.#s=-1}}destroy(){this.#t=null}}class Hu{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=en.platform;for(const[s,i,r={}]of t)for(const o of s){const c=o.startsWith("mac+");e&&c?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!c&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:c=null}}=s;c&&!c(t,e)||(i.bind(t,...o,e)(),r||Re(e))}}class C0{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return _$(t),Nt(this,"_colors",t)}convert(t){const e=vp(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return C0._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?yt.makeHexColor(...e):t}}class Sr{#t=new AbortController;#e=null;#n=null;#s=new Map;#r=new Map;#i=null;#a=null;#o=null;#l=new C$;#c=null;#h=null;#u=null;#f=0;#m=new Set;#p=null;#d=null;#g=new Set;_editorUndoBar=null;#b=!1;#y=!1;#x=!1;#S=null;#v=null;#A=null;#R=null;#T=!1;#_=null;#k=new T$;#C=!1;#M=!1;#L=!1;#D=null;#N=null;#j=null;#O=null;#B=null;#E=Tt.NONE;#w=new Set;#U=null;#z=null;#V=null;#K=null;#q=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#$=null;#G=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Sr.prototype,e=o=>o.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new Hu([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,s,i,r,o,c,u,h,f,m,g,v,b,w,A){const E=this._signal=this.#t.signal;this.#G=t,this.#Z=e,this.#J=s,this.#i=i,this.#c=r,this.#z=o,this.#q=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:E}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),c._on("setpreference",this.onSetPreference.bind(this),{signal:E}),c._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#lt(),this.#ht(),this.#et(),this.#a=u.annotationStorage,this.#S=u.filterFactory,this.#V=h,this.#R=f||null,this.#b=m,this.#y=g,this.#x=v,this.#B=b||null,this.viewParameters={realScale:Qo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=A!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#s.clear(),this.#g.clear(),this.#O?.clear(),this.#e=null,this.#w.clear(),this.#l.destroy(),this.#i?.destroy(),this.#c?.destroy(),this.#z?.destroy(),this.#_?.hide(),this.#_=null,this.#j?.destroy(),this.#j=null,this.#n=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#$&&(clearTimeout(this.#$),this.#$=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#x}get hcmFilter(){return Nt(this,"hcmFilter",this.#V?this.#S.addHCMFilter(this.#V.foreground,this.#V.background):"none")}get direction(){return Nt(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Nt(this,"_highlightColors",this.#R?new Map(this.#R.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Nt(this,"highlightColors",null);const e=new Map,s=!!this.#V;for(const[i,r]of t){const o=i.endsWith("_HCM");if(s&&o){e.set(i.replace("_HCM",""),r);continue}!s&&!o&&e.set(i,r)}return Nt(this,"highlightColors",e)}get highlightColorNames(){return Nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,e=!1){this.#i?.editAltText(this,t,e)}hasCommentManager(){return!!this.#c}editComment(t,e){this.#c?.open(this,t,e)}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#x=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,e){for(const s of this.#r.values()){const{x:i,y:r,width:o,height:c}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+c)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Qo.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c}=s,u=s.toString(),f=this.#Q(s).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;s.empty();const g=this.#tt(f),v=this.#E===Tt.NONE,b=()=>{const w=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c,text:u});v&&this.showAllEditors("highlight",!0,!0),e&&w?.editComment()};if(v){this.switchToMode(Tt.HIGHLIGHT,b);return}b()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#_||=new E$(this),this.#_.show(s,i,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#U&&(this.#_?.hide(),this.#U=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#U)return;const i=this.#Q(t).closest(".textLayer");if(!i){this.#U&&(this.#_?.hide(),this.#U=null,this.#P({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#U=e,this.#P({hasSelectedText:!0}),!(this.#E!==Tt.HIGHLIGHT&&this.#E!==Tt.NONE)&&(this.#E===Tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#T=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#E===Tt.HIGHLIGHT?this.#tt(i):null;if(r?.toggleDrawing(),this.#M){const o=new AbortController,c=this.combinedSignal(o),u=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),r?.toggleDrawing(!0),h.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else r?.toggleDrawing(!0),this.#Y("main_toolbar")}}#Y(t=""){this.#E===Tt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#N=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,e]=this.#N;this.#N=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#D)return;this.#D=new AbortController;const t=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#dt(){this.#D?.abort(),this.#D=null}#nt(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#st(){this.#h?.abort(),this.#h=null}#ht(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#dt(),this.#st()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#w){const i=s.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of this.#d)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Ct(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const u of s){const h=await i.deserialize(u);if(!h)return;r.push(h)}const o=()=>{for(const u of r)this.#it(u);this.#rt(r)},c=()=>{for(const u of r)u.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(r){Ct(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==Tt.NONE&&!this.isEditorHandlingKeyboard&&Sr._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#Y("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#P(t){Object.entries(t).some(([s,i])=>this.#W[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,t)}),this.#E===Tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Vt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#P({isEditing:this.#E!==Tt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#st(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#d){this.#d=t;for(const e of this.#d)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,i=!1,r=!1){if(this.#E!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#E===Tt.POPUP&&this.#c?.hideSidebar(),this.#E=t,t===Tt.NONE){this.setEditingState(!1),this.#pt(),this._editorUndoBar?.hide(),this.#F.resolve();return}t===Tt.SIGNATURE&&await this.#z?.loadSignatures(),t===Tt.POPUP&&(this.#n||=await this.#q.getAnnotationsByType(new Set(this.#d.map(o=>o._editorType))),this.#c?.showSidebar(this.#n)),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#r.values())o.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const o of this.#s.values())o.annotationElementId===e||o.id===e?(this.setSelected(o),r?o.editComment():i&&o.enterInEditMode()):o.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#d){switch(t){case Vt.CREATE:this.currentLayer.addNewEditor(e);return;case Vt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#K||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,e);else for(const s of this.#d)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const r of this.#s.values())r.editorType===t&&r.show(e);(this.#K?.get(Vt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Vt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#L!==t){this.#L=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#s.values())e.enable()}}#pt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#r.values())t.disable();for(const t of this.#s.values())t.disable()}}getEditors(t){const e=[];for(const s of this.#s.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return this.#s.get(t)}addEditor(t){this.#s.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#s.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#P({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#l.add(t),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#l.cleanType(t)}#X(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const t of this.#s.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const r of e)r.remove()},i=()=>{for(const r of e)this.#it(r)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#rt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#rt(this.#s.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==Tt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=e;const[i,r]=this.#I,o=[...this.#w],c=1e3;this.#$&&clearTimeout(this.#$),this.#$=setTimeout(()=>{this.#$=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const u of o)this.#s.has(u.id)&&(u.translateInPage(i,r),u.translationDone())},undo:()=>{for(const u of o)this.#s.has(u.id)&&(u.translateInPage(-i,-r),u.translationDone())},mustExec:!1})},c);for(const u of o)u.translateInPage(t,e),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:i,y:r,pageIndex:o},c]of t)c.newX=i,c.newY=r,c.newPageIndex=o,e||=i!==c.savedX||r!==c.savedY||o!==c.savedPageIndex;if(!e)return!1;const s=(i,r,o,c)=>{if(this.#s.has(i.id)){const u=this.#r.get(c);u?i._setParentAndPosition(u,r,o):(i.pageIndex=c,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:c}]of t)s(i,r,o,c)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:c}]of t)s(i,r,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}get imageManager(){return Nt(this,"imageManager",new T0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,f=e.rangeCount;h<f;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(h,f,m,g)=>({x:(f-i)/o,y:1-(h+m-s)/r,width:g/o,height:m/r});break;case"180":c=(h,f,m,g)=>({x:1-(h+m-s)/r,y:1-(f+g-i)/o,width:m/r,height:g/o});break;case"270":c=(h,f,m,g)=>({x:1-(f+g-i)/o,y:(h-s)/r,width:g/o,height:m/r});break;default:c=(h,f,m,g)=>({x:(h-s)/r,y:(f-i)/o,width:m/r,height:g/o});break}const u=[];for(let h=0,f=e.rangeCount;h<f;h++){const m=e.getRangeAt(h);if(!m.collapsed)for(const{x:g,y:v,width:b,height:w}of m.getClientRects())b===0||w===0||u.push(c(g,v,b,w))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#a.getRawValue(e);s&&(this.#E===Tt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const i=this.#O?.get(t);i&&(i.setCanvas(e,s),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class qs{#t=null;#e=!1;#n=null;#s=null;#r=null;#i=null;#a=!1;#o=null;#l=null;#c=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#l=t,this.#u=t._uiManager.useNewAltTextFlow,qs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){qs._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#s=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",qs.#f.missing),e.setAttribute("data-l10n-id",qs.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#l._uiManager._signal;t.addEventListener("contextmenu",ms,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#a=!0,i(r))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#h=await qs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#l.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(this.#c=s,this.#h=i),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",qs.#f[this.#m]),this.#s?.setAttribute("data-l10n-id",qs.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#l.id}`;const i=100,r=this.#l._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:r})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#l.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Th{#t=null;#e=!1;#n=null;#s=null;#r=null;#i=null;#a=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",ms,{signal:e}),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:e});const s=i=>{i.preventDefault(),this.edit()};return t.addEventListener("click",s,{capture:!0,signal:e}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(this.#e=!0,s(i))},{signal:e}),t}edit(){const{bottom:t,left:e,right:s}=this.#n.getClientDimensions(),i={top:t};this.#n._uiManager.direction==="ltr"?i.right=s:i.left=e,this.#n._uiManager.editComment(this.#n,i)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#a||this.#r===""}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#s}serialize(){return this.data}get data(){return{text:this.#r,date:this.#i,deleted:this.#a}}set data(t){if(t===null){this.#r="",this.#a=!0;return}this.#r=t,this.#i=new Date,this.#a=!1}setInitialText(t){this.#s=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#r="",this.#i=null,this.#n=null,this.#e=!1,this.#a=!1}}class bp{#t;#e=!1;#n=null;#s;#r;#i;#a;#o=null;#l;#c=null;#h;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:c}){this.#t=t,this.#n=s,this.#s=e,this.#r=i,this.#i=r,this.#a=o,this.#h=new AbortController,this.#l=AbortSignal.any([c,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ni.pixelRatio}#f(t){if(this.#s?.())return;if(t.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,r=AbortSignal.any([this.#l,i.signal]),o=this.#t,c={capture:!0,signal:r,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Re(h),u(h))},c),o.addEventListener("pointerup",u,c),o.addEventListener("pointercancel",u,c);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#l,this.#u.signal]),r=this.#t,o={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#m.bind(this),o);const c=this.#p.bind(this);r.addEventListener("touchend",c,o),r.addEventListener("touchcancel",c,o),o.capture=!0,r.addEventListener("pointerdown",Re,o),r.addEventListener("pointermove",Re,o),r.addEventListener("pointercancel",Re,o),r.addEventListener("pointerup",Re,o),this.#r?.()}if(Re(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#c||t.touches.length!==2)return;Re(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:c}=s,u=this.#c,{touch0X:h,touch0Y:f,touch1X:m,touch1Y:g}=u,v=m-h,b=g-f,w=o-i,A=c-r,E=Math.hypot(w,A)||1,C=Math.hypot(v,b)||1;if(!this.#e&&Math.abs(C-E)<=bp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=r,u.touch1X=o,u.touch1Y=c,!this.#e){this.#e=!0;return}const T=[(i+o)/2,(r+c)/2];this.#i?.(T,C,E)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#c&&(Re(t),this.#c=null,this.#e=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class bt{#t=null;#e=null;#n=null;#s=null;#r=!1;#i=null;#a="";#o=!1;#l=null;#c=null;#h=null;#u=null;#f="";#m=!1;#p=null;#d=!1;#g=!1;#b=!1;#y=null;#x=0;#S=0;#v=null;#A=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#R=!1;#T=bt._zIndex++;static _borderLineWidth=-1;static _colorManager=new C0;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=bt.prototype._resizeWithKeyboard,e=Sr.TRANSLATE_SMALL,s=Sr.TRANSLATE_BIG;return Nt(this,"_resizerKeyboardManager",new Hu([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[c,u]=this.parentDimensions;this.x=t.x/c,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new R$({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(bt._l10n??=t,bt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),bt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#R}set _isDraggable(t){this.#R=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#I(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,i]=this.parentDimensions;this.setAt(t*s,e*i,this.width*s,this.height*i),this._onTranslated()}#_([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#_(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#_(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,h]=this.getBaseTranslation();o+=u,c+=h;const{style:f}=s;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=bt,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:c,height:u}=this;if(c*=s,u*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=mn(r,0,s-c),o=mn(o,0,i-u);break;case 90:r=mn(r,0,s-u),o=mn(o,c,i);break;case 180:r=mn(r,c,s),o=mn(o,u,i);break;case 270:r=mn(r,u,s),o=mn(o,0,i-c);break}this.x=r/=s,this.y=o/=i;const[h,f]=this.getBaseTranslation();r+=h,o+=f,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#k(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return bt.#k(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return bt.#k(t,e,360-this.parentRotation)}#C(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,this.#o||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!this.#o&&e.endsWith("%");if(i&&r)return;const[o,c]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!this.#o&&!r&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");this.#l.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#L.bind(this,s),{signal:e}),i.addEventListener("contextmenu",ms,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#l)}#L(t,e){e.preventDefault();const{isMac:s}=en.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Re,{passive:!1,signal:o}),window.addEventListener("contextmenu",ms,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#N()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#D(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#h)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const r=this.x,o=this.y,c=this.width,u=this.height;r===t&&o===e&&c===s&&u===i||this.addCommands({cmd:this.#D.bind(this,r,o,c,u),undo:this.#D.bind(this,t,e,s,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#j(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,c=this.width,u=this.height,h=bt.MIN_SIZE/s,f=bt.MIN_SIZE/i,m=this.#C(this.rotation),g=(j,I)=>[m[0]*j+m[2]*I,m[1]*j+m[3]*I],v=this.#C(360-this.rotation),b=(j,I)=>[v[0]*j+v[2]*I,v[1]*j+v[3]*I];let w,A,E=!1,C=!1;switch(t){case"topLeft":E=!0,w=(j,I)=>[0,0],A=(j,I)=>[j,I];break;case"topMiddle":w=(j,I)=>[j/2,0],A=(j,I)=>[j/2,I];break;case"topRight":E=!0,w=(j,I)=>[j,0],A=(j,I)=>[0,I];break;case"middleRight":C=!0,w=(j,I)=>[j,I/2],A=(j,I)=>[0,I/2];break;case"bottomRight":E=!0,w=(j,I)=>[j,I],A=(j,I)=>[0,0];break;case"bottomMiddle":w=(j,I)=>[j/2,I],A=(j,I)=>[j/2,0];break;case"bottomLeft":E=!0,w=(j,I)=>[0,I],A=(j,I)=>[j,0];break;case"middleLeft":C=!0,w=(j,I)=>[0,I/2],A=(j,I)=>[j,I/2];break}const T=w(c,u),M=A(c,u);let P=g(...M);const k=bt._round(r+P[0]),D=bt._round(o+P[1]);let N=1,U=1,V,q;if(e.fromKeyboard)({deltaX:V,deltaY:q}=e);else{const{screenX:j,screenY:I}=e,[F,W]=this.#c;[V,q]=this.screenToPageTranslation(j-F,I-W),this.#c[0]=j,this.#c[1]=I}if([V,q]=b(V/s,q/i),E){const j=Math.hypot(c,u);N=U=Math.max(Math.min(Math.hypot(M[0]-T[0]-V,M[1]-T[1]-q)/j,1/c,1/u),h/c,f/u)}else C?N=mn(Math.abs(M[0]-T[0]-V),h,1)/c:U=mn(Math.abs(M[1]-T[1]-q),f,1)/u;const it=bt._round(c*N),at=bt._round(u*U);P=g(...A(it,at));const rt=k-P[0],lt=D-P[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=it,this.height=at,this.x=rt,this.y=lt,this.setDims(s*it,i*at),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#g)return this._editToolbar;this._editToolbar=new $c(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(qs.initialize(bt._l10n),this.#n=new qs(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#s?this.#s:this.#s=new Th(this)}get commentColor(){return null}get comment(){const t=this.#s;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#s||(this.#s=new Th(this)),this.#s.data=t}setCommentData(t){this.#s||(this.#s=new Th(this)),this.#s.setInitialText(t)}get hasEditedComment(){return this.#s?.hasBeenEdited()}async editComment(){this.#s||(this.#s=new Th(this)),this.#s.edit()}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,c=o+r+1,u=i-100,h=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,i]}}}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),RP(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#A||=new bp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#O.bind(this),onPinching:this.#B.bind(this),onPinchEnd:this.#E.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#O(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#B(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=this.#C(this.rotation),c=(k,D)=>[o[0]*k+o[2]*D,o[1]*k+o[3]*D],[u,h]=this.parentDimensions,f=this.x,m=this.y,g=this.width,v=this.height,b=bt.MIN_SIZE/u,w=bt.MIN_SIZE/h;r=Math.max(Math.min(r,1/g,1/v),b/g,w/v);const A=bt._round(g*r),E=bt._round(v*r);if(A===g&&E===v)return;this.#p||=[f,m,g,v];const C=c(g/2,v/2),T=bt._round(f+C[0]),M=bt._round(m+C[1]),P=c(A/2,E/2);this.x=T-P[0],this.y=M-P[1],this.width=A,this.height=E,this.setDims(u*A,h*E),this.fixAndSetPosition(),this._onResizing()}#E(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(t){const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(t);return}this.#w(t)}#w(t){const{isMac:e}=en.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},c=h=>{i.abort(),this.#i=null,this.#m=!1,this._uiManager.endDragSession()||this.#w(h),s&&this._onStopDragging()};e&&(this.#x=t.clientX,this.#S=t.clientY,this.#i=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:f,clientY:m,pointerId:g}=h;if(g!==this.#i){Re(h);return}const[v,b]=this.screenToPageTranslation(f-this.#x,m-this.#S);this.#x=f,this.#S=m,this._uiManager.dragSelectedEditors(v,b)},o),window.addEventListener("touchmove",Re,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#a&&(this.#A||h.isPrimary)&&c(h),Re(h)},o));const u=h=>{if(!this.#i||this.#i===h.pointerId){c(h);return}Re(h)};window.addEventListener("pointerup",u,{signal:r}),window.addEventListener("blur",u,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[c,u]=this.pageTranslation,h=t/i,f=e/i,m=this.x*r,g=this.y*o,v=this.width*r,b=this.height*o;switch(s){case 0:return[m+h+c,o-g-f-b+u,m+h+v+c,o-g-f+u];case 90:return[m+f+c,o-g+h+u,m+f+b+c,o-g+h+v+u];case 180:return[m-h-v+c,o-g+f+u,m-h+c,o-g+f+b+u];case 270:return[m-f-b+c,o-g-h-v+u,m-f+c,o-g-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,c=r-s,u=o-i;switch(this.rotation){case 0:return[s,e-o,c,u];case 90:return[s,e-i,u,c];case 180:return[r,e-i,c,u];case 270:return[r,e-o,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#g=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#g=!1,!0):!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}#z(){if(this.#u||!this.div)return;this.#u=new AbortController;const t=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){te("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[c,u,h,f]=i.getRectInCurrentCoords(t.rect,o);return i.x=c/r,i.y=u/o,i.width=h/r,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#I(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null,this.#A?.destroy(),this.#A=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#l.children;if(!this.#e){this.#e=Array.from(e);const o=this.#V.bind(this),c=this.#K.bind(this),u=this._uiManager._signal;for(const h of this.#e){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#q.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",bt._l10nResizer[f])}}const s=this.#e[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==i){if(r<i)for(let c=0;c<i-r;c++)this.#l.append(this.#l.firstChild);else if(r>i)for(let c=0;c<r-i;c++)this.#l.firstChild.before(this.#l.lastChild);let o=0;for(const c of e){const h=this.#e[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",bt._l10nResizer[h])}}this.#W(0),this.#b=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){bt._resizerKeyboardManager.exec(this,t)}#K(t){this.#b&&t.relatedTarget?.parentNode!==this.#l&&this.#I()}#q(t){this.#f=this.#b?t:""}#W(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#j(this.#f,{deltaX:t,deltaY:e,fromKeyboard:!0})}#I(){this.#b=!1,this.#W(-1),this.#N()}_stopResizingWithKeyboard(){this.#I(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#d}set isEditing(t){this.#d=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:s}=t;let i=this.#v.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(s),this.#v.size===0&&(this.#v=null)},bt._telemetryTimeout),this.#v.set(s,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class R$ extends bt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const wE=3285377520,rs=4294901760,$s=65535;class MP{constructor(t){this.h1=t?t&4294967295:wE,this.h2=t?t&4294967295:wE}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let w=0,A=t.length;w<A;w++){const E=t.charCodeAt(w);E<=255?e[s++]=E:(e[s++]=E>>>8,e[s++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let c=0,u=0,h=this.h1,f=this.h2;const m=3432918353,g=461845907,v=m&$s,b=g&$s;for(let w=0;w<i;w++)w&1?(c=o[w],c=c*m&rs|c*v&$s,c=c<<15|c>>>17,c=c*g&rs|c*b&$s,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=o[w],u=u*m&rs|u*v&$s,u=u<<15|u>>>17,u=u*g&rs|u*b&$s,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,r){case 3:c^=e[i*4+2]<<16;case 2:c^=e[i*4+1]<<8;case 1:c^=e[i*4],c=c*m&rs|c*v&$s,c=c<<15|c>>>17,c=c*g&rs|c*b&$s,i&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&rs|t*36045&$s,e=e*4283543511&rs|((e<<16|t>>>16)*2950163797&rs)>>>16,t^=e>>>1,t=t*444984403&rs|t*60499&$s,e=e*3301882366&rs|((e<<16|t>>>16)*3120437893&rs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ov=Object.freeze({map:null,hash:"",transfer:void 0});class R0{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof bt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,this.#n.set(t,e);i&&this.#s(),e instanceof bt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PP(this)}get serializable(){if(this.#n.size===0)return Ov;const t=new Map,e=new MP,s=[],i=Object.create(null);let r=!1;for(const[o,c]of this.#n){const u=c instanceof bt?c.serialize(!1,i):c;u&&(t.set(o,u),e.update(`${o}:${JSON.stringify(u)}`),r||=!!u.bitmap)}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:Ov}get editorStats(){let t=null;const e=new Map;for(const s of this.#n.values()){if(!(s instanceof bt))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const o=t[r]||=new Map;for(const[c,u]of Object.entries(i)){if(c==="type")continue;let h=o.get(c);h||(h=new Map,o.set(c,h));const f=h.get(u)??0;h.set(u,f+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof bt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class PP extends R0{#t;constructor(t){super();const{map:e,hash:s,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);this.#t={map:r,hash:s,transfer:i}}get print(){te("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Nt(this,"modifiedIds",{ids:new Set,hash:""})}}class M${#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Me(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,c=new FontFace(i,r,o);this.addNativeFontFace(c);try{await c.load(),this.#t.add(i),s?.(t)}catch{Ct(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Ct(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Nt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Nt(this,"isSyncFontLoadingSupported",pn||en.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Me(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(M,P){return M.charCodeAt(P)<<24|M.charCodeAt(P+1)<<16|M.charCodeAt(P+2)<<8|M.charCodeAt(P+3)&255}function i(M,P,k,D){const N=M.substring(0,P),U=M.substring(P+k);return N+D+U}let r,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(M,P){if(++h>30){Ct("Load test font never loaded."),P();return}if(u.font="30px "+M,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(f.bind(null,M,P))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=i(g,976,m.length,m);const b=16,w=1482184792;let A=s(g,b);for(r=0,o=m.length-3;r<o;r+=4)A=A-w+s(m,r)|0;r<m.length&&(A=A-w+s(m+"XXX",r)|0),g=i(g,b,4,f$(A));const E=`url(data:font/opentype;base64,${btoa(g)});`,C=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const M of[t.loadedName,m]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=M,T.append(P)}this._document.body.append(T),f(m,()=>{T.remove(),e.complete()})}}class P${constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${CP(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){Ct(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}function O$(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(pn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function k$(n){if(pn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Bu(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ch(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const kv=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,D$=n=>typeof n=="object"&&typeof n?.name=="string",N$=v$.bind(null,kv,D$);class L${#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Ct("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Rh={DATA:1,ERROR:2},Ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xE(){}function Rn(n){if(n instanceof xr||n instanceof Rv||n instanceof yE||n instanceof bf||n instanceof by)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new xr(n.message);case"InvalidPDFException":return new Rv(n.message);case"PasswordException":return new yE(n.message,n.code);case"ResponseException":return new bf(n.message,n.status,n.missing);case"UnknownErrorException":return new by(n.message,n.details)}return new by(n.message,n.toString())}class Bc{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#s(t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Rh.DATA)i.resolve(t.data);else if(t.callback===Rh.ERROR)i.reject(Rn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Rh.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Rh.ERROR,callbackId:t.callbackId,reason:Rn(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:c,action:t,streamId:r,data:e,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[r].pullCall=f,u.postMessage({sourceName:o,targetName:c,stream:Ee.PULL,streamId:r,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Me(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[r].cancelCall=f,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:o,targetName:c,stream:Ee.CANCEL,streamId:r,reason:Rn(h)}),f.promise}},s)}#n(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,c=this.actionHandler[t.action],u={enqueue(h,f=1,m){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Ee.ENQUEUE,streamId:e,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Ee.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){Me(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Ee.ERROR,streamId:e,reason:Rn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,Promise.try(c,t.data,u).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ee.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:Ee.START_COMPLETE,streamId:e,reason:Rn(h)})})}#s(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ee.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Rn(t.reason));break;case Ee.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Rn(t.reason));break;case Ee.PULL:if(!c){r.postMessage({sourceName:s,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||xE).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,reason:Rn(h)})});break;case Ee.ENQUEUE:if(Me(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ee.CLOSE:if(Me(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,e);break;case Ee.ERROR:Me(o,"error should have stream controller"),o.controller.error(Rn(t.reason)),this.#r(o,e);break;case Ee.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Rn(t.reason)),this.#r(o,e);break;case Ee.CANCEL:if(!c)break;const u=Rn(t.reason);Promise.try(c.onCancel||xE,u).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ee.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:Ee.CANCEL_COMPLETE,streamId:e,reason:Rn(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class OP{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){te("Abstract method `_createCanvas` called.")}}class j$ extends OP{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class kP{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class SE extends kP{async _fetch(t){const e=await Uu(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bu(e)}}class DP{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}class I$ extends DP{#t;#e;#n;#s;#r;#i;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#s=t,this.#r=e}get#o(){return this.#e||=new Map}get#l(){return this.#i||=new Map}get#c(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(Si,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Si,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#h(t){if(t.length===1){const u=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=u[m]/255;const f=h.join(",");return[f,f,f]}const[e,s,i]=t,r=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)r[u]=e[u]/255,o[u]=s[u]/255,c[u]=i[u]/255;return[r.join(","),o.join(","),c.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(yp(e)?Ct('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=_P(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,i,r]=this.#h(t),o=t.length===1?s:`${s}${i}${r}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const c=`g_${this.#s}_transfer_map_${this.#a++}`,u=this.#u(c);this.#o.set(t,u),this.#o.set(o,u);const h=this.#p(c);return this.#g(s,i,r,h),u}addHCMFilter(t,e){const s=`${t}-${e}`,i="base";let r=this.#l.get(i);if(r?.key===s||(r?(r.filter?.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#l.set(i,r)),!t||!e))return r.url;const o=this.#y(t);t=yt.makeHexColor(...o);const c=this.#y(e);if(e=yt.makeHexColor(...c),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const u=new Array(256);for(let v=0;v<=255;v++){const b=v/255;u[v]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#s}_hcm_filter`,m=r.filter=this.#p(f);this.#g(h,h,h,m),this.#m(m);const g=(v,b)=>{const w=o[v]/255,A=c[v]/255,E=new Array(b+1);for(let C=0;C<=b;C++)E[C]=w+C/b*(A-w);return E.join(",")};return this.#g(g(0,5),g(1,5),g(2,5),m),r.url=this.#u(f),r.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#h([t]),i=`alpha_${s}`;if(e=this.#o.get(i),e)return this.#o.set(t,e),e;const r=`g_${this.#s}_alpha_map_${this.#a++}`,o=this.#u(r);this.#o.set(t,o),this.#o.set(i,o);const c=this.#p(r);return this.#b(s,c),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,i;if(t?([s]=this.#h([t]),i=`luminosity_${s}`):i="luminosity",e=this.#o.get(i),e)return this.#o.set(t,e),e;const r=`g_${this.#s}_luminosity_map_${this.#a++}`,o=this.#u(r);this.#o.set(t,o),this.#o.set(i,o);const c=this.#p(r);return this.#f(c),t&&this.#b(s,c),o}addHighlightHCMFilter(t,e,s,i,r){const o=`${e}-${s}-${i}-${r}`;let c=this.#l.get(t);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#l.set(t,c)),!e||!s))return c.url;const[u,h]=[e,s].map(this.#y.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,v]=[i,r].map(this.#y.bind(this));m<f&&([f,m,g,v]=[m,f,v,g]),this.#c.style.color="";const b=(E,C,T)=>{const M=new Array(256),P=(m-f)/T,k=E/255,D=(C-E)/(255*T);let N=0;for(let U=0;U<=T;U++){const V=Math.round(f+U*P),q=k+U*D;for(let it=N;it<=V;it++)M[it]=q;N=V+1}for(let U=N;U<256;U++)M[U]=M[N-1];return M.join(",")},w=`g_${this.#s}_hcm_${t}_filter`,A=c.filter=this.#p(w);return this.#m(A),this.#g(b(g[0],v[0],5),b(g[1],v[1],5),b(g[2],v[2],5),A),c.url=this.#u(w),c.url}destroy(t=!1){t&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(Si,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(Si,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(Si,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#d(t,e,s){const i=this.#r.createElementNS(Si,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)}#g(t,e,s,i){const r=this.#r.createElementNS(Si,"feComponentTransfer");i.append(r),this.#d(r,"feFuncR",t),this.#d(r,"feFuncG",e),this.#d(r,"feFuncB",s)}#b(t,e){const s=this.#r.createElementNS(Si,"feComponentTransfer");e.append(s),this.#d(s,"feFuncA",t)}#y(t){return this.#c.style.color=t,vp(getComputedStyle(this.#c).getPropertyValue("color"))}}class NP{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class AE extends NP{async _fetch(t){const e=await Uu(t,"arraybuffer");return new Uint8Array(e)}}class LP{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){te("Abstract method `_fetch` called.")}}class _E extends LP{async _fetch(t){const e=await Uu(t,"arraybuffer");return new Uint8Array(e)}}pn&&Ct("Please use the `legacy` build in Node.js environments.");async function M0(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class F$ extends DP{}class B$ extends OP{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class U$ extends kP{async _fetch(t){return M0(t)}}class z$ extends NP{async _fetch(t){return M0(t)}}class H$ extends LP{async _fetch(t){return M0(t)}}const bo="__forcedDependency";class V${#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[bo]:[]};#n=new Map;#s=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#h=new Map;#u=new Map;#f;#m;constructor(t){this.#f=t.width,this.#m=t.height}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[bo]:{__proto__:this.#e[bo]}},this.#a={__proto__:this.#a},this.#s.push([t,null]),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#s.pop();return s!==void 0&&(s[1]=t),this}recordOpenMarker(t){return this.#s.push([t,null]),this}getOpenMarker(){return this.#s.length===0?null:this.#s.at(-1)[0]}recordCloseMarker(t){const e=this.#s.pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return this.#r.push([t,null]),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return this.#i.push(yt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(bo,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#c)this.recordFutureForcedDependency(bo,t);return this}resetBBox(t){return this.#l=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(t,e,s,i,r,o){const c=yt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform()),u=[1/0,1/0,-1/0,-1/0];yt.axialAlignedBoundingBox([s,r,i,o],c,u);const h=yt.intersect(this.#a,u);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,s,i,r,o){const c=this.#a;if(c[0]===1/0)return this;const u=yt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform());if(c[0]===-1/0)return yt.axialAlignedBoundingBox([s,r,i,o],u,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return yt.axialAlignedBoundingBox([s,r,i,o],u,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(t,e,s,i=1,r=0,o=0,c){const u=s.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#u.get(s),h!==!1&&(f=[0,0,0,0],yt.axialAlignedBoundingBox(u,s.fontMatrix,f),(i!==1||r!==0||o!==0)&&yt.scaleMinMax([i,0,0,-i,r,o],f),h)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(t);const m=c();return u&&f&&h===void 0&&(h=f[0]<=r-m.actualBoundingBoxLeft&&f[2]>=r+m.actualBoundingBoxRight&&f[1]<=o-m.actualBoundingBoxAscent&&f[3]>=o+m.actualBoundingBoxDescent,this.#u.set(s,h),h)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,r-m.actualBoundingBoxLeft,r+m.actualBoundingBoxRight,o-m.actualBoundingBoxAscent,o+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#c,i=this.#t,r=this.#e;for(const o of e)o in this.#t?s.add(i[o]):o in r&&r[o].forEach(s.add,s);return this}copyDependenciesFromIncrementalOperation(t,e){const s=this.#h,i=this.#c;for(const r of this.#e[e])s.get(r).dependencies.forEach(i.add,i.add(r));return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#c.add(this.#n.get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[bo]);const s=new Set(this.#c),i=this.#s.concat(this.#r),r=this.#l===t?{minX:this.#o[0],minY:this.#o[1],maxX:this.#o[2],maxY:this.#o[3]}:null;return this.#h.set(t,{bbox:r,pairs:i,dependencies:s}),e||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(t){return this.#l!==-1&&(this.#l=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3])),this.#c.clear(),this}_takePendingDependencies(){const t=this.#c;return this.#c=new Set,t}_extractOperation(t){const e=this.#h.get(t);return this.#h.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#c.add(e)}take(){return this.#u.clear(),Array.from(this.#h,([t,{bbox:e,pairs:s,dependencies:i}])=>(s.forEach(r=>r.forEach(i.add,i)),i.delete(t),{minX:(e?.minX??0)/this.#f,maxX:(e?.maxX??this.#f)/this.#f,minY:(e?.minY??0)/this.#m,maxY:(e?.maxY??this.#m)/this.#m,dependencies:Array.from(i).sort((r,o)=>r-o),idx:t}))}}class wf{#t;#e;#n=0;#s;#r=0;constructor(t,e){if(t instanceof wf)return t;this.#t=t,this.#s=t._takePendingDependencies(),this.#e=e}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#t.hasPendingBBox||this.#t.resetBBox(this.#e),this}get hasPendingBBox(){return this.#t.hasPendingBBox}recordClipBox(t,e,s,i,r,o){return this.#t.recordClipBox(this.#e,e,s,i,r,o),this}recordBBox(t,e,s,i,r,o){return this.#t.recordBBox(this.#e,e,s,i,r,o),this}recordCharacterBBox(t,e,s,i,r,o,c){return this.#t.recordCharacterBBox(this.#e,e,s,i,r,o,c),this}recordFullPageBBox(t){return this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}copyDependenciesFromIncrementalOperation(t,e){return this.#t.copyDependenciesFromIncrementalOperation(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){this.#t.recordOperation(this.#e,!0);const e=this.#t._extractOperation(this.#e);for(const s of e.dependencies)this.#s.add(s);return this.#s.delete(this.#e),this.#s.delete(null),this}bboxToClipBoxDropOperation(t){return this.#t.bboxToClipBoxDropOperation(this.#e),this}recordNestedDependencies(){this.#t._pushPendingDependencies(this.#s)}take(){throw new Error("Unreachable")}}const as={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},tn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Dv(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class P0{isModifyingCurrentTransform(){return!1}getPattern(){te("Abstract method `getPattern` called.")}}class $$ extends P0{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===tn.STROKE||i===tn.FILL){const o=e.current.getClippedPathBoundingBox(i,fe(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),s=yt.transform(s,[1,0,0,1,o[0],o[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),Dv(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),r=t.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(s);r.setTransform(m)}else Dv(t,this._bbox),r=this._createGradient(t);return r}}function Sy(n,t,e,s,i,r,o,c){const u=t.coords,h=t.colors,f=n.data,m=n.width*4;let g;u[e+1]>u[s+1]&&(g=e,e=s,s=g,g=r,r=o,o=g),u[s+1]>u[i+1]&&(g=s,s=i,i=g,g=o,o=c,c=g),u[e+1]>u[s+1]&&(g=e,e=s,s=g,g=r,r=o,o=g);const v=(u[e]+t.offsetX)*t.scaleX,b=(u[e+1]+t.offsetY)*t.scaleY,w=(u[s]+t.offsetX)*t.scaleX,A=(u[s+1]+t.offsetY)*t.scaleY,E=(u[i]+t.offsetX)*t.scaleX,C=(u[i+1]+t.offsetY)*t.scaleY;if(b>=C)return;const T=h[r],M=h[r+1],P=h[r+2],k=h[o],D=h[o+1],N=h[o+2],U=h[c],V=h[c+1],q=h[c+2],it=Math.round(b),at=Math.round(C);let rt,lt,j,I,F,W,L,K;for(let nt=it;nt<=at;nt++){if(nt<A){const J=nt<b?0:(b-nt)/(b-A);rt=v-(v-w)*J,lt=T-(T-k)*J,j=M-(M-D)*J,I=P-(P-N)*J}else{let J;nt>C?J=1:A===C?J=0:J=(A-nt)/(A-C),rt=w-(w-E)*J,lt=k-(k-U)*J,j=D-(D-V)*J,I=N-(N-q)*J}let Z;nt<b?Z=0:nt>C?Z=1:Z=(b-nt)/(b-C),F=v-(v-E)*Z,W=T-(T-U)*Z,L=M-(M-V)*Z,K=P-(P-q)*Z;const ot=Math.round(Math.min(rt,F)),ht=Math.round(Math.max(rt,F));let ut=m*nt+ot*4;for(let J=ot;J<=ht;J++)Z=(rt-J)/(rt-F),Z<0?Z=0:Z>1&&(Z=1),f[ut++]=lt-(lt-W)*Z|0,f[ut++]=j-(j-L)*Z|0,f[ut++]=I-(I-K)*Z|0,f[ut++]=255}}function G$(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const c=t.verticesPerRow,u=Math.floor(s.length/c)-1,h=c-1;for(r=0;r<u;r++){let f=r*c;for(let m=0;m<h;m++,f++)Sy(n,e,s[f],s[f+1],s[f+c],i[f],i[f+1],i[f+c]),Sy(n,e,s[f+c+1],s[f+1],s[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Sy(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class q$ extends P0{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,m=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),v=h/m,b=f/g,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/v,scaleY:1/b},A=m+4,E=g+4,C=s.getCanvas("mesh",A,E),T=C.context,M=T.createImageData(m,g);if(e){const k=M.data;for(let D=0,N=k.length;D<N;D+=4)k[D]=e[0],k[D+1]=e[1],k[D+2]=e[2],k[D+3]=255}for(const k of this._figures)G$(M,k,w);return T.putImageData(M,2,2),{canvas:C.canvas,offsetX:c-2*v,offsetY:u-2*b,scaleX:v,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,i){Dv(t,this._bbox);const r=new Float32Array(2);if(i===tn.SHADING)yt.singularValueDecompose2dScale(fe(t),r);else if(this.matrix){yt.singularValueDecompose2dScale(this.matrix,r);const[c,u]=r;yt.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=c,r[1]*=u}else yt.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===tn.SHADING?null:this._background,e.cachedCanvases);return i!==tn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class W$ extends P0{getPattern(){return"hotpink"}}function K$(n){switch(n[0]){case"RadialAxial":return new $$(n);case"Mesh":return new q$(n);case"Dummy":return new W$}throw new Error(`Unknown IR type: ${n[0]}`)}const EE={COLORED:1,UNCOLORED:2};class O0{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),gp("TilingType: "+r);const f=e[0],m=e[1],g=e[2],v=e[3],b=g-f,w=v-m,A=new Float32Array(2);yt.singularValueDecompose2dScale(this.matrix,A);const[E,C]=A;yt.singularValueDecompose2dScale(this.baseTransform,A);const T=E*A[0],M=C*A[1];let P=b,k=w,D=!1,N=!1;const U=Math.ceil(u*T),V=Math.ceil(h*M),q=Math.ceil(b*T),it=Math.ceil(w*M);U>=q?P=u:D=!0,V>=it?k=h:N=!0;const at=this.getSizeAndScale(P,this.ctx.canvas.width,T),rt=this.getSizeAndScale(k,this.ctx.canvas.height,M),lt=t.cachedCanvases.getCanvas("pattern",at.size,rt.size),j=lt.context,I=c.createCanvasGraphics(j);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,i,o),j.translate(-at.scale*f,-rt.scale*m),I.transform(0,at.scale,0,0,rt.scale,0,0),j.save(),I.dependencyTracker?.save(),this.clipBbox(I,f,m,g,v),I.baseTransform=fe(I.ctx),I.executeOperatorList(s),I.endDrawing(),I.dependencyTracker?.restore().recordNestedDependencies?.(),j.restore(),D||N){const F=lt.canvas;D&&(P=u),N&&(k=h);const W=this.getSizeAndScale(P,this.ctx.canvas.width,T),L=this.getSizeAndScale(k,this.ctx.canvas.height,M),K=W.size,nt=L.size,Z=t.cachedCanvases.getCanvas("pattern-workaround",K,nt),ot=Z.context,ht=D?Math.floor(b/u):0,ut=N?Math.floor(w/h):0;for(let J=0;J<=ht;J++)for(let ft=0;ft<=ut;ft++)ot.drawImage(F,K*J,nt*ft,K,nt,0,0,K,nt);return{canvas:Z.canvas,scaleX:W.scale,scaleY:L.scale,offsetX:f,offsetY:m}}return{canvas:lt.canvas,scaleX:at.scale,scaleY:rt.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,s){const i=Math.max(O0.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,c=r-s;t.ctx.rect(e,s,o,c),yt.axialAlignedBoundingBox([e,s,i,r],fe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case EE.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=c;break;case EE.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new h$(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,i){let r=s;i!==tn.SHADING&&(r=yt.transform(r,e.baseTransform),this.matrix&&(r=yt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let c=new DOMMatrix(r);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const u=t.createPattern(o.canvas,"repeat");return u.setTransform(c),u}}function Y$({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const c=en.isLittleEndian?4278190080:255,[u,h]=o?[r,c]:[c,r],f=s>>3,m=s&7,g=n.length;e=new Uint32Array(e.buffer);let v=0;for(let b=0;b<i;b++){for(const A=t+f;t<A;t++){const E=t<g?n[t]:255;e[v++]=E&128?h:u,e[v++]=E&64?h:u,e[v++]=E&32?h:u,e[v++]=E&16?h:u,e[v++]=E&8?h:u,e[v++]=E&4?h:u,e[v++]=E&2?h:u,e[v++]=E&1?h:u}if(m===0)continue;const w=t<g?n[t++]:255;for(let A=0;A<m;A++)e[v++]=w&1<<7-A?h:u}return{srcPos:t,destPos:v}}const TE=16,CE=100,X$=15,RE=10,Pn=16,Ay=new DOMMatrix,qn=new Float32Array(2),Lo=new Float32Array([1/0,1/0,-1/0,-1/0]);function Q$(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},n.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},n.transform=function(e,s,i,r,o,c){t.transform(e,s,i,r,o,c),this.__originalTransform(e,s,i,r,o,c)},n.setTransform=function(e,s,i,r,o,c){t.setTransform(e,s,i,r,o,c),this.__originalSetTransform(e,s,i,r,o,c)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,c){t.bezierCurveTo(e,s,i,r,o,c),this.__originalBezierCurveTo(e,s,i,r,o,c)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Z${constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Mh(n,t,e,s,i,r,o,c,u,h){const[f,m,g,v,b,w]=fe(n);if(m===0&&g===0){const C=o*f+b,T=Math.round(C),M=c*v+w,P=Math.round(M),k=(o+u)*f+b,D=Math.abs(Math.round(k)-T)||1,N=(c+h)*v+w,U=Math.abs(Math.round(N)-P)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(v),T,P),n.drawImage(t,e,s,i,r,0,0,D,U),n.setTransform(f,m,g,v,b,w),[D,U]}if(f===0&&v===0){const C=c*g+b,T=Math.round(C),M=o*m+w,P=Math.round(M),k=(c+h)*g+b,D=Math.abs(Math.round(k)-T)||1,N=(o+u)*m+w,U=Math.abs(Math.round(N)-P)||1;return n.setTransform(0,Math.sign(m),Math.sign(g),0,T,P),n.drawImage(t,e,s,i,r,0,0,U,D),n.setTransform(f,m,g,v,b,w),[U,D]}n.drawImage(t,e,s,i,r,o,c,u,h);const A=Math.hypot(f,m),E=Math.hypot(g,v);return[A*u,E*h]}class ME{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Cv;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Xe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Lo.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=tn.FILL,e=null){const s=this.minMax.slice();if(t===tn.STROKE){e||te("Stroke bounding box must include transform."),yt.singularValueDecompose2dScale(e,qn);const i=qn[0]*this.lineWidth/2,r=qn[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const t=yt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Lo,0)}getClippedPathBoundingBox(t=tn.FILL,e=null){return yt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function PE(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%Pn,r=(e-i)/Pn,o=i===0?r:r+1,c=n.createImageData(s,Pn);let u=0,h;const f=t.data,m=c.data;let g,v,b,w;if(t.kind===Xh.GRAYSCALE_1BPP){const A=f.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),C=E.length,T=s+7>>3,M=4294967295,P=en.isLittleEndian?4278190080:255;for(g=0;g<o;g++){for(b=g<r?Pn:i,h=0,v=0;v<b;v++){const k=A-u;let D=0;const N=k>T?s:k*8-7,U=N&-8;let V=0,q=0;for(;D<U;D+=8)q=f[u++],E[h++]=q&128?M:P,E[h++]=q&64?M:P,E[h++]=q&32?M:P,E[h++]=q&16?M:P,E[h++]=q&8?M:P,E[h++]=q&4?M:P,E[h++]=q&2?M:P,E[h++]=q&1?M:P;for(;D<N;D++)V===0&&(q=f[u++],V=128),E[h++]=q&V?M:P,V>>=1}for(;h<C;)E[h++]=0;n.putImageData(c,0,g*Pn)}}else if(t.kind===Xh.RGBA_32BPP){for(v=0,w=s*Pn*4,g=0;g<r;g++)m.set(f.subarray(u,u+w)),u+=w,n.putImageData(c,0,v),v+=Pn;g<o&&(w=s*i*4,m.set(f.subarray(u,u+w)),n.putImageData(c,0,v))}else if(t.kind===Xh.RGB_24BPP)for(b=Pn,w=s*b,g=0;g<o;g++){for(g>=r&&(b=i,w=s*b),h=0,v=w;v--;)m[h++]=f[u++],m[h++]=f[u++],m[h++]=f[u++],m[h++]=255;n.putImageData(c,0,g*Pn)}else throw new Error(`bad image kind: ${t.kind}`)}function OE(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%Pn,r=(e-i)/Pn,o=i===0?r:r+1,c=n.createImageData(s,Pn);let u=0;const h=t.data,f=c.data;for(let m=0;m<o;m++){const g=m<r?Pn:i;({srcPos:u}=Y$({src:h,srcPos:u,dest:f,width:s,height:g,nonBlackColor:0})),n.putImageData(c,0,m*Pn)}}function Mc(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Ph(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function kE(n,t){if(t)return!0;yt.singularValueDecompose2dScale(n,qn);const e=Math.fround(ni.pixelRatio*Qo.PDF_TO_CSS_UNITS);return qn[0]<=e&&qn[1]<=e}const J$=["butt","round","square"],t7=["miter","round","bevel"],e7={},DE={};class $o{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:c=null},u,h,f){this.ctx=t,this.current=new ME(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new Z$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=c,s){const u=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...fe(this.compositeCtx))}this.ctx.save(),Ph(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=fe(this.ctx)}executeOperatorList(t,e,s,i,r){const o=t.argsArray,c=t.fnArray;let u=e||0;const h=o.length;if(h===u)return u;const f=h-u>RE&&typeof s=="function",m=f?Date.now()+X$:0;let g=0;const v=this.commonObjs,b=this.objs;let w,A;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,s),u;if(!r||r.has(u))if(w=c[u],A=o[u]??null,w!==au.dependency)A===null?this[w](u):this[w](u,...A);else for(const E of A){this.dependencyTracker?.recordNamedData(E,u);const C=E.startsWith("g_")?v:b;if(!C.has(E))return C.get(E,s),u}if(u++,u===h)return u;if(f&&++g>RE){if(Date.now()>m)return s(),u;g=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),c=s,u=i,h="prescale1",f,m;for(;r>2&&c>1||o>2&&u>1;){let g=c,v=u;r>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/g),o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/v),f=this.cachedCanvases.getCanvas(h,g,v),m=f.context,m.clearRect(0,0,g,v),m.drawImage(t,0,0,c,u,0,0,g,v),t=f.canvas,c=g,u=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:u}}_createMaskCanvas(t,e){const s=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,c=this.current.patternFill,u=fe(s);let h,f,m,g;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),h=this._cachedBitmapsMap.get(V),h||(h=new Map,this._cachedBitmapsMap.set(V,h));const q=h.get(f);if(q&&!c){const it=Math.round(Math.min(u[0],u[2])+u[4]),at=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(t,as.transformAndFill),{canvas:q,offsetX:it,offsetY:at}}m=q}m||(g=this.cachedCanvases.getCanvas("maskCanvas",i,r),OE(g.context,e));let v=yt.transform(u,[1/i,0,0,-1/r,0,0]);v=yt.transform(v,[1,0,0,1,0,-r]);const b=Lo.slice();yt.axialAlignedBoundingBox([0,0,i,r],v,b);const[w,A,E,C]=b,T=Math.round(E-w)||1,M=Math.round(C-A)||1,P=this.cachedCanvases.getCanvas("fillCanvas",T,M),k=P.context,D=w,N=A;k.translate(-D,-N),k.transform(...v),m||(m=this._scaleImage(g.canvas,Vs(k)),m=m.img,h&&c&&h.set(f,m)),k.imageSmoothingEnabled=kE(fe(k),e.interpolate),Mh(k,m,0,0,m.width,m.height,0,0,i,r),k.globalCompositeOperation="source-in";const U=yt.transform(Vs(k),[1,0,0,1,-D,-N]);return k.fillStyle=c?o.getPattern(s,this,U,tn.FILL):o,k.fillRect(0,0,i,r),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,P.canvas)),this.dependencyTracker?.recordDependencies(t,as.transformAndFill),{canvas:P.canvas,offsetX:Math.round(D),offsetY:Math.round(N)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=J$[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=t7[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,i]of e)switch(s){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,s);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Mc(this.suspendedCtx,o),Q$(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Mc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],c=i[2]-r,u=i[3]-o;c===0||u===0||(this.genericComposeSMask(e.context,s,c,u,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,c,u,h,f,m){let g=t.canvas,v=u-f,b=h-m;if(o)if(v<0||b<0||v+s>g.width||b+i>g.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,i),E=A.context;E.drawImage(g,-v,-b),E.globalCompositeOperation="destination-atop",E.fillStyle=o,E.fillRect(0,0,s,i),E.globalCompositeOperation="source-over",g=A.canvas,v=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(v,b,s,i),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(v,b,s,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(u,h,s,i),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(g,v,b,s,i,u,h,s,i),e.restore()}save(t){this.inSMaskMode&&Mc(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Mc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,i,r,o,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,i,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,i){let[r]=s;if(!i){r||=s[0]=new Path2D,this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===au.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=s[0]=new Path2D;for(let c=0,u=r.length;c<u;)switch(r[c++]){case Eh.moveTo:o.moveTo(r[c++],r[c++]);break;case Eh.lineTo:o.lineTo(r[c++],r[c++]);break;case Eh.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case Eh.closePath:o.closePath();break;default:Ct(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}yt.axialAlignedBoundingBox(i,fe(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Vs(i),tn.STROKE),o){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(o)),e=c}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,as.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(tn.STROKE,fe(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const h=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=r.getPattern(i,this,Vs(i),tn.FILL),h){const f=new Path2D;f.addPath(e,i.getTransform().invertSelf().multiplySelf(h)),e=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,as.fill),c&&(i.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,u)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,as.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=e7}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=DE}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:h,path:f}of e)f&&i.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(c,u).scale(h,-h));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordNamedDependency(t,e);const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Cv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ct("Invalid font matrix for font "+e),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const h=i.italic?"italic":"normal";let f=s;s<TE?f=TE:s>CE&&(f=CE),this.current.fontSizeScale=s/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i}paintChar(t,e,s,i,r,o){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,m=u.fontSize/u.fontSizeScale,g=f&Xe.FILL_STROKE_MASK,v=!!(f&Xe.ADD_TO_PATH_FLAG),b=u.patternFill&&!h.missingFile,w=u.patternStroke&&!h.missingFile;let A;if((h.disableFontFace||v||b||w)&&!h.missingFile&&(A=h.getPathGenerator(this.commonObjs,e)),A&&(h.disableFontFace||b||w)){c.save(),c.translate(s,i),c.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,c,h);let E;if(g===Xe.FILL||g===Xe.FILL_STROKE)if(r){E=c.getTransform(),c.setTransform(...r);const C=this.#n(A,E,r);c.fill(C)}else c.fill(A);if(g===Xe.STROKE||g===Xe.FILL_STROKE)if(o){E||=c.getTransform(),c.setTransform(...o);const{a:C,b:T,c:M,d:P}=E,k=yt.inverseTransform(o),D=yt.transform([C,T,M,P,0,0],k);yt.singularValueDecompose2dScale(D,qn),c.lineWidth*=Math.max(qn[0],qn[1])/m,c.stroke(this.#n(A,E,o))}else c.lineWidth/=m,c.stroke(A);c.restore()}else(g===Xe.FILL||g===Xe.FILL_STROKE)&&(c.fillText(e,s,i),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,s,i,()=>c.measureText(e))),(g===Xe.STROKE||g===Xe.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,h,m,s,i,()=>c.measureText(e)).recordDependencies(t,as.stroke),c.strokeText(e,s,i));v&&((this.pendingTextPaths||=[]).push({transform:fe(c),x:s,y:i,fontSize:m,path:A}),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,s,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return Nt(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,as.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Xe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t);return}const r=s.fontSize;if(r===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,c=s.fontSizeScale,u=s.charSpacing,h=s.wordSpacing,f=s.fontDirection,m=s.textHScale*f,g=e.length,v=i.vertical,b=v?1:-1,w=i.defaultVMetrics,A=r*s.fontMatrix[0],E=s.textRenderingMode===Xe.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),f>0?o.scale(m,-1):o.scale(m,1);let C,T;if(s.patternFill){o.save();const N=s.fillColor.getPattern(o,this,Vs(o),tn.FILL);C=fe(o),o.restore(),o.fillStyle=N}if(s.patternStroke){o.save();const N=s.strokeColor.getPattern(o,this,Vs(o),tn.STROKE);T=fe(o),o.restore(),o.strokeStyle=N}let M=s.lineWidth;const P=s.textMatrixScale;if(P===0||M===0){const N=s.textRenderingMode&Xe.FILL_STROKE_MASK;(N===Xe.STROKE||N===Xe.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=P;if(c!==1&&(o.scale(c,c),M/=c),o.lineWidth=M,i.isInvalidPDFjsFont){const N=[];let U=0;for(const q of e)N.push(q.unicode),U+=q.width;const V=N.join("");if(o.fillText(V,0,0),this.dependencyTracker!==null){const q=o.measureText(V);this.dependencyTracker.recordBBox(t,this.ctx,-q.actualBoundingBoxLeft,q.actualBoundingBoxRight,-q.actualBoundingBoxAscent,q.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}s.x+=U*A*m,o.restore(),this.compose();return}let k=0,D;for(D=0;D<g;++D){const N=e[D];if(typeof N=="number"){k+=b*N*r/1e3;continue}let U=!1;const V=(N.isSpace?h:0)+u,q=N.fontChar,it=N.accent;let at,rt,lt=N.width;if(v){const F=N.vmetric||w,W=-(N.vmetric?F[1]:lt*.5)*A,L=F[2]*A;lt=F?-F[0]:lt,at=W/c,rt=(k+L)/c}else at=k/c,rt=0;let j;if(i.remeasure&&lt>0){j=o.measureText(q);const F=j.width*1e3/r*c;if(lt<F&&this.isFontSubpixelAAEnabled){const W=lt/F;U=!0,o.save(),o.scale(W,1),at/=W}else lt!==F&&(at+=(lt-F)/2e3*r/c)}if(this.contentVisible&&(N.isInFont||i.missingFile)){if(E&&!it)o.fillText(q,at,rt),this.dependencyTracker?.recordCharacterBBox(t,o,j?{bbox:null}:i,r/c,at,rt,()=>j??o.measureText(q));else if(this.paintChar(t,q,at,rt,C,T),it){const F=at+r*it.offset.x/c,W=rt-r*it.offset.y/c;this.paintChar(t,it.fontChar,F,W,C,T)}}const I=v?lt*A-V*f:lt*A+V*f;k+=I,U&&o.restore()}v?s.y-=k:s.x+=k*m,o.restore(),this.compose(),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){const s=this.ctx,i=this.current,r=i.font,o=i.fontSize,c=i.fontDirection,u=r.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,m=i.textHScale*c,g=i.fontMatrix||Cv,v=e.length,b=i.textRenderingMode===Xe.INVISIBLE;let w,A,E,C;if(b||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(m,c);const T=this.dependencyTracker;for(this.dependencyTracker=T?new wf(T,t):null,w=0;w<v;++w){if(A=e[w],typeof A=="number"){C=u*A*o/1e3,this.ctx.translate(C,0),i.x+=C*m;continue}const M=(A.isSpace?f:0)+h,P=r.charProcOperatorList[A.operatorListId];P?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...g),this.executeOperatorList(P),this.restore()):Ct(`Type3 character "${A.operatorListId}" is not available.`);const k=[A.width,0];yt.applyTransform(k,g),E=k[0]*o+M,s.translate(E,0),i.x+=E*m}s.restore(),T&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=T)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,i,r,o,c){const u=new Path2D;u.rect(i,r,o-i,c-r),this.ctx.clip(u),this.dependencyTracker?.recordBBox(t,this.ctx,i,o,r,c).recordClipBox(t,this.ctx,i,o,r,c),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const i=this.baseTransform||fe(this.ctx),r={createCanvasGraphics:o=>new $o(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new wf(this.dependencyTracker,t):null)};s=new O0(e,this.ctx,r,i)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=K$(this.getObject(t,e)),this.cachedPatterns.set(e,i)),s&&(i.matrix=s),i}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const i=this._getPattern(t,e);s.fillStyle=i.getPattern(s,this,Vs(s),tn.SHADING);const r=Vs(s);if(r){const{width:o,height:c}=s.canvas,u=Lo.slice();yt.axialAlignedBoundingBox([0,0,o,c],r,u);const[h,f,m,g]=u;this.ctx.fillRect(h,f,m-h,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,as.transform).recordDependencies(t,as.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){te("Should not call beginInlineImage")}beginImageData(){te("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=fe(this.ctx),s)){yt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,r,o,c]=s,u=new Path2D;u.rect(i,r,o-i,c-r),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(t,this.ctx,i,o,r,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||gp("TODO: Support non-isolated groups."),e.knockout&&Ct("Knockout groups not supported.");const i=fe(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Lo.slice();yt.axialAlignedBoundingBox(e.bbox,fe(s),r);const o=[0,0,s.canvas.width,s.canvas.height];r=yt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,h,f),v=g.context;v.translate(-c,-u),v.transform(...i);let b=new Path2D;const[w,A,E,C]=e.bbox;if(b.rect(w,A,E-w,C-A),e.matrix){const T=new Path2D;T.addPath(b,new DOMMatrix(e.matrix)),b=T}v.clip(b),e.smask&&this.smaskStack.push({canvas:g.canvas,context:v,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(c,u),s.save()),Mc(s,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=fe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...r);const o=Lo.slice();yt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],r,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,s,i,r,o){if(this.#t(),Ph(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const c=s[2]-s[0],u=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=c,s[3]=u,yt.singularValueDecompose2dScale(fe(this.ctx),qn);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),m=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:g,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(qn[0],0,0,-qn[1],0,u*qn[1]),Ph(this.ctx)}else{Ph(this.ctx),this.endPath(t);const h=new Path2D;h.rect(s[0],s[1],c,u),this.ctx.clip(h)}}this.current=new ME(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const i=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,i=0,r=0,o,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const u=this.ctx;u.save();const h=fe(u);u.transform(s,i,r,o,0,0);const f=this._createMaskCanvas(t,e);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,g=c.length;m<g;m+=2){const v=yt.transform(h,[s,i,r,o,c[m],c[m+1]]);u.drawImage(f.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+f.canvas.width,v[5],v[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,as.transformAndFill);for(const o of e){const{data:c,width:u,height:h,transform:f}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,h),g=m.context;g.save();const v=this.getObject(t,c,o);OE(g,v),g.globalCompositeOperation="source-in",g.fillStyle=r?i.getPattern(g,this,Vs(s),tn.FILL):i,g.fillRect(0,0,u,h),g.restore(),s.save(),s.transform(...f),s.scale(1,-1),Mh(s,m.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,u,0,h),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){Ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,i,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){Ct("Dependent image isn't ready yet");return}const c=o.width,u=o.height,h=[];for(let f=0,m=r.length;f<m;f+=2)h.push({transform:[s,0,0,i,r[f],r[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(t,o,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,i=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/s,-1/i);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;PE(f,e),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Vs(r));r.imageSmoothingEnabled=kE(fe(r),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,r,0,s,-i,0).recordDependencies(t,as.imageXObject).recordOperation(t),Mh(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,s,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,c=e.height,h=this.cachedCanvases.getCanvas("inlineImage",o,c).context;PE(h,e),r=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(t);for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),Mh(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,as.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===DE?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=fe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,c;if(s===0&&i===0){const u=Math.abs(e),h=Math.abs(r);if(u===h)if(t===0)o=c=1/u;else{const f=u*t;o=c=f<1?1/f:1}else if(t===0)o=1/u,c=1/h;else{const f=u*t,m=h*t;o=f<1?1/f:1,c=m<1?1/m:1}}else{const u=Math.abs(e*r-s*i),h=Math.hypot(e,s),f=Math.hypot(i,r);if(t===0)o=f/u,c=h/u;else{const m=t*u;o=f>m?f/m:1,c=h>m?h/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(t);return}const c=s.getLineDash();e&&s.save(),s.scale(r,o),Ay.a=1/r,Ay.d=1/o;const u=new Path2D;if(u.addPath(t,Ay),c.length>0){const h=Math.max(r,o);s.setLineDash(c.map(f=>f/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(u),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in au)$o.prototype[n]!==void 0&&($o.prototype[au[n]]=$o.prototype[n]);class Go{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class n7{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Oo=Symbol("INTERNAL");class s7{#t=!1;#e=!1;#n=!1;#s=!0;constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){this.#t=!!(t&Gn.DISPLAY),this.#e=!!(t&Gn.PRINT),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==Oo&&te("Internal method `_setVisible` called."),this.#n=s,this.#s=e}}class i7{#t=null;#e=new Map;#n=null;#s=null;constructor(t,e=Gn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#s=t.order;for(const s of t.groups)this.#e.set(s.id,new s7(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Oo,!1);for(const s of t.on)this.#e.get(s)._setVisible(Oo,!0);for(const s of t.off)this.#e.get(s)._setVisible(Oo,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=this.#r(r);else if(this.#e.has(r))o=this.#e.get(r).visible;else return Ct(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return gp("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Ct(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Ct(`Unknown optional content policy ${t.policy}.`),!0}return Ct(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const i=this.#e.get(t);if(!i){Ct(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const r of i.rbGroups)for(const o of r)o!==t&&this.#e.get(o)?._setVisible(Oo,!1,!0);i._setVisible(Oo,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=this.#e.get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new MP;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class r7{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Me(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,r?.length>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),t.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Me(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Me(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new a7(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new o7(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class a7{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=E0(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o7{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function l7(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let f=c(e);return f=unescape(f),f=u(f),f=h(f),r(f)}if(e=o(n),e){const f=h(e);return r(f)}if(e=s("filename","i").exec(n),e){e=e[1];let f=c(e);return f=h(f),r(f)}function s(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(f,{fatal:!0}),v=Bu(m);m=g.decode(v),t=!1}catch{}}return m}function r(f){return t&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),t&&(f=i("iso-8859-1",f))),f}function o(f){const m=[];let g;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=v.exec(f))!==null;){let[,w,A,E]=g;if(w=parseInt(w,10),w in m){if(w===0)break;continue}m[w]=[A,E]}const b=[];for(let w=0;w<m.length&&w in m;++w){let[A,E]=m[w];E=c(E),A&&(E=unescape(E),w===0&&(E=u(E))),b.push(E)}return b.join("")}function c(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let g=0;g<m.length;++g){const v=m[g].indexOf('"');v!==-1&&(m[g]=m[g].slice(0,v),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function u(f){const m=f.indexOf("'");if(m===-1)return f;const g=f.slice(0,m),b=f.slice(m+1).replace(/^[^']*'/,"");return i(g,b)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,v,b){if(v==="q"||v==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,A){return String.fromCharCode(parseInt(A,16))}),i(g,b);try{b=atob(b)}catch{}return i(g,b)})}return""}function jP(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function wp(n){return URL.parse(n)?.origin??null}function IP({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function FP(n){const t=n.get("Content-Disposition");if(t){let e=l7(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(E0(e))return e}return null}function Vu(n,t){return new bf(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function BP(n){return n===200||n===206}function UP(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function zP(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ct(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class c7{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=jP(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Me(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u7(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new d7(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class u7{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,UP(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=wp(r.url),!BP(r.status))throw Vu(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:c,suggestedLength:u}=IP({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=FP(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:zP(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class d7{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,UP(r,this._withCredentials,this._abortController)).then(c=>{const u=wp(c.url);if(u!==t._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${t._responseOrigin}".`);if(!BP(c.status))throw Vu(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:zP(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const _y=200,Ey=206;function h7(n){const t=n.response;return typeof t!="string"?t:Bu(t).buffer}class f7{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=jP(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Ey):i.expectedStatus=_y,e.responseType="arraybuffer",Me(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||_y;if(!(r===_y&&s.expectedStatus===Ey)&&r!==s.expectedStatus){s.onError(i.status);return}const c=h7(i);if(r===Ey){const u=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?s.onDone({begin:parseInt(h[1],10),chunk:c}):(Ct('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class p7{constructor(t){this._source=t,this._manager=new f7(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Me(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m7(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new g7(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class m7{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=wp(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=IP({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=FP(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Vu(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g7{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=wp(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Vu(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const y7=/^[a-z][a-z0-9\-+.]+:/i;function v7(n){if(y7.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class b7{constructor(t){this.source=t,this.url=v7(t.url),Me(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Me(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new w7(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new x7(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class w7{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Vu(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x7{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Pc=Symbol("INITIAL_DATA");class HP{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Pc}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const s=this.#t[t];if(!s||s.data===Pc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Pc}delete(t){const e=this.#t[t];return!e||e.data===Pc?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Pc&&(yield[t,e])}}}const S7=1e5,NE=30;class fn{#t=Promise.withResolvers();#e=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#l=null;#c=null;#h=0;#u=0;#f=Object.create(null);#m=[];#p=null;#d=[];#g=new WeakMap;#b=null;static#y=new Map;static#x=new Map;static#S=new WeakMap;static#v=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(u){u.enqueue(t),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#u=s.scale*ni.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:o,pageY:c}=s.rawDims;this.#b=[1,0,0,-1,-o,c+r],this.#o=i,this.#a=r,fn.#M(),ba(e,s),this.#t.promise.finally(()=>{fn.#A.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=en.platform;return Nt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#l.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#l=this.#p.getReader(),fn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*ni.pixelRatio,i=t.rotation;if(i!==this.#h&&(e?.(),this.#h=i,ba(this.#c,{rotation:i})),s!==this.#u){e?.(),this.#u=s;const r={div:null,properties:null,ctx:fn.#k(this.#r)};for(const o of this.#d)r.properties=this.#g.get(o),r.div=o,this.#_(r)}}cancel(){const t=new xr("TextLayer task cancelled.");this.#l?.cancel(t).catch(()=>{}),this.#l=null,this.#t.reject(t)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#m}#R(t){if(this.#n)return;this.#i.ctx??=fn.#k(this.#r);const e=this.#d,s=this.#m;for(const i of t){if(e.length>S7){Ct("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),r.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(i.str),this.#T(i)}}#T(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#d.push(e);const i=yt.transform(this.#b,t.transform);let r=Math.atan2(i[1],i[0]);const o=this.#f[t.fontName];o.vertical&&(r+=Math.PI/2);let c=this.#s&&o.fontSubstitution||o.fontFamily;c=fn.fontFamilyMap.get(c)||c;const u=Math.hypot(i[2],i[3]),h=u*fn.#L(c,o,this.#r);let f,m;r===0?(f=i[4],m=i[5]-h):(f=i[4]+h*Math.sin(r),m=i[5]-h*Math.cos(r));const g="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#c?(v.left=`${(100*f/this.#o).toFixed(2)}%`,v.top=`${(100*m/this.#a).toFixed(2)}%`):(v.left=`${g}${f.toFixed(2)}px)`,v.top=`${g}${m.toFixed(2)}px)`),v.fontSize=`${g}${(fn.#v*u).toFixed(2)}px)`,v.fontFamily=c,s.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#s&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);w!==A&&Math.max(w,A)/Math.min(w,A)>1.5&&(b=!0)}if(b&&(s.canvasWidth=o.vertical?t.height:t.width),this.#g.set(e,s),this.#i.div=e,this.#i.properties=s,this.#_(this.#i),s.hasText&&this.#e.append(e),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#_(t){const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(fn.#v>1&&(o=`scale(${1/fn.#v})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;fn.#C(i,h*this.#u,c);const{width:f}=i.measureText(e.textContent);f>0&&(o=`scaleX(${u*this.#u/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:t}of this.#x.values())t.remove();this.#x.clear()}}static#k(t=null){let e=this.#x.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#C(t,e,s){const i=this.#S.get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)}static#M(){if(this.#v!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#v=t.getBoundingClientRect().height,t.remove()}static#L(t,e,s){const i=this.#y.get(t);if(i)return i;const r=this.#k(s);r.canvas.width=r.canvas.height=NE,this.#C(r,NE,t);const o=r.measureText(""),c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return c?h=c/(c+u):(en.platform.isFirefox&&Ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#y.set(t,h),h}}class ou{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){if(!r)return;let o=null;const c=r.name;if(c==="#text")o=r.value;else if(ou.shouldBuildText(c))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const A7=100;function VP(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new k0,{docId:e}=t,s=n.url?O$(n.url):null,i=n.data?k$(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,c=n.password??null,u=n.range instanceof $P?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof lu?n.worker:null;const m=n.verbosity,g=typeof n.docBaseUrl=="string"&&!yp(n.docBaseUrl)?n.docBaseUrl:null,v=Ch(n.cMapUrl),b=n.cMapPacked!==!1,w=n.CMapReaderFactory||(pn?U$:SE),A=Ch(n.iccUrl),E=Ch(n.standardFontDataUrl),C=n.StandardFontDataFactory||(pn?z$:AE),T=Ch(n.wasmUrl),M=n.WasmFactory||(pn?H$:_E),P=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,D=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!pn,U=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!pn&&(en.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,q=typeof n.disableFontFace=="boolean"?n.disableFontFace:pn,it=n.fontExtraProperties===!0,at=n.enableXfa===!0,rt=n.ownerDocument||globalThis.document,lt=n.disableRange===!0,j=n.disableStream===!0,I=n.disableAutoFetch===!0,F=n.pdfBug===!0,W=n.CanvasFactory||(pn?B$:j$),L=n.FilterFactory||(pn?F$:I$),K=n.enableHWA===!0,nt=n.useWasm!==!1,Z=u?u.length:n.length??NaN,ot=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!pn&&!q,ht=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===SE&&C===AE&&M===_E&&v&&E&&T&&Fc(v,document.baseURI)&&Fc(E,document.baseURI)&&Fc(T,document.baseURI)),ut=null;c$(m);const J={canvasFactory:new W({ownerDocument:rt,enableHWA:K}),filterFactory:new L({docId:e,ownerDocument:rt}),cMapReaderFactory:ht?null:new w({baseUrl:v,isCompressed:b}),standardFontDataFactory:ht?null:new C({baseUrl:E}),wasmFactory:ht?null:new M({baseUrl:T})};f||(f=lu.create({verbosity:m,port:Go.workerPort}),t._worker=f);const ft={docId:e,apiVersion:"5.4.149",data:i,password:c,disableAutoFetch:I,rangeChunkSize:h,length:Z,docBaseUrl:g,enableXfa:at,evaluatorOptions:{maxImageSize:k,disableFontFace:q,ignoreErrors:P,isEvalSupported:D,isOffscreenCanvasSupported:N,isImageDecoderSupported:U,canvasMaxAreaInBytes:V,fontExtraProperties:it,useSystemFonts:ot,useWasm:nt,useWorkerFetch:ht,cMapUrl:v,iccUrl:A,standardFontDataUrl:E,wasmUrl:T}},jt={ownerDocument:rt,pdfBug:F,styleElement:ut,loadingParams:{disableAutoFetch:I,enableXfa:at}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const zt=f.messageHandler.sendWithPromise("GetDocRequest",ft,i?[i.buffer]:null);let It;if(u)It=new r7(u,{disableRange:lt,disableStream:j});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Gt=Fc(s)?c7:pn?b7:p7;It=new Gt({url:s,length:Z,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:lt,disableStream:j})}return zt.then(Gt=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Oe=new Bc(e,Gt,f.port),Nn=new T7(Oe,t,It,jt,J,K);t._transport=Nn,Oe.send("Ready",null)})}).catch(t._capability.reject),t}class k0{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${k0.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class $P{#t=Promise.withResolvers();#e=[];#n=[];#s=[];#r=[];constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#s.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#s)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class _7{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class E7{#t=!1;constructor(t,e,s,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new bE:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new HP,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new zu({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:i="display",annotationMode:r=fr.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1,recordOperations:v=!1,filteredOperationIndexes:b=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,g),{renderingIntent:A,cacheKey:E}=w;this.#t=!1,u||=this._transport.getOptionalContentConfig(A);let C=this._intentStates.get(E);C||(C=Object.create(null),this._intentStates.set(E,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(A&Gn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const M=!this.recordedGroups&&(v||this._pdfBug&&globalThis.StepperManager?.enabled),P=N=>{if(C.renderTasks.delete(k),M){const U=k.gfx?.dependencyTracker.take();U?(k.stepper?.setOperatorGroups(U),v&&(this.recordedGroups=U)):v&&(this.recordedGroups=[])}T&&(this.#t=!0),this.#e(),N?(k.capability.reject(N),this._abortOperatorList({intentState:C,reason:N instanceof Error?N:new Error(N)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new jo({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:M?new V$(e):null,viewport:s,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,filteredOperationIndexes:b});(C.renderTasks||=new Set).add(k);const D=k.task;return Promise.all([C.displayReadyCapability.promise,u]).then(([N,U])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(U.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:N,optionalContentConfig:U}),k.operatorListChanged()}).catch(P),D}getOperatorList({intent:t="display",annotationMode:e=fr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>ou.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:u,done:h}){if(h){s(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),r()},i)}const o=e.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new bE),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),h=this._intentStates.get(e);h.streamReader=u;const f=()=>{u.read().then(({value:m,done:g})=>{if(g){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),f())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const g of h.renderTasks)g.operatorListChanged();this.#e()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof _0){let i=A7;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new xr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var mr,Es,Ci,oa,kf,la,ca,yn,Qh,GP,qP,Uc,Wo,Zh;const le=class le{constructor({name:t=null,port:e=null,verbosity:s=u$()}={}){Us(this,yn);Us(this,mr,Promise.withResolvers());Us(this,Es,null);Us(this,Ci,null);Us(this,oa,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(oe(le,ca).has(e))throw new Error("Cannot use more than one PDFWorker per port.");oe(le,ca).set(e,this),zs(this,yn,GP).call(this,e)}else zs(this,yn,qP).call(this)}get promise(){return oe(this,mr).promise}get port(){return oe(this,Ci)}get messageHandler(){return oe(this,Es)}destroy(){this.destroyed=!0,oe(this,oa)?.terminate(),Tn(this,oa,null),oe(le,ca).delete(oe(this,Ci)),Tn(this,Ci,null),oe(this,Es)?.destroy(),Tn(this,Es,null)}static create(t){const e=oe(this,ca).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new le(t)}static get workerSrc(){if(Go.workerSrc)return Go.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nt(this,"_setupFakeWorkerGlobal",(async()=>oe(this,Wo,Zh)?oe(this,Wo,Zh):(await import(this.workerSrc)).WorkerMessageHandler)())}};mr=new WeakMap,Es=new WeakMap,Ci=new WeakMap,oa=new WeakMap,kf=new WeakMap,la=new WeakMap,ca=new WeakMap,yn=new WeakSet,Qh=function(){oe(this,mr).resolve(),oe(this,Es).send("configure",{verbosity:this.verbosity})},GP=function(t){Tn(this,Ci,t),Tn(this,Es,new Bc("main","worker",t)),oe(this,Es).on("ready",()=>{}),zs(this,yn,Qh).call(this)},qP=function(){if(oe(le,la)||oe(le,Wo,Zh)){zs(this,yn,Uc).call(this);return}let{workerSrc:t}=le;try{le._isSameOrigin(window.location,t)||(t=le._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Bc("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?oe(this,mr).reject(new Error("Worker was destroyed")):zs(this,yn,Uc).call(this)},r=new AbortController;e.addEventListener("error",()=>{oe(this,oa)||i()},{signal:r.signal}),s.on("test",c=>{if(r.abort(),this.destroyed||!c){i();return}Tn(this,Es,s),Tn(this,Ci,e),Tn(this,oa,e),zs(this,yn,Qh).call(this)}),s.on("ready",c=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{zs(this,yn,Uc).call(this)}});const o=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};o();return}catch{gp("The worker has been disabled.")}zs(this,yn,Uc).call(this)},Uc=function(){oe(le,la)||(Ct("Setting up fake worker."),Tn(le,la,!0)),le._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){oe(this,mr).reject(new Error("Worker was destroyed"));return}const e=new L$;Tn(this,Ci,e);const s=`fake${RA(le,kf)._++}`,i=new Bc(s+"_worker",s,e);t.setup(i,e),Tn(this,Es,new Bc(s,s+"_worker",e)),zs(this,yn,Qh).call(this)}).catch(t=>{oe(this,mr).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Wo=new WeakSet,Zh=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Us(le,Wo),Us(le,kf,0),Us(le,la,!1),Us(le,ca,new WeakMap),pn&&(Tn(le,la,!0),Go.workerSrc||="./pdf.worker.mjs"),le._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const i=new URL(e,s);return s.origin===i.origin},le._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},le.fromPort=t=>{if(S$("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return le.create(t)};let lu=le;class T7{#t=new Map;#e=new Map;#n=new Map;#s=new Map;#r=null;constructor(t,e,s,i,r,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new HP,this.fontLoader=new M$({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#i(t,e=null){const s=this.#t.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,i),i}get annotationStorage(){return Nt(this,"annotationStorage",new R0)}getRenderingIntent(t,e=fr.ENABLE,s=null,i=!1,r=!1){let o=Gn.DISPLAY,c=Ov;switch(t){case"any":o=Gn.ANY;break;case"display":break;case"print":o=Gn.PRINT;break;default:Ct(`getRenderingIntent - invalid intent: ${t}`)}const u=o&Gn.PRINT&&s instanceof PP?s:this.annotationStorage;switch(e){case fr.DISABLE:o+=Gn.ANNOTATIONS_DISABLE;break;case fr.ENABLE:break;case fr.ENABLE_FORMS:o+=Gn.ANNOTATIONS_FORMS;break;case fr.ENABLE_STORAGE:o+=Gn.ANNOTATIONS_STORAGE,c=u.serializable;break;default:Ct(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=Gn.IS_EDITING),r&&(o+=Gn.OPLIST);const{ids:h,hash:f}=u.modifiedIds,m=[o,c.hash,f];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),fn.cleanup(),this._networkStream?.cancelAllRequests(new xr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{Me(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Me(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,i)=>{Me(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:c}){if(c){i.close();return}Me(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new _7(s,this))}),t.on("DocException",s=>{e._capability.reject(Rn(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw Rn(s);const i=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};e.onPassword(i,s.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const h=r.error;Ct(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new P$(r,o);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:u}=r;Me(u,"The imageRef must be defined.");for(const h of this.#e.values())for(const[,f]of h.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{if(this.destroyed)return;const c=this.#e.get(i);if(!c.objs.has(s)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":c.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#n.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#s.set(r.refStr,t);const o=new E7(e,r,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,i),i}getPageIndex(t){return kv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new i7(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new n7(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),fn.cleanup()}}cachedPageNumber(t){if(!kv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#s.get(e)??null}}class C7{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class jo{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:g=null,enableHWA:v=!1,filteredOperationIndexes:b=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=m,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new C7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(jo.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");jo.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new $o(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),jo.#e.delete(this._canvas),t||=new _0(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),jo.#e.delete(this._canvas),this.callback())))}}const R7="5.4.149",M7="9e2e9e209";class cs{#t=null;#e=null;#n;#s=null;#r=!1;#i=!1;#a=null;#o;#l=null;#c=null;static#h=null;static get _keyboardManager(){return Nt(this,"_keyboardManager",new Hu([[["Escape","mac+Escape"],cs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],cs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],cs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],cs.prototype._moveToPrevious],[["Home","mac+Home"],cs.prototype._moveToBeginning],[["End","mac+End"],cs.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#a=t):this.#i=!0,this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",cs.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#s=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",ms,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#c.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",cs.#h[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===this.#n,r.addEventListener("click",this.#f.bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Vt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#s.lastChild?.focus()}#m(t){cs._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#t.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const e=this.#s=this.#u();this.#t.append(e)}#d(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#g(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#s)return;const e=this.#c.highlightColors.values();for(const s of this.#s.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#s?.remove(),this.#s=null}}class cu{#t=null;#e=null;#n=null;static#s=null;constructor(t){this.#e=t,this.#n=t._uiManager,cu.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:s}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",cu.#s[t]),i.addEventListener("input",()=>{this.#n.updateParams(e,i.value)},{signal:this.#n._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function LE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Oc(n){return Math.max(0,Math.min(255,255*n))}class jE{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Oc(t),[t,t,t]}static G_HTML([t]){const e=LE(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Oc)}static RGB_HTML(t){return`#${t.map(LE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[Oc(1-Math.min(1,t+i)),Oc(1-Math.min(1,s+i)),Oc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,c=Math.min(i,r,o);return["CMYK",i,r,o,c]}}class P7{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){te("Abstract method `_createSVG` called.")}}class xf extends P7{_createSVG(t){return document.createElementNS(Si,t)}}class WP{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",c=>{i.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const c of s.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,c=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[u,h]of Object.entries(o))if(h!=null)switch(u){case"class":h.length&&t.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,h)}c&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const c=r!=="richText",u=t.div;if(u.append(o),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=m}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),c&&ou.shouldBuildText(i.name)&&h.push(m)}return{textDivs:h}}const f=[[i,-1,o]];for(;f.length>0;){const[m,g,v]=f.at(-1);if(g+1===m.children.length){f.pop();continue}const b=m.children[++f.at(-1)[1]];if(b===null)continue;const{name:w}=b;if(w==="#text"){const E=document.createTextNode(b.value);h.push(E),v.append(E);continue}const A=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,w):document.createElement(w);if(v.append(A),b.attributes&&this.setAttributes({html:A,element:b,storage:e,intent:r,linkService:s}),b.children?.length>0)f.push([b,-1,A]);else if(b.value){const E=document.createTextNode(b.value);c&&ou.shouldBuildText(w)&&h.push(E),A.append(E)}}for(const m of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const O7=9,wa=new WeakSet,k7=new Date().getTimezoneOffset()*60*1e3;class IE{static create(t){switch(t.data.annotationType){case Te.LINK:return new D0(t);case Te.TEXT:return new D7(t);case Te.WIDGET:switch(t.data.fieldType){case"Tx":return new N7(t);case"Btn":return t.data.radioButton?new KP(t):t.data.checkBox?new j7(t):new I7(t);case"Ch":return new F7(t);case"Sig":return new L7(t)}return new Ca(t);case Te.POPUP:return new Nv(t);case Te.FREETEXT:return new YP(t);case Te.LINE:return new U7(t);case Te.SQUARE:return new z7(t);case Te.CIRCLE:return new H7(t);case Te.POLYLINE:return new XP(t);case Te.CARET:return new $7(t);case Te.INK:return new N0(t);case Te.POLYGON:return new V7(t);case Te.HIGHLIGHT:return new QP(t);case Te.UNDERLINE:return new G7(t);case Te.SQUIGGLY:return new q7(t);case Te.STRIKEOUT:return new W7(t);case Te.STAMP:return new ZP(t);case Te.FILEATTACHMENT:return new K7(t);default:return new Se(t)}}}class Se{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Se._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:t,rect:e}=this.data;let s=-1/0,i=-1/0;if(t?.length>=8){for(let r=0;r<t.length;r+=8)t[r+1]>i?(i=t[r+1],s=t[r+2]):t[r+1]===i&&(s=Math.max(s,t[r+2]));return[s,i]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[t,e,s]=this.data.color,r=255*(1-(this.data.opacity??1));return this.#s(Math.min(t+r,255),Math.min(e+r,255),Math.min(s+r,255))}#s(t,e,s){t/=255,e/=255,s/=255;const i=Math.max(t,e,s),r=Math.min(t,e,s),o=(i+r)/2,c=((1+Math.sqrt(o))/2*100).toFixed(2);if(i===r)return`hsl(0, 0%, ${c}%)`;const u=i-r;let h;i===t?h=(e-s)/u+(e<s?6:0):i===e?h=(s-t)/u+2:h=(t-e)/u+4,h=(h*60).toFixed(2);const f=(u/(1-Math.abs(2*o-1))*100).toFixed(2);return`hsl(${h}, ${f}%, ${c}%)`}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/s,t[1]=100*(t[1]-o)/i,t}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#r(e);let i=this.#n?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#n.popup),i&&(i.updateEdited(t),s?.deleted&&(i.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#r(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#r(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-c)/r}%`,e.top=`${100*(o-t[3]+u)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof Ca)&&!(this instanceof D0)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Nv){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:c,height:u}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(w>0||A>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof KP){const C=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case Po.SOLID:o.borderStyle="solid";break;case Po.DASHED:o.borderStyle="dashed";break;case Po.BEVELED:Ct("Unimplemented border style: beveled");break;case Po.INSET:Ct("Unimplemented border style: inset");break;case Po.UNDERLINE:o.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,o.borderColor=yt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const h=yt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:m,pageX:g,pageY:v}=i.rawDims;o.left=`${100*(h[0]-g)/f}%`,o.top=`${100*(h[1]-v)/m}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(o.width=`${100*c/f}%`,o.height=`${100*u/m}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],c=r.slice(1);i.target.style[s]=jE[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:jE[`${o}_rgb`](c)})};return Nt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||s[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const c={detail:{[i]:r},target:t};o(c),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,A,E,C]=t.subarray(2,6);if(i===w&&r===A&&e===E&&s===C)return}const{style:o}=this.container;let c;if(this.#e){const{borderColor:w,borderWidth:A}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const u=i-e,h=r-s,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const g=f.createElement("defs");m.append(g);const v=f.createElement("clipPath"),b=`clippath_${this.data.id}`;v.setAttribute("id",b),v.setAttribute("clipPathUnits","objectBoundingBox"),g.append(v);for(let w=2,A=t.length;w<A;w+=8){const E=t[w],C=t[w+1],T=t[w+2],M=t[w+3],P=f.createElement("rect"),k=(T-e)/u,D=(r-C)/h,N=(E-T)/u,U=(C-M)/h;P.setAttribute("x",k),P.setAttribute("y",D),P.setAttribute("width",N),P.setAttribute("height",U),v.append(P),c?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${D}" width="${N}" height="${U}"/>`)}this.#e&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${b})`}_createPopup(t=null){const{data:e}=this;let s,i;t?(s={str:t.text},i=t.date):(s=e.contentsObj,i=e.modificationDate);const r=this.#n=new Nv({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(r.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:c}of i){if(r===-1||o===e)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!wa.has(h)){Ct(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:u,domElement:h})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&wa.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class D0 extends Se{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#n(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=s.get(i);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:i,refs:r,include:o}=e,c=[];if(i.length!==0||r.length!==0){const f=new Set(r);for(const m of i){const g=this._fieldObjects[m]||[];for(const{id:v}of g)f.add(v)}for(const m of Object.values(this._fieldObjects))for(const g of m)f.has(g.id)===o&&c.push(g)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:m}=f;switch(h.push(m),f.type){case"text":{const v=f.defaultValue||"";u.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(m,{value:v});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!wa.has(g)){Ct(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class D7 extends Se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ca extends Se{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return en.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}})})}_setEventListeners(t,e,s,i){for(const[r,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":yt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||O7,r=t.style;let o;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(vy*i))||1,m=h/f;o=Math.min(i,u(m/vy))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,u(h/vy))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=yt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class N7 extends Ca{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let r=i.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:r,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??r,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??r),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),wa.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,g=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",b=>{const w=this.data.defaultFieldValue??"";s.value=u.userValue=w,u.formattedValue=null});let v=b=>{const{formattedValue:w}=u;w!=null&&(b.target.value=w),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{if(u.focused)return;const{target:A}=w;if(g&&(A.type=f,m&&(A.step=m)),u.userValue){const E=u.userValue;if(g)if(f==="time"){const C=new Date(E),T=[C.getHours(),C.getMinutes(),C.getSeconds()];A.value=T.map(M=>M.toString().padStart(2,"0")).join(":")}else A.value=new Date(E-k7).toISOString().split(f==="date"?"T":".",1)[0];else A.value=E}u.lastCommittedValue=A.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(E){u.userValue=E.detail.value??"",g||t.setValue(e,{value:u.userValue.toString()}),E.target.value=u.userValue},formattedValue(E){const{formattedValue:C}=E.detail;u.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C);const T={formattedValue:C};g&&(T.value=C),t.setValue(e,T)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:C}=E.detail,{target:T}=E;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let M=u.userValue;!M||M.length<=C||(M=M.slice(0,C),T.value=u.userValue=M,t.setValue(e,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),s.addEventListener("keydown",w=>{u.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(u.commitKey=3),A===-1)return;const{value:E}=w.target;u.lastCommittedValue!==E&&(u.lastCommittedValue=E,u.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const b=v;v=null,s.addEventListener("blur",w=>{if(!u.focused||!w.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:A}=w;let{value:E}=A;if(g){if(E&&f==="time"){const C=E.split(":").map(T=>parseInt(T,10));E=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),A.step=""}else E=new Date(E).valueOf();A.type="text"}u.userValue=E,u.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),b(w)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",w=>{u.lastCommittedValue=null;const{data:A,target:E}=w,{value:C,selectionStart:T,selectionEnd:M}=E;let P=T,k=M;switch(w.inputType){case"deleteWordBackward":{const D=C.substring(0,T).match(/\w*[^\w]*$/);D&&(P-=D[0].length);break}case"deleteWordForward":{const D=C.substring(T).match(/^[^\w]*\w*/);D&&(k+=D[0].length);break}case"deleteContentBackward":T===M&&(P-=1);break;case"deleteContentForward":T===M&&(k+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:P,selEnd:k}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class L7 extends Ca{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class j7 extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return wa.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s)){const f=u&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=f),t.setValue(h.id,{value:f})}t.setValue(s,{value:u})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue||"Off";o.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const c={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(s,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class KP extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(wa.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:u})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue;o.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=o===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const g=f&&m.id===s;m.domElement&&(m.domElement.checked=g),t.setValue(m.id,{value:g})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class I7 extends D0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class F7 extends Ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");wa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const g of i.options)g.selected=g.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,s.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),r=!1),i.append(m)}let o=null;if(r){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const m=f?"value":"textContent",{options:g,multiple:v}=i;return v?Array.prototype.filter.call(g,b=>b.selected).map(b=>b[m]):g.selectedIndex===-1?null:g[g.selectedIndex][m]};let u=c(!1);const h=f=>{const m=f.target.options;return Array.prototype.map.call(m,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const m={value(g){o?.();const v=g.detail.value,b=new Set(Array.isArray(v)?v:[v]);for(const w of i.options)w.selected=b.has(w.value);t.setValue(e,{value:c(!0)}),u=c(!1)},multipleSelection(g){i.multiple=!0},remove(g){const v=i.options,b=g.detail.remove;v[b].selected=!1,i.remove(b),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:c(!0),items:h(g)}),u=c(!1)},clear(g){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),u=c(!1)},insert(g){const{index:v,displayValue:b,exportValue:w}=g.detail.insert,A=i.children[v],E=document.createElement("option");E.textContent=b,E.value=w,A?A.before(E):i.append(E),t.setValue(e,{value:c(!0),items:h(g)}),u=c(!1)},items(g){const{items:v}=g.detail;for(;i.length!==0;)i.remove(0);for(const b of v){const{displayValue:w,exportValue:A}=b,E=document.createElement("option");E.textContent=w,E.value=A,i.append(E)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:c(!0),items:h(g)}),u=c(!1)},indices(g){const v=new Set(g.detail.indices);for(const b of g.target.options)b.selected=v.has(b.index);t.setValue(e,{value:c(!0)}),u=c(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("input",f=>{const m=c(!0),g=c(!1);t.setValue(e,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:g,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Nv extends Se{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Se._hasPopupData(e)}),this.elements=s,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new B7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),s=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${A0}${i}`).join(",")),this.container}}class B7{#t=this.#N.bind(this);#e=this.#E.bind(this);#n=this.#B.bind(this);#s=this.#O.bind(this);#r=null;#i=null;#a=null;#o=null;#l=null;#c=null;#h=null;#u=null;#f=!1;#m=null;#p=null;#d=null;#g=null;#b=null;#y=null;#x=null;#S=null;#v=null;#A=null;#R=!1;constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:c,parent:u,rect:h,parentRect:f,open:m,eventBus:g=null}){this.#i=t,this.#v=i,this.#a=o,this.#S=c,this.#h=u,this.#r=e,this.#x=h,this.#u=f,this.#l=s,this.#c=g,this.#o=Mv.toDateObject(r),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup()),this.#T(),this.#i.hidden=!0,m&&this.#O()}#T(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#s,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#t,{signal:t});this.#k()}#_(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition),this.#y=t.commentButtonColor)}#k(){if(this.#g||(this.#b||this.#_(),!this.#b))return;const t=this.#g=document.createElement("button");t.className="annotationCommentButton";const e=this.#l[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;const{signal:s}=this.#p;t.addEventListener("hover",this.#s,{signal:s}),t.addEventListener("keydown",this.#t,{signal:s}),t.addEventListener("click",()=>{const[{data:{id:r},annotationEditorType:o}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:r,mode:o,editComment:!0})},{signal:s});const{style:i}=t;i.left=`calc(${this.#b[0]}%)`,i.top=`calc(${this.#b[1]}% - var(--comment-button-dim))`,this.#y&&(i.backgroundColor=this.#y),e.after(t)}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=yt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#v?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#v}if(t.append(e),this.#o){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),i.dateTime=this.#o.toISOString(),e.append(i)}const s=this.#C;if(s)WP.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(this.#a);t.append(i)}this.#i.append(t)}get#C(){const t=this.#S,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#S.html||null}get#M(){return this.#C?.attributes?.style?.fontSize||0}get#L(){return this.#C?.attributes?.style?.color||null}#D(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#L,fontSize:this.#M?`calc(${this.#M}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const c=i[r];s.append(document.createTextNode(c)),r<o-1&&s.append(document.createElement("br"))}return s}#N(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#O()}updateEdited({rect:t,popup:e,deleted:s}){if(s||e?.deleted){this.remove();return}this.#T(),this.#A||={contentsObj:this.#a,richText:this.#S},t&&(this.#d=null),e&&(this.#S=this.#D(e.text),this.#o=Mv.toDateObject(e.date),this.#a=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#a,richText:this.#S}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#d=null)}remove(){this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#R=!1,this.#f=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#j(){if(this.#d!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=this.#h;let o=!!this.#u,c=o?this.#u:this.#x;for(const b of this.#l)if(!c||yt.intersect(b.data.rect,c)!==null){c=b.data.rect,o=!0;break}const u=yt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),f=o?c[2]-c[0]+5:0,m=u[0]+f,g=u[1];this.#d=[100*(m-i)/e,100*(g-r)/s];const{style:v}=this.#i;v.left=`${this.#d[0]}%`,v.top=`${this.#d[1]}%`}#O(){this.#f=!this.#f,this.#f?(this.#B(),this.#i.addEventListener("click",this.#s),this.#i.addEventListener("keydown",this.#t)):(this.#E(),this.#i.removeEventListener("click",this.#s),this.#i.removeEventListener("keydown",this.#t))}#B(){this.#m||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#j(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#E(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#R=this.isVisible,this.#R&&(this.#i.hidden=!0)}maybeShow(){this.#T(),this.#R&&(this.#m||this.#B(),this.#R=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class YP extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class U7 extends Se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class z7 extends Se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",s-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class H7 extends Se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",s/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",s/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class XP extends Se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:i},width:r,height:o}=this;if(!e)return this.container;const c=this.svgFactory.create(r,o,!0);let u=[];for(let f=0,m=e.length;f<m;f+=2){const g=e[f]-t[0],v=t[3]-e[f+1];u.push(`${g},${v}`)}u=u.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class V7 extends XP{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $7 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N0 extends Se{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tt.HIGHLIGHT:Tt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:i,popupRef:r}}=this,{transform:o,width:c,height:u}=this.#n(e,t),h=this.svgFactory.create(c,u,!0),f=this.#t=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let m=0,g=s.length;m<g;m++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",s[m].join(",")),f.append(v)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:i}=t,r=this.#t;if(e>=0&&r.setAttribute("stroke-width",e||1),s)for(let o=0,c=this.#e.length;o<c;o++)this.#e[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:u}=this.#n(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:e}=this.data;if(t?.length>=1){let s=-1/0,i=-1/0;for(const r of t)for(let o=0,c=r.length;o<c;o+=2)r[o+1]>i?(i=r[o+1],s=r[o]):r[o+1]===i&&(s=Math.max(s,r[o]));if(s!==1/0)return[s,i]}return e?[e[2],e[3]]:null}}class QP extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class G7 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class q7 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class W7 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class ZP extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class K7 extends Se{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:i}=en.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class L0{#t=null;#e=null;#n=new Map;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:c}){this.div=t,this.#t=e,this.#e=s,this.#s=c||null,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,s){const i=t.firstChild||t,r=i.id=`${A0}${e}`,o=await this.#s?.getAriaAttributes(r);if(o)for(const[c,u]of o)i.setAttribute(c,u);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1))}async render(t){const{annotations:e}=t,s=this.div;ba(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new xf,annotationStorage:t.annotationStorage||new R0,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===Te.POPUP;if(c){const f=i.get(o.id);if(!f)continue;r.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const u=IE.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await this.#r(h,o.id,r.elements),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#i()}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new xf,parent:this};for(const i of t){i.borderStyle||=L0._defaultBorderStyle,s.data=i;const r=IE.create(s);if(!r.isRenderable)continue;const o=r.render();await this.#r(o,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ba(e,{rotation:t.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s);const o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Nt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Po.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Oh=/\r\n?|\n/g;class Ve extends bt{#t;#e="";#n=`${this.id}-editor`;#s=null;#r;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ve.prototype,e=r=>r.isEmpty(),s=Sr.TRANSLATE_SMALL,i=Sr.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new Hu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=Tt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Ve._defaultColor||bt._defaultLineColor,this.#r=t.fontSize||Ve._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){bt.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Vt.FREETEXT_SIZE:Ve._defaultFontSize=e;break;case Vt.FREETEXT_COLOR:Ve._defaultColor=e;break}}updateParams(t,e){switch(t){case Vt.FREETEXT_SIZE:this.#i(e);break;case Vt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Vt.FREETEXT_SIZE,Ve._defaultFontSize],[Vt.FREETEXT_COLOR,Ve._defaultColor||bt._defaultLineColor]]}get propertiesToUpdate(){return[[Vt.FREETEXT_SIZE,this.#r],[Vt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new cu(this),[["colorPicker",this._colorPicker]]}get colorType(){return Vt.FREETEXT_COLOR}get colorValue(){return this.#t}#i(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#r)*this.parentScale),this.#r=i,this.#l()},s=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Vt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=i=>{this.#t=this.editorDiv.style.color=i,this._colorPicker?.update(i)},s=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Vt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ve._internalPadding*t,-(Ve._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ve.#c(s)),e=s);return t.join(`
`)}#l(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,o=r.style.display,c=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ve._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[m,g]=this.pageTranslation;let v,b;switch(this.rotation){case 0:v=t+(o[0]-m)/h,b=e+this.height-(o[1]-g)/f;break;case 90:v=t+(o[0]-m)/h,b=e-(o[1]-g)/f,[c,u]=[u,-c];break;case 180:v=t-this.width+(o[0]-m)/h,b=e-(o[1]-g)/f,[c,u]=[-c,-u];break;case 270:v=t+(o[0]-m-this.height*f)/h,b=e+(o[1]-g-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(v*i,b*r,c,u)}else this._moveAfterPaste(t,e);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Oh,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=Ve.#f(e.getData("text")||"").replaceAll(Oh,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(Oh,"")),v!==this.editorDiv){let b=h;for(const w of this.editorDiv.childNodes){if(w===v){b=f;continue}b.push(Ve.#c(w))}}h.push(c.nodeValue.slice(0,u).replaceAll(Oh,""))}else if(c===this.editorDiv){let v=h,b=0;for(const w of this.editorDiv.childNodes)b++===u&&(v=f),v.push(Ve.#c(w))}this.#e=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#h();const m=new Range;let g=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(g<=b){m.setStart(v,g),m.setEnd(v,g);break}g-=b}r.removeAllRanges(),r.addRange(m)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ve._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let i=null;if(t instanceof YP){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:u,rotation:h,id:f,popupRef:m,contentsObj:g},textContent:v,textPosition:b,parent:{page:{pageNumber:w}}}=t;if(!v||v.length===0)return null;i=t={annotationType:Tt.FREETEXT,color:Array.from(c),fontSize:o,value:v.join(`
`),position:b,pageIndex:w-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:g?.str||null}}const r=await super.deserialize(t,e,s);return r.#r=t.fontSize,r.#t=yt.makeHexColor(...t.color),r.#e=Ve.#f(t.value),r._initialData=i,t.comment&&r.setCommentData(t.comment),r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),s=bt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),i={annotationType:Tt.FREETEXT,color:s,fontSize:this.#r,value:this.#u(),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#m(i)?null:(i.id=this.annotationElementId,i)}#m(t){const{value:e,fontSize:s,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,s.color=this.#t,e.replaceChildren();for(const r of this.#e.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}const i={rect:this.getPDFRect()};return i.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(i),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class dt{static PRECISION=1e-4;toSVGPath(){te("Abstract method `toSVGPath` must be implemented.")}get box(){te("Abstract getter `box` must be implemented.")}serialize(t,e){te("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||=new Float32Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=e+t[c]*i,o[c+1]=s+t[c+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||=new Float32Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=e+t[c+1]*i,o[c+1]=s+t[c]*r;return o}static _translate(t,e,s,i){i||=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}class ia{#t;#e=[];#n;#s;#r=[];#i=new Float32Array(18);#a;#o;#l;#c;#h;#u;#f=[];static#m=8;static#p=2;static#d=ia.#m+ia.#p;constructor({x:t,y:e},s,i,r,o,c=0){this.#t=s,this.#u=r*i,this.#s=o,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=c,this.#c=ia.#m*i,this.#l=ia.#d*i,this.#h=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#g(){const t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[s,i,r,o]=this.#t;return[(this.#a+(t[0]-e[0])/2-s)/r,(this.#o+(t[1]-e[1])/2-i)/o,(this.#a+(e[0]-t[0])/2-s)/r,(this.#o+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#a=t,this.#o=e;const[s,i,r,o]=this.#t;let[c,u,h,f]=this.#i.subarray(8,12);const m=t-h,g=e-f,v=Math.hypot(m,g);if(v<this.#l)return!1;const b=v-this.#c,w=b/v,A=w*m,E=w*g;let C=c,T=u;c=h,u=f,h+=A,f+=E,this.#f?.push(t,e);const M=-E/b,P=A/b,k=M*this.#u,D=P*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+k,f+D],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-k,f-D],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([c+k,u+D],2),this.#r.push(NaN,NaN,NaN,NaN,(c+k-s)/r,(u+D-i)/o),this.#i.set([c-k,u-D],14),this.#e.push(NaN,NaN,NaN,NaN,(c-k-s)/r,(u-D-i)/o)),this.#i.set([C,T,c,u,h,f],6),!this.isEmpty()):(this.#i.set([C,T,c,u,h,f],6),Math.abs(Math.atan2(T-u,C-c)-Math.atan2(E,A))<Math.PI/2?([c,u,h,f]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+h)/2-s)/r,((u+f)/2-i)/o),[c,u,C,T]=this.#i.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+c)/2-s)/r,((T+u)/2-i)/o),!0):([C,T,c,u,h,f]=this.#i.subarray(0,6),this.#r.push(((C+5*c)/6-s)/r,((T+5*u)/6-i)/o,((5*c+h)/6-s)/r,((5*u+f)/6-i)/o,((c+h)/2-s)/r,((u+f)/2-i)/o),[h,f,c,u,C,T]=this.#i.subarray(12,18),this.#e.push(((C+5*c)/6-s)/r,((T+5*u)/6-i)/o,((5*c+h)/6-s)/r,((5*u+f)/6-i)/o,((c+h)/2-s)/r,((u+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#x(s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#y(s),s.join(" ")}#b(){const[t,e,s,i]=this.#t,[r,o,c,u]=this.#g();return`M${(this.#i[2]-t)/s} ${(this.#i[3]-e)/i} L${(this.#i[4]-t)/s} ${(this.#i[5]-e)/i} L${r} ${o} L${c} ${u} L${(this.#i[16]-t)/s} ${(this.#i[17]-e)/i} L${(this.#i[14]-t)/s} ${(this.#i[15]-e)/i} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#x(t){const[e,s,i,r]=this.#t,o=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[u,h,f,m]=this.#g();t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${u} ${h} L${f} ${m} L${(c[0]-e)/i} ${(c[1]-s)/r}`)}newFreeDrawOutline(t,e,s,i,r,o){return new JP(t,e,s,i,r,o)}getOutlines(){const t=this.#r,e=this.#e,s=this.#i,[i,r,o,c]=this.#t,u=new Float32Array((this.#f?.length??0)+2);for(let m=0,g=u.length-2;m<g;m+=2)u[m]=(this.#f[m]-i)/o,u[m+1]=(this.#f[m+1]-r)/c;if(u[u.length-2]=(this.#a-i)/o,u[u.length-1]=(this.#o-r)/c,isNaN(s[6])&&!this.isEmpty())return this.#S(u);const h=new Float32Array(this.#r.length+24+this.#e.length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){h[m]=h[m+1]=NaN;continue}h[m]=t[m],h[m+1]=t[m+1]}f=this.#A(h,f);for(let m=e.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(e[m+g])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=e[m+g],h[f+1]=e[m+g+1],f+=2}return this.#v(h,f),this.newFreeDrawOutline(h,u,this.#t,this.#h,this.#n,this.#s)}#S(t){const e=this.#i,[s,i,r,o]=this.#t,[c,u,h,f]=this.#g(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(m,t,this.#t,this.#h,this.#n,this.#s)}#v(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#A(t,e){const s=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[r,o,c,u]=this.#t,[h,f,m,g]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/c,(s[1]-o)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(i[0]-r)/c,(i[1]-o)/u],e),e+=24}}class JP extends dt{#t;#e=new Float32Array(4);#n;#s;#r;#i;#a;constructor(t,e,s,i,r,o){super(),this.#a=t,this.#r=e,this.#t=s,this.#i=i,this.#n=r,this.#s=o,this.lastPoint=[NaN,NaN],this.#o(o);const[c,u,h,f]=this.#e;for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-u)/f;for(let m=0,g=e.length;m<g;m+=2)e[m]=(e[m]-c)/h,e[m+1]=(e[m+1]-u)/f}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,s=this.#a.length;e<s;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,i],r){const o=s-t,c=i-e;let u,h;switch(r){case 0:u=dt._rescale(this.#a,t,i,o,-c),h=dt._rescale(this.#r,t,i,o,-c);break;case 90:u=dt._rescaleAndSwap(this.#a,t,e,o,c),h=dt._rescaleAndSwap(this.#r,t,e,o,c);break;case 180:u=dt._rescale(this.#a,s,e,-o,c),h=dt._rescale(this.#r,s,e,-o,c);break;case 270:u=dt._rescaleAndSwap(this.#a,s,i,-o,-c),h=dt._rescaleAndSwap(this.#r,s,i,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#o(t){const e=this.#a;let s=e[4],i=e[5];const r=[s,i,s,i];let o=s,c=i;const u=t?Math.max:Math.min;for(let f=6,m=e.length;f<m;f+=6){const g=e[f+4],v=e[f+5];if(isNaN(e[f]))yt.pointBoundingBox(g,v,r),c<v?(o=g,c=v):c===v&&(o=u(o,g));else{const b=[1/0,1/0,-1/0,-1/0];yt.bezierBoundingBox(s,i,...e.slice(f,f+6),b),yt.rectBoundingBox(...b,r),c<b[3]?(o=b[2],c=b[3]):c===b[3]&&(o=u(o,b[2]))}s=g,i=v}const h=this.#e;h[0]=r[0]-this.#n,h[1]=r[1]-this.#n,h[2]=r[2]-r[0]+2*this.#n,h[3]=r[3]-r[1]+2*this.#n,this.lastPoint=[o,c]}get box(){return this.#e}newOutliner(t,e,s,i,r,o=0){return new ia(t,e,s,i,r,o)}getNewOutline(t,e){const[s,i,r,o]=this.#e,[c,u,h,f]=this.#t,m=r*h,g=o*f,v=s*h+c,b=i*f+u,w=this.newOutliner({x:this.#r[0]*m+v,y:this.#r[1]*g+b},this.#t,this.#i,t,this.#s,e??this.#n);for(let A=2;A<this.#r.length;A+=2)w.add({x:this.#r[A]*m+v,y:this.#r[A+1]*g+b});return w.getOutlines()}}class Lv{#t;#e;#n=[];#s=[];constructor(t,e=0,s=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:v,y:b,width:w,height:A}of t){const E=Math.floor((v-e)/o)*o,C=Math.ceil((v+w+e)/o)*o,T=Math.floor((b-e)/o)*o,M=Math.ceil((b+A+e)/o)*o,P=[E,T,M,!0],k=[C,T,M,!1];this.#n.push(P,k),yt.rectBoundingBox(E,T,C,M,r)}const c=r[2]-r[0]+2*s,u=r[3]-r[1]+2*s,h=r[0]-s,f=r[1]-s,m=this.#n.at(i?-1:-2),g=[m[0],m[2]];for(const v of this.#n){const[b,w,A]=v;v[0]=(b-h)/c,v[1]=(w-f)/u,v[2]=(A-f)/u}this.#t=new Float32Array([h,f,c,u]),this.#e=g}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#a(e)):(this.#o(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],s=new Set;for(const o of t){const[c,u,h]=o;e.push([c,u,o],[c,h,o])}e.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=e.length;o<c;o+=2){const u=e[o][2],h=e[o+1][2];u.push(h),h.push(u),s.add(u),s.add(h)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[c,u,h,f,m]=o;s.delete(o);let g=c,v=u;for(r=[c,h],i.push(r);;){let b;if(s.has(f))b=f;else if(s.has(m))b=m;else break;s.delete(b),[c,u,h,f,m]=b,g!==c&&(r.push(g,v,c,v===u?u:h),g=c),v=v===u?h:u}r.push(g,v)}return new Y7(i,this.#t,this.#e)}#i(t){const e=this.#s;let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1}#a([,t,e]){const s=this.#i(t);this.#s.splice(s,0,[t,e])}#o([,t,e]){const s=this.#i(t);for(let i=s;i<this.#s.length;i++){const[r,o]=this.#s[i];if(r!==t)break;if(r===t&&o===e){this.#s.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=this.#s[i];if(r!==t)break;if(r===t&&o===e){this.#s.splice(i,1);return}}}#l(t){const[e,s,i]=t,r=[[e,s,i]],o=this.#i(i);for(let c=0;c<o;c++){const[u,h]=this.#s[c];for(let f=0,m=r.length;f<m;f++){const[,g,v]=r[f];if(!(h<=g||v<=u)){if(g>=u){if(v>h)r[f][1]=h;else{if(m===1)return[];r.splice(f,1),f--,m--}continue}r[f][2]=u,v>h&&r.push([e,h,v])}}}return r}}class Y7 extends dt{#t;#e;constructor(t,e,s){super(),this.#e=t,this.#t=e,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[s,i]=e;t.push(`M${s} ${i}`);for(let r=2;r<e.length;r+=2){const o=e[r],c=e[r+1];o===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,e,s,i],r){const o=[],c=s-t,u=i-e;for(const h of this.#e){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=t+h[m]*c,f[m+1]=i-h[m+1]*u;o.push(f)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class jv extends ia{newFreeDrawOutline(t,e,s,i,r,o){return new X7(t,e,s,i,r,o)}}class X7 extends JP{newOutliner(t,e,s,i,r,o=0){return new jv(t,e,s,i,r,o)}}class xe extends bt{#t=null;#e=0;#n;#s=null;#r=null;#i=null;#a=null;#o=0;#l=null;#c=null;#h=null;#u=!1;#f=null;#m;#p=null;#d="";#g;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Tt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=xe.prototype;return Nt(this,"_keyboardManager",new Hu([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||xe._defaultColor,this.#g=t.thickness||xe._defaultThickness,this.#m=t.opacity||xe._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#d=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#x(t),this.#T()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#T(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new Lv(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new Lv(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();const{lastPoint:s}=this.#i;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#x({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#c=t;const i=1.5;if(this.#i=t.getNewOutline(this.#g/2+i,.0025),e>=0)this.#h=e,this.#s=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:xe.#_(this.#c.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:xe.#_(this.#i.box,f),path:{d:this.#i.toSVGPath()}})}const[r,o,c,u]=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=c,this.height=u;break;case 90:{const[f,m]=this.parentDimensions;this.x=o,this.y=1-r,this.width=c*m/f,this.height=u*f/m;break}case 180:this.x=1-r,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-o,this.y=r,this.width=c*m/f,this.height=u*f/m;break}}const{lastPoint:h}=this.#i;this.#f=[(h[0]-r)/c,(h[1]-o)/u]}static initialize(t,e){bt.initialize(t,e),xe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Vt.HIGHLIGHT_COLOR:xe._defaultColor=e;break;case Vt.HIGHLIGHT_THICKNESS:xe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Vt.HIGHLIGHT_COLOR:this.#S(e);break;case Vt.HIGHLIGHT_THICKNESS:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[Vt.HIGHLIGHT_COLOR,xe._defaultColor],[Vt.HIGHLIGHT_THICKNESS,xe._defaultThickness]]}get propertiesToUpdate(){return[[Vt.HIGHLIGHT_COLOR,this.color||xe._defaultColor],[Vt.HIGHLIGHT_THICKNESS,this.#g||xe._defaultThickness],[Vt.HIGHLIGHT_FREE,this.#u]]}#S(t){const e=(r,o)=>{this.color=r,this.#m=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:r,"fill-opacity":o}}),this.#r?.updateColor(r)},s=this.color,i=this.#m;this.addCommands({cmd:e.bind(this,t,xe._defaultOpacity),undo:e.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Vt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#v(t){const e=this.#g,s=i=>{this.#g=i,this.#A(i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new cs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#T(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){if(!this.#u)return;this.#x({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}#R(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#s))}static#_([t,e,s,i],r){switch(r){case 90:return[1-e-i,t,i,s];case 180:return[1-t-s,1-e-i,s,i];case 270:return[e,1-t-s,i,s]}return[t,e,s,i]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#u?(t=(t-this.rotation+360)%360,s=xe.#_(this.#c.box,t)):s=xe.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:xe.#_(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#d&&(t.setAttribute("aria-label",this.#d),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const e=this.#l=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#s;const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),RP(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#k(t){xe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#u?this.rotation:0}#L(){if(this.#u)return null;const[t,e]=this.pageDimensions,[s,i]=this.pageTranslation,r=this.#n,o=new Float32Array(r.length*8);let c=0;for(const{x:u,y:h,width:f,height:m}of r){const g=u*t+s,v=(1-h)*e+i;o[c]=o[c+4]=g,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=g+f*t,o[c+5]=o[c+7]=v-m*e,c+=8}return o}#D(t){return this.#c.serialize(t,this.#M())}static startHighlighting(t,e,{target:s,x:i,y:r}){const{x:o,y:c,width:u,height:h}=s.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),g=v=>{f.abort(),this.#j(t,v)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",Re,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ms,{signal:m}),s.addEventListener("pointermove",this.#N.bind(this,t),{signal:m}),this._freeHighlight=new jv({x:i,y:r},[o,c,u,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let i=null;if(t instanceof QP){const{data:{quadPoints:b,rect:w,rotation:A,id:E,color:C,opacity:T,popupRef:M,contentsObj:P},parent:{page:{pageNumber:k}}}=t;i=t={annotationType:Tt.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:b,boxes:null,pageIndex:k-1,rect:w.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,popupRef:M,comment:P?.str||null}}else if(t instanceof N0){const{data:{inkLists:b,rect:w,rotation:A,id:E,color:C,borderStyle:{rawWidth:T},popupRef:M,contentsObj:P},parent:{page:{pageNumber:k}}}=t;i=t={annotationType:Tt.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:b,boxes:null,pageIndex:k-1,rect:w.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,popupRef:M,comment:P?.str||null}}const{color:r,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,e,s);h.color=yt.makeHexColor(...r),h.#m=u||1,c&&(h.#g=t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,m]=h.pageDimensions,[g,v]=h.pageTranslation;if(o){const b=h.#n=[];for(let w=0;w<o.length;w+=8)b.push({x:(o[w]-g)/f,y:1-(o[w+1]-v)/m,width:(o[w+2]-o[w])/f,height:(o[w+1]-o[w+5])/m});h.#y(),h.#T(),h.rotate(h.rotation)}else if(c){h.#u=!0;const b=c[0],w={x:b[0]-g,y:m-(b[1]-v)},A=new jv(w,[0,0,f,m],1,h.#g/2,!0,.001);for(let T=0,M=b.length;T<M;T+=2)w.x=b[T]-g,w.y=m-(b[T+1]-v),A.add(w);const{id:E,clipPathId:C}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);h.#x({highlightOutlines:A.getOutlines(),highlightId:E,clipPathId:C}),h.#T(),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),s=bt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:Tt.HIGHLIGHT,color:s,opacity:this.#m,thickness:this.#g,quadPoints:this.#L(),outlines:this.#D(e),pageIndex:this.pageIndex,rect:e,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!this.#O(i)?null:(i.id=this.annotationElementId,i)}#O(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==e[i])}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class tO{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){te("Not implemented")}}class At extends bt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#s=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#l=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#d(t.box)}#h(t,e){const{id:s}=e.drawLayer.draw(At._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))s.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){te("Not implemented")}static get typesMap(){te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(At.#n.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,e[i]]);return t}_updateProperty(t,e,s){const i=this._drawingOptions,r=i[e],o=c=>{i.updateProperty(e,c);const u=this.#t.updateProperty(e,c);u&&this.#d(u),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(c)};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#t,t)}}#m([t,e,s,i]){const{parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[e,1-t,s*(o/r),i*(r/o)];case 180:return[1-t,1-e,s,i];case 270:return[1-e,t,s*(o/r),i*(r/o)];default:return[t,e,s,i]}}#p(){const{x:t,y:e,width:s,height:i,parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[1-e,t,s*(r/o),i*(o/r)];case 180:return[1-t,1-e,s,i];case 270:return[e,1-t,s*(r/o),i*(o/r)];default:return[t,e,s,i]}}#d(t){if([this.x,this.y,this.width,this.height]=this.#m(t),this.div){this.fixAndSetPosition();const[e,s]=this.parentDimensions;this.setDims(this.width*e,this.height*s)}this._onResized()}#g(){const{x:t,y:e,width:s,height:i,rotation:r,parentRotation:o,parentDimensions:[c,u]}=this;switch((r*4+o)/90){case 1:return[1-e-i,t,i,s];case 2:return[1-t-s,1-e-i,s,i];case 3:return[e,1-t-s,i,s];case 4:return[t,e-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-e,t,s*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-e,i*(u/c),s*(c/u)];case 7:return[e-s*(c/u),1-t-i*(u/c),s*(c/u),i*(u/c)];case 8:return[t-s,e-i,s,i];case 9:return[1-e,t-s,i,s];case 10:return[1-t,1-e,s,i];case 11:return[e-i,1-t,i,s];case 12:return[t-i*(u/c),e,i*(u/c),s*(c/u)];case 13:return[1-e-s*(c/u),t-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-t,1-e-s*(c/u),i*(u/c),s*(c/u)];case 15:return[e,1-t,s*(c/u),i*(u/c)];default:return[t,e,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,i,r){te("Not implemented")}static startDrawing(t,e,s,i){const{target:r,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=i;if(At.#a&&At.#a!==h)return;const{viewport:{rotation:f}}=t,{width:m,height:g}=r.getBoundingClientRect(),v=At.#s=new AbortController,b=t.combinedSignal(v);if(At.#i||=u,At.#a??=h,window.addEventListener("pointerup",w=>{At.#i===w.pointerId?this._endDraw(w):At.#o?.delete(w.pointerId)},{signal:b}),window.addEventListener("pointercancel",w=>{At.#i===w.pointerId?this._currentParent.endDrawingSession():At.#o?.delete(w.pointerId)},{signal:b}),window.addEventListener("pointerdown",w=>{At.#a===w.pointerType&&((At.#o||=new Set).add(w.pointerId),At.#n.isCancellable()&&(At.#n.removeLastElement(),At.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",ms,{signal:b}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),r.addEventListener("touchmove",w=>{w.timeStamp===At.#l&&Re(w)},{signal:b}),t.toggleDrawing(),e._editorUndoBar?.hide(),At.#n){t.drawLayer.updateProperties(this._currentDrawId,At.#n.startNew(o,c,m,g,f));return}e.updateUIForDefaultProperties(this),At.#n=this.createDrawerInstance(o,c,m,g,f),At.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(At.#r.toSVGProperties(),At.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(At.#l=-1,!At.#n)return;const{offsetX:e,offsetY:s,pointerId:i}=t;if(At.#i===i){if(At.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,At.#n.add(e,s)),At.#l=t.timeStamp,Re(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,At.#n=null,At.#r=null,At.#a=null,At.#l=NaN),At.#s&&(At.#s.abort(),At.#s=null,At.#i=NaN,At.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,At.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=At.#n,i=this._currentDrawId,r=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,s.setLastElement(r))},undo:()=>{e.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Vt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Vt.DRAW_STEP),!At.#n.isEmpty()){const{pageDimensions:[s,i],scale:r}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:At.#n.getOutlines(s*r,i*r,r,this._INNER_MARGIN),drawingOptions:At.#r,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,i,r,o){te("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}=e.viewport,u=this.deserializeDraw(o,c,i,r,this._INNER_MARGIN,t),h=await super.deserialize(t,e,s);return h.createDrawingOptions(t),h.#c({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[e,s]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#t.serialize([e,s,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Q7{#t=new Float64Array(6);#e;#n;#s;#r;#i;#a="";#o=0;#l=new $u;#c;#h;constructor(t,e,s,i,r,o){this.#c=s,this.#h=i,this.#s=r,this.#r=o,[t,e]=this.#u(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#n=[{line:c,points:this.#i}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#u(t,e){return dt._normalizePoint(t,e,this.#c,this.#h,this.#s)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#u(t,e);const[s,i,r,o]=this.#t.subarray(2,6),c=t-r,u=e-o;return Math.hypot(this.#c*c,this.#h*u)<=2?null:(this.#i.push(t,e),isNaN(s)?(this.#t.set([r,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,i,r,o,t,e],0),this.#e.push(...dt.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){this.#c=s,this.#h=i,this.#s=r,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:o,points:this.#i}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#i=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#l.removeLastElement();this.#n.pop(),this.#a="";for(let t=0,e=this.#n.length;t<e;t++){const{line:s,points:i}=this.#n[t];this.#e=s,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=dt.svgRound(this.#e[4]),e=dt.svgRound(this.#e[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${t} ${e}`,this.#o=6}if(this.#i.length===4){const i=dt.svgRound(this.#e[10]),r=dt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${i} ${r}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let i=this.#o,r=this.#e.length;i<r;i+=6){const[o,c,u,h,f,m]=this.#e.slice(i,i+6).map(dt.svgRound);s.push(`C${o} ${c} ${u} ${h} ${f} ${m}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,s,i){const r=this.#n.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#l.build(this.#n,t,e,s,this.#s,this.#r,i),this.#t=null,this.#e=null,this.#n=null,this.#a=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class $u extends dt{#t;#e=0;#n;#s;#r;#i;#a;#o;#l;build(t,e,s,i,r,o,c){this.#r=e,this.#i=s,this.#a=i,this.#o=r,this.#l=o,this.#n=c??0,this.#s=t,this.#u()}get thickness(){return this.#l}setLastElement(t){return this.#s.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#s){if(t.push(`M${dt.svgRound(e[4])} ${dt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${dt.svgRound(e[10])} ${dt.svgRound(e[11])}`);continue}for(let s=6,i=e.length;s<i;s+=6){const[r,o,c,u,h,f]=e.subarray(s,s+6).map(dt.svgRound);t.push(`C${r} ${o} ${c} ${u} ${h} ${f}`)}}return t.join("")}serialize([t,e,s,i],r){const o=[],c=[],[u,h,f,m]=this.#h();let g,v,b,w,A,E,C,T,M;switch(this.#o){case 0:M=dt._rescale,g=t,v=e+i,b=s,w=-i,A=t+u*s,E=e+(1-h-m)*i,C=t+(u+f)*s,T=e+(1-h)*i;break;case 90:M=dt._rescaleAndSwap,g=t,v=e,b=s,w=i,A=t+h*s,E=e+u*i,C=t+(h+m)*s,T=e+(u+f)*i;break;case 180:M=dt._rescale,g=t+s,v=e,b=-s,w=i,A=t+(1-u-f)*s,E=e+h*i,C=t+(1-u)*s,T=e+(h+m)*i;break;case 270:M=dt._rescaleAndSwap,g=t+s,v=e+i,b=-s,w=-i,A=t+(1-h-m)*s,E=e+(1-u-f)*i,C=t+(1-h)*s,T=e+(1-u)*i;break}for(const{line:P,points:k}of this.#s)o.push(M(P,g,v,b,w,r?new Array(P.length):null)),c.push(M(k,g,v,b,w,r?new Array(k.length):null));return{lines:o,points:c,rect:[A,E,C,T]}}static deserialize(t,e,s,i,r,{paths:{lines:o,points:c},rotation:u,thickness:h}){const f=[];let m,g,v,b,w;switch(u){case 0:w=dt._rescale,m=-t/s,g=e/i+1,v=1/s,b=-1/i;break;case 90:w=dt._rescaleAndSwap,m=-e/i,g=-t/s,v=1/i,b=1/s;break;case 180:w=dt._rescale,m=t/s+1,g=-e/i,v=-1/s,b=1/i;break;case 270:w=dt._rescaleAndSwap,m=e/i+1,g=t/s+1,v=-1/i,b=-1/s;break}if(!o){o=[];for(const E of c){const C=E.length;if(C===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const T=new Float32Array(3*(C-2));o.push(T);let[M,P,k,D]=E.subarray(0,4);T.set([NaN,NaN,NaN,NaN,M,P],0);for(let N=4;N<C;N+=2){const U=E[N],V=E[N+1];T.set(dt.createBezierPoints(M,P,k,D,U,V),(N-2)*3),[M,P,k,D]=[k,D,U,V]}}}for(let E=0,C=o.length;E<C;E++)f.push({line:w(o[E].map(T=>T??NaN),m,g,v,b),points:w(c[E].map(T=>T??NaN),m,g,v,b)});const A=new this.prototype.constructor;return A.build(f,s,i,1,u,h,r),A}#c(t=this.#l){const e=this.#n+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#i]:[e/this.#i,e/this.#r]}#h(){const[t,e,s,i]=this.#t,[r,o]=this.#c(0);return[t+r,e+o,s-2*r,i-2*o]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#s){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)yt.pointBoundingBox(i[c],i[c+1],t);continue}let r=i[4],o=i[5];for(let c=6,u=i.length;c<u;c+=6){const[h,f,m,g,v,b]=i.subarray(c,c+6);yt.bezierBoundingBox(r,o,h,f,m,g,v,b,t),r=v,o=b}}const[e,s]=this.#c();t[0]=mn(t[0]-e,0,1),t[1]=mn(t[1]-s,0,1),t[2]=mn(t[2]+e,0,1),t[3]=mn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#c();this.#l=t;const[i,r]=this.#c(),[o,c]=[i-e,r-s],u=this.#t;return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u}updateParentDimensions([t,e],s){const[i,r]=this.#c();this.#r=t,this.#i=e,this.#a=s;const[o,c]=this.#c(),u=o-i,h=c-r,f=this.#t;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(dt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,i=0,r=0,o=0,c=0,u=0;switch(this.#e){case 90:i=e/t,r=-t/e,c=t;break;case 180:s=-1,o=-1,c=t,u=e;break;case 270:i=-e/t,r=t/e,u=e;break;default:return""}return`matrix(${s} ${i} ${r} ${o} ${dt.svgRound(c)} ${dt.svgRound(u)})`}getPathResizingSVGProperties([t,e,s,i]){const[r,o]=this.#c(),[c,u,h,f]=this.#t;if(Math.abs(h-r)<=dt.PRECISION||Math.abs(f-o)<=dt.PRECISION){const w=t+s/2-(c+h/2),A=e+i/2-(u+f/2);return{path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${A})`}}}const m=(s-2*r)/(h-2*r),g=(i-2*o)/(f-2*o),v=h/s,b=f/i;return{path:{"transform-origin":`${dt.svgRound(c)} ${dt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${b}) translate(${dt.svgRound(r)} ${dt.svgRound(o)}) scale(${m} ${g}) translate(${dt.svgRound(-r)} ${dt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,s,i]){const[r,o]=this.#c(),c=this.#t,[u,h,f,m]=c;if(c[0]=t,c[1]=e,c[2]=s,c[3]=i,Math.abs(f-r)<=dt.PRECISION||Math.abs(m-o)<=dt.PRECISION){const A=t+s/2-(u+f/2),E=e+i/2-(h+m/2);for(const{line:C,points:T}of this.#s)dt._translate(C,A,E,C),dt._translate(T,A,E,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(s-2*r)/(f-2*r),v=(i-2*o)/(m-2*o),b=-g*(u+r)+t+r,w=-v*(h+o)+e+o;if(g!==1||v!==1||b!==0||w!==0)for(const{line:A,points:E}of this.#s)dt._rescale(A,b,w,g,v,A),dt._rescale(E,b,w,g,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[i,r]=s,o=this.#t,c=t-o[0],u=e-o[1];if(this.#r===i&&this.#i===r)for(const{line:h,points:f}of this.#s)dt._translate(h,c,u,h),dt._translate(f,c,u,f);else{const h=this.#r/i,f=this.#i/r;this.#r=i,this.#i=r;for(const{line:m,points:g}of this.#s)dt._rescale(m,c,u,h,f,m),dt._rescale(g,c,u,h,f,g);o[2]*=h,o[3]*=f}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t[0])} ${dt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class xp extends tO{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:bt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new xp(this._viewParameters);return t.updateAll(this),t}}class j0 extends At{static _type="ink";static _editorType=Tt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){bt.initialize(t,e),this._defaultDrawingOptions=new xp(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nt(this,"typesMap",new Map([[Vt.INK_THICKNESS,"stroke-width"],[Vt.INK_COLOR,"stroke"],[Vt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,i,r){return new Q7(t,e,s,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,i,r,o){return $u.deserialize(t,e,s,i,r,o)}static async deserialize(t,e,s){let i=null;if(t instanceof N0){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:f,opacity:m,borderStyle:{rawWidth:g},popupRef:v,contentsObj:b},parent:{page:{pageNumber:w}}}=t;i=t={annotationType:Tt.INK,color:Array.from(f),thickness:g,opacity:m,paths:{points:o},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:v,comment:b?.str||null}}const r=await super.deserialize(t,e,s);return r._initialData=i,t.comment&&r.setCommentData(t.comment),r}get toolbarButtons(){return this._colorPicker||=new cu(this),[["colorPicker",this._colorPicker]]}get colorType(){return Vt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=j0.getDefaultDrawingOptions({stroke:yt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":c}}=this,u={annotationType:Tt.INK,color:bt._colorManager.convert(r),opacity:o,thickness:c,paths:{lines:e,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:s,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==e[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==r}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1),i={rect:s,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}}class Iv extends $u{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const kh=8,kc=3;class ko{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,i){return s-=t,i-=e,s===0?i>0?0:4:s===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(t,e,s,i,r,o,c){const u=this.#e(s,i,r,o);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,m=this.#n[2*f],g=this.#n[2*f+1];if(t[(s+m)*e+(i+g)]!==0)return f}return-1}static#r(t,e,s,i,r,o,c){const u=this.#e(s,i,r,o);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,m=this.#n[2*f],g=this.#n[2*f+1];if(t[(s+m)*e+(i+g)]!==0)return f}return-1}static#i(t,e,s,i){const r=t.length,o=new Int32Array(r);for(let f=0;f<r;f++)o[f]=t[f]<=i?1:0;for(let f=1;f<s-1;f++)o[f*e]=o[f*e+e-1]=0;for(let f=0;f<e;f++)o[f]=o[e*s-1-f]=0;let c=1,u;const h=[];for(let f=1;f<s-1;f++){u=1;for(let m=1;m<e-1;m++){const g=f*e+m,v=o[g];if(v===0)continue;let b=f,w=m;if(v===1&&o[g-1]===0)c+=1,w-=1;else if(v>=1&&o[g+1]===0)c+=1,w+=1,v>1&&(u=v);else{v!==1&&(u=Math.abs(v));continue}const A=[m,f],E=w===m+1,C={isHole:E,points:A,id:c,parent:0};h.push(C);let T;for(const q of h)if(q.id===u){T=q;break}T?T.isHole?C.parent=E?T.parent:u:C.parent=E?u:T.parent:C.parent=E?u:0;const M=this.#s(o,e,f,m,b,w,0);if(M===-1){o[g]=-c,o[g]!==1&&(u=Math.abs(o[g]));continue}let P=this.#n[2*M],k=this.#n[2*M+1];const D=f+P,N=m+k;b=D,w=N;let U=f,V=m;for(;;){const q=this.#r(o,e,U,V,b,w,1);P=this.#n[2*q],k=this.#n[2*q+1];const it=U+P,at=V+k;A.push(at,it);const rt=U*e+V;if(o[rt+1]===0?o[rt]=-c:o[rt]===1&&(o[rt]=c),it===f&&at===m&&U===D&&V===N){o[g]!==1&&(u=Math.abs(o[g]));break}else b=U,w=V,U=it,V=at}}}return h}static#a(t,e,s,i){if(s-e<=4){for(let D=e;D<s-2;D+=2)i.push(t[D],t[D+1]);return}const r=t[e],o=t[e+1],c=t[s-4]-r,u=t[s-3]-o,h=Math.hypot(c,u),f=c/h,m=u/h,g=f*o-m*r,v=u/c,b=1/h,w=Math.atan(v),A=Math.cos(w),E=Math.sin(w),C=b*(Math.abs(A)+Math.abs(E)),T=b*(1-C+C**2),M=Math.max(Math.atan(Math.abs(E+A)*T),Math.atan(Math.abs(E-A)*T));let P=0,k=e;for(let D=e+2;D<s-2;D+=2){const N=Math.abs(g-f*t[D+1]+m*t[D]);N>P&&(k=D,P=N)}P>(h*M)**2?(this.#a(t,e,k+2,i),this.#a(t,k,s,i)):i.push(r,o)}static#o(t){const e=[],s=t.length;return this.#a(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#l(t,e,s,i,r,o){const c=new Float32Array(o**2),u=-2*i**2,h=o>>1;for(let w=0;w<o;w++){const A=(w-h)**2;for(let E=0;E<o;E++)c[w*o+E]=Math.exp((A+(E-h)**2)/u)}const f=new Float32Array(256),m=-2*r**2;for(let w=0;w<256;w++)f[w]=Math.exp(w**2/m);const g=t.length,v=new Uint8Array(g),b=new Uint32Array(256);for(let w=0;w<s;w++)for(let A=0;A<e;A++){const E=w*e+A,C=t[E];let T=0,M=0;for(let k=0;k<o;k++){const D=w+k-h;if(!(D<0||D>=s))for(let N=0;N<o;N++){const U=A+N-h;if(U<0||U>=e)continue;const V=t[D*e+U],q=c[k*o+N]*f[Math.abs(V-C)];T+=V*q,M+=q}}const P=v[E]=Math.round(T/M);b[P]++}return[v,b]}static#c(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#h(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let c=0,u=s.length;c<u;c++){const h=s[c]=t[c<<2];i=Math.max(i,h),r=Math.min(r,h)}const o=255/(i-r);for(let c=0,u=s.length;c<u;c++)s[c]=(s[c]-r)*o;return s}static#u(t){let e,s=-1/0,i=-1/0;const r=t.findIndex(u=>u!==0);let o=r,c=r;for(e=r;e<256;e++){const u=t[e];u>s&&(e-o>i&&(i=e-o,c=e-1),s=u,o=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:i}=t,{maxDim:r}=this.#t;let o=s,c=i;if(s>r||i>r){let g=s,v=i,b=Math.log2(Math.max(s,i)/r);const w=Math.floor(b);b=b===w?w-1:w;for(let E=0;E<b;E++){o=Math.ceil(g/2),c=Math.ceil(v/2);const C=new OffscreenCanvas(o,c);C.getContext("2d").drawImage(t,0,0,g,v,0,0,o,c),g=o,v=c,t!==e&&t.close(),t=C.transferToImageBitmap()}const A=Math.min(r/o,r/c);o=Math.round(o*A),c=Math.round(c*A)}const h=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,c),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,c);const f=h.getImageData(0,0,o,c).data;return[this.#h(f),o,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:i},r,o,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const m=200,g=f.font=`${s} ${i} ${m}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:b,actualBoundingBoxAscent:w,actualBoundingBoxDescent:A,fontBoundingBoxAscent:E,fontBoundingBoxDescent:C,width:T}=f.measureText(t),M=1.5,P=Math.ceil(Math.max(Math.abs(v)+Math.abs(b)||0,T)*M),k=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||m,Math.abs(E)+Math.abs(C)||m)*M);h=new OffscreenCanvas(P,k),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,P,k),f.fillStyle="black",f.fillText(t,P*(M-1)/2,k*(3-M)/2);const D=this.#h(f.getImageData(0,0,P,k).data),N=this.#c(D),U=this.#u(N),V=this.#i(D,P,k,U);return this.processDrawnLines({lines:{curves:V,width:P,height:k},pageWidth:r,pageHeight:o,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(t,e,s,i,r){const[o,c,u]=this.#f(t),[h,f]=this.#l(o,c,u,Math.hypot(c,u)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#u(f),g=this.#i(h,c,u,m);return this.processDrawnLines({lines:{curves:g,width:c,height:u},pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:c}){i%180!==0&&([e,s]=[s,e]);const{curves:u,width:h,height:f}=t,m=t.thickness??0,g=[],v=Math.min(e/h,s/f),b=v/e,w=v/s,A=[];for(const{points:C}of u){const T=o?this.#o(C):C;if(!T)continue;A.push(T);const M=T.length,P=new Float32Array(M),k=new Float32Array(3*(M===2?2:M-2));if(g.push({line:k,points:P}),M===2){P[0]=T[0]*b,P[1]=T[1]*w,k.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[D,N,U,V]=T;D*=b,N*=w,U*=b,V*=w,P.set([D,N,U,V],0),k.set([NaN,NaN,NaN,NaN,D,N],0);for(let q=4;q<M;q+=2){const it=P[q]=T[q]*b,at=P[q+1]=T[q+1]*w;k.set(dt.createBezierPoints(D,N,U,V,it,at),(q-2)*3),[D,N,U,V]=[U,V,it,at]}}if(g.length===0)return null;const E=c?new Iv:new $u;return E.build(g,e,s,1,i,c?0:m,r),{outline:E,newCurves:A,areContours:c,thickness:m,width:h,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:i,height:r}){let o=1/0,c=-1/0,u=0;for(const T of t){u+=T.length;for(let M=2,P=T.length;M<P;M++){const k=T[M]-T[M-2];o=Math.min(o,k),c=Math.max(c,k)}}let h;o>=-128&&c<=127?h=Int8Array:o>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=t.length,m=kh+kc*f,g=new Uint32Array(m);let v=0;g[v++]=m*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,g[v++]=0,g[v++]=i,g[v++]=r,g[v++]=e?0:1,g[v++]=Math.max(0,Math.floor(s??0)),g[v++]=f,g[v++]=h.BYTES_PER_ELEMENT;for(const T of t)g[v++]=T.length-2,g[v++]=T[0],g[v++]=T[1];const b=new CompressionStream("deflate-raw"),w=b.writable.getWriter();await w.ready,w.write(g);const A=h.prototype.constructor;for(const T of t){const M=new A(T.length-2);for(let P=2,k=T.length;P<k;P++)M[P-2]=T[P]-T[P-2];w.write(M)}w.close();const E=await new Response(b.readable).arrayBuffer(),C=new Uint8Array(E);return CP(C)}static async decompressSignature(t){try{const e=b$(t),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,c=0;for await(const T of s)o||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),o.set(T,c),c+=T.length;const u=new Uint32Array(o.buffer,0,o.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],m=u[3],g=u[4]===0,v=u[5],b=u[6],w=u[7],A=[],E=(kh+kc*b)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,E);break}c=0;for(let T=0;T<b;T++){const M=u[kc*T+kh],P=new Float32Array(M+2);A.push(P);for(let k=0;k<kc-1;k++)P[k]=u[kc*T+kh+k+1];for(let k=0;k<M;k++)P[k+2]=P[k]+C[c++]}return{areContours:g,thickness:v,outlines:A,width:f,height:m}}catch(e){return Ct(`decompressSignature: ${e}`),null}}}class I0 extends tO{constructor(){super(),super.updateProperties({fill:bt._defaultLineColor,"stroke-width":0})}clone(){const t=new I0;return t.updateAll(this),t}}class F0 extends xp{constructor(t){super(t),super.updateProperties({stroke:bt._defaultLineColor,"stroke-width":1})}clone(){const t=new F0(this._viewParameters);return t.updateAll(this),t}}class Gs extends At{#t=!1;#e=null;#n=null;#s=null;static _type="signature";static _editorType=Tt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){bt.initialize(t,e),this._defaultDrawingOptions=new I0,this._defaultDrawnSignatureOptions=new F0(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Nt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:i,mustSmooth:r,areContours:o,description:c,uuid:u,heightInPage:h}=this.#n,{rawDims:{pageWidth:f,pageHeight:m},rotation:g}=this.parent.viewport,v=ko.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:g,innerMargin:Gs._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(v,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#s=t,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:i,height:r}=this.#n,o=Math.max(i,r),c=ko.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,i){const{x:r,y:o}=this,{outline:c}=this.#n=t;this.#t=c instanceof Iv,this.description=s;let u;this.#t?u=Gs.getDefaultDrawingOptions():(u=Gs._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[h,f]=this.parentDimensions,[,m]=this.pageDimensions;let g=e/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(h*this.width,f*this.height),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:i}=this.parent.viewport;return ko.process(t,e,s,i,Gs._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return ko.extractContoursFromText(t,e,s,i,r,Gs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:i}=this.parent.viewport;return ko.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:Gs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Gs.getDefaultDrawingOptions():(this._drawingOptions=Gs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o={annotationType:Tt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#s,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,i,r,o){return o.areContours?Iv.deserialize(t,e,s,i,r,o):$u.deserialize(t,e,s,i,r,o)}static async deserialize(t,e,s){const i=await super.deserialize(t,e,s);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#s=t.uuid,i}}class Z7 extends bt{#t=null;#e=null;#n=null;#s=null;#r=null;#i="";#a=null;#o=!1;#l=null;#c=!1;#h=!1;static _type="stamp";static _editorType=Tt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#s=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){bt.initialize(t,e)}static isHandlingMimeForPasting(t){return Pv.includes(t)}static paste(t,e){e.pasteEditor({mode:Tt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:r,height:o,channels:i.length/(r*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),e&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#s){const s=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(i=>this.#u(i)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Pv.join(",");const e=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#s||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,i&&(this.#t=i),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const t=200;this.#l=setTimeout(()=>{this.#l=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[i,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,s=this.height*r;else if(e>o*i||s>o*r){const f=Math.min(o*i/e,o*r/s);e*=f,s*=f}const[c,u]=this.parentDimensions;this.setDims(e*c/i,s*u/r),this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/i,this.height=s/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:i,height:r}=this.#t,o=new ni;let c=this.#t,u=i,h=r,f=null;if(e){if(i>e||r>e){const k=Math.min(e/i,e/r);u=Math.floor(i*k),h=Math.floor(r*k)}f=document.createElement("canvas");const g=f.width=Math.ceil(u*o.sx),v=f.height=Math.ceil(h*o.sy);this.#c||(c=this.#d(g,v));const b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let w="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",A="#42414d");const E=15,C=E*o.sx,T=E*o.sy,M=new OffscreenCanvas(C*2,T*2),P=M.getContext("2d");P.fillStyle=w,P.fillRect(0,0,C*2,T*2),P.fillStyle=A,P.fillRect(0,0,C,T),P.fillRect(C,T,C,T),b.fillStyle=b.createPattern(M,"repeat"),b.fillRect(0,0,g,v),b.drawImage(c,0,0,c.width,c.height,0,0,g,v)}let m=null;if(s){let g,v;if(o.symmetric&&c.width<t&&c.height<t)g=c.width,v=c.height;else if(c=this.#t,i>t||r>t){const A=Math.min(t/i,t/r);g=Math.floor(i*A),v=Math.floor(r*A),this.#c||(c=this.#d(g,v))}const w=new OffscreenCanvas(g,v).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,g,v),m={width:g,height:v,data:w.getImageData(0,0,g,v).data}}return{canvas:f,width:u,height:h,imageData:m}}#d(t,e){const{width:s,height:i}=this.#t;let r=s,o=i,c=this.#t;for(;r>2*t||o>2*e;){const u=r,h=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(r,o);f.getContext("2d").drawImage(c,0,0,u,h,0,0,r,o),c=f.transferToImageBitmap()}return c}#g(){const[t,e]=this.parentDimensions,{width:s,height:i}=this,r=new ni,o=Math.ceil(s*t*r.sx),c=Math.ceil(i*e*r.sy),u=this.#a;if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=this.#c?this.#t:this.#d(o,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,c)}#b(t){if(t){if(this.#c){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,s]=this.pageDimensions,i=Math.round(this.width*e*Qo.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*Qo.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,r);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,r),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let i=null,r=!1;if(t instanceof ZP){const{data:{rect:w,rotation:A,id:E,structParent:C,popupRef:T,contentsObj:M},container:P,parent:{page:{pageNumber:k}},canvas:D}=t;let N,U;D?(delete t.canvas,{id:N,bitmap:U}=s.imageManager.getFromCanvas(P.id,D),D.remove()):(r=!0,t._hasNoCanvas=!0);const V=(await e._structTree.getAriaAttributes(`${A0}${E}`))?.get("aria-label")||"";i=t={annotationType:Tt.STAMP,bitmapId:N,bitmap:U,pageIndex:k-1,rect:w.slice(0),rotation:A,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:V},isSvg:!1,structParent:C,popupRef:T,comment:M?.str||null}}const o=await super.deserialize(t,e,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:g}=t;r?(s.addMissingCanvas(t.id,o),o.#o=!0):f&&s.imageManager.isValidId(f)?(o.#e=f,u&&(o.#t=u)):o.#s=h,o.#c=m;const[v,b]=o.pageDimensions;return o.width=(c[2]-c[0])/v,o.height=(c[3]-c[1])/b,g&&(o.altTextData=g),o._initialData=i,t.comment&&o.setCommentData(t.comment),o.#h=!!i,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Tt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const c=this.#y(s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,e===null)return s;e.stamps||=new Map;const o=this.#c?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:s}),s.bitmap=this.#b(!1);else if(this.#c){const c=e.stamps.get(this.#e);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#b(!1))}return s}#y(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class _i{#t;#e=!1;#n=null;#s=null;#r=null;#i=new Map;#a=!1;#o=!1;#l=!1;#c=null;#h=null;#u=null;#f=null;#m=null;#p=-1;#d;static _initialized=!1;static#g=new Map([Ve,j0,Z7,xe,Gs].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const m=[..._i.#g.values()];if(!_i._initialized){_i._initialized=!0;for(const g of m)g.initialize(f,t)}t.registerEditorTypes(m),this.#d=t,this.pageIndex=e,this.div=s,this.#t=r,this.#n=o,this.viewport=h,this.#u=u,this.drawLayer=c,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Tt.NONE}updateToolbar(t){this.#d.updateToolbar(t)}updateMode(t=this.#d.getMode()){switch(this.#v(),t){case Tt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of _i.#g.values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#d.setEditingState(t)}addCommands(t){this.#d.addCommands(t)}cleanUndoStack(t){this.#d.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#i.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#d.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#n){this.#l=!1;return}const e=this.#n.getEditableAnnotations();for(const s of e){if(s.hide(),this.#d.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#l=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#m){this.#m=new AbortController;const i=this.#d.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",r=>{const{clientX:c,clientY:u,timeStamp:h}=r,f=this.#p;if(h-f>500){this.#p=h;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(c,u);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const b=new RegExp(`^${SP}[0-9]+$`);for(const A of g)if(b.test(A.id)){v=A.id;break}if(!v)return;const w=this.#i.get(v);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick())},{signal:i,capture:!0})}const t=new Map,e=new Map;for(const i of this.#i.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){t.set(i.annotationElementId,i);continue}else e.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const r of i){const{id:o}=r.data;if(this.#d.isDeletedAnnotationElement(o)){r.updateEdited({deleted:!0});continue}let c=e.get(o);if(c){c.resetAnnotationElement(r),c.show(!1),r.show();continue}c=t.get(o),c&&(this.#d.addChangedExistingAnnotation(c),c.renderAnnotationElement(r)&&c.show(!1)),r.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of _i.#g.values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#d.getActive()!==t&&this.#d.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#b(t){this.#d.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:s}=en.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),xe.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),t.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const t=this.#d.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#s?.abort(),this.#s=null}attach(t){this.#i.set(t.id,t);const{annotationElementId:e}=t;e&&this.#d.isDeletedAnnotationElement(e)&&this.#d.removeDeletedAnnotationElement(t)}detach(t){this.#i.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#d.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#d.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#d.addDeletedAnnotationElement(t.annotationElementId),bt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#d.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#l),this.#d.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return this.#d.getId()}get#y(){return _i.#g.get(this.#d.getMode())}combinedSignal(t){return this.#d.combinedSignal(t)}#x(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#d.updateMode(t.mode);const{offsetX:s,offsetY:i}=this.#S(),r=this.getNextId(),o=this.#x({parent:this,id:r,x:s,y:i,uiManager:this.#d,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await _i.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#d)||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=this.#x({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#d,isCentered:e,...s});return r&&this.add(r),r}#S(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),c=Math.min(window.innerWidth,t+s),u=Math.min(window.innerHeight,e+i),h=(r+c)/2-t,f=(o+u)/2-e,[m,g]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:m,offsetY:g}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#d.setSelected(t)}toggleSelected(t){this.#d.toggleSelected(t)}unselect(t){this.#d.unselect(t)}pointerup(t){const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#d.getMode();if(s===Tt.STAMP||s===Tt.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#d.getMode()===Tt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#d.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#d,!1,t);return}this.#d.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#d.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#d,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#h=e);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#c?(this.#d.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#y.endDrawing(t)):null}findNewParent(t,e,s){const i=this.#d.findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#i.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const t of this.#i.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ba(this.div,t);for(const e of this.#d.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#d.commitOrRemove(),this.#v();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ba(this.div,{rotation:s}),e!==s)for(const i of this.#i.values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#d.viewParameters.realScale}}class Qe{#t=null;#e=new Map;#n=new Map;static#s=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Nt(this,"_svgFactory",new xf)}static#r(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`}#i(){const t=Qe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const s=Qe._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Qe._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i}#o(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)}draw(t,e=!1,s=!1){const i=Qe.#s++,r=this.#i(),o=Qe._svgFactory.createElement("defs");r.append(o);const c=Qe._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(i,c);const h=s?this.#a(o,u):null,f=Qe._svgFactory.createElement("use");return r.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(r,t),this.#e.set(i,r),{id:i,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Qe.#s++,i=this.#i(),r=Qe._svgFactory.createElement("defs");i.append(r);const o=Qe._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(e){const m=Qe._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${s}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const g=Qe._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=Qe._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const h=Qe._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(s,i),s}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(s&&this.#o(c,s),i&&Qe.#r(c,i),r){const{classList:u}=c;for(const[h,f]of Object.entries(r))u.toggle(h,f)}if(o){const h=c.firstChild.firstChild;this.#o(h,o)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Lv};globalThis.pdfjsLib={AbortException:xr,AnnotationEditorLayer:_i,AnnotationEditorParamsType:Vt,AnnotationEditorType:Tt,AnnotationEditorUIManager:Sr,AnnotationLayer:L0,AnnotationMode:fr,AnnotationType:Te,build:M7,ColorPicker:cs,createValidAbsoluteUrl:AP,DOMSVGFactory:xf,DrawLayer:Qe,FeatureTest:en,fetchData:Uu,getDocument:VP,getFilenameFromUrl:w$,getPdfFilenameFromUrl:x$,getRGB:vp,getUuid:TP,getXfaPageViewport:A$,GlobalWorkerOptions:Go,ImageKind:Xh,InvalidPDFException:Rv,isDataScheme:yp,isPdfFile:E0,isValidExplicitDest:N$,MathClamp:mn,noContextMenu:ms,normalizeUnicode:y$,OPS:au,OutputScale:ni,PasswordResponses:l$,PDFDataRangeTransport:$P,PDFDateString:Mv,PDFWorker:lu,PermissionFlag:o$,PixelsPerInch:Qo,RenderingCancelledException:_0,ResponseException:bf,setLayerDimensions:ba,shadow:Nt,SignatureExtractor:ko,stopEvent:Re,SupportedImageMimeTypes:Pv,TextLayer:fn,TouchManager:bp,updateUrlHash:_P,Util:yt,VerbosityLevel:pp,version:R7,XfaLayer:WP};Go.workerSrc=a$;function eO({text:n,textSettingFn:t,addClass:e}){const[s,i]=_.useState(null),[r,o]=_.useState(null),[c,u]=_.useState(null),[h,f]=_.useState(null),[m,g]=_.useState(1),[v,b]=_.useState(1),[w,A]=_.useState(!1),[E,C]=_.useState("idle"),T=_.useRef(null),M=_.useRef(null);_.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]);const P=async U=>{const V=U.target.files?.[0];if(!V)return;r&&URL.revokeObjectURL(r);const q=V.name.split(".").pop()?.toLowerCase();if(q!=="pdf"&&q!=="txt"){ie.error("Only PDF and TXT files are supported");return}i(V),u(q);const it=URL.createObjectURL(V);o(it);try{if(q==="pdf"){const at=await V.arrayBuffer(),rt=await VP({data:at}).promise;M.current=rt,f(rt.numPages),g(1),b(Math.min(20,rt.numPages)),C("ready")}else q==="txt"&&C("ready")}catch(at){ie.error("Failed to read file"),console.error(at),C("idle")}finally{T.current&&(T.current.value="")}},k=async(U,V)=>{const q=M.current;if(q){if(U<1||V<U||V>q.numPages){ie.error("Invalid page range");return}if(V-U+1>20){ie.error("Please select up to 20 pages");return}A(!0);try{let it="";for(let rt=U;rt<=V;rt++){const I=(await(await q.getPage(rt)).getTextContent()).items.map(F=>F.str).join(" ");it+=I+`
`}const at=yf(it);t(rt=>rt+at)}catch(it){console.error(it),ie.error("Failed to extract text")}finally{A(!1)}}},D=async()=>{if(s){A(!0);try{const U=await s.text(),V=yf(U);t(q=>q+V)}catch(U){console.error(U),ie.error("Failed to read text file")}finally{A(!1)}}},N=()=>{i(null),o(null),u(null),f(null),C("idle"),M.current=null,T.current&&(T.current.value="")};return S.jsxs("section",{className:"space-y-4 "+e,children:[!r&&S.jsxs("div",{className:"w-full h-full flex flex-col gap-3 items-center justify-center border-2 border-secondary bg-card-secondary border-dashed rounded-md p-6 py-10",onClick:()=>T.current?.click(),children:[S.jsx(CV,{className:"text-[3rem] text-muted-foreground w-15 h-auto p-2 aspect-square bg-secondary rounded-full"}),S.jsx("p",{className:"font-semibold",children:"Open File for Reference"}),S.jsx("p",{className:"text-muted-foreground text-sm",children:"You can upload any file and add text from it"}),S.jsx(Lt,{variant:"secondary",className:"mt-4",children:"Select file"}),S.jsx(yr,{type:"file",name:"file",ref:T,accept:".pdf,.txt",onChange:P,className:"hidden"})]}),r&&S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"relative",children:[c==="pdf"?S.jsx("iframe",{src:r,className:"w-full h-[400px] md:h-[90vh] border rounded",title:"PDF preview"}):S.jsx("iframe",{src:r,className:"w-full h-[400px] md:h-[90vh] border rounded bg-card",title:"Text file preview"}),S.jsx("button",{onClick:N,className:"absolute top-2 right-2 bg-secondary p-1 rounded-full hover:bg-muted",children:S.jsx(EV,{className:"text-lg"})})]}),E==="ready"&&c==="pdf"&&S.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[S.jsxs("div",{className:"self-start col-start-1 col-end-2",children:[S.jsx("label",{className:"block text-sm mb-1",children:"Start page"}),S.jsx(yr,{type:"number",min:1,max:h??void 0,value:m,onChange:U=>g(parseInt(U.target.value||"1",10))})]}),S.jsxs("div",{className:"col-start-2 col-end-3",children:[S.jsx("label",{className:"block text-sm mb-1",children:"End page"}),S.jsx(yr,{type:"number",min:1,max:h??void 0,value:v,onChange:U=>b(parseInt(U.target.value||"1",10))}),S.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Max 20 pages at once"})]}),S.jsx("div",{className:"self-center col-start-3 col-end-4",children:S.jsx(Lt,{onClick:()=>k(m,v),disabled:w,className:"w-full",variant:"secondary",children:n===""?w?"Extracting...":"Extract text":w?"Adding...":"Add text"})})]}),E==="ready"&&c==="txt"&&S.jsx("div",{className:"flex justify-end mt-auto",children:S.jsx(Lt,{onClick:D,disabled:w,className:"w-full sm:w-auto",variant:"secondary",children:n===""?w?"Extracting...":"Extract text":w?"Adding...":"Add text"})})]})]})}function J7(){const[n,t]=_.useState(""),[e,s]=_.useState(""),[i,r]=_.useState(""),{addText:o,isAddingText:c}=fH({text:i,title:n,tag:e});return S.jsxs(S.Fragment,{children:[S.jsx("h1",{className:"text-heading",children:"Add New Text"}),S.jsx("p",{className:"text-subheading mt-1",children:"Add new text to your collection from various sources"}),S.jsxs("div",{className:"flex flex-col lg:flex-row justify-between mt-10 min-h-[400px] gap-10",children:[S.jsx(xP,{text:i,title:n,tag:e,setText:r,setTitle:t,setTag:s,addClass:"flex-3"}),S.jsxs("div",{className:"flex-2 flex flex-col gap-2",children:[S.jsx("span",{className:"text-sm",children:"File Reference"}),S.jsx(eO,{addClass:"flex-1",text:i,textSettingFn:r})]})]}),S.jsx(Lt,{onClick:()=>o(),disabled:n===""||e===""||i===""||c,className:"lg:w-80 w-full mt-10",children:c?S.jsx(dn,{className:"animate-spin"}):"Add Text"})]})}function tG(n,t){const e=new Set;for(const s of t){let i=!1;for(const r of s.group_texts)r.id===n&&(i=!0);i&&e.add(s)}return console.log("res : ",e),Array.from(e)}function Fv(n,[t,e]){return Math.min(e,Math.max(t,n))}function eG(n,t){return _.useReducer((e,s)=>t[e][s]??e,n)}var B0="ScrollArea",[nO,qJ]=ys(B0),[nG,vs]=nO(B0),sO=_.forwardRef((n,t)=>{const{__scopeScrollArea:e,type:s="hover",dir:i,scrollHideDelay:r=600,...o}=n,[c,u]=_.useState(null),[h,f]=_.useState(null),[m,g]=_.useState(null),[v,b]=_.useState(null),[w,A]=_.useState(null),[E,C]=_.useState(0),[T,M]=_.useState(0),[P,k]=_.useState(!1),[D,N]=_.useState(!1),U=Ht(t,q=>u(q)),V=ul(i);return S.jsx(nG,{scope:e,type:s,dir:V,scrollHideDelay:r,scrollArea:c,viewport:h,onViewportChange:f,content:m,onContentChange:g,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:P,onScrollbarXEnabledChange:k,scrollbarY:w,onScrollbarYChange:A,scrollbarYEnabled:D,onScrollbarYEnabledChange:N,onCornerWidthChange:C,onCornerHeightChange:M,children:S.jsx(xt.div,{dir:V,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":T+"px",...n.style}})})});sO.displayName=B0;var iO="ScrollAreaViewport",rO=_.forwardRef((n,t)=>{const{__scopeScrollArea:e,children:s,nonce:i,...r}=n,o=vs(iO,e),c=_.useRef(null),u=Ht(t,c,o.onViewportChange);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),S.jsx(xt.div,{"data-radix-scroll-area-viewport":"",...r,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:S.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});rO.displayName=iO;var ii="ScrollAreaScrollbar",aO=_.forwardRef((n,t)=>{const{forceMount:e,...s}=n,i=vs(ii,n.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=i,c=n.orientation==="horizontal";return _.useEffect(()=>(c?r(!0):o(!0),()=>{c?r(!1):o(!1)}),[c,r,o]),i.type==="hover"?S.jsx(sG,{...s,ref:t,forceMount:e}):i.type==="scroll"?S.jsx(iG,{...s,ref:t,forceMount:e}):i.type==="auto"?S.jsx(oO,{...s,ref:t,forceMount:e}):i.type==="always"?S.jsx(U0,{...s,ref:t}):null});aO.displayName=ii;var sG=_.forwardRef((n,t)=>{const{forceMount:e,...s}=n,i=vs(ii,n.__scopeScrollArea),[r,o]=_.useState(!1);return _.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),S.jsx(vn,{present:e||r,children:S.jsx(oO,{"data-state":r?"visible":"hidden",...s,ref:t})})}),iG=_.forwardRef((n,t)=>{const{forceMount:e,...s}=n,i=vs(ii,n.__scopeScrollArea),r=n.orientation==="horizontal",o=Ap(()=>u("SCROLL_END"),100),[c,u]=eG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,u]),_.useEffect(()=>{const h=i.viewport,f=r?"scrollLeft":"scrollTop";if(h){let m=h[f];const g=()=>{const v=h[f];m!==v&&(u("SCROLL"),o()),m=v};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[i.viewport,r,u,o]),S.jsx(vn,{present:e||c!=="hidden",children:S.jsx(U0,{"data-state":c==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ct(n.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:ct(n.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),oO=_.forwardRef((n,t)=>{const e=vs(ii,n.__scopeScrollArea),{forceMount:s,...i}=n,[r,o]=_.useState(!1),c=n.orientation==="horizontal",u=Ap(()=>{if(e.viewport){const h=e.viewport.offsetWidth<e.viewport.scrollWidth,f=e.viewport.offsetHeight<e.viewport.scrollHeight;o(c?h:f)}},10);return Zo(e.viewport,u),Zo(e.content,u),S.jsx(vn,{present:s||r,children:S.jsx(U0,{"data-state":r?"visible":"hidden",...i,ref:t})})}),U0=_.forwardRef((n,t)=>{const{orientation:e="vertical",...s}=n,i=vs(ii,n.__scopeScrollArea),r=_.useRef(null),o=_.useRef(0),[c,u]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=hO(c.viewport,c.content),f={...s,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:g=>r.current=g,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:g=>o.current=g};function m(g,v){return uG(g,o.current,c,v)}return e==="horizontal"?S.jsx(rG,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&r.current){const g=i.viewport.scrollLeft,v=FE(g,c,i.dir);r.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=m(g,i.dir))}}):e==="vertical"?S.jsx(aG,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&r.current){const g=i.viewport.scrollTop,v=FE(g,c);r.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=m(g))}}):null}),rG=_.forwardRef((n,t)=>{const{sizes:e,onSizesChange:s,...i}=n,r=vs(ii,n.__scopeScrollArea),[o,c]=_.useState(),u=_.useRef(null),h=Ht(t,u,r.onScrollbarXChange);return _.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),S.jsx(cO,{"data-orientation":"horizontal",...i,ref:h,sizes:e,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sp(e)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(r.viewport){const g=r.viewport.scrollLeft+f.deltaX;n.onWheelScroll(g),pO(g,m)&&f.preventDefault()}},onResize:()=>{u.current&&r.viewport&&o&&s({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Af(o.paddingLeft),paddingEnd:Af(o.paddingRight)}})}})}),aG=_.forwardRef((n,t)=>{const{sizes:e,onSizesChange:s,...i}=n,r=vs(ii,n.__scopeScrollArea),[o,c]=_.useState(),u=_.useRef(null),h=Ht(t,u,r.onScrollbarYChange);return _.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),S.jsx(cO,{"data-orientation":"vertical",...i,ref:h,sizes:e,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sp(e)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(r.viewport){const g=r.viewport.scrollTop+f.deltaY;n.onWheelScroll(g),pO(g,m)&&f.preventDefault()}},onResize:()=>{u.current&&r.viewport&&o&&s({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Af(o.paddingTop),paddingEnd:Af(o.paddingBottom)}})}})}),[oG,lO]=nO(ii),cO=_.forwardRef((n,t)=>{const{__scopeScrollArea:e,sizes:s,hasThumb:i,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:f,onResize:m,...g}=n,v=vs(ii,e),[b,w]=_.useState(null),A=Ht(t,U=>w(U)),E=_.useRef(null),C=_.useRef(""),T=v.viewport,M=s.content-s.viewport,P=Ge(f),k=Ge(u),D=Ap(m,10);function N(U){if(E.current){const V=U.clientX-E.current.left,q=U.clientY-E.current.top;h({x:V,y:q})}}return _.useEffect(()=>{const U=V=>{const q=V.target;b?.contains(q)&&P(V,M)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[T,b,M,P]),_.useEffect(k,[s,k]),Zo(b,D),Zo(v.content,D),S.jsx(oG,{scope:e,scrollbar:b,hasThumb:i,onThumbChange:Ge(r),onThumbPointerUp:Ge(o),onThumbPositionChange:k,onThumbPointerDown:Ge(c),children:S.jsx(xt.div,{...g,ref:A,style:{position:"absolute",...g.style},onPointerDown:ct(n.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),E.current=b.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),N(U))}),onPointerMove:ct(n.onPointerMove,N),onPointerUp:ct(n.onPointerUp,U=>{const V=U.target;V.hasPointerCapture(U.pointerId)&&V.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=C.current,v.viewport&&(v.viewport.style.scrollBehavior=""),E.current=null})})})}),Sf="ScrollAreaThumb",uO=_.forwardRef((n,t)=>{const{forceMount:e,...s}=n,i=lO(Sf,n.__scopeScrollArea);return S.jsx(vn,{present:e||i.hasThumb,children:S.jsx(lG,{ref:t,...s})})}),lG=_.forwardRef((n,t)=>{const{__scopeScrollArea:e,style:s,...i}=n,r=vs(Sf,e),o=lO(Sf,e),{onThumbPositionChange:c}=o,u=Ht(t,m=>o.onThumbChange(m)),h=_.useRef(void 0),f=Ap(()=>{h.current&&(h.current(),h.current=void 0)},100);return _.useEffect(()=>{const m=r.viewport;if(m){const g=()=>{if(f(),!h.current){const v=dG(m,c);h.current=v,c()}};return c(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[r.viewport,f,c]),S.jsx(xt.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ct(n.onPointerDownCapture,m=>{const v=m.target.getBoundingClientRect(),b=m.clientX-v.left,w=m.clientY-v.top;o.onThumbPointerDown({x:b,y:w})}),onPointerUp:ct(n.onPointerUp,o.onThumbPointerUp)})});uO.displayName=Sf;var z0="ScrollAreaCorner",dO=_.forwardRef((n,t)=>{const e=vs(z0,n.__scopeScrollArea),s=!!(e.scrollbarX&&e.scrollbarY);return e.type!=="scroll"&&s?S.jsx(cG,{...n,ref:t}):null});dO.displayName=z0;var cG=_.forwardRef((n,t)=>{const{__scopeScrollArea:e,...s}=n,i=vs(z0,e),[r,o]=_.useState(0),[c,u]=_.useState(0),h=!!(r&&c);return Zo(i.scrollbarX,()=>{const f=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(f),u(f)}),Zo(i.scrollbarY,()=>{const f=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(f),o(f)}),h?S.jsx(xt.div,{...s,ref:t,style:{width:r,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Af(n){return n?parseInt(n,10):0}function hO(n,t){const e=n/t;return isNaN(e)?0:e}function Sp(n){const t=hO(n.viewport,n.content),e=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,s=(n.scrollbar.size-e)*t;return Math.max(s,18)}function uG(n,t,e,s="ltr"){const i=Sp(e),r=i/2,o=t||r,c=i-o,u=e.scrollbar.paddingStart+o,h=e.scrollbar.size-e.scrollbar.paddingEnd-c,f=e.content-e.viewport,m=s==="ltr"?[0,f]:[f*-1,0];return fO([u,h],m)(n)}function FE(n,t,e="ltr"){const s=Sp(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=t.scrollbar.size-i,o=t.content-t.viewport,c=r-s,u=e==="ltr"?[0,o]:[o*-1,0],h=Fv(n,u);return fO([0,o],[0,c])(h)}function fO(n,t){return e=>{if(n[0]===n[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(n[1]-n[0]);return t[0]+s*(e-n[0])}}function pO(n,t){return n>0&&n<t}var dG=(n,t=()=>{})=>{let e={left:n.scrollLeft,top:n.scrollTop},s=0;return(function i(){const r={left:n.scrollLeft,top:n.scrollTop},o=e.left!==r.left,c=e.top!==r.top;(o||c)&&t(),e=r,s=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(s)};function Ap(n,t){const e=Ge(n),s=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),_.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(e,t)},[e,t])}function Zo(n,t){const e=Ge(t);Pe(()=>{let s=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(e)});return i.observe(n),()=>{window.cancelAnimationFrame(s),i.unobserve(n)}}},[n,e])}var hG=sO,fG=rO,pG=dO;function mO({className:n,children:t,...e}){return S.jsxs(hG,{"data-slot":"scroll-area",className:Kt("relative",n),...e,children:[S.jsx(fG,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),S.jsx(mG,{}),S.jsx(pG,{})]})}function mG({className:n,orientation:t="vertical",...e}){return S.jsx(aO,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Kt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...e,children:S.jsx(uO,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function gG({group:n,textId:t}){const{addTextInGroup:e,isAddingInGroup:s}=IM({textId:t,groupId:n.id}),{library:i,setLibrary:r}=Yn(),{mode:o}=sn();function c(){if(o==="main")e();else{const u=i.texts.find(f=>f.id===t);if(u.importance="medium",!u)return;const h=i.groups.map(f=>f.id===n.id?{...f,group_texts:[...f.group_texts,u]}:f);r&&r({...i,groups:h})}}return S.jsxs("div",{className:"flex justify-between items-center gap-3 px-1 py-1",children:[S.jsxs("div",{className:"flex justify-center items-center gap-2",children:[S.jsx("p",{className:"font-semibold text-sm",children:n.name}),S.jsxs(Su,{variant:"outline",children:["# ",n.tag]})]}),S.jsx(Lt,{onClick:c,variant:"ghost",className:"text-green-400",children:s?S.jsx(dn,{className:"animate-spin"}):S.jsx(ti,{})})]})}function gO({text:n,presentInGroups:t,children:e}){const{library:s,isFetchingLibrary:i}=Yn(),[r,o]=_.useState(""),c=new Set(t.map(f=>f.id)),u=s.groups.filter(f=>!c.has(f.id)),h=fp(u,r,["name","tag"]);return i?S.jsx(Fu,{}):S.jsxs(ap,{children:[S.jsx(op,{asChild:!0,children:e}),S.jsxs(lp,{className:"max-w-xl p-6 space-y-4 flex flex-col gap-1",children:[S.jsxs(cp,{className:"border-b-2 border-border pb-5",children:[S.jsx(up,{children:"Add text in group"}),S.jsx(dp,{className:"text-sm text-muted-foreground",children:n.title})]}),S.jsx(ip,{querySetterFn:o,placeHolder:"Search groups to add...."}),S.jsx(mO,{className:"h-[300px] pr-2",children:S.jsx("div",{className:"space-y-2",children:h.length>0?h.map(f=>S.jsx(gG,{group:f,textId:n.id},f.id)):S.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-2 py-10",children:[S.jsx(S0,{className:"text-3xl text-muted-foreground"}),S.jsx("p",{className:"text-sm text-muted-foreground px-2",children:"No groups found."})]})})})]})]})}function yG({text:n}){return S.jsx("div",{className:"bg-card-dark border-1 border-border rounded-md w-[400px] max-w-[90vw] h-[150px] flex items-center justify-center",children:S.jsx(gO,{presentInGroups:[],text:n,children:S.jsxs(Lt,{variant:"ghost",className:"text-xl font-semibold text-muted-foreground h-full w-full",children:[S.jsx(ti,{}),"Add in first group"]})})})}function vG(n){return re({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M199.9 416h-63.8c-4.5 0-8.1-3.6-8.1-8V104c0-4.4 3.6-8 8.1-8h63.8c4.5 0 8.1 3.6 8.1 8v304c0 4.4-3.6 8-8.1 8zM375.9 416h-63.8c-4.5 0-8.1-3.6-8.1-8V104c0-4.4 3.6-8 8.1-8h63.8c4.5 0 8.1 3.6 8.1 8v304c0 4.4-3.6 8-8.1 8z"},child:[]}]})(n)}function yO(n){return re({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(n)}function bG({textId:n,group:t}){const e=nn(),{mode:s}=sn(),i=jb(t.id,s),{library:r,setLibrary:o}=Yn(),{removeFromGroup:c,isRemovingFromGroup:u}=FM({textId:n,groupId:t.id});function h(){if(s==="main"){if(u)return;c()}else{const f=r.groups.map(m=>m.id===t.id?{...m,group_texts:t.group_texts.filter(g=>g.id!==n)}:m);o&&o({...r,groups:f})}}return S.jsxs("div",{className:"bg-card-dark hover:bg-card transition-all duration-300 border-1 border-border rounded-md p-4 flex flex-col gap-2 cursor-pointer",children:[S.jsx("div",{className:"flex justify-between items-start gap-2",children:S.jsxs("div",{className:"flex flex-col gap-1 ",children:[S.jsx("p",{onClick:()=>e(i),className:"font-semibold",children:t.name}),S.jsxs("div",{className:"flex items-center text-muted-foreground text-[.8rem] gap-1",children:[S.jsx(Ff,{}),S.jsx("span",{className:"",children:t.tag})]})]})}),S.jsx("div",{className:"flex gap-2 justify-end mt-auto",children:S.jsx(Lt,{onClick:h,title:"Remove from this group",variant:"ghost",className:"text-destructive hover:text-destructive",children:u?S.jsx(dn,{className:"animate-spin"}):S.jsx(yO,{})})})]})}function wG({text:n,groups:t}){return S.jsxs("div",{className:"mt-10 flex flex-col gap-2",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("p",{className:"my-2",children:"Present in groups"}),S.jsx(gO,{text:n,presentInGroups:t,children:S.jsxs(Lt,{variant:"outline",children:[S.jsx(ti,{})," Add in group"]})})]}),t.length<=0?S.jsx(yG,{text:n}):S.jsx(hp,{addClass:"",children:t.map(e=>S.jsx(bG,{textId:n.id,group:e},e.id))})]})}var _p="Popover",[vO,WJ]=ys(_p,[fl]),Gu=fl(),[xG,Cr]=vO(_p),bO=n=>{const{__scopePopover:t,children:e,open:s,defaultOpen:i,onOpenChange:r,modal:o=!1}=n,c=Gu(t),u=_.useRef(null),[h,f]=_.useState(!1),[m,g]=pa({prop:s,defaultProp:i??!1,onChange:r,caller:_p});return S.jsx(Wb,{...c,children:S.jsx(xG,{scope:t,contentId:ds(),triggerRef:u,open:m,onOpenChange:g,onOpenToggle:_.useCallback(()=>g(v=>!v),[g]),hasCustomAnchor:h,onCustomAnchorAdd:_.useCallback(()=>f(!0),[]),onCustomAnchorRemove:_.useCallback(()=>f(!1),[]),modal:o,children:e})})};bO.displayName=_p;var wO="PopoverAnchor",SG=_.forwardRef((n,t)=>{const{__scopePopover:e,...s}=n,i=Cr(wO,e),r=Gu(e),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return _.useEffect(()=>(o(),()=>c()),[o,c]),S.jsx(Gf,{...r,...s,ref:t})});SG.displayName=wO;var xO="PopoverTrigger",SO=_.forwardRef((n,t)=>{const{__scopePopover:e,...s}=n,i=Cr(xO,e),r=Gu(e),o=Ht(t,i.triggerRef),c=S.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":CO(i.open),...s,ref:o,onClick:ct(n.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:S.jsx(Gf,{asChild:!0,...r,children:c})});SO.displayName=xO;var H0="PopoverPortal",[AG,_G]=vO(H0,{forceMount:void 0}),AO=n=>{const{__scopePopover:t,forceMount:e,children:s,container:i}=n,r=Cr(H0,t);return S.jsx(AG,{scope:t,forceMount:e,children:S.jsx(vn,{present:e||r.open,children:S.jsx(Tu,{asChild:!0,container:i,children:s})})})};AO.displayName=H0;var Jo="PopoverContent",_O=_.forwardRef((n,t)=>{const e=_G(Jo,n.__scopePopover),{forceMount:s=e.forceMount,...i}=n,r=Cr(Jo,n.__scopePopover);return S.jsx(vn,{present:s||r.open,children:r.modal?S.jsx(TG,{...i,ref:t}):S.jsx(CG,{...i,ref:t})})});_O.displayName=Jo;var EG=vr("PopoverContent.RemoveScroll"),TG=_.forwardRef((n,t)=>{const e=Cr(Jo,n.__scopePopover),s=_.useRef(null),i=Ht(t,s),r=_.useRef(!1);return _.useEffect(()=>{const o=s.current;if(o)return qf(o)},[]),S.jsx(Ru,{as:EG,allowPinchZoom:!0,children:S.jsx(EO,{...n,ref:i,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ct(n.onCloseAutoFocus,o=>{o.preventDefault(),r.current||e.triggerRef.current?.focus()}),onPointerDownOutside:ct(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;r.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:ct(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),CG=_.forwardRef((n,t)=>{const e=Cr(Jo,n.__scopePopover),s=_.useRef(!1),i=_.useRef(!1);return S.jsx(EO,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{n.onCloseAutoFocus?.(r),r.defaultPrevented||(s.current||e.triggerRef.current?.focus(),r.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:r=>{n.onInteractOutside?.(r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;e.triggerRef.current?.contains(o)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),EO=_.forwardRef((n,t)=>{const{__scopePopover:e,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:r,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...m}=n,g=Cr(Jo,e),v=Gu(e);return Uf(),S.jsx(_u,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:r,children:S.jsx(Au,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>g.onOpenChange(!1),children:S.jsx(Kb,{"data-state":CO(g.open),role:"dialog",id:g.contentId,...v,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),TO="PopoverClose",RG=_.forwardRef((n,t)=>{const{__scopePopover:e,...s}=n,i=Cr(TO,e);return S.jsx(xt.button,{type:"button",...s,ref:t,onClick:ct(n.onClick,()=>i.onOpenChange(!1))})});RG.displayName=TO;var MG="PopoverArrow",PG=_.forwardRef((n,t)=>{const{__scopePopover:e,...s}=n,i=Gu(e);return S.jsx(Yb,{...i,...s,ref:t})});PG.displayName=MG;function CO(n){return n?"open":"closed"}var OG=bO,kG=SO,DG=AO,NG=_O;function LG({...n}){return S.jsx(OG,{"data-slot":"popover",...n})}function jG({...n}){return S.jsx(kG,{"data-slot":"popover-trigger",...n})}function IG({className:n,align:t="center",sideOffset:e=4,...s}){return S.jsx(DG,{children:S.jsx(NG,{"data-slot":"popover-content",align:t,sideOffset:e,className:Kt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),...s})})}function BE(n){return re({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"},child:[]}]})(n)}function RO({deleteFn:n,isDeleting:t}){return S.jsxs(LG,{children:[S.jsx(jG,{asChild:!0,children:S.jsx(Lt,{variant:"ghost",className:"text-red-500 hover:text-red-500",children:S.jsx(BE,{})})}),S.jsx(IG,{asChild:!0,children:S.jsxs("div",{className:"flex flex-col gap-4",children:[S.jsx("p",{children:"Confirm delete"}),S.jsxs(Lt,{onClick:()=>n(),variant:"secondary",className:"text-destructive hover:text-destructive",children:["Delete ",t?S.jsx(dn,{className:"animate-spin"}):S.jsx(BE,{})]})]})})]})}function UE(){const{mode:n}=sn(),{id:t}=Rb(),{library:e,isFetchingLibrary:s}=Yn(),i=nn(),{startText:r}=Iu(),{deleteText:o,isDeletingText:c}=yH(t??"");function u(){n==="main"?o():(e.texts=e.texts.filter(v=>v.id!==t),i(cl(n)))}function h(){i(AR(t??"",n))}let f;if(n==="main"?f=e.texts.find(v=>v.id===t):f=m0.texts.find(v=>v.id===t),s)return S.jsx("div",{className:"min-h-lg",children:S.jsx(dn,{className:"animate-spin",size:"3rem"})});if(!f||!t)return S.jsx("h1",{className:"text-heading",children:"Text not found in your library"});function m(){f&&(r(f),i(Ko(n)))}const g=tG(f.id,e.groups);return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-5 md:gap-3",children:[S.jsxs("div",{className:"flex flex-col",children:[S.jsx("h1",{className:"text-heading-lg font-bold mb-2 break-words",children:f.title}),S.jsxs(Su,{className:"text-[.9rem] w-fit",variant:"secondary",children:["# ",f.tag]})]}),S.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S.jsxs(Lt,{onClick:m,title:"Type this text only",variant:"secondary",children:[S.jsx(kV,{})," Type"]}),S.jsx(Lt,{variant:"ghost",className:"hover:text-primary",onClick:h,children:S.jsx(RR,{})}),S.jsx(RO,{deleteFn:u,isDeleting:c})]})]}),S.jsx("div",{className:"max-h-[80vh] scrollbar-custom overflow-y-auto mt-10",children:S.jsx("p",{className:"leading-relaxed text-base [word-spacing:.2em] break-words",children:f.text})}),S.jsx(wG,{text:f,groups:g})]})}function MO({text:n}){return S.jsxs("div",{className:"min-h-[500px] flex items-center justify-center gap-2",children:[S.jsx(_V,{className:"text-4xl text-base"}),S.jsx("h1",{className:"text-3xl",children:n})]})}function zE(){const{id:n}=Rb(),{library:t,isFetchingLibrary:e,setLibrary:s}=Yn(),{mode:i}=sn(),r=nn(),o=t?.texts?.find(E=>E.id===n),[c,u]=_.useState(""),[h,f]=_.useState(""),[m,g]=_.useState(""),{editText:v,isEditingText:b}=pH({text:m,title:c,tag:h,textId:n??""});function w(){if(i==="main")v();else{const E=t.texts.map(C=>C.id===n?{...C,title:c,tag:h,text:m}:C);s&&s({...t,texts:E}),r(If(n??"",i))}}if(_.useEffect(()=>{o&&(u(o.title),f(o.tag),g(o.text))},[o]),e)return S.jsx(Fu,{});if(!o||!n)return S.jsx(MO,{text:"Text not found"});const A=!c||!h||!m;return S.jsxs(S.Fragment,{children:[S.jsx("h1",{className:"text-heading",children:"Edit Text"}),S.jsx("p",{className:"text-subheading mt-1",children:"Edit text freely by opening any file on the side"}),S.jsxs("div",{className:"flex flex-col md:flex-row justify-between mt-10 min-h-[400px] gap-10",children:[S.jsx(xP,{text:m,title:c,tag:h,setText:g,setTitle:u,setTag:f,addClass:"flex-3"}),S.jsxs("div",{className:"flex-2 flex flex-col gap-2",children:[S.jsx("span",{className:"text-sm",children:"File Reference"}),S.jsx(eO,{addClass:"flex-1",text:m,textSettingFn:g})]})]}),S.jsx(Lt,{onClick:w,disabled:A||b,className:"md:w-80 w-full mt-10",children:b?S.jsx(dn,{className:"animate-spin"}):"Update Text"})]})}function FG({groupId:n,text:t}){const{mode:e}=sn(),{library:s,setLibrary:i}=Yn(),{addTextInGroup:r,isAddingInGroup:o}=IM({groupId:n,textId:t.id});function c(){if(e==="main")r();else{const u=s.groups.map(h=>h.id===n?{...h,group_texts:[...h.group_texts,t]}:h);i&&i({...s,groups:u})}}return S.jsxs("div",{className:"flex justify-between items-center gap-3 px-1 py-1",children:[S.jsxs("div",{className:"flex justify-center items-center gap-2",children:[S.jsx("p",{className:"font-semibold text-sm",children:t.title}),S.jsxs(Su,{variant:"outline",children:["# ",t.tag]})]}),S.jsx(Lt,{onClick:c,variant:"ghost",className:"text-green-400",children:o?S.jsx(dn,{className:"animate-spin"}):S.jsx(ti,{})})]})}function PO({group:n,children:t}){const{library:e,isFetchingLibrary:s}=Yn(),[i,r]=_.useState(""),o=new Set(n.group_texts.map(h=>h.id)),c=e.texts.filter(h=>!o.has(h.id)),u=fp(c,i,["title","tag"]);return s?null:S.jsxs(ap,{children:[S.jsx(op,{asChild:!0,children:t}),S.jsxs(lp,{className:"max-w-xl p-6 space-y-4 flex flex-col gap-1",children:[S.jsxs(cp,{className:"border-b-2 border-border pb-5",children:[S.jsx(up,{children:"Add text in group"}),S.jsx(dp,{className:"text-sm text-muted-foreground",children:n.name})]}),S.jsx(ip,{querySetterFn:r,placeHolder:"Search texts...."}),S.jsx(mO,{className:"h-[300px] pr-2",children:S.jsx("div",{className:"space-y-2",children:u.length>0?u.map(h=>S.jsx(FG,{text:h,groupId:n.id},h.id)):S.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-2 py-10",children:[S.jsx(S0,{className:"text-3xl text-muted-foreground"}),S.jsx("p",{className:"text-sm text-muted-foreground px-2",children:"No texts found."})]})})})]})]})}function BG({group:n}){return S.jsx("div",{className:"bg-card-dark border-1 border-border rounded-md w-[400px] max-w-[90vw] h-[150px] flex items-center justify-center",children:S.jsx(PO,{group:n,children:S.jsxs(Lt,{variant:"ghost",className:"text-xl font-semibold text-muted-foreground h-full w-full",children:[S.jsx(ti,{}),"Add First Text"]})})})}function UG(n){const t=_.useRef({value:n,previous:n});return _.useMemo(()=>(t.current.value!==n&&(t.current.previous=t.current.value,t.current.value=n),t.current.previous),[n])}var OO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zG="VisuallyHidden",HG=_.forwardRef((n,t)=>S.jsx(xt.span,{...n,ref:t,style:{...OO,...n.style}}));HG.displayName=zG;var VG=[" ","Enter","ArrowUp","ArrowDown"],$G=[" ","Enter"],xa="Select",[Ep,Tp,GG]=Bf(xa),[bl,KJ]=ys(xa,[GG,fl]),Cp=fl(),[qG,Rr]=bl(xa),[WG,KG]=bl(xa),kO=n=>{const{__scopeSelect:t,children:e,open:s,defaultOpen:i,onOpenChange:r,value:o,defaultValue:c,onValueChange:u,dir:h,name:f,autoComplete:m,disabled:g,required:v,form:b}=n,w=Cp(t),[A,E]=_.useState(null),[C,T]=_.useState(null),[M,P]=_.useState(!1),k=ul(h),[D,N]=pa({prop:s,defaultProp:i??!1,onChange:r,caller:xa}),[U,V]=pa({prop:o,defaultProp:c,onChange:u,caller:xa}),q=_.useRef(null),it=A?b||!!A.closest("form"):!0,[at,rt]=_.useState(new Set),lt=Array.from(at).map(j=>j.props.value).join(";");return S.jsx(Wb,{...w,children:S.jsxs(qG,{required:v,scope:t,trigger:A,onTriggerChange:E,valueNode:C,onValueNodeChange:T,valueNodeHasChildren:M,onValueNodeHasChildrenChange:P,contentId:ds(),value:U,onValueChange:V,open:D,onOpenChange:N,dir:k,triggerPointerDownPosRef:q,disabled:g,children:[S.jsx(Ep.Provider,{scope:t,children:S.jsx(WG,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(j=>{rt(I=>new Set(I).add(j))},[]),onNativeOptionRemove:_.useCallback(j=>{rt(I=>{const F=new Set(I);return F.delete(j),F})},[]),children:e})}),it?S.jsxs(tk,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:m,value:U,onChange:j=>V(j.target.value),disabled:g,form:b,children:[U===void 0?S.jsx("option",{value:""}):null,Array.from(at)]},lt):null]})})};kO.displayName=xa;var DO="SelectTrigger",NO=_.forwardRef((n,t)=>{const{__scopeSelect:e,disabled:s=!1,...i}=n,r=Cp(e),o=Rr(DO,e),c=o.disabled||s,u=Ht(t,o.onTriggerChange),h=Tp(e),f=_.useRef("touch"),[m,g,v]=nk(w=>{const A=h().filter(T=>!T.disabled),E=A.find(T=>T.value===o.value),C=sk(A,w,E);C!==void 0&&o.onValueChange(C.value)}),b=w=>{c||(o.onOpenChange(!0),v()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return S.jsx(Gf,{asChild:!0,...r,children:S.jsx(xt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":ek(o.value)?"":void 0,...i,ref:u,onClick:ct(i.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&b(w)}),onPointerDown:ct(i.onPointerDown,w=>{f.current=w.pointerType;const A=w.target;A.hasPointerCapture(w.pointerId)&&A.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(b(w),w.preventDefault())}),onKeyDown:ct(i.onKeyDown,w=>{const A=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&g(w.key),!(A&&w.key===" ")&&VG.includes(w.key)&&(b(),w.preventDefault())})})})});NO.displayName=DO;var LO="SelectValue",jO=_.forwardRef((n,t)=>{const{__scopeSelect:e,className:s,style:i,children:r,placeholder:o="",...c}=n,u=Rr(LO,e),{onValueNodeHasChildrenChange:h}=u,f=r!==void 0,m=Ht(t,u.onValueNodeChange);return Pe(()=>{h(f)},[h,f]),S.jsx(xt.span,{...c,ref:m,style:{pointerEvents:"none"},children:ek(u.value)?S.jsx(S.Fragment,{children:o}):r})});jO.displayName=LO;var YG="SelectIcon",IO=_.forwardRef((n,t)=>{const{__scopeSelect:e,children:s,...i}=n;return S.jsx(xt.span,{"aria-hidden":!0,...i,ref:t,children:s||"▼"})});IO.displayName=YG;var XG="SelectPortal",FO=n=>S.jsx(Tu,{asChild:!0,...n});FO.displayName=XG;var Sa="SelectContent",BO=_.forwardRef((n,t)=>{const e=Rr(Sa,n.__scopeSelect),[s,i]=_.useState();if(Pe(()=>{i(new DocumentFragment)},[]),!e.open){const r=s;return r?wu.createPortal(S.jsx(UO,{scope:n.__scopeSelect,children:S.jsx(Ep.Slot,{scope:n.__scopeSelect,children:S.jsx("div",{children:n.children})})}),r):null}return S.jsx(zO,{...n,ref:t})});BO.displayName=Sa;var As=10,[UO,Mr]=bl(Sa),QG="SelectContentImpl",ZG=vr("SelectContent.RemoveScroll"),zO=_.forwardRef((n,t)=>{const{__scopeSelect:e,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:o,side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:v,sticky:b,hideWhenDetached:w,avoidCollisions:A,...E}=n,C=Rr(Sa,e),[T,M]=_.useState(null),[P,k]=_.useState(null),D=Ht(t,J=>M(J)),[N,U]=_.useState(null),[V,q]=_.useState(null),it=Tp(e),[at,rt]=_.useState(!1),lt=_.useRef(!1);_.useEffect(()=>{if(T)return qf(T)},[T]),Uf();const j=_.useCallback(J=>{const[ft,...jt]=it().map(Gt=>Gt.ref.current),[zt]=jt.slice(-1),It=document.activeElement;for(const Gt of J)if(Gt===It||(Gt?.scrollIntoView({block:"nearest"}),Gt===ft&&P&&(P.scrollTop=0),Gt===zt&&P&&(P.scrollTop=P.scrollHeight),Gt?.focus(),document.activeElement!==It))return},[it,P]),I=_.useCallback(()=>j([N,T]),[j,N,T]);_.useEffect(()=>{at&&I()},[at,I]);const{onOpenChange:F,triggerPointerDownPosRef:W}=C;_.useEffect(()=>{if(T){let J={x:0,y:0};const ft=zt=>{J={x:Math.abs(Math.round(zt.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(zt.pageY)-(W.current?.y??0))}},jt=zt=>{J.x<=10&&J.y<=10?zt.preventDefault():T.contains(zt.target)||F(!1),document.removeEventListener("pointermove",ft),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ft),document.addEventListener("pointerup",jt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ft),document.removeEventListener("pointerup",jt,{capture:!0})}}},[T,F,W]),_.useEffect(()=>{const J=()=>F(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[F]);const[L,K]=nk(J=>{const ft=it().filter(It=>!It.disabled),jt=ft.find(It=>It.ref.current===document.activeElement),zt=sk(ft,J,jt);zt&&setTimeout(()=>zt.ref.current.focus())}),nt=_.useCallback((J,ft,jt)=>{const zt=!lt.current&&!jt;(C.value!==void 0&&C.value===ft||zt)&&(U(J),zt&&(lt.current=!0))},[C.value]),Z=_.useCallback(()=>T?.focus(),[T]),ot=_.useCallback((J,ft,jt)=>{const zt=!lt.current&&!jt;(C.value!==void 0&&C.value===ft||zt)&&q(J)},[C.value]),ht=s==="popper"?Bv:HO,ut=ht===Bv?{side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:v,sticky:b,hideWhenDetached:w,avoidCollisions:A}:{};return S.jsx(UO,{scope:e,content:T,viewport:P,onViewportChange:k,itemRefCallback:nt,selectedItem:N,onItemLeave:Z,itemTextRefCallback:ot,focusSelectedItem:I,selectedItemText:V,position:s,isPositioned:at,searchRef:L,children:S.jsx(Ru,{as:ZG,allowPinchZoom:!0,children:S.jsx(_u,{asChild:!0,trapped:C.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:ct(i,J=>{C.trigger?.focus({preventScroll:!0}),J.preventDefault()}),children:S.jsx(Au,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:S.jsx(ht,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:J=>J.preventDefault(),...E,...ut,onPlaced:()=>rt(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ct(E.onKeyDown,J=>{const ft=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ft&&J.key.length===1&&K(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let zt=it().filter(It=>!It.disabled).map(It=>It.ref.current);if(["ArrowUp","End"].includes(J.key)&&(zt=zt.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const It=J.target,Gt=zt.indexOf(It);zt=zt.slice(Gt+1)}setTimeout(()=>j(zt)),J.preventDefault()}})})})})})})});zO.displayName=QG;var JG="SelectItemAlignedPosition",HO=_.forwardRef((n,t)=>{const{__scopeSelect:e,onPlaced:s,...i}=n,r=Rr(Sa,e),o=Mr(Sa,e),[c,u]=_.useState(null),[h,f]=_.useState(null),m=Ht(t,D=>f(D)),g=Tp(e),v=_.useRef(!1),b=_.useRef(!0),{viewport:w,selectedItem:A,selectedItemText:E,focusSelectedItem:C}=o,T=_.useCallback(()=>{if(r.trigger&&r.valueNode&&c&&h&&w&&A&&E){const D=r.trigger.getBoundingClientRect(),N=h.getBoundingClientRect(),U=r.valueNode.getBoundingClientRect(),V=E.getBoundingClientRect();if(r.dir!=="rtl"){const It=V.left-N.left,Gt=U.left-It,Oe=D.left-Gt,Nn=D.width+Oe,Al=Math.max(Nn,N.width),_l=window.innerWidth-As,wn=Fv(Gt,[As,Math.max(As,_l-Al)]);c.style.minWidth=Nn+"px",c.style.left=wn+"px"}else{const It=N.right-V.right,Gt=window.innerWidth-U.right-It,Oe=window.innerWidth-D.right-Gt,Nn=D.width+Oe,Al=Math.max(Nn,N.width),_l=window.innerWidth-As,wn=Fv(Gt,[As,Math.max(As,_l-Al)]);c.style.minWidth=Nn+"px",c.style.right=wn+"px"}const q=g(),it=window.innerHeight-As*2,at=w.scrollHeight,rt=window.getComputedStyle(h),lt=parseInt(rt.borderTopWidth,10),j=parseInt(rt.paddingTop,10),I=parseInt(rt.borderBottomWidth,10),F=parseInt(rt.paddingBottom,10),W=lt+j+at+F+I,L=Math.min(A.offsetHeight*5,W),K=window.getComputedStyle(w),nt=parseInt(K.paddingTop,10),Z=parseInt(K.paddingBottom,10),ot=D.top+D.height/2-As,ht=it-ot,ut=A.offsetHeight/2,J=A.offsetTop+ut,ft=lt+j+J,jt=W-ft;if(ft<=ot){const It=q.length>0&&A===q[q.length-1].ref.current;c.style.bottom="0px";const Gt=h.clientHeight-w.offsetTop-w.offsetHeight,Oe=Math.max(ht,ut+(It?Z:0)+Gt+I),Nn=ft+Oe;c.style.height=Nn+"px"}else{const It=q.length>0&&A===q[0].ref.current;c.style.top="0px";const Oe=Math.max(ot,lt+w.offsetTop+(It?nt:0)+ut)+jt;c.style.height=Oe+"px",w.scrollTop=ft-ot+w.offsetTop}c.style.margin=`${As}px 0`,c.style.minHeight=L+"px",c.style.maxHeight=it+"px",s?.(),requestAnimationFrame(()=>v.current=!0)}},[g,r.trigger,r.valueNode,c,h,w,A,E,r.dir,s]);Pe(()=>T(),[T]);const[M,P]=_.useState();Pe(()=>{h&&P(window.getComputedStyle(h).zIndex)},[h]);const k=_.useCallback(D=>{D&&b.current===!0&&(T(),C?.(),b.current=!1)},[T,C]);return S.jsx(e9,{scope:e,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:k,children:S.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:S.jsx(xt.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});HO.displayName=JG;var t9="SelectPopperPosition",Bv=_.forwardRef((n,t)=>{const{__scopeSelect:e,align:s="start",collisionPadding:i=As,...r}=n,o=Cp(e);return S.jsx(Kb,{...o,...r,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Bv.displayName=t9;var[e9,V0]=bl(Sa,{}),Uv="SelectViewport",VO=_.forwardRef((n,t)=>{const{__scopeSelect:e,nonce:s,...i}=n,r=Mr(Uv,e),o=V0(Uv,e),c=Ht(t,r.onViewportChange),u=_.useRef(0);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),S.jsx(Ep.Slot,{scope:e,children:S.jsx(xt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ct(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=o;if(g?.current&&m){const v=Math.abs(u.current-f.scrollTop);if(v>0){const b=window.innerHeight-As*2,w=parseFloat(m.style.minHeight),A=parseFloat(m.style.height),E=Math.max(w,A);if(E<b){const C=E+v,T=Math.min(b,C),M=C-T;m.style.height=T+"px",m.style.bottom==="0px"&&(f.scrollTop=M>0?M:0,m.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});VO.displayName=Uv;var $O="SelectGroup",[n9,s9]=bl($O),i9=_.forwardRef((n,t)=>{const{__scopeSelect:e,...s}=n,i=ds();return S.jsx(n9,{scope:e,id:i,children:S.jsx(xt.div,{role:"group","aria-labelledby":i,...s,ref:t})})});i9.displayName=$O;var GO="SelectLabel",r9=_.forwardRef((n,t)=>{const{__scopeSelect:e,...s}=n,i=s9(GO,e);return S.jsx(xt.div,{id:i.id,...s,ref:t})});r9.displayName=GO;var _f="SelectItem",[a9,qO]=bl(_f),WO=_.forwardRef((n,t)=>{const{__scopeSelect:e,value:s,disabled:i=!1,textValue:r,...o}=n,c=Rr(_f,e),u=Mr(_f,e),h=c.value===s,[f,m]=_.useState(r??""),[g,v]=_.useState(!1),b=Ht(t,C=>u.itemRefCallback?.(C,s,i)),w=ds(),A=_.useRef("touch"),E=()=>{i||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.jsx(a9,{scope:e,value:s,disabled:i,textId:w,isSelected:h,onItemTextChange:_.useCallback(C=>{m(T=>T||(C?.textContent??"").trim())},[]),children:S.jsx(Ep.ItemSlot,{scope:e,value:s,disabled:i,textValue:f,children:S.jsx(xt.div,{role:"option","aria-labelledby":w,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:b,onFocus:ct(o.onFocus,()=>v(!0)),onBlur:ct(o.onBlur,()=>v(!1)),onClick:ct(o.onClick,()=>{A.current!=="mouse"&&E()}),onPointerUp:ct(o.onPointerUp,()=>{A.current==="mouse"&&E()}),onPointerDown:ct(o.onPointerDown,C=>{A.current=C.pointerType}),onPointerMove:ct(o.onPointerMove,C=>{A.current=C.pointerType,i?u.onItemLeave?.():A.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ct(o.onPointerLeave,C=>{C.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:ct(o.onKeyDown,C=>{u.searchRef?.current!==""&&C.key===" "||($G.includes(C.key)&&E(),C.key===" "&&C.preventDefault())})})})})});WO.displayName=_f;var zc="SelectItemText",KO=_.forwardRef((n,t)=>{const{__scopeSelect:e,className:s,style:i,...r}=n,o=Rr(zc,e),c=Mr(zc,e),u=qO(zc,e),h=KG(zc,e),[f,m]=_.useState(null),g=Ht(t,E=>m(E),u.onItemTextChange,E=>c.itemTextRefCallback?.(E,u.value,u.disabled)),v=f?.textContent,b=_.useMemo(()=>S.jsx("option",{value:u.value,disabled:u.disabled,children:v},u.value),[u.disabled,u.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:A}=h;return Pe(()=>(w(b),()=>A(b)),[w,A,b]),S.jsxs(S.Fragment,{children:[S.jsx(xt.span,{id:u.textId,...r,ref:g}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wu.createPortal(r.children,o.valueNode):null]})});KO.displayName=zc;var YO="SelectItemIndicator",XO=_.forwardRef((n,t)=>{const{__scopeSelect:e,...s}=n;return qO(YO,e).isSelected?S.jsx(xt.span,{"aria-hidden":!0,...s,ref:t}):null});XO.displayName=YO;var zv="SelectScrollUpButton",QO=_.forwardRef((n,t)=>{const e=Mr(zv,n.__scopeSelect),s=V0(zv,n.__scopeSelect),[i,r]=_.useState(!1),o=Ht(t,s.onScrollButtonChange);return Pe(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=u.scrollTop>0;r(h)};const u=e.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),i?S.jsx(JO,{...n,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=e;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});QO.displayName=zv;var Hv="SelectScrollDownButton",ZO=_.forwardRef((n,t)=>{const e=Mr(Hv,n.__scopeSelect),s=V0(Hv,n.__scopeSelect),[i,r]=_.useState(!1),o=Ht(t,s.onScrollButtonChange);return Pe(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;r(f)};const u=e.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),i?S.jsx(JO,{...n,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=e;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});ZO.displayName=Hv;var JO=_.forwardRef((n,t)=>{const{__scopeSelect:e,onAutoScroll:s,...i}=n,r=Mr("SelectScrollButton",e),o=_.useRef(null),c=Tp(e),u=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>u(),[u]),Pe(()=>{c().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),S.jsx(xt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:ct(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:ct(i.onPointerMove,()=>{r.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:ct(i.onPointerLeave,()=>{u()})})}),o9="SelectSeparator",l9=_.forwardRef((n,t)=>{const{__scopeSelect:e,...s}=n;return S.jsx(xt.div,{"aria-hidden":!0,...s,ref:t})});l9.displayName=o9;var Vv="SelectArrow",c9=_.forwardRef((n,t)=>{const{__scopeSelect:e,...s}=n,i=Cp(e),r=Rr(Vv,e),o=Mr(Vv,e);return r.open&&o.position==="popper"?S.jsx(Yb,{...i,...s,ref:t}):null});c9.displayName=Vv;var u9="SelectBubbleInput",tk=_.forwardRef(({__scopeSelect:n,value:t,...e},s)=>{const i=_.useRef(null),r=Ht(s,i),o=UG(t);return _.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const m=new Event("change",{bubbles:!0});f.call(c,t),c.dispatchEvent(m)}},[o,t]),S.jsx(xt.select,{...e,style:{...OO,...e.style},ref:r,defaultValue:t})});tk.displayName=u9;function ek(n){return n===""||n===void 0}function nk(n){const t=Ge(n),e=_.useRef(""),s=_.useRef(0),i=_.useCallback(o=>{const c=e.current+o;t(c),(function u(h){e.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>u(""),1e3))})(c)},[t]),r=_.useCallback(()=>{e.current="",window.clearTimeout(s.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),[e,i,r]}function sk(n,t,e){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,r=e?n.indexOf(e):-1;let o=d9(n,Math.max(r,0));i.length===1&&(o=o.filter(h=>h!==e));const u=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==e?u:void 0}function d9(n,t){return n.map((e,s)=>n[(t+s)%n.length])}var h9=kO,f9=NO,p9=jO,m9=IO,g9=FO,y9=BO,v9=VO,b9=WO,w9=KO,x9=XO,S9=QO,A9=ZO;function _9({...n}){return S.jsx(h9,{"data-slot":"select",...n})}function E9({...n}){return S.jsx(p9,{"data-slot":"select-value",...n})}function T9({className:n,size:t="default",children:e,...s}){return S.jsxs(f9,{"data-slot":"select-trigger","data-size":t,className:Kt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...s,children:[e,S.jsx(m9,{asChild:!0,children:S.jsx(G2,{className:"size-4 opacity-50"})})]})}function C9({className:n,children:t,position:e="popper",...s}){return S.jsx(g9,{children:S.jsxs(y9,{"data-slot":"select-content",className:Kt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:e,...s,children:[S.jsx(R9,{}),S.jsx(v9,{className:Kt("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),S.jsx(M9,{})]})})}function Ty({className:n,children:t,...e}){return S.jsxs(b9,{"data-slot":"select-item",className:Kt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...e,children:[S.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:S.jsx(x9,{children:S.jsx(GU,{className:"size-4"})})}),S.jsx(w9,{children:t})]})}function R9({className:n,...t}){return S.jsx(S9,{"data-slot":"select-scroll-up-button",className:Kt("flex cursor-default items-center justify-center py-1",n),...t,children:S.jsx(KU,{className:"size-4"})})}function M9({className:n,...t}){return S.jsx(A9,{"data-slot":"select-scroll-down-button",className:Kt("flex cursor-default items-center justify-center py-1",n),...t,children:S.jsx(G2,{className:"size-4"})})}function P9({text:n,groupId:t}){const[e,s]=_.useState(""),{updateImportance:i,isUpdatingImportance:r}=mH({textId:n.id,groupId:t,importance:e}),{removeFromGroup:o,isRemovingFromGroup:c}=FM({textId:n.id,groupId:t}),u=nn(),{mode:h}=sn(),{library:f,setLibrary:m}=Yn();_.useEffect(()=>{s(n.importance??"medium")},[s,n.importance]);let g;e==="medium"?g="text-yellow-300":e==="high"?g="text-red-400":g="text-green-300";const v=If(n.id,h),b=AR(n.id,h);function w(E){if(h==="main"){if(r)return;i()}else{n.importance=E;const C=f.groups.find(M=>M.id===t);if(!C)return;C.group_texts.map(M=>M.id===n.id?n:M);const T=f.groups.map(M=>M.id===t?C:M);m&&m({...f,groups:T})}s(E)}function A(){if(h==="main"){if(c)return;o()}else{const E=f.groups.find(T=>T.id===t);if(!E)return;E.group_texts=E.group_texts.filter(T=>T.id!==n.id);const C=f.groups.map(T=>T.id===t?E:T);m&&m({...f,groups:C})}}return S.jsxs("div",{className:"bg-card-dark hover:bg-card transition-all duration-300 border-1 border-border rounded-md p-4 flex flex-col gap-2 cursor-pointer",children:[S.jsx("div",{className:"flex justify-between items-start gap-2",children:S.jsxs("div",{className:"flex flex-col gap-1 ",children:[S.jsx("p",{onClick:()=>u(v),className:"font-semibold",children:n.title}),S.jsxs("div",{className:"flex items-center text-muted-foreground text-[.8rem] gap-1",children:[S.jsx(Ff,{}),S.jsx("span",{className:"",children:n.tag})]})]})}),S.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-1 items-center mt-auto",children:[S.jsx("span",{className:"text-muted-foreground text-[.8rem]",children:"Importance : "}),r?S.jsxs("p",{className:"flex items-center gap-2 text-md",children:[S.jsx("span",{children:"Updating"})," ",S.jsx(dn,{className:"animate-spin"})]}):S.jsxs(_9,{value:e,onValueChange:w,children:[S.jsx(T9,{className:"w-full border-0 font-semibold "+g,children:S.jsx(E9,{placeholder:"Importance"})}),S.jsxs(C9,{children:[S.jsx(Ty,{value:"high",className:"text-red-300",children:"High"}),S.jsx(Ty,{value:"medium",className:"text-yellow-300",children:"Medium"}),S.jsx(Ty,{value:"low",className:"text-green-400",children:"Low"})]})]})]}),S.jsxs("div",{className:"flex gap-2 justify-end mt-auto",children:[S.jsx(Lt,{onClick:()=>u(b),variant:"ghost",className:"",children:S.jsx(RR,{})}),S.jsx(Lt,{onClick:A,variant:"ghost",className:"text-destructive hover:text-destructive",children:c?S.jsx(dn,{className:"animate-spin text-red-500"}):S.jsx(yO,{})})]})]})}function HE(){const{mode:n}=sn(),[t,e]=_.useState(!1),{id:s}=Rb(),{library:i,isFetchingLibrary:r}=Yn(),{startGroup:o}=Iu(),{deleteGroup:c,isDeletingGroup:u}=vH(s??""),h=x0(c,n),f=nn();if(r)return S.jsx(Fu,{});const m=i.groups.find(v=>v.id===s);if(!s||!m)return S.jsx(MO,{text:"Group not found"});function g(){if(m){if(!m.group_texts||m.group_texts.length<=0){ps.error("Group is empty, please add text to type.");return}e(!0),o(m),f(Ko(n))}}return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-5 md:gap-3",children:[S.jsxs("div",{className:"flex flex-col",children:[S.jsxs("h1",{className:"text-heading font-bold mb-2 flex items-center gap-2 break-words",children:[S.jsx(Fb,{}),m.name]}),S.jsxs(Su,{className:"text-[.9rem] w-fit",variant:"secondary",children:["# ",m.tag]})]}),S.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S.jsxs(Lt,{onClick:g,variant:"secondary",children:[S.jsx(RF,{}),t&&S.jsx(dn,{className:"animate-spin"})," Type"]}),S.jsx(PO,{group:m,children:S.jsxs(Lt,{variant:"ghost",children:[S.jsx(ti,{})," Add Text"]})}),S.jsx(RO,{deleteFn:h,isDeleting:u})]})]}),S.jsxs("p",{className:"text-section-title text-muted-foreground mt-10",children:[S.jsx("span",{className:"",children:m.group_texts.length})," ","Text"+(m.group_texts.length<=1?"":"s")," "]}),S.jsx("div",{className:"flex flex-col mt-10 gap-2",children:S.jsx("div",{className:"flex flex-col gap-4",children:m.group_texts.length<=0?S.jsx(BG,{group:m}):S.jsx(hp,{children:m.group_texts.map(v=>S.jsx(P9,{text:v,groupId:m.id},v.id))})})})]})}const ik=_.createContext({});function rk(n){const t=_.useRef(null);return t.current===null&&(t.current=n()),t.current}const $0=typeof window<"u",O9=$0?_.useLayoutEffect:_.useEffect,G0=_.createContext(null);function q0(n,t){n.indexOf(t)===-1&&n.push(t)}function Rp(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Di=(n,t,e)=>e>t?t:e<n?n:e;let W0=()=>{};const Ni={},ak=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ok(n){return typeof n=="object"&&n!==null}const lk=n=>/^0[^.\s]+$/u.test(n);function K0(n){let t;return()=>(t===void 0&&(t=n()),t)}const fs=n=>n,k9=(n,t)=>e=>t(n(e)),qu=(...n)=>n.reduce(k9),tl=(n,t,e)=>{const s=t-n;return s===0?1:(e-n)/s};class Y0{constructor(){this.subscriptions=[]}add(t){return q0(this.subscriptions,t),()=>Rp(this.subscriptions,t)}notify(t,e,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(t,e,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cs=n=>n*1e3,Zs=n=>n/1e3;function ck(n,t){return t?n*(1e3/t):0}const D9=(n,t,e)=>{const s=t-n;return((e-n)%s+s)%s+n},uk=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,N9=1e-7,L9=12;function j9(n,t,e,s,i){let r,o,c=0;do o=t+(e-t)/2,r=uk(o,s,i)-n,r>0?e=o:t=o;while(Math.abs(r)>N9&&++c<L9);return o}function Wu(n,t,e,s){if(n===t&&e===s)return fs;const i=r=>j9(r,0,1,n,e);return r=>r===0||r===1?r:uk(i(r),t,s)}const dk=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,hk=n=>t=>1-n(1-t),fk=Wu(.33,1.53,.69,.99),X0=hk(fk),pk=dk(X0),mk=n=>(n*=2)<1?.5*X0(n):.5*(2-Math.pow(2,-10*(n-1))),Q0=n=>1-Math.sin(Math.acos(n)),gk=hk(Q0),yk=dk(Q0),I9=Wu(.42,0,1,1),F9=Wu(0,0,.58,1),vk=Wu(.42,0,.58,1),bk=n=>Array.isArray(n)&&typeof n[0]!="number";function wk(n,t){return bk(n)?n[D9(0,n.length,t)]:n}const xk=n=>Array.isArray(n)&&typeof n[0]=="number",B9={linear:fs,easeIn:I9,easeInOut:vk,easeOut:F9,circIn:Q0,circInOut:yk,circOut:gk,backIn:X0,backInOut:pk,backOut:fk,anticipate:mk},U9=n=>typeof n=="string",VE=n=>{if(xk(n)){W0(n.length===4);const[t,e,s,i]=n;return Wu(t,e,s,i)}else if(U9(n))return B9[n];return n},Dh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function z9(n,t){let e=new Set,s=new Set,i=!1,r=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),n()),f(c)}const h={schedule:(f,m=!1,g=!1)=>{const b=g&&i?e:s;return m&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(c=f,i){r=!0;return}i=!0,[e,s]=[s,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,h.process(f))}};return h}const H9=40;function Sk(n,t){let e=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=Dh.reduce((T,M)=>(T[M]=z9(r),T),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:f,update:m,preRender:g,render:v,postRender:b}=o,w=()=>{const T=Ni.useManualTiming?i.timestamp:performance.now();e=!1,Ni.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(T-i.timestamp,H9),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),f.process(i),m.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,e&&t&&(s=!1,n(w))},A=()=>{e=!0,s=!0,i.isProcessing||n(w)};return{schedule:Dh.reduce((T,M)=>{const P=o[M];return T[M]=(k,D=!1,N=!1)=>(e||A(),P.schedule(k,D,N)),T},{}),cancel:T=>{for(let M=0;M<Dh.length;M++)o[Dh[M]].cancel(T)},state:i,steps:o}}const{schedule:ue,cancel:Ar,state:Ze,steps:Cy}=Sk(typeof requestAnimationFrame<"u"?requestAnimationFrame:fs,!0);let Jh;function V9(){Jh=void 0}const On={now:()=>(Jh===void 0&&On.set(Ze.isProcessing||Ni.useManualTiming?Ze.timestamp:performance.now()),Jh),set:n=>{Jh=n,queueMicrotask(V9)}},Ak=n=>t=>typeof t=="string"&&t.startsWith(n),Z0=Ak("--"),$9=Ak("var(--"),J0=n=>$9(n)?G9.test(n.split("/*")[0].trim()):!1,G9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},uu={...wl,transform:n=>Di(0,1,n)},Nh={...wl,default:1},Gc=n=>Math.round(n*1e5)/1e5,tw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function q9(n){return n==null}const W9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ew=(n,t)=>e=>!!(typeof e=="string"&&W9.test(e)&&e.startsWith(n)||t&&!q9(e)&&Object.prototype.hasOwnProperty.call(e,t)),_k=(n,t,e)=>s=>{if(typeof s!="string")return s;const[i,r,o,c]=s.match(tw);return{[n]:parseFloat(i),[t]:parseFloat(r),[e]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},K9=n=>Di(0,255,n),Ry={...wl,transform:n=>Math.round(K9(n))},ra={test:ew("rgb","red"),parse:_k("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:s=1})=>"rgba("+Ry.transform(n)+", "+Ry.transform(t)+", "+Ry.transform(e)+", "+Gc(uu.transform(s))+")"};function Y9(n){let t="",e="",s="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const $v={test:ew("#"),parse:Y9,transform:ra.transform},Ku=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),cr=Ku("deg"),Js=Ku("%"),Et=Ku("px"),X9=Ku("vh"),Q9=Ku("vw"),$E={...Js,parse:n=>Js.parse(n)/100,transform:n=>Js.transform(n*100)},Io={test:ew("hsl","hue"),parse:_k("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:s=1})=>"hsla("+Math.round(n)+", "+Js.transform(Gc(t))+", "+Js.transform(Gc(e))+", "+Gc(uu.transform(s))+")"},Ce={test:n=>ra.test(n)||$v.test(n)||Io.test(n),parse:n=>ra.test(n)?ra.parse(n):Io.test(n)?Io.parse(n):$v.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ra.transform(n):Io.transform(n),getAnimatableNone:n=>{const t=Ce.parse(n);return t.alpha=0,Ce.transform(t)}},Z9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function J9(n){return isNaN(n)&&typeof n=="string"&&(n.match(tw)?.length||0)+(n.match(Z9)?.length||0)>0}const Ek="number",Tk="color",tq="var",eq="var(",GE="${}",nq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function du(n){const t=n.toString(),e=[],s={color:[],number:[],var:[]},i=[];let r=0;const c=t.replace(nq,u=>(Ce.test(u)?(s.color.push(r),i.push(Tk),e.push(Ce.parse(u))):u.startsWith(eq)?(s.var.push(r),i.push(tq),e.push(u)):(s.number.push(r),i.push(Ek),e.push(parseFloat(u))),++r,GE)).split(GE);return{values:e,split:c,indexes:s,types:i}}function Ck(n){return du(n).values}function Rk(n){const{split:t,types:e}=du(n),s=t.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=t[o],i[o]!==void 0){const c=e[o];c===Ek?r+=Gc(i[o]):c===Tk?r+=Ce.transform(i[o]):r+=i[o]}return r}}const sq=n=>typeof n=="number"?0:Ce.test(n)?Ce.getAnimatableNone(n):n;function iq(n){const t=Ck(n);return Rk(n)(t.map(sq))}const _r={test:J9,parse:Ck,createTransformer:Rk,getAnimatableNone:iq};function My(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function rq({hue:n,saturation:t,lightness:e,alpha:s}){n/=360,t/=100,e/=100;let i=0,r=0,o=0;if(!t)i=r=o=e;else{const c=e<.5?e*(1+t):e+t-e*t,u=2*e-c;i=My(u,c,n+1/3),r=My(u,c,n),o=My(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function Ef(n,t){return e=>e>0?t:n}const ce=(n,t,e)=>n+(t-n)*e,Py=(n,t,e)=>{const s=n*n,i=e*(t*t-s)+s;return i<0?0:Math.sqrt(i)},aq=[$v,ra,Io],oq=n=>aq.find(t=>t.test(n));function qE(n){const t=oq(n);if(!t)return!1;let e=t.parse(n);return t===Io&&(e=rq(e)),e}const WE=(n,t)=>{const e=qE(n),s=qE(t);if(!e||!s)return Ef(n,t);const i={...e};return r=>(i.red=Py(e.red,s.red,r),i.green=Py(e.green,s.green,r),i.blue=Py(e.blue,s.blue,r),i.alpha=ce(e.alpha,s.alpha,r),ra.transform(i))},Gv=new Set(["none","hidden"]);function lq(n,t){return Gv.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function cq(n,t){return e=>ce(n,t,e)}function nw(n){return typeof n=="number"?cq:typeof n=="string"?J0(n)?Ef:Ce.test(n)?WE:hq:Array.isArray(n)?Mk:typeof n=="object"?Ce.test(n)?WE:uq:Ef}function Mk(n,t){const e=[...n],s=e.length,i=n.map((r,o)=>nw(r)(r,t[o]));return r=>{for(let o=0;o<s;o++)e[o]=i[o](r);return e}}function uq(n,t){const e={...n,...t},s={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(s[i]=nw(n[i])(n[i],t[i]));return i=>{for(const r in s)e[r]=s[r](i);return e}}function dq(n,t){const e=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const r=t.types[i],o=n.indexes[r][s[r]],c=n.values[o]??0;e[i]=c,s[r]++}return e}const hq=(n,t)=>{const e=_r.createTransformer(t),s=du(n),i=du(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Gv.has(n)&&!i.values.length||Gv.has(t)&&!s.values.length?lq(n,t):qu(Mk(dq(s,i),i.values),e):Ef(n,t)};function Pk(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?ce(n,t,e):nw(n)(n,t)}const fq=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>ue.update(t,e),stop:()=>Ar(t),now:()=>Ze.isProcessing?Ze.timestamp:On.now()}},Ok=(n,t,e=10)=>{let s="";const i=Math.max(Math.round(t/e),2);for(let r=0;r<i;r++)s+=Math.round(n(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Tf=2e4;function sw(n){let t=0;const e=50;let s=n.next(t);for(;!s.done&&t<Tf;)t+=e,s=n.next(t);return t>=Tf?1/0:t}function kk(n,t=100,e){const s=e({...n,keyframes:[0,t]}),i=Math.min(sw(s),Tf);return{type:"keyframes",ease:r=>s.next(i*r).value/t,duration:Zs(i)}}const pq=5;function Dk(n,t,e){const s=Math.max(t-pq,0);return ck(e-n(s),t-s)}const ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Oy=.001;function mq({duration:n=ye.duration,bounce:t=ye.bounce,velocity:e=ye.velocity,mass:s=ye.mass}){let i,r,o=1-t;o=Di(ye.minDamping,ye.maxDamping,o),n=Di(ye.minDuration,ye.maxDuration,Zs(n)),o<1?(i=h=>{const f=h*o,m=f*n,g=f-e,v=qv(h,o),b=Math.exp(-m);return Oy-g/v*b},r=h=>{const m=h*o*n,g=m*e+e,v=Math.pow(o,2)*Math.pow(h,2)*n,b=Math.exp(-m),w=qv(Math.pow(h,2),o);return(-i(h)+Oy>0?-1:1)*((g-v)*b)/w}):(i=h=>{const f=Math.exp(-h*n),m=(h-e)*n+1;return-Oy+f*m},r=h=>{const f=Math.exp(-h*n),m=(e-h)*(n*n);return f*m});const c=5/n,u=yq(i,r,c);if(n=Cs(n),isNaN(u))return{stiffness:ye.stiffness,damping:ye.damping,duration:n};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:o*2*Math.sqrt(s*h),duration:n}}}const gq=12;function yq(n,t,e){let s=e;for(let i=1;i<gq;i++)s=s-n(s)/t(s);return s}function qv(n,t){return n*Math.sqrt(1-t*t)}const vq=["duration","bounce"],bq=["stiffness","damping","mass"];function KE(n,t){return t.some(e=>n[e]!==void 0)}function wq(n){let t={velocity:ye.velocity,stiffness:ye.stiffness,damping:ye.damping,mass:ye.mass,isResolvedFromDuration:!1,...n};if(!KE(n,bq)&&KE(n,vq))if(n.visualDuration){const e=n.visualDuration,s=2*Math.PI/(e*1.2),i=s*s,r=2*Di(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:ye.mass,stiffness:i,damping:r}}else{const e=mq(n);t={...t,...e,mass:ye.mass},t.isResolvedFromDuration=!0}return t}function hu(n=ye.visualDuration,t=ye.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:s,restDelta:i}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],c={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=wq({...e,velocity:-Zs(e.velocity||0)}),b=g||0,w=h/(2*Math.sqrt(u*f)),A=o-r,E=Zs(Math.sqrt(u/f)),C=Math.abs(A)<5;s||(s=C?ye.restSpeed.granular:ye.restSpeed.default),i||(i=C?ye.restDelta.granular:ye.restDelta.default);let T;if(w<1){const P=qv(E,w);T=k=>{const D=Math.exp(-w*E*k);return o-D*((b+w*E*A)/P*Math.sin(P*k)+A*Math.cos(P*k))}}else if(w===1)T=P=>o-Math.exp(-E*P)*(A+(b+E*A)*P);else{const P=E*Math.sqrt(w*w-1);T=k=>{const D=Math.exp(-w*E*k),N=Math.min(P*k,300);return o-D*((b+w*E*A)*Math.sinh(N)+P*A*Math.cosh(N))/P}}const M={calculatedDuration:v&&m||null,next:P=>{const k=T(P);if(v)c.done=P>=m;else{let D=P===0?b:0;w<1&&(D=P===0?Cs(b):Dk(T,P,k));const N=Math.abs(D)<=s,U=Math.abs(o-k)<=i;c.done=N&&U}return c.value=c.done?o:k,c},toString:()=>{const P=Math.min(sw(M),Tf),k=Ok(D=>M.next(P*D).value,P,30);return P+"ms "+k},toTransition:()=>{}};return M}hu.applyToOptions=n=>{const t=kk(n,100,hu);return n.ease=t.ease,n.duration=Cs(t.duration),n.type="keyframes",n};function Wv({keyframes:n,velocity:t=0,power:e=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:f}){const m=n[0],g={done:!1,value:m},v=N=>c!==void 0&&N<c||u!==void 0&&N>u,b=N=>c===void 0?u:u===void 0||Math.abs(c-N)<Math.abs(u-N)?c:u;let w=e*t;const A=m+w,E=o===void 0?A:o(A);E!==A&&(w=E-m);const C=N=>-w*Math.exp(-N/s),T=N=>E+C(N),M=N=>{const U=C(N),V=T(N);g.done=Math.abs(U)<=h,g.value=g.done?E:V};let P,k;const D=N=>{v(g.value)&&(P=N,k=hu({keyframes:[g.value,b(g.value)],velocity:Dk(T,N,g.value),damping:i,stiffness:r,restDelta:h,restSpeed:f}))};return D(0),{calculatedDuration:null,next:N=>{let U=!1;return!k&&P===void 0&&(U=!0,M(N),D(N)),P!==void 0&&N>=P?k.next(N-P):(!U&&M(N),g)}}}function xq(n,t,e){const s=[],i=e||Ni.mix||Pk,r=n.length-1;for(let o=0;o<r;o++){let c=i(n[o],n[o+1]);if(t){const u=Array.isArray(t)?t[o]||fs:t;c=qu(u,c)}s.push(c)}return s}function Sq(n,t,{clamp:e=!0,ease:s,mixer:i}={}){const r=n.length;if(W0(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const c=xq(t,s,i),u=c.length,h=f=>{if(o&&f<n[0])return t[0];let m=0;if(u>1)for(;m<n.length-2&&!(f<n[m+1]);m++);const g=tl(n[m],n[m+1],f);return c[m](g)};return e?f=>h(Di(n[0],n[r-1],f)):h}function Nk(n,t){const e=n[n.length-1];for(let s=1;s<=t;s++){const i=tl(0,t,s);n.push(ce(e,1,i))}}function Lk(n){const t=[0];return Nk(t,n.length-1),t}function Aq(n,t){return n.map(e=>e*t)}function _q(n,t){return n.map(()=>t||vk).splice(0,n.length-1)}function qc({duration:n=300,keyframes:t,times:e,ease:s="easeInOut"}){const i=bk(s)?s.map(VE):VE(s),r={done:!1,value:t[0]},o=Aq(e&&e.length===t.length?e:Lk(t),n),c=Sq(o,t,{ease:Array.isArray(i)?i:_q(t,i)});return{calculatedDuration:n,next:u=>(r.value=c(u),r.done=u>=n,r)}}const Eq=n=>n!==null;function iw(n,{repeat:t,repeatType:e="loop"},s,i=1){const r=n.filter(Eq),c=i<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!c||s===void 0?r[c]:s}const Tq={decay:Wv,inertia:Wv,tween:qc,keyframes:qc,spring:hu};function jk(n){typeof n.type=="string"&&(n.type=Tq[n.type])}class rw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const Cq=n=>n/100;class aw extends rw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;jk(t);const{type:e=qc,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=t;let{keyframes:c}=t;const u=e||qc;u!==qc&&typeof c[0]!="number"&&(this.mixKeyframes=qu(Cq,Pk(c[0],c[1])),c=[0,100]);const h=u({...t,keyframes:c});r==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=sw(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:f,repeat:m,repeatType:g,repeatDelay:v,type:b,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,M=s;if(m){const N=Math.min(this.currentTime,i)/c;let U=Math.floor(N),V=N%1;!V&&N>=1&&(V=1),V===1&&U--,U=Math.min(U,m+1),!!(U%2)&&(g==="reverse"?(V=1-V,v&&(V-=v/c)):g==="mirror"&&(M=o)),T=Di(0,1,V)*c}const P=C?{done:!1,value:f[0]}:M.next(T);r&&(P.value=r(P.value));let{done:k}=P;!C&&u!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return D&&b!==Wv&&(P.value=iw(f,this.options,A,this.speed)),w&&w(P.value),D&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return Zs(this.calculatedDuration)}get time(){return Zs(this.currentTime)}set time(t){t=Cs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(On.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Zs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=fq,startTime:e}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=e??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Rq(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const aa=n=>n*180/Math.PI,Kv=n=>{const t=aa(Math.atan2(n[1],n[0]));return Yv(t)},Mq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Kv,rotateZ:Kv,skewX:n=>aa(Math.atan(n[1])),skewY:n=>aa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Yv=n=>(n=n%360,n<0&&(n+=360),n),YE=Kv,XE=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),QE=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Pq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:XE,scaleY:QE,scale:n=>(XE(n)+QE(n))/2,rotateX:n=>Yv(aa(Math.atan2(n[6],n[5]))),rotateY:n=>Yv(aa(Math.atan2(-n[2],n[0]))),rotateZ:YE,rotate:YE,skewX:n=>aa(Math.atan(n[4])),skewY:n=>aa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Xv(n){return n.includes("scale")?1:0}function Qv(n,t){if(!n||n==="none")return Xv(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(e)s=Pq,i=e;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Mq,i=c}if(!i)return Xv(t);const r=s[t],o=i[1].split(",").map(kq);return typeof r=="function"?r(o):o[r]}const Oq=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Qv(e,t)};function kq(n){return parseFloat(n.trim())}const xl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sl=new Set(xl),ZE=n=>n===wl||n===Et,Dq=new Set(["x","y","z"]),Nq=xl.filter(n=>!Dq.has(n));function Lq(n){const t=[];return Nq.forEach(e=>{const s=n.getValue(e);s!==void 0&&(t.push([e,s.get()]),s.set(e.startsWith("scale")?1:0))}),t}const da={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Qv(t,"x"),y:(n,{transform:t})=>Qv(t,"y")};da.translateX=da.x;da.translateY=da.y;const ha=new Set;let Zv=!1,Jv=!1,tb=!1;function Ik(){if(Jv){const n=Array.from(ha).filter(s=>s.needsMeasurement),t=new Set(n.map(s=>s.element)),e=new Map;t.forEach(s=>{const i=Lq(s);i.length&&(e.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=e.get(s);i&&i.forEach(([r,o])=>{s.getValue(r)?.set(o)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Jv=!1,Zv=!1,ha.forEach(n=>n.complete(tb)),ha.clear()}function Fk(){ha.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Jv=!0)})}function jq(){tb=!0,Fk(),Ik(),tb=!1}class ow{constructor(t,e,s,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ha.add(this),Zv||(Zv=!0,ue.read(Fk),ue.resolveKeyframes(Ik))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:s,motionValue:i}=this;if(t[0]===null){const r=i?.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(s&&e){const c=s.readValue(e,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&r===void 0&&i.set(t[0])}Rq(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ha.delete(this)}cancel(){this.state==="scheduled"&&(ha.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Iq=n=>n.startsWith("--");function Fq(n,t,e){Iq(t)?n.style.setProperty(t,e):n.style[t]=e}const Bq=K0(()=>window.ScrollTimeline!==void 0),Uq={};function zq(n,t){const e=K0(n);return()=>Uq[t]??e()}const Bk=zq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hc=([n,t,e,s])=>`cubic-bezier(${n}, ${t}, ${e}, ${s})`,JE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hc([0,.65,.55,1]),circOut:Hc([.55,0,1,.45]),backIn:Hc([.31,.01,.66,-.59]),backOut:Hc([.33,1.53,.69,.99])};function Uk(n,t){if(n)return typeof n=="function"?Bk()?Ok(n,t):"ease-out":xk(n)?Hc(n):Array.isArray(n)?n.map(e=>Uk(e,t)||JE.easeOut):JE[n]}function Hq(n,t,e,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const f={[t]:e};u&&(f.offset=u);const m=Uk(c,i);Array.isArray(m)&&(f.easing=m);const g={delay:s,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),n.animate(f,g)}function lw(n){return typeof n=="function"&&"applyToOptions"in n}function Vq({type:n,...t}){return lw(n)&&Bk()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $q extends rw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:s,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,W0(typeof t.type!="string");const h=Vq(t);this.animation=Hq(e,s,i,h,r),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const f=iw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):Fq(e,s,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Zs(Number(t))}get time(){return Zs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Cs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Bq()?(this.animation.timeline=t,fs):e(this)}}const zk={anticipate:mk,backInOut:pk,circInOut:yk};function Gq(n){return n in zk}function qq(n){typeof n.ease=="string"&&Gq(n.ease)&&(n.ease=zk[n.ease])}const tT=10;class Wq extends $q{constructor(t){qq(t),jk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:s,onComplete:i,element:r,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new aw({...o,autoplay:!1}),u=Cs(this.finishedTime??this.time);e.setWithVelocity(c.sample(u-tT).value,c.sample(u).value,tT),c.stop()}}const eT=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(_r.test(n)||n==="0")&&!n.startsWith("url("));function Kq(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function Yq(n,t,e,s){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=eT(i,t),c=eT(r,t);return!o||!c?!1:Kq(n)||(e==="spring"||lw(e))&&s}function eb(n){n.duration=0,n.type}const Xq=new Set(["opacity","clipPath","filter","transform"]),Qq=K0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Zq(n){const{motionValue:t,name:e,repeatDelay:s,repeatType:i,damping:r,type:o}=n;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return Qq()&&e&&Xq.has(e)&&(e!=="transform"||!h)&&!u&&!s&&i!=="mirror"&&r!==0&&o!=="inertia"}const Jq=40;class tW extends rw{constructor({autoplay:t=!0,delay:e=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=On.now();const g={autoplay:t,delay:e,type:s,repeat:i,repeatDelay:r,repeatType:o,name:u,motionValue:h,element:f,...m},v=f?.KeyframeResolver||ow;this.keyframeResolver=new v(c,(b,w,A)=>this.onKeyframesResolved(b,w,g,!A),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,s,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:f}=s;this.resolvedAt=On.now(),Yq(t,r,o,c)||((Ni.instantAnimations||!u)&&f?.(iw(t,s,e)),t[0]=t[t.length-1],eb(s),s.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Jq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...s,keyframes:t},v=!h&&Zq(g)?new Wq({...g,element:g.motionValue.owner.current}):new aw(g);v.finished.then(()=>this.notifyFinished()).catch(fs),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jq()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class eW{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=e}attachTimeline(t){const e=this.animations.map(s=>s.attachTimeline(t));return()=>{e.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class nW extends eW{then(t,e){return this.finished.finally(t).then(()=>{})}}const sW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iW(n){const t=sW.exec(n);if(!t)return[,];const[,e,s,i]=t;return[`--${e??s}`,i]}function Hk(n,t,e=1){const[s,i]=iW(n);if(!s)return;const r=window.getComputedStyle(t).getPropertyValue(s);if(r){const o=r.trim();return ak(o)?parseFloat(o):o}return J0(i)?Hk(i,t,e+1):i}function cw(n,t){return n?.[t]??n?.default??n}const Vk=new Set(["width","height","top","left","right","bottom",...xl]),rW={test:n=>n==="auto",parse:n=>n},$k=n=>t=>t.test(n),Gk=[wl,Et,Js,cr,Q9,X9,rW],nT=n=>Gk.find($k(n));function aW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lk(n):!0}const oW=new Set(["brightness","contrast","saturate","opacity"]);function lW(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[s]=e.match(tw)||[];if(!s)return n;const i=e.replace(s,"");let r=oW.has(t)?1:0;return s!==e&&(r*=100),t+"("+r+i+")"}const cW=/\b([a-z-]*)\(.*?\)/gu,nb={..._r,getAnimatableNone:n=>{const t=n.match(cW);return t?t.map(lW).join(" "):n}},sT={...wl,transform:Math.round},uW={rotate:cr,rotateX:cr,rotateY:cr,rotateZ:cr,scale:Nh,scaleX:Nh,scaleY:Nh,scaleZ:Nh,skew:cr,skewX:cr,skewY:cr,distance:Et,translateX:Et,translateY:Et,translateZ:Et,x:Et,y:Et,z:Et,perspective:Et,transformPerspective:Et,opacity:uu,originX:$E,originY:$E,originZ:Et},uw={borderWidth:Et,borderTopWidth:Et,borderRightWidth:Et,borderBottomWidth:Et,borderLeftWidth:Et,borderRadius:Et,radius:Et,borderTopLeftRadius:Et,borderTopRightRadius:Et,borderBottomRightRadius:Et,borderBottomLeftRadius:Et,width:Et,maxWidth:Et,height:Et,maxHeight:Et,top:Et,right:Et,bottom:Et,left:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,backgroundPositionX:Et,backgroundPositionY:Et,...uW,zIndex:sT,fillOpacity:uu,strokeOpacity:uu,numOctaves:sT},dW={...uw,color:Ce,backgroundColor:Ce,outlineColor:Ce,fill:Ce,stroke:Ce,borderColor:Ce,borderTopColor:Ce,borderRightColor:Ce,borderBottomColor:Ce,borderLeftColor:Ce,filter:nb,WebkitFilter:nb},qk=n=>dW[n];function Wk(n,t){let e=qk(n);return e!==nb&&(e=_r),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const hW=new Set(["auto","none","0"]);function fW(n,t,e){let s=0,i;for(;s<n.length&&!i;){const r=n[s];typeof r=="string"&&!hW.has(r)&&du(r).values.length&&(i=n[s]),s++}if(i&&e)for(const r of t)n[r]=Wk(e,i)}class pW extends ow{constructor(t,e,s,i,r){super(t,e,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:s}=this;if(!e||!e.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),J0(h))){const f=Hk(h,e.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Vk.has(s)||t.length!==2)return;const[i,r]=t,o=nT(i),c=nT(r);if(o!==c)if(ZE(o)&&ZE(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else da[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,s=[];for(let i=0;i<t.length;i++)(t[i]===null||aW(t[i]))&&s.push(i);s.length&&fW(t,s,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=da[s](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=da[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Kk(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=e?.[n]??s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const Yk=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function mW(n){return ok(n)&&"offsetHeight"in n}const iT=30,gW=n=>!isNaN(parseFloat(n));class yW{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=On.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=On.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gW(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Y0);const s=this.events[t].add(e);return t==="change"?()=>{s(),ue.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,s){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iT)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,iT);return ck(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Aa(n,t){return new yW(n,t)}const{schedule:dw}=Sk(queueMicrotask,!1),_s={x:!1,y:!1};function Xk(){return _s.x||_s.y}function vW(n){return n==="x"||n==="y"?_s[n]?null:(_s[n]=!0,()=>{_s[n]=!1}):_s.x||_s.y?null:(_s.x=_s.y=!0,()=>{_s.x=_s.y=!1})}function Qk(n,t){const e=Kk(n),s=new AbortController,i={passive:!0,...t,signal:s.signal};return[e,i,()=>s.abort()]}function rT(n){return!(n.pointerType==="touch"||Xk())}function bW(n,t,e={}){const[s,i,r]=Qk(n,e),o=c=>{if(!rT(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const f=m=>{rT(m)&&(h(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return s.forEach(c=>{c.addEventListener("pointerenter",o,i)}),r}const Zk=(n,t)=>t?n===t?!0:Zk(n,t.parentElement):!1,hw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,wW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xW(n){return wW.has(n.tagName)||n.tabIndex!==-1}const tf=new WeakSet;function aT(n){return t=>{t.key==="Enter"&&n(t)}}function ky(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const SW=(n,t)=>{const e=n.currentTarget;if(!e)return;const s=aT(()=>{if(tf.has(e))return;ky(e,"down");const i=aT(()=>{ky(e,"up")}),r=()=>ky(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",s,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",s),t)};function oT(n){return hw(n)&&!Xk()}function AW(n,t,e={}){const[s,i,r]=Qk(n,e),o=c=>{const u=c.currentTarget;if(!oT(c))return;tf.add(u);const h=t(u,c),f=(v,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),tf.has(u)&&tf.delete(u),oT(v)&&typeof h=="function"&&h(v,{success:b})},m=v=>{f(v,u===window||u===document||e.useGlobalTarget||Zk(u,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",g,i)};return s.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),mW(c)&&(c.addEventListener("focus",h=>SW(h,i)),!xW(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function fw(n){return ok(n)&&"ownerSVGElement"in n}function Jk(n){return fw(n)&&n.tagName==="svg"}const qe=n=>!!(n&&n.getVelocity),_W=[...Gk,Ce,_r],EW=n=>_W.find($k(n)),pw=_.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function TW(n=!0){const t=_.useContext(G0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:i}=t,r=_.useId();_.useEffect(()=>{if(n)return i(r)},[n]);const o=_.useCallback(()=>n&&s&&s(r),[r,s,n]);return!e&&s?[!1,o]:[!0]}const tD=_.createContext({strict:!1}),lT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},el={};for(const n in lT)el[n]={isEnabled:t=>lT[n].some(e=>!!t[e])};function CW(n){for(const t in n)el[t]={...el[t],...n[t]}}const RW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||RW.has(n)}let eD=n=>!Cf(n);function MW(n){typeof n=="function"&&(eD=t=>t.startsWith("on")?!Cf(t):n(t))}try{MW(require("@emotion/is-prop-valid").default)}catch{}function PW(n,t,e){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(eD(i)||e===!0&&Cf(i)||!t&&!Cf(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const Mp=_.createContext({});function Pp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function fu(n){return typeof n=="string"||Array.isArray(n)}const mw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gw=["initial",...mw];function Op(n){return Pp(n.animate)||gw.some(t=>fu(n[t]))}function nD(n){return!!(Op(n)||n.variants)}function OW(n,t){if(Op(n)){const{initial:e,animate:s}=n;return{initial:e===!1||fu(e)?e:void 0,animate:fu(s)?s:void 0}}return n.inherit!==!1?t:{}}function kW(n){const{initial:t,animate:e}=OW(n,_.useContext(Mp));return _.useMemo(()=>({initial:t,animate:e}),[cT(t),cT(e)])}function cT(n){return Array.isArray(n)?n.join(" "):n}const pu={};function DW(n){for(const t in n)pu[t]=n[t],Z0(t)&&(pu[t].isCSSVariable=!0)}function sD(n,{layout:t,layoutId:e}){return Sl.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!pu[n]||n==="opacity")}const NW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LW=xl.length;function jW(n,t,e){let s="",i=!0;for(let r=0;r<LW;r++){const o=xl[r],c=n[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||e){const h=Yk(c,uw[o]);if(!u){i=!1;const f=NW[o]||o;s+=`${f}(${h}) `}e&&(t[o]=h)}}return s=s.trim(),e?s=e(t,i?"":s):i&&(s="none"),s}function yw(n,t,e){const{style:s,vars:i,transformOrigin:r}=n;let o=!1,c=!1;for(const u in t){const h=t[u];if(Sl.has(u)){o=!0;continue}else if(Z0(u)){i[u]=h;continue}else{const f=Yk(h,uw[u]);u.startsWith("origin")?(c=!0,r[u]=f):s[u]=f}}if(t.transform||(o||e?s.transform=jW(t,n.transform,e):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=r;s.transformOrigin=`${u} ${h} ${f}`}}const vw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iD(n,t,e){for(const s in t)!qe(t[s])&&!sD(s,e)&&(n[s]=t[s])}function IW({transformTemplate:n},t){return _.useMemo(()=>{const e=vw();return yw(e,t,n),Object.assign({},e.vars,e.style)},[t])}function FW(n,t){const e=n.style||{},s={};return iD(s,e,n),Object.assign(s,IW(n,t)),s}function BW(n,t){const e={},s=FW(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=s,e}const UW={offset:"stroke-dashoffset",array:"stroke-dasharray"},zW={offset:"strokeDashoffset",array:"strokeDasharray"};function HW(n,t,e=1,s=0,i=!0){n.pathLength=1;const r=i?UW:zW;n[r.offset]=Et.transform(-s);const o=Et.transform(t),c=Et.transform(e);n[r.array]=`${o} ${c}`}function rD(n,{attrX:t,attrY:e,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...c},u,h,f){if(yw(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g}=n;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),s!==void 0&&(m.scale=s),i!==void 0&&HW(m,i,r,o,!1)}const aD=()=>({...vw(),attrs:{}}),oD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function VW(n,t,e,s){const i=_.useMemo(()=>{const r=aD();return rD(r,t,oD(s),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};iD(r,n.style,n),i.style={...r,...i.style}}return i}const $W=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bw(n){return typeof n!="string"||n.includes("-")?!1:!!($W.indexOf(n)>-1||/[A-Z]/u.test(n))}function GW(n,t,e,{latestValues:s},i,r=!1){const c=(bw(n)?VW:BW)(t,s,i,n),u=PW(t,typeof n=="string",r),h=n!==_.Fragment?{...u,...c,ref:e}:{},{children:f}=t,m=_.useMemo(()=>qe(f)?f.get():f,[f]);return _.createElement(n,{...h,children:m})}function uT(n){const t=[{},{}];return n?.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function ww(n,t,e,s){if(typeof t=="function"){const[i,r]=uT(s);t=t(e!==void 0?e:n.custom,i,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,r]=uT(s);t=t(e!==void 0?e:n.custom,i,r)}return t}function ef(n){return qe(n)?n.get():n}function qW({scrapeMotionValuesFromProps:n,createRenderState:t},e,s,i){return{latestValues:WW(e,s,i,n),renderState:t()}}function WW(n,t,e,s){const i={},r=s(n,{});for(const g in r)i[g]=ef(r[g]);let{initial:o,animate:c}=n;const u=Op(n),h=nD(n);t&&h&&!u&&n.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let f=e?e.initial===!1:!1;f=f||o===!1;const m=f?c:o;if(m&&typeof m!="boolean"&&!Pp(m)){const g=Array.isArray(m)?m:[m];for(let v=0;v<g.length;v++){const b=ww(n,g[v]);if(b){const{transitionEnd:w,transition:A,...E}=b;for(const C in E){let T=E[C];if(Array.isArray(T)){const M=f?T.length-1:0;T=T[M]}T!==null&&(i[C]=T)}for(const C in w)i[C]=w[C]}}}return i}const lD=n=>(t,e)=>{const s=_.useContext(Mp),i=_.useContext(G0),r=()=>qW(n,t,s,i);return e?r():rk(r)};function xw(n,t,e){const{style:s}=n,i={};for(const r in s)(qe(s[r])||t.style&&qe(t.style[r])||sD(r,n)||e?.getValue(r)?.liveStyle!==void 0)&&(i[r]=s[r]);return i}const KW=lD({scrapeMotionValuesFromProps:xw,createRenderState:vw});function cD(n,t,e){const s=xw(n,t,e);for(const i in n)if(qe(n[i])||qe(t[i])){const r=xl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=n[i]}return s}const YW=lD({scrapeMotionValuesFromProps:cD,createRenderState:aD}),XW=Symbol.for("motionComponentSymbol");function Fo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function QW(n,t,e){return _.useCallback(s=>{s&&n.onMount&&n.onMount(s),t&&(s?t.mount(s):t.unmount()),e&&(typeof e=="function"?e(s):Fo(e)&&(e.current=s))},[t])}const Sw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZW="framerAppearId",uD="data-"+Sw(ZW),dD=_.createContext({});function JW(n,t,e,s,i){const{visualElement:r}=_.useContext(Mp),o=_.useContext(tD),c=_.useContext(G0),u=_.useContext(pw).reducedMotion,h=_.useRef(null);s=s||o.renderer,!h.current&&s&&(h.current=s(n,{visualState:t,parent:r,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=_.useContext(dD);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&tK(h.current,e,i,m);const g=_.useRef(!1);_.useInsertionEffect(()=>{f&&g.current&&f.update(e,c)});const v=e[uD],b=_.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return O9(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),_.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),b.current=!1),f.enteringChildren=void 0)}),f}function tK(n,t,e,s){const{layoutId:i,layout:r,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:hD(n.parent)),n.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||c&&Fo(c),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:u,layoutRoot:h})}function hD(n){if(n)return n.options.allowProjection!==!1?n.projection:hD(n.parent)}function Dy(n,{forwardMotionProps:t=!1}={},e,s){e&&CW(e);const i=bw(n)?YW:KW;function r(c,u){let h;const f={..._.useContext(pw),...c,layoutId:eK(c)},{isStatic:m}=f,g=kW(c),v=i(c,m);if(!m&&$0){nK();const b=sK(f);h=b.MeasureLayout,g.visualElement=JW(n,v,f,s,b.ProjectionNode)}return S.jsxs(Mp.Provider,{value:g,children:[h&&g.visualElement?S.jsx(h,{visualElement:g.visualElement,...f}):null,GW(n,c,QW(v,g.visualElement,u),v,m,t)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=_.forwardRef(r);return o[XW]=n,o}function eK({layoutId:n}){const t=_.useContext(ik).id;return t&&n!==void 0?t+"-"+n:n}function nK(n,t){_.useContext(tD).strict}function sK(n){const{drag:t,layout:e}=el;if(!t&&!e)return{};const s={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function iK(n,t){if(typeof Proxy>"u")return Dy;const e=new Map,s=(r,o)=>Dy(r,o,n,t),i=(r,o)=>s(r,o);return new Proxy(i,{get:(r,o)=>o==="create"?s:(e.has(o)||e.set(o,Dy(o,void 0,n,t)),e.get(o))})}function fD({top:n,left:t,right:e,bottom:s}){return{x:{min:t,max:e},y:{min:n,max:s}}}function rK({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function aK(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),s=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:s.y,right:s.x}}function Ny(n){return n===void 0||n===1}function sb({scale:n,scaleX:t,scaleY:e}){return!Ny(n)||!Ny(t)||!Ny(e)}function ta(n){return sb(n)||pD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function pD(n){return dT(n.x)||dT(n.y)}function dT(n){return n&&n!=="0%"}function Rf(n,t,e){const s=n-e,i=t*s;return e+i}function hT(n,t,e,s,i){return i!==void 0&&(n=Rf(n,i,s)),Rf(n,e,s)+t}function ib(n,t=0,e=1,s,i){n.min=hT(n.min,t,e,s,i),n.max=hT(n.max,t,e,s,i)}function mD(n,{x:t,y:e}){ib(n.x,t.translate,t.scale,t.originPoint),ib(n.y,e.translate,e.scale,e.originPoint)}const fT=.999999999999,pT=1.0000000000001;function oK(n,t,e,s=!1){const i=e.length;if(!i)return;t.x=t.y=1;let r,o;for(let c=0;c<i;c++){r=e[c],o=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Uo(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,mD(n,o)),s&&ta(r.latestValues)&&Uo(n,r.latestValues))}t.x<pT&&t.x>fT&&(t.x=1),t.y<pT&&t.y>fT&&(t.y=1)}function Bo(n,t){n.min=n.min+t,n.max=n.max+t}function mT(n,t,e,s,i=.5){const r=ce(n.min,n.max,i);ib(n,t,e,r,s)}function Uo(n,t){mT(n.x,t.x,t.scaleX,t.scale,t.originX),mT(n.y,t.y,t.scaleY,t.scale,t.originY)}function gD(n,t){return fD(aK(n.getBoundingClientRect(),t))}function lK(n,t,e){const s=gD(n,e),{scroll:i}=t;return i&&(Bo(s.x,i.offset.x),Bo(s.y,i.offset.y)),s}const gT=()=>({translate:0,scale:1,origin:0,originPoint:0}),zo=()=>({x:gT(),y:gT()}),yT=()=>({min:0,max:0}),ge=()=>({x:yT(),y:yT()}),rb={current:null},yD={current:!1};function cK(){if(yD.current=!0,!!$0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>rb.current=n.matches;n.addEventListener("change",t),t()}else rb.current=!1}const mu=new WeakMap;function uK(n,t,e){for(const s in t){const i=t[s],r=e[s];if(qe(i))n.addValue(s,i);else if(qe(r))n.addValue(s,Aa(i,{owner:n}));else if(r!==i)if(n.hasValue(s)){const o=n.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(s);n.addValue(s,Aa(o!==void 0?o:i,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const vT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vD{scrapeMotionValuesFromProps(t,e,s){return{}}constructor({parent:t,props:e,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ow,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=On.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ue.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=e.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=Op(e),this.isVariantNode=nD(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const g in m){const v=m[g];u[g]!==void 0&&qe(v)&&v.set(u[g])}}mount(t){this.current=t,mu.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,s)=>this.bindToMotionValue(s,e)),yD.current||cK(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ar(this.notifyUpdate),Ar(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Sl.has(t);s&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ue.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in el){const e=el[t];if(!e)continue;const{isEnabled:s,Feature:i}=e;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let s=0;s<vT.length;s++){const i=vT[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=t[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=uK(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const s=this.values.get(t);e!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&e!==void 0&&(s=Aa(e===null?void 0:e,{owner:this}),this.addValue(t,s)),s}readValue(t,e){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(ak(s)||lk(s))?s=parseFloat(s):!EW(s)&&_r.test(e)&&(s=Wk(t,e)),this.setBaseTarget(t,qe(s)?s.get():s)),qe(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let s;if(typeof e=="string"||typeof e=="object"){const r=ww(this.props,e,this.presenceContext?.custom);r&&(s=r[t])}if(e&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Y0),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){dw.render(this.render)}}class bD extends vD{constructor(){super(...arguments),this.KeyframeResolver=pW}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:s}){delete e[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qe(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function wD(n,{style:t,vars:e},s,i){const r=n.style;let o;for(o in t)r[o]=t[o];i?.applyProjectionStyles(r,s);for(o in e)r.setProperty(o,e[o])}function dK(n){return window.getComputedStyle(n)}class xD extends bD{constructor(){super(...arguments),this.type="html",this.renderInstance=wD}readValueFromInstance(t,e){if(Sl.has(e))return this.projection?.isProjecting?Xv(e):Oq(t,e);{const s=dK(t),i=(Z0(e)?s.getPropertyValue(e):s[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return gD(t,e)}build(t,e,s){yw(t,e,s.transformTemplate)}scrapeMotionValuesFromProps(t,e,s){return xw(t,e,s)}}const SD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hK(n,t,e,s){wD(n,t,void 0,s);for(const i in t.attrs)n.setAttribute(SD.has(i)?i:Sw(i),t.attrs[i])}class AD extends bD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ge}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Sl.has(e)){const s=qk(e);return s&&s.default||0}return e=SD.has(e)?e:Sw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,s){return cD(t,e,s)}build(t,e,s){rD(t,e,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,e,s,i){hK(t,e,s,i)}mount(t){this.isSVGTag=oD(t.tagName),super.mount(t)}}const fK=(n,t)=>bw(n)?new AD(t):new xD(t,{allowProjection:n!==_.Fragment});function qo(n,t,e){const s=n.getProps();return ww(s,t,e!==void 0?e:s.custom,n)}const ab=n=>Array.isArray(n);function pK(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Aa(e))}function mK(n){return ab(n)?n[n.length-1]||0:n}function gK(n,t){const e=qo(n,t);let{transitionEnd:s={},transition:i={},...r}=e||{};r={...r,...s};for(const o in r){const c=mK(r[o]);pK(n,o,c)}}function yK(n){return!!(qe(n)&&n.add)}function ob(n,t){const e=n.getValue("willChange");if(yK(e))return e.add(t);if(!e&&Ni.WillChange){const s=new Ni.WillChange("auto");n.addValue("willChange",s),s.add(t)}}function _D(n){return n.props[uD]}const vK=n=>n!==null;function bK(n,{repeat:t,repeatType:e="loop"},s){const i=n.filter(vK),r=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[r]}const wK={type:"spring",stiffness:500,damping:25,restSpeed:10},xK=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),SK={type:"keyframes",duration:.8},AK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_K=(n,{keyframes:t})=>t.length>2?SK:Sl.has(n)?n.startsWith("scale")?xK(t[1]):wK:AK;function EK({when:n,delay:t,delayChildren:e,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const Aw=(n,t,e,s={},i,r)=>o=>{const c=cw(s,n)||{},u=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-Cs(u);const f={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:g=>{t.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:t,element:r?void 0:i};EK(c)||Object.assign(f,_K(n,f)),f.duration&&(f.duration=Cs(f.duration)),f.repeatDelay&&(f.repeatDelay=Cs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(eb(f),f.delay===0&&(m=!0)),(Ni.instantAnimations||Ni.skipAnimations)&&(m=!0,eb(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,m&&!r&&t.get()!==void 0){const g=bK(f.keyframes,c);if(g!==void 0){ue.update(()=>{f.onUpdate(g),f.onComplete()});return}}return c.isSync?new aw(f):new tW(f)};function TK({protectedKeys:n,needsAnimating:t},e){const s=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,s}function _w(n,t,{delay:e=0,transitionOverride:s,type:i}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...c}=t;s&&(r=s);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in c){const m=n.getValue(f,n.latestValues[f]??null),g=c[f];if(g===void 0||h&&TK(h,f))continue;const v={delay:e,...cw(r||{},f)},b=m.get();if(b!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===b&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const E=_D(n);if(E){const C=window.MotionHandoffAnimation(E,f,ue);C!==null&&(v.startTime=C,w=!0)}}ob(n,f),m.start(Aw(f,m,g,n.shouldReduceMotion&&Vk.has(f)?{type:!1}:v,n,w));const A=m.animation;A&&u.push(A)}return o&&Promise.all(u).then(()=>{ue.update(()=>{o&&gK(n,o)})}),u}function ED(n,t,e,s=0,i=1){const r=Array.from(n).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),o=n.size,c=(o-1)*s;return typeof e=="function"?e(r,o):i===1?r*s:c-r*s}function lb(n,t,e={}){const s=qo(n,t,e.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(i=e.transitionOverride);const r=s?()=>Promise.all(_w(n,s,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return CK(n,t,u,h,f,m,e)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[r,o]:[o,r];return u().then(()=>h())}else return Promise.all([r(),o(e.delay)])}function CK(n,t,e=0,s=0,i=0,r=1,o){const c=[];for(const u of n.variantChildren)u.notify("AnimationStart",t),c.push(lb(u,t,{...o,delay:e+(typeof s=="function"?0:s)+ED(n.variantChildren,u,s,i,r)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function RK(n,t,e={}){n.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(r=>lb(n,r,e));s=Promise.all(i)}else if(typeof t=="string")s=lb(n,t,e);else{const i=typeof t=="function"?qo(n,t,e.custom):t;s=Promise.all(_w(n,i,e))}return s.then(()=>{n.notify("AnimationComplete",t)})}function TD(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let s=0;s<e;s++)if(t[s]!==n[s])return!1;return!0}const MK=gw.length;function CD(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?CD(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<MK;e++){const s=gw[e],i=n.props[s];(fu(i)||i===!1)&&(t[s]=i)}return t}const PK=[...mw].reverse(),OK=mw.length;function kK(n){return t=>Promise.all(t.map(({animation:e,options:s})=>RK(n,e,s)))}function DK(n){let t=kK(n),e=bT(),s=!0;const i=u=>(h,f)=>{const m=qo(n,f,u==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:v,...b}=m;h={...h,...b,...v}}return h};function r(u){t=u(n)}function o(u){const{props:h}=n,f=CD(n.parent)||{},m=[],g=new Set;let v={},b=1/0;for(let A=0;A<OK;A++){const E=PK[A],C=e[E],T=h[E]!==void 0?h[E]:f[E],M=fu(T),P=E===u?C.isActive:null;P===!1&&(b=A);let k=T===f[E]&&T!==h[E]&&M;if(k&&s&&n.manuallyAnimateOnMount&&(k=!1),C.protectedKeys={...v},!C.isActive&&P===null||!T&&!C.prevProp||Pp(T)||typeof T=="boolean")continue;const D=NK(C.prevProp,T);let N=D||E===u&&C.isActive&&!k&&M||A>b&&M,U=!1;const V=Array.isArray(T)?T:[T];let q=V.reduce(i(E),{});P===!1&&(q={});const{prevResolvedValues:it={}}=C,at={...it,...q},rt=I=>{N=!0,g.has(I)&&(U=!0,g.delete(I)),C.needsAnimating[I]=!0;const F=n.getValue(I);F&&(F.liveStyle=!1)};for(const I in at){const F=q[I],W=it[I];if(v.hasOwnProperty(I))continue;let L=!1;ab(F)&&ab(W)?L=!TD(F,W):L=F!==W,L?F!=null?rt(I):g.add(I):F!==void 0&&g.has(I)?rt(I):C.protectedKeys[I]=!0}C.prevProp=T,C.prevResolvedValues=q,C.isActive&&(v={...v,...q}),s&&n.blockInitialAnimation&&(N=!1);const lt=k&&D;N&&(!lt||U)&&m.push(...V.map(I=>{const F={type:E};if(typeof I=="string"&&s&&!lt&&n.manuallyAnimateOnMount&&n.parent){const{parent:W}=n,L=qo(W,I);if(W.enteringChildren&&L){const{delayChildren:K}=L.transition||{};F.delay=ED(W.enteringChildren,n,K)}}return{animation:I,options:F}}))}if(g.size){const A={};if(typeof h.initial!="boolean"){const E=qo(n,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(A.transition=E.transition)}g.forEach(E=>{const C=n.getBaseTarget(E),T=n.getValue(E);T&&(T.liveStyle=!0),A[E]=C??null}),m.push({animation:A})}let w=!!m.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(w=!1),s=!1,w?t(m):Promise.resolve()}function c(u,h){if(e[u].isActive===h)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(u,h)),e[u].isActive=h;const f=o(u);for(const m in e)e[m].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:r,getState:()=>e,reset:()=>{e=bT(),s=!0}}}function NK(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!TD(t,n):!1}function Qr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bT(){return{animate:Qr(!0),whileInView:Qr(),whileHover:Qr(),whileTap:Qr(),whileDrag:Qr(),whileFocus:Qr(),exit:Qr()}}class Pr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class LK extends Pr{constructor(t){super(t),t.animationState||(t.animationState=DK(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let jK=0;class IK extends Pr{constructor(){super(...arguments),this.id=jK++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const FK={animation:{Feature:LK},exit:{Feature:IK}};function gu(n,t,e,s={passive:!0}){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e)}function Yu(n){return{point:{x:n.pageX,y:n.pageY}}}const BK=n=>t=>hw(t)&&n(t,Yu(t));function Wc(n,t,e,s){return gu(n,t,BK(e),s)}const RD=1e-4,UK=1-RD,zK=1+RD,MD=.01,HK=0-MD,VK=0+MD;function gn(n){return n.max-n.min}function $K(n,t,e){return Math.abs(n-t)<=e}function wT(n,t,e,s=.5){n.origin=s,n.originPoint=ce(t.min,t.max,n.origin),n.scale=gn(e)/gn(t),n.translate=ce(e.min,e.max,n.origin)-n.originPoint,(n.scale>=UK&&n.scale<=zK||isNaN(n.scale))&&(n.scale=1),(n.translate>=HK&&n.translate<=VK||isNaN(n.translate))&&(n.translate=0)}function Kc(n,t,e,s){wT(n.x,t.x,e.x,s?s.originX:void 0),wT(n.y,t.y,e.y,s?s.originY:void 0)}function xT(n,t,e){n.min=e.min+t.min,n.max=n.min+gn(t)}function GK(n,t,e){xT(n.x,t.x,e.x),xT(n.y,t.y,e.y)}function ST(n,t,e){n.min=t.min-e.min,n.max=n.min+gn(t)}function Yc(n,t,e){ST(n.x,t.x,e.x),ST(n.y,t.y,e.y)}function ls(n){return[n("x"),n("y")]}const PD=({current:n})=>n?n.ownerDocument.defaultView:null,AT=(n,t)=>Math.abs(n-t);function qK(n,t){const e=AT(n.x,t.x),s=AT(n.y,t.y);return Math.sqrt(e**2+s**2)}class OD{constructor(t,e,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=jy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=qK(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:w}=g,{timestamp:A}=Ze;this.history.push({...w,timestamp:A});const{onStart:E,onMove:C}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ly(v,this.transformPagePoint),ue.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=jy(g.type==="pointercancel"?this.lastMoveEventInfo:Ly(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,E),w&&w(g,E)},!hw(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const c=Yu(t),u=Ly(c,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ze;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=e;m&&m(t,jy(u,this.history)),this.removeListeners=qu(Wc(this.contextWindow,"pointermove",this.handlePointerMove),Wc(this.contextWindow,"pointerup",this.handlePointerUp),Wc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ar(this.updatePoint)}}function Ly(n,t){return t?{point:t(n.point)}:n}function _T(n,t){return{x:n.x-t.x,y:n.y-t.y}}function jy({point:n},t){return{point:n,delta:_T(n,kD(t)),offset:_T(n,WK(t)),velocity:KK(t,.1)}}function WK(n){return n[0]}function kD(n){return n[n.length-1]}function KK(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,s=null;const i=kD(n);for(;e>=0&&(s=n[e],!(i.timestamp-s.timestamp>Cs(t)));)e--;if(!s)return{x:0,y:0};const r=Zs(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function YK(n,{min:t,max:e},s){return t!==void 0&&n<t?n=s?ce(t,n,s.min):Math.max(n,t):e!==void 0&&n>e&&(n=s?ce(e,n,s.max):Math.min(n,e)),n}function ET(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function XK(n,{top:t,left:e,bottom:s,right:i}){return{x:ET(n.x,e,i),y:ET(n.y,t,s)}}function TT(n,t){let e=t.min-n.min,s=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,s]=[s,e]),{min:e,max:s}}function QK(n,t){return{x:TT(n.x,t.x),y:TT(n.y,t.y)}}function ZK(n,t){let e=.5;const s=gn(n),i=gn(t);return i>s?e=tl(t.min,t.max-s,n.min):s>i&&(e=tl(n.min,n.max-i,t.min)),Di(0,1,e)}function JK(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const cb=.35;function tY(n=cb){return n===!1?n=0:n===!0&&(n=cb),{x:CT(n,"left","right"),y:CT(n,"top","bottom")}}function CT(n,t,e){return{min:RT(n,t),max:RT(n,e)}}function RT(n,t){return typeof n=="number"?n:n[t]||0}const eY=new WeakMap;class nY{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ge(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Yu(m).point)},o=(m,g)=>{const{drag:v,dragPropagation:b,onDragStart:w}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vW(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ls(E=>{let C=this.getAxisMotionValue(E).get()||0;if(Js.test(C)){const{projection:T}=this.visualElement;if(T&&T.layout){const M=T.layout.layoutBox[E];M&&(C=gn(M)*(parseFloat(C)/100))}}this.originPoint[E]=C}),w&&ue.postRender(()=>w(m,g)),ob(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:w,onDrag:A}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:E}=g;if(b&&this.currentDirection===null){this.currentDirection=sY(E),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),A&&A(m,g)},u=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ls(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new OD(t,{onSessionStart:r,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:PD(this.visualElement)})}stop(t,e){const s=t||this.latestPointerEvent,i=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&ue.postRender(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,s){const{drag:i}=this.getProps();if(!s||!Lh(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=YK(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Fo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=XK(s.layoutBox,t):this.constraints=!1,this.elastic=tY(e),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ls(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=JK(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Fo(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=lK(s,i.root,this.visualElement.getTransformPagePoint());let o=QK(i.layout.layoutBox,r);if(e){const c=e(rK(o));this.hasMutatedConstraints=!!c,c&&(o=fD(c))}return o}startAnimation(t){const{drag:e,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=ls(f=>{if(!Lh(f,e,this.currentDirection))return;let m=u&&u[f]||{};o&&(m={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:s?t[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(f,b)});return Promise.all(h).then(c)}startAxisValueAnimation(t,e){const s=this.getAxisMotionValue(t);return ob(this.visualElement,t),s.start(Aw(t,s,0,e,this.visualElement,!1))}stopAnimation(){ls(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ls(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[e];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){ls(e=>{const{drag:s}=this.getProps();if(!Lh(e,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(e);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[e];r.set(t[e]-ce(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:s}=this.visualElement;if(!Fo(e)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ls(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=ZK({min:u,max:u},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ls(o=>{if(!Lh(o,t,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(ce(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;eY.set(this.visualElement,this);const t=this.visualElement.current,e=Wc(t,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();Fo(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ue.read(s);const o=gu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ls(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),e(),r(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=cb,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:c}}}function Lh(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function sY(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class iY extends Pr{constructor(t){super(t),this.removeGroupControls=fs,this.removeListeners=fs,this.controls=new nY(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fs}unmount(){this.removeGroupControls(),this.removeListeners()}}const MT=n=>(t,e)=>{n&&ue.postRender(()=>n(t,e))};class rY extends Pr{constructor(){super(...arguments),this.removePointerDownListener=fs}onPointerDown(t){this.session=new OD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:MT(t),onStart:MT(e),onMove:s,onEnd:(r,o)=>{delete this.session,i&&ue.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=Wc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PT(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Dc={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Et.test(n))n=parseFloat(n);else return n;const e=PT(n,t.target.x),s=PT(n,t.target.y);return`${e}% ${s}%`}},aY={correct:(n,{treeScale:t,projectionDelta:e})=>{const s=n,i=_r.parse(n);if(i.length>5)return s;const r=_r.createTransformer(n),o=typeof i[0]!="number"?1:0,c=e.x.scale*t.x,u=e.y.scale*t.y;i[0+o]/=c,i[1+o]/=u;const h=ce(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),r(i)}};let Iy=!1;class oY extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=t;DW(lY),r&&(e.group&&e.group.add(r),s&&s.register&&i&&s.register(r),Iy&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),nf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:s,drag:i,isPresent:r}=this.props,{projection:o}=s;return o&&(o.isPresent=r,Iy=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||ue.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:s}=this.props,{projection:i}=t;Iy=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function DD(n){const[t,e]=TW(),s=_.useContext(ik);return S.jsx(oY,{...n,layoutGroup:s,switchLayoutGroup:_.useContext(dD),isPresent:t,safeToRemove:e})}const lY={borderRadius:{...Dc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dc,borderTopRightRadius:Dc,borderBottomLeftRadius:Dc,borderBottomRightRadius:Dc,boxShadow:aY};function ND(n,t,e){const s=qe(n)?n:Aa(n);return s.start(Aw("",s,t,e)),s.animation}const cY=(n,t)=>n.depth-t.depth;class uY{constructor(){this.children=[],this.isDirty=!1}add(t){q0(this.children,t),this.isDirty=!0}remove(t){Rp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(cY),this.isDirty=!1,this.children.forEach(t)}}function dY(n,t){const e=On.now(),s=({timestamp:i})=>{const r=i-e;r>=t&&(Ar(s),n(r-t))};return ue.setup(s,!0),()=>Ar(s)}const LD=["TopLeft","TopRight","BottomLeft","BottomRight"],hY=LD.length,OT=n=>typeof n=="string"?parseFloat(n):n,kT=n=>typeof n=="number"||Et.test(n);function fY(n,t,e,s,i,r){i?(n.opacity=ce(0,e.opacity??1,pY(s)),n.opacityExit=ce(t.opacity??1,0,mY(s))):r&&(n.opacity=ce(t.opacity??1,e.opacity??1,s));for(let o=0;o<hY;o++){const c=`border${LD[o]}Radius`;let u=DT(t,c),h=DT(e,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||kT(u)===kT(h)?(n[c]=Math.max(ce(OT(u),OT(h),s),0),(Js.test(h)||Js.test(u))&&(n[c]+="%")):n[c]=h}(t.rotate||e.rotate)&&(n.rotate=ce(t.rotate||0,e.rotate||0,s))}function DT(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const pY=jD(0,.5,gk),mY=jD(.5,.95,fs);function jD(n,t,e){return s=>s<n?0:s>t?1:e(tl(n,t,s))}function NT(n,t){n.min=t.min,n.max=t.max}function os(n,t){NT(n.x,t.x),NT(n.y,t.y)}function LT(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function jT(n,t,e,s,i){return n-=t,n=Rf(n,1/e,s),i!==void 0&&(n=Rf(n,1/i,s)),n}function gY(n,t=0,e=1,s=.5,i,r=n,o=n){if(Js.test(t)&&(t=parseFloat(t),t=ce(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ce(r.min,r.max,s);n===r&&(c-=t),n.min=jT(n.min,t,e,c,i),n.max=jT(n.max,t,e,c,i)}function IT(n,t,[e,s,i],r,o){gY(n,t[e],t[s],t[i],t.scale,r,o)}const yY=["x","scaleX","originX"],vY=["y","scaleY","originY"];function FT(n,t,e,s){IT(n.x,t,yY,e?e.x:void 0,s?s.x:void 0),IT(n.y,t,vY,e?e.y:void 0,s?s.y:void 0)}function BT(n){return n.translate===0&&n.scale===1}function ID(n){return BT(n.x)&&BT(n.y)}function UT(n,t){return n.min===t.min&&n.max===t.max}function bY(n,t){return UT(n.x,t.x)&&UT(n.y,t.y)}function zT(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function FD(n,t){return zT(n.x,t.x)&&zT(n.y,t.y)}function HT(n){return gn(n.x)/gn(n.y)}function VT(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class wY{constructor(){this.members=[]}add(t){q0(this.members,t),t.scheduleRender()}remove(t){if(Rp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let s;for(let i=e;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(t,e){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,e&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:s}=t;e.onExitComplete&&e.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xY(n,t,e){let s="";const i=n.x.translate/t.x,r=n.y.translate/t.y,o=e?.z||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:g,skewX:v,skewY:b}=e;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),m&&(s+=`rotateX(${m}deg) `),g&&(s+=`rotateY(${g}deg) `),v&&(s+=`skewX(${v}deg) `),b&&(s+=`skewY(${b}deg) `)}const c=n.x.scale*t.x,u=n.y.scale*t.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const Fy=["","X","Y","Z"],SY=1e3;let AY=0;function By(n,t,e,s){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),s&&(s[n]=0))}function BD(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=_D(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",ue,!(i||r))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&BD(s)}function UD({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},c=t?.()){this.id=AY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TY),this.nodes.forEach(PY),this.nodes.forEach(OY),this.nodes.forEach(CY)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new uY)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Y0),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=fw(o)&&!Jk(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let f,m=0;const g=()=>this.root.updateBlockedByResize=!1;ue.read(()=>{m=window.innerWidth}),n(o,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,f&&f(),f=dY(g,250),nf.hasAnimatedSinceResize&&(nf.hasAnimatedSinceResize=!1,this.nodes.forEach(qT)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||jY,{onLayoutAnimationStart:w,onLayoutAnimationComplete:A}=h.getProps(),E=!this.targetLayout||!FD(this.targetLayout,v),C=!m&&g;if(this.options.layoutRoot||this.resumeFrom||C||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...cw(b,"layout"),onPlay:w,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,C)}else m||qT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ar(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kY),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($T);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(GT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MY),this.nodes.forEach(_Y),this.nodes.forEach(EY)):this.nodes.forEach(GT),this.clearAllSnapshots();const c=On.now();Ze.delta=Di(0,1e3/60,c-Ze.timestamp),Ze.timestamp=c,Ze.isProcessing=!0,Cy.update.process(Ze),Cy.preRender.process(Ze),Cy.render.process(Ze),Ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RY),this.sharedNodes.forEach(DY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gn(this.snapshot.measuredBox.x)&&!gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ID(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||ta(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),IY(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ge();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(FY))){const{scroll:h}=this.root;h&&(Bo(c.x,h.offset.x),Bo(c.y,h.offset.y))}return c}removeElementScroll(o){const c=ge();if(os(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&os(c,o),Bo(c.x,f.offset.x),Bo(c.y,f.offset.y))}return c}applyTransform(o,c=!1){const u=ge();os(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Uo(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ta(f.latestValues)&&Uo(u,f.latestValues)}return ta(this.latestValues)&&Uo(u,this.latestValues),u}removeTransform(o){const c=ge();os(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ta(h.latestValues))continue;sb(h.latestValues)&&h.updateSnapshot();const f=ge(),m=h.measurePageBox();os(f,m),FT(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ta(this.latestValues)&&FT(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ze.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),Yc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ge(),this.targetWithTransforms=ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):os(this.target,this.layout.layoutBox),mD(this.target,this.targetDelta)):os(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),Yc(this.relativeTargetOrigin,this.target,g.target),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||sb(this.parent.latestValues)||pD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ze.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;os(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;oK(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ge());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LT(this.prevProjectionDelta.x,this.projectionDelta.x),LT(this.prevProjectionDelta.y,this.projectionDelta.y)),Kc(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!VT(this.projectionDelta.x,this.prevProjectionDelta.x)||!VT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zo(),this.projectionDelta=zo(),this.projectionDeltaWithTransform=zo()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},m=zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=ge(),v=u?u.source:void 0,b=this.layout?this.layout.source:void 0,w=v!==b,A=this.getStack(),E=!A||A.members.length<=1,C=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(LY));this.animationProgress=0;let T;this.mixTargetDelta=M=>{const P=M/1e3;WT(m.x,o.x,P),WT(m.y,o.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NY(this.relativeTarget,this.relativeTargetOrigin,g,P),T&&bY(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ge()),os(T,this.relativeTarget)),w&&(this.animationValues=f,fY(f,h,this.latestValues,P,C,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ar(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ue.update(()=>{nf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Aa(0)),this.currentAnimation=ND(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&zD(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||ge();const m=gn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const g=gn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}os(c,u),Uo(c,f),Kc(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wY),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&By("z",o,h,this.animationValues);for(let f=0;f<Fy.length;f++)By(`rotate${Fy[f]}`,o,h,this.animationValues),By(`skew${Fy[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ef(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ef(c?.pointerEvents)||""),this.hasProjected&&!ta(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=xY(this.projectionDeltaWithTransform,this.treeScale,f);u&&(m=u(f,m)),o.transform=m;const{x:g,y:v}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in pu){if(f[b]===void 0)continue;const{correct:w,applyTo:A,isCSSVariable:E}=pu[b],C=m==="none"?f[b]:w(f[b],h);if(A){const T=A.length;for(let M=0;M<T;M++)o[A[M]]=C}else E?this.options.visualElement.renderState.vars[b]=C:o[b]=C}this.options.layoutId&&(o.pointerEvents=h===this?ef(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach($T),this.root.sharedNodes.clear()}}}function _Y(n){n.updateLayout()}function EY(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:s}=n.layout,{animationType:i}=n.options,r=t.source!==n.layout.source;i==="size"?ls(f=>{const m=r?t.measuredBox[f]:t.layoutBox[f],g=gn(m);m.min=e[f].min,m.max=m.min+g}):zD(i,t.layoutBox,e)&&ls(f=>{const m=r?t.measuredBox[f]:t.layoutBox[f],g=gn(e[f]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+g)});const o=zo();Kc(o,e,t.layoutBox);const c=zo();r?Kc(c,n.applyTransform(s,!0),t.measuredBox):Kc(c,e,t.layoutBox);const u=!ID(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const v=ge();Yc(v,t.layoutBox,m.layoutBox);const b=ge();Yc(b,e,g.layoutBox),FD(v,b)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:e}=n.options;e&&e()}n.options.transition=void 0}function TY(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function CY(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function RY(n){n.clearSnapshot()}function $T(n){n.clearMeasurements()}function GT(n){n.isLayoutDirty=!1}function MY(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function qT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function PY(n){n.resolveTargetDelta()}function OY(n){n.calcProjection()}function kY(n){n.resetSkewAndRotation()}function DY(n){n.removeLeadSnapshot()}function WT(n,t,e){n.translate=ce(t.translate,0,e),n.scale=ce(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function KT(n,t,e,s){n.min=ce(t.min,e.min,s),n.max=ce(t.max,e.max,s)}function NY(n,t,e,s){KT(n.x,t.x,e.x,s),KT(n.y,t.y,e.y,s)}function LY(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const jY={duration:.45,ease:[.4,0,.1,1]},YT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),XT=YT("applewebkit/")&&!YT("chrome/")?Math.round:fs;function QT(n){n.min=XT(n.min),n.max=XT(n.max)}function IY(n){QT(n.x),QT(n.y)}function zD(n,t,e){return n==="position"||n==="preserve-aspect"&&!$K(HT(t),HT(e),.2)}function FY(n){return n!==n.root&&n.scroll?.wasRoot}const BY=UD({attachResizeListener:(n,t)=>gu(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uy={current:void 0},HD=UD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Uy.current){const n=new BY({});n.mount(window),n.setOptions({layoutScroll:!0}),Uy.current=n}return Uy.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),UY={pan:{Feature:rY},drag:{Feature:iY,ProjectionNode:HD,MeasureLayout:DD}};function ZT(n,t,e){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,r=s[i];r&&ue.postRender(()=>r(t,Yu(t)))}class zY extends Pr{mount(){const{current:t}=this.node;t&&(this.unmount=bW(t,(e,s)=>(ZT(this.node,s,"Start"),i=>ZT(this.node,i,"End"))))}unmount(){}}class HY extends Pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qu(gu(this.node.current,"focus",()=>this.onFocus()),gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JT(n,t,e){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),r=s[i];r&&ue.postRender(()=>r(t,Yu(t)))}class VY extends Pr{mount(){const{current:t}=this.node;t&&(this.unmount=AW(t,(e,s)=>(JT(this.node,s,"Start"),(i,{success:r})=>JT(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ub=new WeakMap,zy=new WeakMap,$Y=n=>{const t=ub.get(n.target);t&&t(n)},GY=n=>{n.forEach($Y)};function qY({root:n,...t}){const e=n||document;zy.has(e)||zy.set(e,{});const s=zy.get(e),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(GY,{root:n,...t})),s[i]}function WY(n,t,e){const s=qY(t);return ub.set(n,e),s.observe(n),()=>{ub.delete(n),s.unobserve(n)}}const KY={some:0,all:1};class YY extends Pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:s,amount:i="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:KY[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=h?f:m;g&&g(u)};return WY(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(XY(t,e))&&this.startObserver()}unmount(){}}function XY({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const QY={inView:{Feature:YY},tap:{Feature:VY},focus:{Feature:HY},hover:{Feature:zY}},ZY={layout:{ProjectionNode:HD,MeasureLayout:DD}},JY={...FK,...QY,...UY,...ZY},tX=iK(JY,fK);function tC(n){const t=rk(()=>Aa(n)),{isStatic:e}=_.useContext(pw);if(e){const[,s]=_.useState(n);_.useEffect(()=>t.on("change",s),[])}return t}function Ew(n){return typeof n=="object"&&!Array.isArray(n)}function VD(n,t,e,s){return typeof n=="string"&&Ew(t)?Kk(n,e,s):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function eX(n,t,e){return n*(t+1)}function eC(n,t,e,s){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,n+parseFloat(t)):t==="<"?e:t.startsWith("<")?Math.max(0,e+parseFloat(t.slice(1))):s.get(t)??n}function nX(n,t,e){for(let s=0;s<n.length;s++){const i=n[s];i.at>t&&i.at<e&&(Rp(n,i),s--)}}function sX(n,t,e,s,i,r){nX(n,i,r);for(let o=0;o<t.length;o++)n.push({value:t[o],at:ce(i,r,s[o]),easing:wk(e,o)})}function iX(n,t){for(let e=0;e<n.length;e++)n[e]=n[e]/(t+1)}function rX(n,t){return n.at===t.at?n.value===null?1:t.value===null?-1:0:n.at-t.at}const aX="easeInOut";function oX(n,{defaultTransition:t={},...e}={},s,i){const r=t.duration||.3,o=new Map,c=new Map,u={},h=new Map;let f=0,m=0,g=0;for(let v=0;v<n.length;v++){const b=n[v];if(typeof b=="string"){h.set(b,m);continue}else if(!Array.isArray(b)){h.set(b.name,eC(m,b.at,f,h));continue}let[w,A,E={}]=b;E.at!==void 0&&(m=eC(m,E.at,f,h));let C=0;const T=(M,P,k,D=0,N=0)=>{const U=lX(M),{delay:V=0,times:q=Lk(U),type:it="keyframes",repeat:at,repeatType:rt,repeatDelay:lt=0,...j}=P;let{ease:I=t.ease||"easeOut",duration:F}=P;const W=typeof V=="function"?V(D,N):V,L=U.length,K=lw(it)?it:i?.[it||"keyframes"];if(L<=2&&K){let ht=100;if(L===2&&dX(U)){const ft=U[1]-U[0];ht=Math.abs(ft)}const ut={...j};F!==void 0&&(ut.duration=Cs(F));const J=kk(ut,ht,K);I=J.ease,F=J.duration}F??(F=r);const nt=m+W;q.length===1&&q[0]===0&&(q[1]=1);const Z=q.length-U.length;if(Z>0&&Nk(q,Z),U.length===1&&U.unshift(null),at){F=eX(F,at);const ht=[...U],ut=[...q];I=Array.isArray(I)?[...I]:[I];const J=[...I];for(let ft=0;ft<at;ft++){U.push(...ht);for(let jt=0;jt<ht.length;jt++)q.push(ut[jt]+(ft+1)),I.push(jt===0?"linear":wk(J,jt-1))}iX(q,at)}const ot=nt+F;sX(k,U,I,q,nt,ot),C=Math.max(W+F,C),g=Math.max(ot,g)};if(qe(w)){const M=nC(w,c);T(A,E,sC("default",M))}else{const M=VD(w,A,s,u),P=M.length;for(let k=0;k<P;k++){A=A,E=E;const D=M[k],N=nC(D,c);for(const U in A)T(A[U],cX(E,U),sC(U,N),k,P)}}f=m,m+=C}return c.forEach((v,b)=>{for(const w in v){const A=v[w];A.sort(rX);const E=[],C=[],T=[];for(let P=0;P<A.length;P++){const{at:k,value:D,easing:N}=A[P];E.push(D),C.push(tl(0,g,k)),T.push(N||"easeOut")}C[0]!==0&&(C.unshift(0),E.unshift(E[0]),T.unshift(aX)),C[C.length-1]!==1&&(C.push(1),E.push(null)),o.has(b)||o.set(b,{keyframes:{},transition:{}});const M=o.get(b);M.keyframes[w]=E,M.transition[w]={...t,duration:g,ease:T,times:C,...e}}}),o}function nC(n,t){return!t.has(n)&&t.set(n,{}),t.get(n)}function sC(n,t){return t[n]||(t[n]=[]),t[n]}function lX(n){return Array.isArray(n)?n:[n]}function cX(n,t){return n&&n[t]?{...n,...n[t]}:{...n}}const uX=n=>typeof n=="number",dX=n=>n.every(uX);function hX(n,t){return n in t}class fX extends vD{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,e){if(hX(e,t)){const s=t[e];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(t,e){delete e.output[t]}measureInstanceViewportBox(){return ge()}build(t,e){Object.assign(t.output,e)}renderInstance(t,{output:e}){Object.assign(t,e)}sortInstanceNodePosition(){return 0}}function pX(n){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},e=fw(n)&&!Jk(n)?new AD(t):new xD(t);e.mount(n),mu.set(n,e)}function mX(n){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},e=new fX(t);e.mount(n),mu.set(n,e)}function gX(n,t){return qe(n)||typeof n=="number"||typeof n=="string"&&!Ew(t)}function $D(n,t,e,s){const i=[];if(gX(n,t))i.push(ND(n,Ew(t)&&t.default||t,e&&(e.default||e)));else{const r=VD(n,t,s),o=r.length;for(let c=0;c<o;c++){const u=r[c],h=u instanceof Element?pX:mX;mu.has(u)||h(u);const f=mu.get(u),m={...e};"delay"in m&&typeof m.delay=="function"&&(m.delay=m.delay(c,o)),i.push(..._w(f,{...t,transition:m},{}))}}return i}function yX(n,t,e){const s=[];return oX(n,t,e,{spring:hu}).forEach(({keyframes:r,transition:o},c)=>{s.push(...$D(c,r,o))}),s}function vX(n){return Array.isArray(n)&&n.some(Array.isArray)}function bX(n){function t(e,s,i){let r=[];return vX(e)?r=yX(e,s,n):r=$D(e,s,i,n),new nW(r)}return t}const iC=bX(),db={pending:"text-gray-400",correct:"text-foreground",incorrect:"text-gray-500",current:"text-primary"},rC={lines:3,overscan:1,edgePadding:1},wX=_.memo(({char:n,status:t,spanRef:e,index:s})=>S.jsx("span",{ref:e,"data-index":s,className:jf(`${db[t]} transition-colors duration-150`),children:n}));function xX({containerRef:n}){const{state:t,updateProgress:e,statsRef:s,resume:i,completeRound:r,currentIndexRef:o,statusRef:c,pause:u}=Iu(),h=t.typingText,f=h.split(""),m=_.useRef([]),g=tC(0),v=tC(1),[b,w]=_.useState(0),[A,E]=_.useState([]),C=(I,F)=>{c.current[I]=F;const W=m.current[I];W&&(W.className=`${db[F]} transition-colors duration-150`,F==="correct"?s.current.correct++:s.current.incorrect++)},T=I=>Math.max(0,Math.min(I,f.length-1)),M=I=>{const F=n?.current,W=m.current[T(I)];if(!F||!W)return;const L=F.getBoundingClientRect(),K=W.getBoundingClientRect(),nt=K.left-L.left,Z=K.top-L.top+1;iC(g,nt,{type:"spring",stiffness:300,damping:30}),iC(v,Z,{type:"spring",stiffness:300,damping:30})},P=()=>{const I=[];let F=null;m.current.forEach((W,L)=>{if(!W)return;const K=W.getBoundingClientRect().top;!F||F.top!==K?(F&&I.push(F),F={start:L,end:L,top:K}):F.end=L}),F&&I.push(F),E(I)},k=I=>{for(let F=0;F<A.length;F++){const{start:W,end:L}=A[F];if(I>=W&&I<=L)return F}return 0},D=I=>{const F=k(I),{lines:W,edgePadding:L}=rC;F<b+L?w(Math.max(0,F-L)):F>=b+W-L&&w(Math.min(Math.max(0,A.length-W),F-W+L+1))},N=()=>{const I=o.current;I!==0&&(C(I,"pending"),C(I-1,"current"),o.current=I-1,D(o.current),M(o.current),e(o.current,m.current.length))},U=I=>{const F=o.current;if(F>=f.length)return;const W=f[F];C(F,I===W?"correct":"incorrect"),F+1<f.length?(C(F+1,"current"),o.current=F+1):(ps.success("Completed"),o.current=F,e(f.length,f.length),r()),D(o.current),M(o.current)},V=I=>{if(s.current.startedAt||(s.current.startedAt=Date.now()),(I.key===" "||I.key==="Backspace")&&I.preventDefault(),I.key==="Backspace"){N();return}I.key.length===1&&(U(I.key),e(o.current,m.current.length),s.current.isPaused&&i())};_.useEffect(()=>{if(c.current.length!==f.length||c.current.length===0){if(c.current=Array(f.length).fill("pending"),f.length>0){const I=o.current;I<f.length?c.current[I]="current":I===0&&(c.current[0]="current")}w(0)}},[h]),_.useLayoutEffect(()=>{P()},[f.length,h]),_.useLayoutEffect(()=>{D(o.current),M(o.current)},[b,f.length,A]),_.useEffect(()=>{t.startedAt&&t.progress===0&&o.current===0&&!s.current.completed?(o.current=0,c.current=Array(f.length).fill("pending"),f.length>0&&(c.current[0]="current"),w(0),requestAnimationFrame(()=>{M(0),D(0)})):requestAnimationFrame(()=>{M(o.current)})},[t.startedAt,h]),_.useEffect(()=>{n?.current&&n.current.focus()},[h]),_.useLayoutEffect(()=>{requestAnimationFrame(()=>{c.current.forEach((I,F)=>{const W=m.current[F];W&&I&&(W.className=`${db[I]} transition-colors duration-150`)}),M(o.current)})},[f.length,A]),_.useEffect(()=>{const I=s.current;return()=>{!I.isPaused&&!I.completed&&u()}},[]);const{lines:q,overscan:it}=rC,at=Math.max(0,b-it),rt=Math.min(A.length-1,b+q+it-1),lt=A[at]?.start??0,j=A[rt]?.end??f.length-1;return S.jsx("div",{ref:n,onKeyDown:V,tabIndex:0,className:jf("text-heading font-semibold [word-spacing:10px] leading-relaxed relative [text-align:justify] [text-justify:center] focus:outline-none focus:border-none"),children:S.jsxs("div",{className:"relative mt-3 outline-none",tabIndex:0,autoFocus:!0,onKeyDown:V,children:[f.slice(lt,j+1).map((I,F)=>{const W=lt+F;return S.jsx(wX,{char:I,status:c.current[W]??(W===0?"current":"pending"),index:W,spanRef:L=>{m.current[W]=L}},W)}),S.jsx(tX.div,{className:"absolute w-0.5 bg-primary",style:{left:g,top:v,height:"2rem"},animate:{opacity:[1,0,1]},transition:{opacity:{duration:1,repeat:1/0,ease:"linear"}}})]})})}var Tw="Progress",Cw=100,[SX,XJ]=ys(Tw),[AX,_X]=SX(Tw),GD=_.forwardRef((n,t)=>{const{__scopeProgress:e,value:s=null,max:i,getValueLabel:r=EX,...o}=n;(i||i===0)&&!aC(i)&&console.error(TX(`${i}`,"Progress"));const c=aC(i)?i:Cw;s!==null&&!oC(s,c)&&console.error(CX(`${s}`,"Progress"));const u=oC(s,c)?s:null,h=Mf(u)?r(u,c):void 0;return S.jsx(AX,{scope:e,value:u,max:c,children:S.jsx(xt.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Mf(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":KD(u,c),"data-value":u??void 0,"data-max":c,...o,ref:t})})});GD.displayName=Tw;var qD="ProgressIndicator",WD=_.forwardRef((n,t)=>{const{__scopeProgress:e,...s}=n,i=_X(qD,e);return S.jsx(xt.div,{"data-state":KD(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});WD.displayName=qD;function EX(n,t){return`${Math.round(n/t*100)}%`}function KD(n,t){return n==null?"indeterminate":n===t?"complete":"loading"}function Mf(n){return typeof n=="number"}function aC(n){return Mf(n)&&!isNaN(n)&&n>0}function oC(n,t){return Mf(n)&&!isNaN(n)&&n<=t&&n>=0}function TX(n,t){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Cw}\`.`}function CX(n,t){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Cw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var RX=GD,MX=WD;function PX({className:n,value:t,...e}){return S.jsx(RX,{"data-slot":"progress",className:Kt("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",n),...e,children:S.jsx(MX,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function OX({addClass:n}){const{progressRef:t}=Iu(),[e,s]=_.useState(0);return _.useEffect(()=>{const i=setInterval(()=>{s(t.current)},200);return()=>clearInterval(i)},[t]),S.jsx("div",{className:n,children:S.jsx(PX,{value:e})})}function YD(n){return re({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.75 8a4.5 4.5 0 0 1-8.61 1.834l-1.391.565A6.001 6.001 0 0 0 14.25 8 6 6 0 0 0 3.5 4.334V2.5H2v4l.75.75h3.5v-1.5H4.352A4.5 4.5 0 0 1 12.75 8z"},child:[]}]})(n)}var Hy,lC;function kX(){if(lC)return Hy;lC=1;var n={linear:function(t,e,s,i){var r=s-e;return r*t/i+e},easeInQuad:function(t,e,s,i){var r=s-e;return r*(t/=i)*t+e},easeOutQuad:function(t,e,s,i){var r=s-e;return-r*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,s,i){var r=s-e;return(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,s,i){var r=s-e;return r*(t/=i)*t*t+e},easeOutCubic:function(t,e,s,i){var r=s-e;return r*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,s,i){var r=s-e;return(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,s,i){var r=s-e;return r*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,s,i){var r=s-e;return-r*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,s,i){var r=s-e;return(t/=i/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,s,i){var r=s-e;return r*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,s,i){var r=s-e;return r*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,s,i){var r=s-e;return(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,s,i){var r=s-e;return-r*Math.cos(t/i*(Math.PI/2))+r+e},easeOutSine:function(t,e,s,i){var r=s-e;return r*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,s,i){var r=s-e;return-r/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,s,i){var r=s-e;return t==0?e:r*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,s,i){var r=s-e;return t==i?e+r:r*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,s,i){var r=s-e;return t===0?e:t===i?e+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,s,i){var r=s-e;return-r*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,s,i){var r=s-e;return r*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,s,i){var r=s-e;return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,s,i){var r=s-e,o,c,u;return u=1.70158,c=0,o=r,t===0?e:(t/=i)===1?e+r:(c||(c=i*.3),o<Math.abs(r)?(o=r,u=c/4):u=c/(2*Math.PI)*Math.asin(r/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-u)*(2*Math.PI)/c))+e)},easeOutElastic:function(t,e,s,i){var r=s-e,o,c,u;return u=1.70158,c=0,o=r,t===0?e:(t/=i)===1?e+r:(c||(c=i*.3),o<Math.abs(r)?(o=r,u=c/4):u=c/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*t)*Math.sin((t*i-u)*(2*Math.PI)/c)+r+e)},easeInOutElastic:function(t,e,s,i){var r=s-e,o,c,u;return u=1.70158,c=0,o=r,t===0?e:(t/=i/2)===2?e+r:(c||(c=i*(.3*1.5)),o<Math.abs(r)?(o=r,u=c/4):u=c/(2*Math.PI)*Math.asin(r/o),t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-u)*(2*Math.PI)/c))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-u)*(2*Math.PI)/c)*.5+r+e)},easeInBack:function(t,e,s,i,r){var o=s-e;return r===void 0&&(r=1.70158),o*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,s,i,r){var o=s-e;return r===void 0&&(r=1.70158),o*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,s,i,r){var o=s-e;return r===void 0&&(r=1.70158),(t/=i/2)<1?o/2*(t*t*(((r*=1.525)+1)*t-r))+e:o/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(t,e,s,i){var r=s-e,o;return o=n.easeOutBounce(i-t,0,r,i),r-o+e},easeOutBounce:function(t,e,s,i){var r=s-e;return(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,s,i){var r=s-e,o;return t<i/2?(o=n.easeInBounce(t*2,0,r,i),o*.5+e):(o=n.easeOutBounce(t*2-i,0,r,i),o*.5+r*.5+e)}};return Hy=n,Hy}var DX=kX();function NX(n){return n*Math.PI/180}function $n(n,t){return n+Math.random()*(t-n)}function LX(n,t){return Math.floor(n+Math.random()*(t-n+1))}var Xc;(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(Xc||(Xc={}));var dr;(function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"})(dr||(dr={}));const jX=1e3/60;class IX{constructor(t,e,s,i){this.getOptions=e;const{colors:r,initialVelocityX:o,initialVelocityY:c}=this.getOptions();this.context=t,this.x=s,this.y=i,this.w=$n(5,20),this.h=$n(5,20),this.radius=$n(5,10),this.vx=typeof o=="number"?$n(-o,o):$n(o.min,o.max),this.vy=typeof c=="number"?$n(-c,0):$n(c.min,c.max),this.shape=LX(0,2),this.angle=NX($n(0,360)),this.angularSpin=$n(-.2,.2),this.color=r[Math.floor(Math.random()*r.length)],this.rotateY=$n(0,1),this.rotationDirection=$n(0,1)?dr.Positive:dr.Negative}update(t){const{gravity:e,wind:s,friction:i,opacity:r,drawShape:o}=this.getOptions(),c=t/jX;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=e*c,this.vx+=s*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===dr.Positive?this.rotationDirection=dr.Negative:this.rotateY<=-1&&this.rotationDirection===dr.Negative&&(this.rotationDirection=dr.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=r,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Xc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Xc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Xc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class FX{constructor(t,e){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=$n(this.x,this.w+this.x),r=$n(this.y,this.h+this.y);return new IX(this.context,this.getOptions,i,r)},this.animate=i=>{const{canvas:r,context:o,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:h,recycle:f,numberOfPieces:m,debug:g,tweenFunction:v,tweenDuration:b}=this.getOptions();if(!h)return!1;const w=this.particles.length,A=f?w:c;if(A<m){u!==m&&(this.tweenProgress=0,this.tweenFrom=A,this.lastNumberOfPieces=m),this.tweenProgress=Math.min(b,Math.max(0,this.tweenProgress+i));const E=v(this.tweenProgress,this.tweenFrom,m,b),C=Math.round(E-A);for(let T=0;T<C;T++)this.particles.push(this.getParticle());this.particlesGenerated+=C}g&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${w}`,r.width-10,r.height-20));for(let E=this.particles.length-1;E>=0;E--){const C=this.particles[E];C.update(i),(C.y>r.height||C.y<-100||C.x>r.width+100||C.x<-100)&&(f&&A<=m?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return w>0||A<m},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.getOptions=e}}const Rw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:DX.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class BX{constructor(t,e){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const r={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...r,...Rw,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:r,onConfettiComplete:o,frameRate:c},canvas:u,context:h}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),r&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.generator=new FX(this.canvas,()=>this.options),this.options=e,this.update()}get options(){return this._options}set options(t){const e=this._options?.run,s=this._options?.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&s===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&e===!1&&this.update()}}const UX=je.createRef();class Mw extends je.Component{constructor(t){super(t),this.canvas=je.createRef(),this.canvas=t.canvasRef||UX}componentDidMount(){if(this.canvas.current){const t=Vy(this.props)[0];this.confetti=new BX(this.canvas.current,t)}}componentDidUpdate(){const t=Vy(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,e]=Vy(this.props),s={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...e.style};return S.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...e,style:s})}}Mw.defaultProps={...Rw};Mw.displayName="ReactConfetti";function Vy(n){const t={},e={},s={},i=[...Object.keys(Rw),"confettiSource","drawShape","onConfettiComplete","frameRate"],r=["canvasRef"];for(const o in n){const c=n[o];i.includes(o)?t[o]=c:r.includes(o)?r[o]=c:s[o]=c}return[t,s,e]}const zX=je.forwardRef((n,t)=>S.jsx(Mw,{canvasRef:t,...n}));function HX(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n&&n.addEventListener&&n.addEventListener.apply(n,t)}function VX(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n&&n.removeEventListener&&n.removeEventListener.apply(n,t)}var $y=typeof window<"u",$X=function(n){_.useEffect(n,[])},GX=function(n){var t=_.useRef(n);t.current=n,$X(function(){return function(){return t.current()}})},qX=function(n){var t=_.useRef(0),e=_.useState(n),s=e[0],i=e[1],r=_.useCallback(function(o){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){i(o)})},[]);return GX(function(){cancelAnimationFrame(t.current)}),[s,r]},WX=function(n){var t={},e=t.initialWidth,s=e===void 0?1/0:e,i=t.initialHeight,r=i===void 0?1/0:i,o=t.onChange,c=qX({width:$y?window.innerWidth:s,height:$y?window.innerHeight:r}),u=c[0],h=c[1];return _.useEffect(function(){if($y){var f=function(){var m=window.innerWidth,g=window.innerHeight;h({width:m,height:g}),o&&o(m,g)};return HX(window,"resize",f),function(){VX(window,"resize",f)}}},[]),u};function KX({wpm:n,restartFn:t}){const{width:e,height:s}=WX(),{mode:i}=sn();return S.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[S.jsx(zX,{width:e,height:s,numberOfPieces:50,gravity:.05,initialVelocityY:5,friction:.99}),S.jsxs("h1",{className:"text-6xl font-bold mb-6",children:["WPM: ",n]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsxs(Lt,{onClick:t,children:[S.jsx(YD,{})," Restart"]}),S.jsx(Lt,{variant:"secondary",asChild:!0,children:S.jsx(Xs,{to:cl(i),children:"Go to Library"})})]})]})}function cC(){const{state:n,getCurrentStats:t,resetRound:e,statsRef:s,resume:i,pause:r,isCreatingTypingText:o}=Iu(),[c,u]=_.useState({wpm:0}),h=_.useRef(null),f=()=>{s.current.isPaused?i():r(),h.current?.focus()},m=()=>{e(),h.current?.focus()};_.useEffect(()=>{let v;const b=()=>{u(t()),v=requestAnimationFrame(b)};return v=requestAnimationFrame(b),()=>cancelAnimationFrame(v)},[t]);const g=n.mode!=="idle"&&s.current.completed;return S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mt-10 mb-15",children:[n.mode==="idle"&&S.jsxs("span",{className:"text-xl flex items-center text-muted-foreground gap-2",children:[S.jsx(n_,{}),S.jsx("span",{className:"font-semibold",children:"Demo Text"})]}),n.mode==="text"&&S.jsxs("span",{className:"text-xl flex items-center text-muted-foreground gap-2",children:[S.jsx(n_,{}),S.jsx("span",{className:"font-semibold",children:n.source?.name??"Demo Text"})]}),n.mode==="group"&&S.jsxs("span",{className:"text-xl flex items-center text-muted-foreground gap-2",children:[S.jsx(Fb,{}),S.jsx("span",{className:"font-semibold",children:n.source?.name??"Demo group"})]})]}),g?S.jsx(KX,{wpm:c.wpm,restartFn:e}):o?S.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:S.jsx(QU,{className:"text-primary animate-spin"})}):S.jsx(xX,{containerRef:h}),S.jsx(OX,{addClass:"mt-10"}),!g&&S.jsxs("div",{className:"mt-6 flex justify-between text-lg text-muted-foreground",children:[S.jsxs("span",{children:["WPM: ",S.jsx("strong",{children:c.wpm})]}),S.jsxs("div",{className:"flex justify-end gap-2",children:[S.jsx(Lt,{variant:"ghost",onClick:f,children:s.current.isPaused?S.jsx(OV,{}):S.jsx(vG,{})}),S.jsx(Lt,{variant:"ghost",onClick:m,children:S.jsx(YD,{})})]})]})]})}function uC({mode:n,children:t}){return S.jsx(ER.Provider,{value:{mode:n},children:t})}function YX(n){return re({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"},child:[]}]})(n)}const XX="/static/assets/feature-pdf-Cf9HEOV7.png",QX="/static/assets/feature-group-BSzpCwxj.png",ZX="/static/assets/feature-typing-interface-B26lmxkj.png",JX="/static/assets/profile-XPYTyaGs.jpg";function tQ(){const[n,t]=_.useState(""),{user:e,signInWithGoogle:s}=xu(),{sendFeedback:i,isSendingFeedback:r}=bH(n);return S.jsxs("div",{className:"min-h-screen grid grid-cols-1 grid-rows-[auto_1fr_auto]",children:[S.jsxs("header",{className:"flex items-center justify-between py-3 px-3 md:px-8 border-b-2 border-secondary",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("img",{className:"h-8 aspect-square",src:MR,alt:"Typesmart logo image"}),S.jsx("span",{className:"text-xl font-bold",children:"TypeSmart"})]}),S.jsxs(ap,{children:[S.jsx(op,{asChild:!0,children:S.jsxs(Lt,{variant:"ghost",children:[S.jsx(TV,{})," Give Feedback"]})}),S.jsx(lp,{className:"max-w-[300px]",children:S.jsxs(cp,{children:[S.jsx(up,{children:"Share your valuable feedback"}),S.jsxs(dp,{className:"flex flex-col gap-5 mt-3",children:[S.jsx(wP,{onChange:o=>t(o.target.value),placeholder:"Send your reviews, suggestions, advices, critiques straight to me....",className:"resize-none min-h-[150px]"}),S.jsxs(Lt,{onClick:()=>i(),children:[r?S.jsx(dn,{className:"animate-spin"}):S.jsx(YX,{})," ","Send feedback"]})]})]})})]})]}),S.jsxs("div",{className:"min-h-[75vh] max-w-5xl text-center flex flex-col justify-center align-center mx-auto px-4 py-20",children:[S.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight",children:"Subconscious learning through chill typing"}),S.jsx("p",{className:"text-gray-400 font-semibold mt-5 max-w-2xl mx-auto",children:"Upload your own texts in library, make groups, start typing and grow smarter without even trying."}),S.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-center mt-10",children:[!e&&S.jsxs(Lt,{className:"px-5",onClick:s,children:[S.jsx(Ib,{})," One click login / signup"]}),e&&S.jsx(Lt,{className:"py-5 px-10",asChild:!0,children:S.jsx(Xs,{to:Ko("main"),children:"Enter Typesmart"})}),S.jsx(Lt,{variant:"secondary",className:"px-5 border-1 border-secondary",asChild:!0,children:S.jsx(Xs,{to:Ko("demo"),children:"Take Demo"})})]}),S.jsxs("div",{className:"flex items-center gap-2 justify-center mt-16",children:[S.jsx(CF,{}),S.jsx("p",{className:"text-lg font-semibold",children:"Github Open Sourced"})]})]}),S.jsxs("div",{className:"max-w-6xl mx-auto px-4 flex flex-col gap-20 mt-15",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 items-center",children:[S.jsx("img",{src:XX,alt:"Screenshot of adding text with PDF reference",className:"w-full rounded-2xl shadow-lg border-1 border-muted-foreground"}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Add new text with PDF side-by-side"}),S.jsx("p",{className:"text-muted-foreground text-lg",children:"Easily add new texts into your library while keeping a PDF open alongside for reference. Perfect for typing practice using your favorite study material, books, or research notes."})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 items-center",children:[S.jsxs("div",{className:"order-2 md:order-1",children:[S.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Organize texts into groups with importance"}),S.jsxs("p",{className:"text-muted-foreground text-lg",children:["Create multiple groups of texts, and adjust the importance of each text as ",S.jsx("span",{className:"font-semibold",children:"high"}),","," ",S.jsx("span",{className:"font-semibold",children:"medium"}),", or"," ",S.jsx("span",{className:"font-semibold",children:"low"}),". Our smart algorithm makes sure important texts appear more often while typing."]})]}),S.jsx("img",{src:QX,alt:"Screenshot of group and importance management",className:"w-full rounded-2xl shadow-lg order-1 md:order-2 border-1 border-muted-foreground"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 items-center",children:[S.jsx("img",{src:ZX,alt:"Screenshot of distraction-free typing interface",className:"w-full rounded-2xl shadow-lg border-1 border-muted-foreground"}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Zero-distraction typing interface"}),S.jsx("p",{className:"text-muted-foreground text-lg",children:"Enjoy a smooth, minimal, and stress-free typing experience. Our clean interface helps you stay fully focused on your words, making your typing sessions as chill and distraction-free as possible."})]})]})]}),S.jsxs("div",{className:"bg-card py-5 px-3 md:px-8 flex flex-col md:flex-row items-center justify-between gap-3 mt-20",children:[S.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx("img",{className:"h-6 aspect-square",src:"/logo.png",alt:"Typesmart logo image"})," ","TypeSmart by"]}),S.jsxs(Xs,{to:"https://www.github.com/abhisarxverma",className:"ms-3 flex items-center gap-2 underline",children:[S.jsx("img",{src:JX,className:"aspect-square rounded-full w-8 inline",alt:"profile image of the creator of Typesmart"})," ","Abhisar verma"]})]}),S.jsx("p",{className:"text-muted-foreground text-md text-center md:text-right",children:"© 2025 Typesmart. All rights reserved."})]})]})}function eQ(){const{isGettingUser:n}=xu();return n?S.jsxs("div",{className:"h-screen flex items-center justify-center flex-col gap-1",children:[S.jsx(dn,{className:"animate-spin text-5xl"}),S.jsx("p",{children:"Please wait"})]}):S.jsxs(II,{children:[S.jsxs(ln,{path:"/app",element:S.jsx(ZV,{children:S.jsx(uC,{mode:"main",children:S.jsx(fE,{})})}),children:[S.jsx(ln,{path:"library",element:S.jsx(gE,{})}),S.jsx(ln,{path:"library/add-text",element:S.jsx(J7,{})}),S.jsx(ln,{path:"library/text/:id",element:S.jsx(UE,{})}),S.jsx(ln,{path:"library/edit-text/:id",element:S.jsx(zE,{})}),S.jsx(ln,{path:"library/group/:id",element:S.jsx(HE,{})}),S.jsx(ln,{path:"typing",element:S.jsx(cC,{})})]}),S.jsxs(ln,{path:"/demo",element:S.jsx(uC,{mode:"demo",children:S.jsx(fE,{})}),children:[S.jsx(ln,{path:"library",element:S.jsx(gE,{})}),S.jsx(ln,{path:"typing",element:S.jsx(cC,{})}),S.jsx(ln,{path:"library/text/:id",element:S.jsx(UE,{})}),S.jsx(ln,{path:"library/group/:id",element:S.jsx(HE,{})}),S.jsx(ln,{path:"library/edit-text/:id",element:S.jsx(zE,{})})]}),S.jsx(ln,{path:"/login-signup",element:S.jsx(r$,{})}),S.jsx(ln,{path:"/",element:S.jsx(tQ,{})})]})}var nQ=["added","removed","updated"];function dC(n){return nQ.includes(n)}async function sQ({queryClient:n,persister:t,maxAge:e=1e3*60*60*24,buster:s="",hydrateOptions:i}){try{const r=await t.restoreClient();if(r)if(r.timestamp){const o=Date.now()-r.timestamp>e,c=r.buster!==s;if(o||c)return t.removeClient();uz(n,r.clientState,i)}else return t.removeClient()}catch(r){throw await t.removeClient(),r}}async function hC({queryClient:n,persister:t,buster:e="",dehydrateOptions:s}){const i={buster:e,timestamp:Date.now(),clientState:cz(n,s)};await t.persistClient(i)}function iQ(n){const t=n.queryClient.getQueryCache().subscribe(s=>{dC(s.type)&&hC(n)}),e=n.queryClient.getMutationCache().subscribe(s=>{dC(s.type)&&hC(n)});return()=>{t(),e()}}function rQ(n){let t=!1,e;const s=()=>{t=!0,e?.()},i=sQ(n).then(()=>{t||(e=iQ(n))});return[s,i]}function hb(){}function aQ(n,{interval:t=1e3,onError:e=hb}={}){if(typeof n!="function")throw new Error("argument is not function.");let s=0,i=null,r=!1,o=!1;return async(...c)=>{if(i=c,!o){for(o=!0;r;)await new Promise(u=>setTimeout(u,t));for(;Date.now()<s;)await new Promise(u=>setTimeout(u,s-Date.now()));o=!1,r=!0;try{await n(...i)}catch(u){try{e(u)}catch{}}s=Date.now()+t,r=!1}}}var oQ=({storage:n,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:e=1e3,serialize:s=JSON.stringify,deserialize:i=JSON.parse,retry:r})=>{if(n){const o=async c=>{try{const u=await s(c);await n.setItem(t,u);return}catch(u){return u}};return{persistClient:aQ(async c=>{let u=c,h=await o(u),f=0;for(;h&&u;)f++,u=await r?.({persistedClient:u,error:h,errorCount:f}),u&&(h=await o(u))},{interval:e}),restoreClient:async()=>{const c=await n.getItem(t);if(c)return await i(c)},removeClient:()=>n.removeItem(t)}}return{persistClient:hb,restoreClient:()=>Promise.resolve(void 0),removeClient:hb}};const lQ="modulepreload",cQ=function(n){return"/static/"+n},fC={},Xu=function(t,e,s){let i=Promise.resolve();if(e&&e.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=u(e.map(h=>{if(h=cQ(h),h in fC)return;fC[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":lQ,f||(g.as="script"),g.crossOrigin="",g.href=h,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},uQ=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Xu(async()=>{const{default:s}=await import("./browser-DXg8tt1K.js");return{default:s}},[]).then(({default:s})=>s(...e)):t=fetch,(...e)=>t(...e)};class Pw extends Error{constructor(t,e="FunctionsError",s){super(t),this.name=e,this.context=s}}class dQ extends Pw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class pC extends Pw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mC extends Pw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fb;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(fb||(fb={}));var hQ=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};class fQ{constructor(t,{headers:e={},customFetch:s,region:i=fb.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=uQ(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var s;return hQ(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=e;let c={},{region:u}=e;u||(u=this.region);const h=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(c["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(c["Content-Type"]="application/json",f=JSON.stringify(o)));const m=yield this.fetch(h.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:f}).catch(w=>{throw new dQ(w)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new pC(m);if(!m.ok)throw new mC(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield m.json():v==="application/octet-stream"?b=yield m.blob():v==="text/event-stream"?b=m:v==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof mC||i instanceof pC?i.context:void 0}}})}}var He={},wo={},xo={},So={},Ao={},_o={},pQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},nl=pQ();const mQ=nl.fetch,gQ=nl.fetch.bind(nl),yQ=nl.Headers,vQ=nl.Request,bQ=nl.Response,wQ=Object.freeze(Object.defineProperty({__proto__:null,Headers:yQ,Request:vQ,Response:bQ,default:gQ,fetch:mQ},Symbol.toStringTag,{value:"Module"})),xQ=Nj(wQ);var jh={},gC;function XD(){if(gC)return jh;gC=1,Object.defineProperty(jh,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return jh.default=n,jh}var yC;function QD(){if(yC)return _o;yC=1;var n=_o&&_o.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_o,"__esModule",{value:!0});const t=n(xQ),e=n(XD());class s{constructor(r){this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=r.headers,this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=r.shouldThrowOnError,this.signal=r.signal,this.isMaybeSingle=r.isMaybeSingle,r.fetch?this.fetch=r.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,o){return this.headers=Object.assign({},this.headers),this.headers[r]=o,this}then(r,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,m,g;let v=null,b=null,w=null,A=h.status,E=h.statusText;if(h.ok){if(this.method!=="HEAD"){const P=await h.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=P:b=JSON.parse(P))}const T=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),M=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");T&&M&&M.length>1&&(w=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(v={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,A=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const T=await h.text();try{v=JSON.parse(T),Array.isArray(v)&&h.status===404&&(b=[],v=null,A=200,E="OK")}catch{h.status===404&&T===""?(A=204,E="No Content"):v={message:T}}if(v&&this.isMaybeSingle&&(!((g=v?.details)===null||g===void 0)&&g.includes("0 rows"))&&(v=null,A=200,E="OK"),v&&this.shouldThrowOnError)throw new e.default(v)}return{error:v,data:b,count:w,status:A,statusText:E}});return this.shouldThrowOnError||(u=u.catch(h=>{var f,m,g;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(m=h?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=h?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),u.then(r,o)}returns(){return this}overrideTypes(){return this}}return _o.default=s,_o}var vC;function ZD(){if(vC)return Ao;vC=1;var n=Ao&&Ao.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ao,"__esModule",{value:!0});const t=n(QD());class e extends t.default{select(i){let r=!1;const o=(i??"*").split("").map(c=>/\s/.test(c)&&!r?"":(c==='"'&&(r=!r),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:r=!0,nullsFirst:o,foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${i}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:o=r}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,r,{foreignTable:o,referencedTable:c=o}={}){const u=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(h,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:r=!1,settings:o=!1,buffers:c=!1,wal:u=!1,format:h="text"}={}){var f;const m=[i?"analyze":null,r?"verbose":null,o?"settings":null,c?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${g}"; options=${m};`,h==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ao.default=e,Ao}var bC;function Ow(){if(bC)return So;bC=1;var n=So&&So.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(So,"__esModule",{value:!0});const t=n(ZD());class e extends t.default{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}in(i,r){const o=Array.from(new Set(r)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${h}.${r}`),this}match(i){return Object.entries(i).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(i,r,o){return this.url.searchParams.append(i,`not.${r}.${o}`),this}or(i,{foreignTable:r,referencedTable:o=r}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,r,o){return this.url.searchParams.append(i,`${r}.${o}`),this}}return So.default=e,So}var wC;function JD(){if(wC)return xo;wC=1;var n=xo&&xo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xo,"__esModule",{value:!0});const t=n(Ow());class e{constructor(i,{headers:r={},schema:o,fetch:c}){this.url=i,this.headers=r,this.schema=o,this.fetch=c}select(i,{head:r=!1,count:o}={}){const c=r?"HEAD":"GET";let u=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:r,defaultToNull:o=!0}={}){const c="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),r&&u.push(`count=${r}`),o||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const h=i.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:r,ignoreDuplicates:o=!1,count:c,defaultToNull:u=!0}={}){const h="POST",f=[`resolution=${o?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&f.push(this.headers.Prefer),c&&f.push(`count=${c}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const m=i.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(m.length>0){const g=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:r}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),r&&c.push(`count=${r}`),this.headers.Prefer=c.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const r="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return xo.default=e,xo}var Nc={},Lc={},xC;function SQ(){return xC||(xC=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.version=void 0,Lc.version="0.0.0-automated"),Lc}var SC;function AQ(){if(SC)return Nc;SC=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.DEFAULT_HEADERS=void 0;const n=SQ();return Nc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Nc}var AC;function _Q(){if(AC)return wo;AC=1;var n=wo&&wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wo,"__esModule",{value:!0});const t=n(JD()),e=n(Ow()),s=AQ();class i{constructor(o,{headers:c={},schema:u,fetch:h}={}){this.url=o,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),c),this.schemaName=u,this.fetch=h}from(o){const c=new URL(`${this.url}/${o}`);return new t.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:u=!1,get:h=!1,count:f}={}){let m;const g=new URL(`${this.url}/rpc/${o}`);let v;u||h?(m=u?"HEAD":"GET",Object.entries(c).filter(([w,A])=>A!==void 0).map(([w,A])=>[w,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([w,A])=>{g.searchParams.append(w,A)})):(m="POST",v=c);const b=Object.assign({},this.headers);return f&&(b.Prefer=`count=${f}`),new e.default({method:m,url:g,headers:b,schema:this.schemaName,body:v,fetch:this.fetch,allowEmpty:!1})}}return wo.default=i,wo}var _C;function EQ(){if(_C)return He;_C=1;var n=He&&He.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(He,"__esModule",{value:!0}),He.PostgrestError=He.PostgrestBuilder=He.PostgrestTransformBuilder=He.PostgrestFilterBuilder=He.PostgrestQueryBuilder=He.PostgrestClient=void 0;const t=n(_Q());He.PostgrestClient=t.default;const e=n(JD());He.PostgrestQueryBuilder=e.default;const s=n(Ow());He.PostgrestFilterBuilder=s.default;const i=n(ZD());He.PostgrestTransformBuilder=i.default;const r=n(QD());He.PostgrestBuilder=r.default;const o=n(XD());return He.PostgrestError=o.default,He.default={PostgrestClient:t.default,PostgrestQueryBuilder:e.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:r.default,PostgrestError:o.default},He}var TQ=EQ();const CQ=_b(TQ),{PostgrestClient:RQ,PostgrestQueryBuilder:QJ,PostgrestFilterBuilder:ZJ,PostgrestTransformBuilder:JJ,PostgrestBuilder:ttt,PostgrestError:ett}=CQ;class MQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const s=this.getWebSocketConstructor();return new s(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const PQ="2.15.1",OQ=`realtime-js/${PQ}`,kQ="1.0.0",pb=1e4,DQ=1e3,NQ=100;var Qc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Qc||(Qc={}));var Le;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Le||(Le={}));var Ts;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ts||(Ts={}));var mb;(function(n){n.websocket="websocket"})(mb||(mb={}));var na;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(na||(na={}));class LQ{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,e,s)}_decodeBroadcast(t,e,s){const i=e.getUint8(1),r=e.getUint8(2);let o=this.HEADER_LENGTH+2;const c=s.decode(t.slice(o,o+i));o=o+i;const u=s.decode(t.slice(o,o+r));o=o+r;const h=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:c,event:u,payload:h}}}class tN{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(se||(se={}));const EC=(n,t,e={})=>{var s;const i=(s=e.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((r,o)=>(r[o]=jQ(o,n,t,i),r),{})},jQ=(n,t,e,s)=>{const i=t.find(c=>c.name===n),r=i?.type,o=e[n];return r&&!s.includes(r)?eN(r,o):gb(o)},eN=(n,t)=>{if(n.charAt(0)==="_"){const e=n.slice(1,n.length);return UQ(t,e)}switch(n){case se.bool:return IQ(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return FQ(t);case se.json:case se.jsonb:return BQ(t);case se.timestamp:return zQ(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return gb(t);default:return gb(t)}},gb=n=>n,IQ=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},FQ=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},BQ=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},UQ=(n,t)=>{if(typeof n!="string")return n;const e=n.length-1,s=n[e];if(n[0]==="{"&&s==="}"){let r;const o=n.slice(1,e);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(c=>eN(t,c))}return n},zQ=n=>typeof n=="string"?n.replace(" ","T"):n,nN=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Gy{constructor(t,e,s={},i=pb){this.channel=t,this.event=e,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var s;return this._hasReceived(t)&&e((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var TC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(TC||(TC={}));class Zc{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:r,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zc.syncState(this.state,i,r,o),this.pendingDiffs.forEach(u=>{this.state=Zc.syncDiff(this.state,u,r,o)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Zc.syncDiff(this.state,i,r,o),c())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,s,i){const r=this.cloneDeep(t),o=this.transformState(e),c={},u={};return this.map(r,(h,f)=>{o[h]||(u[h]=f)}),this.map(o,(h,f)=>{const m=r[h];if(m){const g=f.map(A=>A.presence_ref),v=m.map(A=>A.presence_ref),b=f.filter(A=>v.indexOf(A.presence_ref)<0),w=m.filter(A=>g.indexOf(A.presence_ref)<0);b.length>0&&(c[h]=b),w.length>0&&(u[h]=w)}else c[h]=f}),this.syncDiff(r,{joins:c,leaves:u},s,i)}static syncDiff(t,e,s,i){const{joins:r,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(r,(c,u)=>{var h;const f=(h=t[c])!==null&&h!==void 0?h:[];if(t[c]=this.cloneDeep(u),f.length>0){const m=t[c].map(v=>v.presence_ref),g=f.filter(v=>m.indexOf(v.presence_ref)<0);t[c].unshift(...g)}s(c,f,u)}),this.map(o,(c,u)=>{let h=t[c];if(!h)return;const f=u.map(m=>m.presence_ref);h=h.filter(m=>f.indexOf(m.presence_ref)<0),t[c]=h,i(c,h,u),h.length===0&&delete t[c]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(s=>e(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,s)=>{const i=t[s];return"metas"in i?e[s]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):e[s]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var CC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(CC||(CC={}));var Jc;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Jc||(Jc={}));var Ei;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ei||(Ei={}));class kw{constructor(t,e={config:{}},s){this.topic=t,this.params=e,this.socket=s,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Gy(this,Ts.join,this.params,this.timeout),this.rejoinTimer=new tN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ts.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new Zc(this),this.broadcastEndpointURL=nN(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Le.closed){const{config:{broadcast:r,presence:o,private:c}}=this.params,u=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Jc.PRESENCE]&&this.bindings[Jc.PRESENCE].length>0,f={},m={broadcast:r,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(Ei.CHANNEL_ERROR,g)),this._onClose(()=>t?.(Ei.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t?.(Ei.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b?.length)!==null&&v!==void 0?v:0,A=[];for(let E=0;E<w;E++){const C=b[E],{filter:{event:T,schema:M,table:P,filter:k}}=C,D=g&&g[E];if(D&&D.event===T&&D.schema===M&&D.table===P&&D.filter===k)A.push(Object.assign(Object.assign({},C),{id:D.id}));else{this.unsubscribe(),this.state=Le.errored,t?.(Ei.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,t&&t(Ei.SUBSCRIBED);return}}).receive("error",g=>{this.state=Le.errored,t?.(Ei.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ei.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,s){return this.state===Le.joined&&t===Jc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,s)}async send(t,e={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){const{event:r,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,c,u;const h=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&r("ok"),h.receive("ok",()=>r("ok")),h.receive("error",()=>r("error")),h.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Le.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ts.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Gy(this,Ts.leave,{},t),s.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Le.closed,this.bindings={}}async _fetchWithTimeout(t,e,s){const i=new AbortController,r=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(r),o}_push(t,e,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gy(this,t,e,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>NQ){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,s){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,s){var i,r;const o=t.toLocaleLowerCase(),{close:c,error:u,leave:h,join:f}=Ts;if(s&&[c,u,h,f].indexOf(o)>=0&&s!==this._joinRef())return;let g=this._onMessage(o,e,s);if(e&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var b,w,A;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((A=(w=v.filter)===null||w===void 0?void 0:w.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===o}).map(v=>v.callback(g,s)):(r=this.bindings[o])===null||r===void 0||r.filter(v=>{var b,w,A,E,C,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const M=v.id,P=(b=v.filter)===null||b===void 0?void 0:b.event;return M&&((w=e.ids)===null||w===void 0?void 0:w.includes(M))&&(P==="*"||P?.toLocaleLowerCase()===((A=e.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const M=(C=(E=v?.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return M==="*"||M===((T=e?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:w,table:A,commit_timestamp:E,type:C,errors:T}=b;g=Object.assign(Object.assign({},{schema:w,table:A,commit_timestamp:E,eventType:C,new:{},old:{},errors:T}),this._getPayloadRecords(b))}v.callback(g,s)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,s){const i=t.toLocaleLowerCase(),r={type:i,filter:e,callback:s};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,e){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===s&&kw.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ts.close,{},t)}_onError(t){this._on(Ts.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=EC(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=EC(t.columns,t.old_record)),e}}const RC=()=>{},Ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},HQ=[1e3,2e3,5e3,1e4],VQ=1e4,$Q=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GQ{constructor(t,e){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pb,this.transport=null,this.heartbeatIntervalMs=Ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=RC,this.ref=0,this.reconnectTimer=null,this.logger=RC,this.conn=null,this.sendBuffer=[],this.serializer=new LQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...o)=>Xu(async()=>{const{default:c}=await import("./index-JlVUQNBX.js");return{default:c}},[]).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...o)=>r(...o)},!(!((s=e?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${mb.websocket}`,this.httpEndpoint=nN(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kQ}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,s){this.logger(t,e,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Qc.connecting:return na.Connecting;case Qc.open:return na.Open;case Qc.closing:return na.Closing;default:return na.Closed}}isConnected(){return this.connectionState()===na.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const s=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===s);if(i)return i;{const r=new kw(`realtime:${t}`,e,this);return this.channels.push(r),r}}push(t){const{topic:e,event:s,payload:i,ref:r}=t,o=()=>{this.encode(t,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${e} ${s} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(DQ,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{e.topic==="phoenix"&&e.event==="phx_reply"&&this.heartbeatCallback(e.payload.status==="ok"?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:r,ref:o}=e,c=o?`(${o})`:"",u=r.status||"";this.log("receive",`${u} ${s} ${i} ${c}`.trim(),r),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(i,r,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ts.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const s=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${s}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{const s=new Blob([$Q],{type:"application/javascript"});e=URL.createObjectURL(s)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(s=>{const i={access_token:e,version:OQ};e&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ts.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new tN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,s,i,r,o,c,u,h;if(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:pb,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Ih.HEARTBEAT_INTERVAL,this.worker=(r=t?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:(f=>HQ[f-1]||VQ),this.encode=(u=t?.encode)!==null&&u!==void 0?u:((f,m)=>m(JSON.stringify(f))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Dw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $e(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class qQ extends Dw{constructor(t,e,s){super(t),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yb extends Dw{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var WQ=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};const sN=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Xu(async()=>{const{default:s}=await import("./browser-CM2Yo-iL.js");return{default:s}},[]).then(({default:s})=>s(...e)):t=fetch,(...e)=>t(...e)},KQ=()=>WQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xu(()=>import("./browser-CM2Yo-iL.js"),[])).Response:Response}),vb=n=>{if(Array.isArray(n))return n.map(e=>vb(e));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,s])=>{const i=e.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=vb(s)}),t},YQ=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ra=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};const qy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),XQ=(n,t,e)=>Ra(void 0,void 0,void 0,function*(){const s=yield KQ();n instanceof s&&!e?.noResolveJson?n.json().then(i=>{const r=n.status||500,o=i?.statusCode||r+"";t(new qQ(qy(i),r,o))}).catch(i=>{t(new yb(qy(i),i))}):t(new yb(qy(n),n))}),QQ=(n,t,e,s)=>{const i={method:n,headers:t?.headers||{}};return n==="GET"||!s?i:(YQ(s)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(s)):i.body=s,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Qu(n,t,e,s,i,r){return Ra(this,void 0,void 0,function*(){return new Promise((o,c)=>{n(e,QQ(t,s,i,r)).then(u=>{if(!u.ok)throw u;return s?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>XQ(u,c,s))})})}function Pf(n,t,e,s){return Ra(this,void 0,void 0,function*(){return Qu(n,"GET",t,e,s)})}function Ti(n,t,e,s,i){return Ra(this,void 0,void 0,function*(){return Qu(n,"POST",t,s,i,e)})}function bb(n,t,e,s,i){return Ra(this,void 0,void 0,function*(){return Qu(n,"PUT",t,s,i,e)})}function ZQ(n,t,e,s){return Ra(this,void 0,void 0,function*(){return Qu(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),s)})}function iN(n,t,e,s,i){return Ra(this,void 0,void 0,function*(){return Qu(n,"DELETE",t,s,i,e)})}var Cn=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};const JQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},MC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tZ{constructor(t,e={},s,i){this.url=t,this.headers=e,this.bucketId=s,this.fetch=sN(i)}uploadOrUpdate(t,e,s,i){return Cn(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},MC),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),u&&r.append("metadata",this.encodeMetadata(u)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.append("cacheControl",o.cacheControl),u&&r.append("metadata",this.encodeMetadata(u))):(r=s,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const h=this._removeEmptyFolders(e),f=this._getFinalPath(h),m=yield(t=="PUT"?bb:Ti)(this.fetch,`${this.url}/object/${f}`,r,Object.assign({headers:c},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}upload(t,e,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,s)})}uploadToSignedUrl(t,e,s,i){return Cn(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",e);try{let u;const h=Object.assign({upsert:MC.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.append("cacheControl",h.cacheControl)):(u=s,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const m=yield bb(this.fetch,c.toString(),u,{headers:f});return{data:{path:r,fullPath:m.Key},error:null}}catch(u){if($e(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,e){return Cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");const r=yield Ti(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+r.url),c=o.searchParams.get("token");if(!c)throw new Dw("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}update(t,e,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,s)})}move(t,e,s){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}copy(t,e,s){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ti(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,s){return Cn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield Ti(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,s){return Cn(this,void 0,void 0,function*(){try{const i=yield Ti(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),r=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}download(t,e){return Cn(this,void 0,void 0,function*(){const i=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),o=r?`?${r}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield Pf(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if($e(c))return{data:null,error:c};throw c}})}info(t){return Cn(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const s=yield Pf(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:vb(s),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}exists(t){return Cn(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield ZQ(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if($e(s)&&s instanceof yb){const i=s.originalError;if([400,404].includes(i?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,e){const s=this._getFinalPath(t),i=[],r=e?.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const c=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&i.push(u);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${h}`)}}}remove(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}list(t,e,s){return Cn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},JQ),e),{prefix:t||""});return{data:yield Ti(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const eZ="2.10.5",nZ={"X-Client-Info":`storage-js/${eZ}`};var Eo=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};class sZ{constructor(t,e={},s,i){const r=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href,this.headers=Object.assign(Object.assign({},nZ),e),this.fetch=sN(s)}listBuckets(){return Eo(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}getBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Eo(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}updateBucket(t,e){return Eo(this,void 0,void 0,function*(){try{return{data:yield bb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}}class iZ extends sZ{constructor(t,e={},s,i){super(t,e,s,i)}from(t){return new tZ(this.url,this.headers,t,this.fetch)}}const rZ="2.55.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const aZ={"X-Client-Info":`supabase-js-${Vc}/${rZ}`},oZ={headers:aZ},lZ={schema:"public"},cZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uZ={};var dZ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sl=dZ();sl.fetch;const hZ=sl.fetch.bind(sl),fZ=sl.Headers;sl.Request;sl.Response;var pZ=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};const mZ=n=>{let t;return n?t=n:typeof fetch>"u"?t=hZ:t=fetch,(...e)=>t(...e)},gZ=()=>typeof Headers>"u"?fZ:Headers,yZ=(n,t,e)=>{const s=mZ(e),i=gZ();return(r,o)=>pZ(void 0,void 0,void 0,function*(){var c;const u=(c=yield t())!==null&&c!==void 0?c:n;let h=new i(o?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),s(r,Object.assign(Object.assign({},o),{headers:h}))})};var vZ=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};function bZ(n){return n.endsWith("/")?n:n+"/"}function wZ(n,t){var e,s;const{db:i,auth:r,realtime:o,global:c}=n,{db:u,auth:h,realtime:f,global:m}=t,g={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(e=m?.headers)!==null&&e!==void 0?e:{}),(s=c?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>vZ(this,void 0,void 0,function*(){return""})};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}const rN="2.71.1",Do=30*1e3,wb=3,Wy=wb*Do,xZ="http://localhost:9999",SZ="supabase.auth.token",AZ={"X-Client-Info":`gotrue-js/${rN}`},xb="X-Supabase-Api-Version",aN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_Z=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,EZ=600*1e3;class Nw extends Error{constructor(t,e,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=s}}function Rt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class TZ extends Nw{constructor(t,e,s){super(t,e,s),this.name="AuthApiError",this.status=e,this.code=s}}function CZ(n){return Rt(n)&&n.name==="AuthApiError"}class oN extends Nw{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Or extends Nw{constructor(t,e,s,i){super(t,s,i),this.name=e,this.status=s}}class ur extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RZ(n){return Rt(n)&&n.name==="AuthSessionMissingError"}class Fh extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bh extends Or{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Uh extends Or{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MZ(n){return Rt(n)&&n.name==="AuthImplicitGrantRedirectError"}class PC extends Or{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sb extends Or{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Ky(n){return Rt(n)&&n.name==="AuthRetryableFetchError"}class OC extends Or{constructor(t,e,s){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=s}}class Ab extends Or{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kC=` 	
\r=`.split(""),PZ=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<kC.length;t+=1)n[kC[t].charCodeAt(0)]=-2;for(let t=0;t<Of.length;t+=1)n[Of[t].charCodeAt(0)]=t;return n})();function DC(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;e(Of[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;e(Of[s]),t.queuedBits-=6}}function lN(n,t,e){const s=PZ[n];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function NC(n){const t=[],e=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{DZ(o,s,e)};for(let o=0;o<n.length;o+=1)lN(n.charCodeAt(o),i,r);return t.join("")}function OZ(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function kZ(n,t){for(let e=0;e<n.length;e+=1){let s=n.charCodeAt(e);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}OZ(s,t)}}function DZ(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function NZ(n){const t=[],e={queue:0,queuedBits:0},s=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)lN(n.charCodeAt(i),e,s);return new Uint8Array(t)}function LZ(n){const t=[];return kZ(n,e=>t.push(e)),new Uint8Array(t)}function jZ(n){const t=[],e={queue:0,queuedBits:0},s=i=>{t.push(i)};return n.forEach(i=>DC(i,e,s)),DC(null,e,s),t.join("")}function IZ(n){return Math.round(Date.now()/1e3)+n}function FZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}const Ss=()=>typeof window<"u"&&typeof document<"u",Zr={tested:!1,writable:!1},cN=()=>{if(!Ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zr.tested)return Zr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Zr.tested=!0,Zr.writable=!0}catch{Zr.tested=!0,Zr.writable=!1}return Zr.writable};function BZ(n){const t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return e.searchParams.forEach((s,i)=>{t[i]=s}),t}const uN=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Xu(async()=>{const{default:s}=await import("./browser-DKmkfVhZ.js");return{default:s}},[]).then(({default:s})=>s(...e)):t=fetch,(...e)=>t(...e)},UZ=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",No=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Jr=async(n,t)=>{const e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},or=async(n,t)=>{await n.removeItem(t)};class kp{constructor(){this.promise=new kp.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}kp.promiseConstructor=Promise;function Yy(n){const t=n.split(".");if(t.length!==3)throw new Ab("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!_Z.test(t[s]))throw new Ab("JWT not in base64url format");return{header:JSON.parse(NC(t[0])),payload:JSON.parse(NC(t[1])),signature:NZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function zZ(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function HZ(n,t){return new Promise((s,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await n(r);if(!t(r,null,o)){s(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function VZ(n){return("0"+n.toString(16)).substr(-2)}function $Z(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=e.length;let i="";for(let r=0;r<56;r++)i+=e.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(t),Array.from(t,VZ).join("")}async function GZ(n){const e=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(s);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function qZ(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await GZ(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function To(n,t,e=!1){const s=$Z();let i=s;e&&(i+="/PASSWORD_RECOVERY"),await No(n,`${t}-code-verifier`,i);const r=await qZ(s);return[r,s===r?"plain":"s256"]}const WZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KZ(n){const t=n.headers.get(xb);if(!t||!t.match(WZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function YZ(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function XZ(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const QZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Co(n){if(!QZ.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xy(){const n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const s=e.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LC(n){return JSON.parse(JSON.stringify(n))}var ZZ=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(e[s[i]]=n[s[i]]);return e};const ea=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),JZ=[502,503,504];async function jC(n){var t;if(!UZ(n))throw new Sb(ea(n),0);if(JZ.includes(n.status))throw new Sb(ea(n),n.status);let e;try{e=await n.json()}catch(r){throw new oN(ea(r),r)}let s;const i=KZ(n);if(i&&i.getTime()>=aN["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?s=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(s=e.error_code),s){if(s==="weak_password")throw new OC(ea(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new ur}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new OC(ea(e),n.status,e.weak_password.reasons);throw new TZ(ea(e),n.status||500,s)}const tJ=(n,t,e,s)=>{const i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),e))};async function Ut(n,t,e,s){var i;const r=Object.assign({},s?.headers);r[xb]||(r[xb]=aN["2024-01-01"].name),s?.jwt&&(r.Authorization=`Bearer ${s.jwt}`);const o=(i=s?.query)!==null&&i!==void 0?i:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await eJ(n,t,e+c,{headers:r,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(u):{data:Object.assign({},u),error:null}}async function eJ(n,t,e,s,i,r){const o=tJ(t,s,i,r);let c;try{c=await n(e,Object.assign({},o))}catch(u){throw console.error(u),new Sb(ea(u),0)}if(c.ok||await jC(c),s?.noResolveJson)return c;try{return await c.json()}catch(u){await jC(u)}}function Ai(n){var t;let e=null;rJ(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=IZ(n.expires_in)));const s=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:s},error:null}}function IC(n){const t=Ai(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,s)=>e&&typeof s=="string",!0)&&(t.data.weak_password=n.weak_password),t}function pr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function nJ(n){return{data:n,error:null}}function sJ(n){const{action_link:t,email_otp:e,hashed_token:s,redirect_to:i,verification_type:r}=n,o=ZZ(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:e,hashed_token:s,redirect_to:i,verification_type:r},u=Object.assign({},o);return{data:{properties:c,user:u},error:null}}function iJ(n){return n}function rJ(n){return n.access_token&&n.refresh_token&&n.expires_in}const Qy=["global","local","others"];var aJ=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(e[s[i]]=n[s[i]]);return e};class oJ{constructor({url:t="",headers:e={},fetch:s}){this.url=t,this.headers=e,this.fetch=uN(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e=Qy[0]){if(Qy.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qy.join(", ")}`);try{return await Ut(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,e={}){try{return await Ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:pr})}catch(s){if(Rt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:e}=t,s=aJ(t,["options"]),i=Object.assign(Object.assign({},s),e);return"newEmail"in s&&(i.new_email=s?.newEmail,delete i.newEmail),await Ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:sJ,redirectTo:e?.redirectTo})}catch(e){if(Rt(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pr})}catch(e){if(Rt(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,s,i,r,o,c,u;try{const h={nextPage:null,lastPage:0,total:0},f=await Ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:iJ});if(f.error)throw f.error;const m=await f.json(),g=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(c=f.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(b.split(";")[1].split("=")[1]);h[`${A}Page`]=w}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Rt(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Co(t);try{return await Ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pr})}catch(e){if(Rt(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){Co(t);try{return await Ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:pr})}catch(s){if(Rt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,e=!1){Co(t);try{return await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:pr})}catch(s){if(Rt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Co(t.userId);try{const{data:e,error:s}=await Ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:s}}catch(e){if(Rt(e))return{data:null,error:e};throw e}}async _deleteFactor(t){Co(t.userId),Co(t.id);try{return{data:await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(Rt(e))return{data:null,error:e};throw e}}}function FC(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function lJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ro={debug:!!(globalThis&&cN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cJ extends dN{}async function uJ(n,t,e){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await e()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new cJ(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ro.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}lJ();const dJ={url:xZ,storageKey:SZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function BC(n,t,e){return await e()}const Mo={};class yu{constructor(t){var e,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yu.nextInstanceID,yu.nextInstanceID+=1,this.instanceID>0&&Ss()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},dJ),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new oJ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uN(i.fetch),this.lock=i.lock||BC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ss()&&(!((e=globalThis?.navigator)===null||e===void 0)&&e.locks)?this.lock=uJ:this.lock=BC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:cN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=FC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=FC(this.memoryStorage)),Ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}get jwks(){var t,e;return(e=(t=Mo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=Mo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const e=BZ(window.location.href);let s="none";if(this._isImplicitGrantCallback(e)?s="implicit":await this._isPKCECallback(e)&&(s="pkce"),Ss()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:r}=await this._getSessionFromURL(e,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),MZ(r)){const u=(t=r.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Rt(e)?{error:e}:{error:new oN("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,s,i;try{const r=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(e=t?.options)===null||e===void 0?void 0:e.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ai}),{data:o,error:c}=r;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var e,s,i;try{let r;if("email"in t){const{email:f,password:m,options:g}=t;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await To(this.storage,this.storageKey)),r=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:f,password:m,data:(e=g?.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:b},xform:Ai})}else if("phone"in t){const{phone:f,password:m,options:g}=t;r=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(s=g?.data)!==null&&s!==void 0?s:{},channel:(i=g?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ai})}else throw new Bh("You must provide either an email or phone number and a password");const{data:o,error:c}=r;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{let e;if("email"in t){const{email:r,password:o,options:c}=t;e=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IC})}else if("phone"in t){const{phone:r,password:o,options:c}=t;e=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IC})}else throw new Bh("You must provide either an email or phone number and a password");const{data:s,error:i}=e;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Fh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(e){if(Rt(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,s,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;if(e==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}async signInWithSolana(t){var e,s,i,r,o,c,u,h,f,m,g,v;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:A,wallet:E,statement:C,options:T}=t;let M;if(Ss())if(typeof E=="object")M=E;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))M=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=E}const P=new URL((e=T?.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in M&&M.signIn){const k=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),C?{statement:C}:null));let D;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")D=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)D=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)b=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),w=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(s=T?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=T?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((h=T?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((m=(f=T?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...T.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const k=await M.signMessage(new TextEncoder().encode(b),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:A,error:E}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:jZ(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ai});if(E)throw E;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Fh}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:E})}catch(A){if(Rt(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const e=await Jr(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(e??"").split("/");try{const{data:r,error:o}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ai});if(await or(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Fh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(Rt(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(t){try{const{options:e,provider:s,token:i,access_token:r,nonce:o}=t,c=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:e?.captchaToken}},xform:Ai}),{data:u,error:h}=c;return h?{data:{user:null,session:null},error:h}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Fh}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:h})}catch(e){if(Rt(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,s,i,r,o;try{if("email"in t){const{email:c,options:u}=t;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await To(this.storage,this.storageKey));const{error:m}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(e=u?.data)!==null&&e!==void 0?e:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:c,options:u}=t,{data:h,error:f}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new Bh("You must provide either an email or phone number.")}catch(c){if(Rt(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var e,s;try{let i,r;"options"in t&&(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo,r=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:c}=await Ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Ai});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,h=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(i){if(Rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var e,s,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await To(this.storage,this.storageKey)),await Ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:nJ})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:s}=t;if(s)throw s;if(!e)throw new ur;const{error:i}=await Ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Rt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:s,type:i,options:r}=t,{error:o}=await Ut(this.fetch,"POST",e,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:i,options:r}=t,{data:o,error:c}=await Ut(this.fetch,"POST",e,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:c}}throw new Bh("You must provide either an email or phone number and a type")}catch(e){if(Rt(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await e()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=e();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await Jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Wy:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Jr(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Xy()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,h,f)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,h,f))})}return{data:{session:t},error:null}}const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:pr}):await this._useSession(async e=>{var s,i,r;const{data:o,error:c}=e;if(c)throw c;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ur}:await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:pr})})}catch(e){if(Rt(e))return RZ(e)&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async s=>{const{data:i,error:r}=s;if(r)throw r;if(!i.session)throw new ur;const o=i.session;let c=null,u=null;this.flowType==="pkce"&&t.email!=null&&([c,u]=await To(this.storage,this.storageKey));const{data:h,error:f}=await Ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:u}),jwt:o.access_token,xform:pr});if(f)throw f;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Rt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ur;const e=Date.now()/1e3;let s=e,i=!0,r=null;const{payload:o}=Yy(t.access_token);if(o.exp&&(s=o.exp,i=s<=e),i){const{session:c,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};r=c}else{const{data:c,error:u}=await this._getUser(t.access_token);if(u)throw u;r={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:s-e,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Rt(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var s;if(!t){const{data:o,error:c}=e;if(c)throw c;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new ur;const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(Rt(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t,e){try{if(!Ss())throw new Uh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Uh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new PC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uh("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new PC("No code detected.");const{data:C,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:c,expires_at:u,token_type:h}=t;if(!r||!c||!o||!h)throw new Uh("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(c);let g=f+m;u&&(g=parseInt(u));const v=g-f;v*1e3<=Do&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const b=g-m;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,f);const{data:w,error:A}=await this._getUser(r);if(A)throw A;const E={provider_token:s,provider_refresh_token:i,access_token:r,expires_in:m,expires_at:g,refresh_token:o,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(s){if(Rt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Jr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var s;const{data:i,error:r}=e;if(r)return{error:r};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(CZ(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const e=FZ(),s={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async e=>{var s,i;try{const{data:{session:r},error:o}=e;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,e={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await To(this.storage,this.storageKey,!0));try{return await Ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:e,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(e){if(Rt(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:s,error:i}=await this._useSession(async r=>{var o,c,u,h,f;const{data:m,error:g}=r;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ut(this.fetch,"GET",v,{headers:this.headers,jwt:(f=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Ss()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:t.provider,url:s?.url},error:null}}catch(s){if(Rt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var s,i;const{data:r,error:o}=e;if(o)throw o;return await Ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(e){if(Rt(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const s=Date.now();return await HZ(async i=>(i>0&&await zZ(200*Math.pow(2,i-1)),this._debug(e,"refreshing attempt",i),await Ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ai})),(i,r)=>{const o=200*Math.pow(2,i);return r&&Ky(r)&&Date.now()+o-s<Do})}catch(s){if(this._debug(e,"error",s),Rt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",s),Ss()&&!e.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await Jr(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Jr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await No(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:Xy()}else if(i&&!i.user&&!i.user){const o=await Jr(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await or(this.storage,this.storageKey+"-user"),await No(this.storage,this.storageKey,i)):i.user=Xy()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Wy;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Wy}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Ky(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var e,s;if(!t)throw new ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new kp;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new ur;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const c={session:r.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(r){if(this._debug(i,"error",r),Rt(r)){const o={session:null,error:r};return Ky(r)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,e,s=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",e,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,e)}catch(u){r.push(u)}});if(await Promise.all(o),r.length>0){for(let c=0;c<r.length;c+=1)console.error(r[c]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),s=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&e.user&&await No(this.userStorage,this.storageKey+"-user",{user:e.user});const i=Object.assign({},e);delete i.user;const r=LC(i);await No(this.storage,this.storageKey,r)}else{const i=LC(e);await No(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await or(this.storage,this.storageKey),await or(this.storage,this.storageKey+"-code-verifier"),await or(this.storage,this.storageKey+"-user"),this.userStorage&&await or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ss()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Do);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-t)/Do);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Do}ms, refresh threshold is ${wb} ticks`),i<=wb&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ss()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,s){const i=[`provider=${encodeURIComponent(e)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[r,o]=await To(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(s?.queryParams){const r=new URLSearchParams(s.queryParams);i.push(r.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;return r?{data:null,error:r}:await Ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(e){if(Rt(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var s,i;const{data:r,error:o}=e;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:h}=await Ut(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(e){if(Rt(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;if(r)return{data:null,error:r};const{data:o,error:c}=await Ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(e){if(Rt(e))return{data:null,error:e};throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;return r?{data:null,error:r}:await Ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(e){if(Rt(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(t){const{data:e,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const s=t?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,s;const{data:{session:i},error:r}=t;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yy(i.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((s=(e=i.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(u="aal2");const f=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,e={keys:[]}){let s=e.keys.find(c=>c.kid===t);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(c=>c.kid===t),s&&this.jwks_cached_at+EZ>i)return s;const{data:r,error:o}=await Ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,s=r.keys.find(c=>c.kid===t),!s)?null:s}async getClaims(t,e={}){try{let s=t;if(!s){const{data:v,error:b}=await this.getSession();if(b||!v.session)return{data:null,error:b};s=v.session.access_token}const{header:i,payload:r,signature:o,raw:{header:c,payload:u}}=Yy(s);e?.allowExpired||YZ(r.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,e?.keys?{keys:e.keys}:e?.jwks);if(!h){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:r,header:i,signature:o},error:null}}const f=XZ(i.alg),m=await crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,o,LZ(`${c}.${u}`)))throw new Ab("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}}}yu.nextInstanceID=0;const hJ=yu;class fJ extends hJ{constructor(t){super(t)}}var pJ=function(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{h(s.next(f))}catch(m){o(m)}}function u(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?r(f.value):i(f.value).then(c,u)}h((s=s.apply(n,t||[])).next())})};class mJ{constructor(t,e,s){var i,r,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const c=bZ(t),u=new URL(c);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:lZ,realtime:uZ,auth:Object.assign(Object.assign({},cZ),{storageKey:h}),global:oZ},m=wZ(s??{},f);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=m.global.headers)!==null&&r!==void 0?r:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=yZ(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new RQ(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new iZ(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new fQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return pJ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,storageKey:r,flowType:o,lock:c,debug:u},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:r,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,flowType:o,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new GQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,s)=>{this._handleTokenChanged(e,"CLIENT",s?.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gJ=(n,t,e)=>new mJ(n,t,e);function yJ(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jc=gJ("https://rqjdzqgsxpacfyptwpnh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxamR6cWdzeHBhY2Z5cHR3cG5oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODcyMDEsImV4cCI6MjA3MDc2MzIwMX0.YWbfd4UYyv9cJaHMET6s5b28F9r42FUGG_GVPv2RWSo");function vJ({children:n}){const[t,e]=_.useState(null),[s,i]=_.useState(!1),r=Ds(),o=nn(),{user:c,isGettingUser:u,refetch:h}=dH(t),f=async()=>{const{error:g}=await jc.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/app/library`}});g&&console.error("Error signing in:",g.message)};function m(){jc.auth.signOut().then(()=>{delete un.defaults.headers.common.Authorization,e(null),r.removeQueries({queryKey:["user"]}),i(!0)}).catch(g=>{console.error("Error signing out:",g.message)}),o(Ko("demo"))}return _.useEffect(()=>{(async()=>{const{data:{user:b},error:w}=await jc.auth.getUser();if(w){console.error("Error in auth provider getting user : ",w.message),i(!0);return}if(b){const{data:{session:A}}=await jc.auth.getSession(),E=A?.access_token;E&&(un.defaults.headers.common.Authorization=`Bearer ${E}`,e(E))}else delete un.defaults.headers.common.Authorization;i(!0)})();const{data:v}=jc.auth.onAuthStateChange(async(b,w)=>{const A=w?.access_token;A?(un.defaults.headers.common.Authorization=`Bearer ${A}`,e(A),h()):(delete un.defaults.headers.common.Authorization,e(null),h())});return()=>{v.subscription.unsubscribe()}},[h]),S.jsx(_R.Provider,{value:{user:c,hasCheckedAuth:s,signInWithGoogle:f,signOut:m,isGettingUser:u},children:n})}function bJ({children:n,defaultTheme:t="default-dark",storageKey:e="vite-ui-theme",...s}){const[i,r]=_.useState(()=>localStorage.getItem(e)||t);_.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("default-dark","obsidian-dark","solar-night","forest-night","nordic-dark","dracula-dark"),c.classList.add(i)},[i]);const o={theme:i,setTheme:c=>{localStorage.setItem(e,c);const u=window.document.documentElement;u.classList.remove("default-dark","obsidian-dark","solar-night","forest-night","nordic-dark","dracula-dark"),u.classList.add(c),r(c)}};return S.jsx(q2.Provider,{...s,value:o,children:n})}const hN=new J8({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});rQ({queryClient:hN,persister:oQ({storage:window.localStorage})});Vj.createRoot(document.getElementById("root")).render(S.jsx(_.StrictMode,{children:S.jsx(a3,{children:S.jsx(dz,{client:hN,children:S.jsx(bJ,{defaultTheme:"default-dark",storageKey:"vite-ui-theme",children:S.jsx(vJ,{children:S.jsx(eQ,{})})})})})}));export{_b as a,Nj as g};
